var qL=Object.defineProperty;var XL=(t,e,n)=>e in t?qL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Me=(t,e,n)=>(XL(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function qe(){}function Io(t,e){for(const n in e)t[n]=e[n];return t}function fE(t){return t()}function Fv(){return Object.create(null)}function Vn(t){t.forEach(fE)}function Il(t){return typeof t=="function"}function yt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Vh;function wi(t,e){return Vh||(Vh=document.createElement("a")),Vh.href=e,t===Vh.href}function ZL(t){return Object.keys(t).length===0}function hE(t,...e){if(t==null)return qe;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function dt(t,e,n){t.$$.on_destroy.push(hE(e,n))}function Ho(t,e,n,i){if(t){const s=dE(t,e,n,i);return t[0](s)}}function dE(t,e,n,i){return t[1]&&i?Io(n.ctx.slice(),t[1](i(e))):n.ctx}function Vo(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],o=Math.max(e.dirty.length,s.length);for(let a=0;a<o;a+=1)r[a]=e.dirty[a]|s[a];return r}return e.dirty|s}return e.dirty}function Go(t,e,n,i,s,r){if(s){const o=dE(e,n,i,r);t.p(o,s)}}function Wo(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Q0(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function zv(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(n[i]=t[i]);return n}function hs(t){return t==null?"":t}function At(t,e,n){return t.set(n),e}function JL(t){return t&&Il(t.destroy)?t.destroy:qe}function E(t,e){t.appendChild(e)}function R(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function en(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function mt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ae(t){return document.createTextNode(t)}function O(){return ae(" ")}function ts(){return ae("")}function $e(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function KL(t){return function(e){return e.preventDefault(),t.call(this,e)}}function pE(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function mE(t){return function(e){e.target===this&&t.call(this,e)}}function M(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Uv(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:n[i]&&n[i].set?t[i]=e[i]:M(t,i,e[i])}function gE(t){return t===""?null:+t}function $L(t){return Array.from(t.childNodes)}function ke(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ta(t,e){t.value=e==null?"":e}function Si(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function pt(t,e,n){t.classList[n?"add":"remove"](e)}function QL(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,i,e),s}function Jr(t,e){return new t(e)}let Ef;function ef(t){Ef=t}function xh(){if(!Ef)throw new Error("Function called outside component initialization");return Ef}function ji(t){xh().$$.on_mount.push(t)}function Es(t){xh().$$.on_destroy.push(t)}function Oa(){const t=xh();return(e,n,{cancelable:i=!1}={})=>{const s=t.$$.callbacks[e];if(s){const r=QL(e,n,{cancelable:i});return s.slice().forEach(o=>{o.call(t,r)}),!r.defaultPrevented}return!0}}function e1(t,e){return xh().$$.context.set(t,e),e}function ka(t){return xh().$$.context.get(t)}function _E(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const dc=[],vt=[],$d=[],t1=[],bE=Promise.resolve();let n1=!1;function vE(){n1||(n1=!0,bE.then(yE))}function Tf(){return vE(),bE}function qr(t){$d.push(t)}function Ht(t){t1.push(t)}const Bg=new Set;let Fl=0;function yE(){if(Fl!==0)return;const t=Ef;do{try{for(;Fl<dc.length;){const e=dc[Fl];Fl++,ef(e),eC(e.$$)}}catch(e){throw dc.length=0,Fl=0,e}for(ef(null),dc.length=0,Fl=0;vt.length;)vt.pop()();for(let e=0;e<$d.length;e+=1){const n=$d[e];Bg.has(n)||(Bg.add(n),n())}$d.length=0}while(dc.length);for(;t1.length;)t1.pop()();n1=!1,Bg.clear(),ef(t)}function eC(t){if(t.fragment!==null){t.update(),Vn(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(qr)}}const Qd=new Set;let el;function ot(){el={r:0,c:[],p:el}}function at(){el.r||Vn(el.c),el=el.p}function I(t,e){t&&t.i&&(Qd.delete(t),t.i(e))}function H(t,e,n,i){if(t&&t.o){if(Qd.has(t))return;Qd.add(t),el.c.push(()=>{Qd.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const tC=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function wE(t,e){H(t,1,1,()=>{e.delete(t.key)})}function xE(t,e,n,i,s,r,o,a,l,c,u,f){let h=t.length,d=r.length,p=h;const m={};for(;p--;)m[t[p].key]=p;const _=[],b=new Map,g=new Map;for(p=d;p--;){const w=f(s,r,p),S=n(w);let T=o.get(S);T?i&&T.p(w,e):(T=c(S,w),T.c()),b.set(S,_[p]=T),S in m&&g.set(S,Math.abs(p-m[S]))}const x=new Set,y=new Set;function v(w){I(w,1),w.m(a,u),o.set(w.key,w),u=w.first,d--}for(;h&&d;){const w=_[d-1],S=t[h-1],T=w.key,k=S.key;w===S?(u=w.first,h--,d--):b.has(k)?!o.has(T)||x.has(T)?v(w):y.has(k)?h--:g.get(T)>g.get(k)?(y.add(T),v(w)):(x.add(k),h--):(l(S,o),h--)}for(;h--;){const w=t[h];b.has(w.key)||l(w,o)}for(;d;)v(_[d-1]);return _}function Ym(t,e){const n={},i={},s={$$scope:1};let r=t.length;for(;r--;){const o=t[r],a=e[r];if(a){for(const l in o)l in a||(i[l]=1);for(const l in a)s[l]||(n[l]=a[l],s[l]=1);t[r]=a}else for(const l in o)s[l]=1}for(const o in i)o in n||(n[o]=void 0);return n}function Np(t){return typeof t=="object"&&t!==null?t:{}}function Vt(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function ue(t){t&&t.c()}function le(t,e,n,i){const{fragment:s,after_update:r}=t.$$;s&&s.m(e,n),i||qr(()=>{const o=t.$$.on_mount.map(fE).filter(Il);t.$$.on_destroy?t.$$.on_destroy.push(...o):Vn(o),t.$$.on_mount=[]}),r.forEach(qr)}function ce(t,e){const n=t.$$;n.fragment!==null&&(Vn(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nC(t,e){t.$$.dirty[0]===-1&&(dc.push(t),vE(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function wt(t,e,n,i,s,r,o,a=[-1]){const l=Ef;ef(t);const c=t.$$={fragment:null,ctx:[],props:r,update:qe,not_equal:s,bound:Fv(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Fv(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(f,h,...d)=>{const p=d.length?d[0]:h;return c.ctx&&s(c.ctx[f],c.ctx[f]=p)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](p),u&&nC(t,f)),h}):[],c.update(),u=!0,Vn(c.before_update),c.fragment=i?i(c.ctx):!1,e.target){if(e.hydrate){const f=$L(e.target);c.fragment&&c.fragment.l(f),f.forEach(P)}else c.fragment&&c.fragment.c();e.intro&&I(t.$$.fragment),le(t,e.target,e.anchor,e.customElement),yE()}ef(l)}class xt{$destroy(){ce(this,1),this.$destroy=qe}$on(e,n){if(!Il(n))return qe;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!ZL(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zl=[];function iC(t,e){return{subscribe:nn(t,e).subscribe}}function nn(t,e=qe){let n;const i=new Set;function s(a){if(yt(t,a)&&(t=a,n)){const l=!zl.length;for(const c of i)c[1](),zl.push(c,t);if(l){for(let c=0;c<zl.length;c+=2)zl[c][0](zl[c+1]);zl.length=0}}}function r(a){s(a(t))}function o(a,l=qe){const c=[a,l];return i.add(c),i.size===1&&(n=e(s)||qe),a(t),()=>{i.delete(c),i.size===0&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}function Rr(t,e,n){const i=!Array.isArray(t),s=i?[t]:t,r=e.length<2;return iC(n,o=>{let a=!1;const l=[];let c=0,u=qe;const f=()=>{if(c)return;u();const d=e(i?l[0]:l,o);r?o(d):u=Il(d)?d:qe},h=s.map((d,p)=>hE(d,m=>{l[p]=m,c&=~(1<<p),a&&f()},()=>{c|=1<<p}));return a=!0,f(),function(){Vn(h),u()}})}const Bp={},kf={};function Fg(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}function sC(t,e){const n=[];let i=Fg(t);return{get location(){return i},listen(s){n.push(s);const r=()=>{i=Fg(t),s({location:i,action:"POP"})};return t.addEventListener("popstate",r),()=>{t.removeEventListener("popstate",r);const o=n.indexOf(s);n.splice(o,1)}},navigate(s,{state:r,replace:o=!1}={}){r={...r,key:Date.now()+""};try{o?t.history.replaceState(r,null,s):t.history.pushState(r,null,s)}catch{t.location[o?"replace":"assign"](s)}i=Fg(t),n.forEach(a=>a({location:i,action:"PUSH"}))}}}function rC(t="/"){let e=0;const n=[{pathname:t,search:""}],i=[];return{get location(){return n[e]},addEventListener(s,r){},removeEventListener(s,r){},history:{get entries(){return n},get index(){return e},get state(){return i[e]},pushState(s,r,o){const[a,l=""]=o.split("?");e++,n.push({pathname:a,search:l}),i.push(s)},replaceState(s,r,o){const[a,l=""]=o.split("?");n[e]={pathname:a,search:l},i[e]=s}}}}const oC=Boolean(typeof window<"u"&&window.document&&window.document.createElement),i1=sC(oC?window:rC()),{navigate:Fp}=i1,ME=/^:(.+)/,Hv=4,aC=3,lC=2,cC=1,uC=1;function s1(t,e){return t.substr(0,e.length)===e}function fC(t){return t===""}function hC(t){return ME.test(t)}function SE(t){return t[0]==="*"}function Af(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function zg(t){return t.replace(/(^\/+|\/+$)/g,"")}function dC(t,e){const n=t.default?0:Af(t.path).reduce((i,s)=>(i+=Hv,fC(s)?i+=uC:hC(s)?i+=lC:SE(s)?i-=Hv+cC:i+=aC,i),0);return{route:t,score:n,index:e}}function pC(t){return t.map(dC).sort((e,n)=>e.score<n.score?1:e.score>n.score?-1:e.index-n.index)}function EE(t,e){let n,i;const[s]=e.split("?"),r=Af(s),o=r[0]==="",a=pC(t);for(let l=0,c=a.length;l<c;l++){const u=a[l].route;let f=!1;if(u.default){i={route:u,params:{},uri:e};continue}const h=Af(u.path),d={},p=Math.max(r.length,h.length);let m=0;for(;m<p;m++){const _=h[m],b=r[m];if(_!==void 0&&SE(_)){const x=_==="*"?"*":_.slice(1);d[x]=r.slice(m).map(decodeURIComponent).join("/");break}if(b===void 0){f=!0;break}let g=ME.exec(_);if(g&&!o){const x=decodeURIComponent(b);d[g[1]]=x}else if(_!==b){f=!0;break}}if(!f){n={route:u,params:d,uri:"/"+r.slice(0,m).join("/")};break}}return n||i||null}function mC(t,e){return EE([t],e)}function Ug(t,e){return t+(e?`?${e}`:"")}function gC(t,e){if(s1(t,"/"))return t;const[n,i]=t.split("?"),[s]=e.split("?"),r=Af(n),o=Af(s);if(r[0]==="")return Ug(s,i);if(!s1(r[0],".")){const c=o.concat(r).join("/");return Ug((s==="/"?"":"/")+c,i)}const a=o.concat(r),l=[];return a.forEach(c=>{c===".."?l.pop():c!=="."&&l.push(c)}),Ug("/"+l.join("/"),i)}function Vv(t,e){return`${zg(e==="/"?t:`${zg(t)}/${zg(e)}`)}/`}function _C(t){return!t.defaultPrevented&&t.button===0&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bC(t){let e;const n=t[9].default,i=Ho(n,t,t[8],null);return{c(){i&&i.c()},m(s,r){i&&i.m(s,r),e=!0},p(s,[r]){i&&i.p&&(!e||r&256)&&Go(i,n,s,s[8],e?Vo(n,s[8],r,null):Wo(s[8]),null)},i(s){e||(I(i,s),e=!0)},o(s){H(i,s),e=!1},d(s){i&&i.d(s)}}}function vC(t,e,n){let i,s,r,{$$slots:o={},$$scope:a}=e,{basepath:l="/"}=e,{url:c=null}=e;const u=ka(Bp),f=ka(kf),h=nn([]);dt(t,h,y=>n(6,s=y));const d=nn(null);let p=!1;const m=u||nn(c?{pathname:c}:i1.location);dt(t,m,y=>n(5,i=y));const _=f?f.routerBase:nn({path:l,uri:l});dt(t,_,y=>n(7,r=y));const b=Rr([_,d],([y,v])=>{if(v===null)return y;const{path:w}=y,{route:S,uri:T}=v;return{path:S.default?w:S.path.replace(/\*.*$/,""),uri:T}});function g(y){const{path:v}=r;let{path:w}=y;if(y._path=w,y.path=Vv(v,w),typeof window>"u"){if(p)return;const S=mC(y,i.pathname);S&&(d.set(S),p=!0)}else h.update(S=>(S.push(y),S))}function x(y){h.update(v=>{const w=v.indexOf(y);return v.splice(w,1),v})}return u||(ji(()=>i1.listen(v=>{m.set(v.location)})),e1(Bp,m)),e1(kf,{activeRoute:d,base:_,routerBase:b,registerRoute:g,unregisterRoute:x}),t.$$set=y=>{"basepath"in y&&n(3,l=y.basepath),"url"in y&&n(4,c=y.url),"$$scope"in y&&n(8,a=y.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128){const{path:y}=r;h.update(v=>(v.forEach(w=>w.path=Vv(y,w._path)),v))}if(t.$$.dirty&96){const y=EE(s,i.pathname);d.set(y)}},[h,m,_,l,c,i,s,r,a,o]}class yC extends xt{constructor(e){super(),wt(this,e,vC,bC,yt,{basepath:3,url:4})}}const wC=t=>({params:t&4,location:t&16}),Gv=t=>({params:t[2],location:t[4]});function Wv(t){let e,n,i,s;const r=[MC,xC],o=[];function a(l,c){return l[0]!==null?0:1}return e=a(t),n=o[e]=r[e](t),{c(){n.c(),i=ts()},m(l,c){o[e].m(l,c),R(l,i,c),s=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(ot(),H(o[u],1,1,()=>{o[u]=null}),at(),n=o[e],n?n.p(l,c):(n=o[e]=r[e](l),n.c()),I(n,1),n.m(i.parentNode,i))},i(l){s||(I(n),s=!0)},o(l){H(n),s=!1},d(l){o[e].d(l),l&&P(i)}}}function xC(t){let e;const n=t[10].default,i=Ho(n,t,t[9],Gv);return{c(){i&&i.c()},m(s,r){i&&i.m(s,r),e=!0},p(s,r){i&&i.p&&(!e||r&532)&&Go(i,n,s,s[9],e?Vo(n,s[9],r,wC):Wo(s[9]),Gv)},i(s){e||(I(i,s),e=!0)},o(s){H(i,s),e=!1},d(s){i&&i.d(s)}}}function MC(t){let e,n,i;const s=[{location:t[4]},t[2],t[3]];var r=t[0];function o(a){let l={};for(let c=0;c<s.length;c+=1)l=Io(l,s[c]);return{props:l}}return r&&(e=Jr(r,o())),{c(){e&&ue(e.$$.fragment),n=ts()},m(a,l){e&&le(e,a,l),R(a,n,l),i=!0},p(a,l){const c=l&28?Ym(s,[l&16&&{location:a[4]},l&4&&Np(a[2]),l&8&&Np(a[3])]):{};if(r!==(r=a[0])){if(e){ot();const u=e;H(u.$$.fragment,1,0,()=>{ce(u,1)}),at()}r?(e=Jr(r,o()),ue(e.$$.fragment),I(e.$$.fragment,1),le(e,n.parentNode,n)):e=null}else r&&e.$set(c)},i(a){i||(e&&I(e.$$.fragment,a),i=!0)},o(a){e&&H(e.$$.fragment,a),i=!1},d(a){a&&P(n),e&&ce(e,a)}}}function SC(t){let e,n,i=t[1]!==null&&t[1].route===t[7]&&Wv(t);return{c(){i&&i.c(),e=ts()},m(s,r){i&&i.m(s,r),R(s,e,r),n=!0},p(s,[r]){s[1]!==null&&s[1].route===s[7]?i?(i.p(s,r),r&2&&I(i,1)):(i=Wv(s),i.c(),I(i,1),i.m(e.parentNode,e)):i&&(ot(),H(i,1,1,()=>{i=null}),at())},i(s){n||(I(i),n=!0)},o(s){H(i),n=!1},d(s){i&&i.d(s),s&&P(e)}}}function EC(t,e,n){let i,s,{$$slots:r={},$$scope:o}=e,{path:a=""}=e,{component:l=null}=e;const{registerRoute:c,unregisterRoute:u,activeRoute:f}=ka(kf);dt(t,f,_=>n(1,i=_));const h=ka(Bp);dt(t,h,_=>n(4,s=_));const d={path:a,default:a===""};let p={},m={};return c(d),typeof window<"u"&&Es(()=>{u(d)}),t.$$set=_=>{n(13,e=Io(Io({},e),Q0(_))),"path"in _&&n(8,a=_.path),"component"in _&&n(0,l=_.component),"$$scope"in _&&n(9,o=_.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&i&&i.route===d&&n(2,p=i.params);{const{path:_,component:b,...g}=e;n(3,m=g)}},e=Q0(e),[l,i,p,m,s,f,h,d,a,o,r]}class Gs extends xt{constructor(e){super(),wt(this,e,EC,SC,yt,{path:8,component:0})}}function TC(t){let e,n,i,s;const r=t[16].default,o=Ho(r,t,t[15],null);let a=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],l={};for(let c=0;c<a.length;c+=1)l=Io(l,a[c]);return{c(){e=C("a"),o&&o.c(),Uv(e,l)},m(c,u){R(c,e,u),o&&o.m(e,null),n=!0,i||(s=$e(e,"click",t[5]),i=!0)},p(c,[u]){o&&o.p&&(!n||u&32768)&&Go(o,r,c,c[15],n?Vo(r,c[15],u,null):Wo(c[15]),null),Uv(e,l=Ym(a,[(!n||u&1)&&{href:c[0]},(!n||u&4)&&{"aria-current":c[2]},u&2&&c[1],u&64&&c[6]]))},i(c){n||(I(o,c),n=!0)},o(c){H(o,c),n=!1},d(c){c&&P(e),o&&o.d(c),i=!1,s()}}}function kC(t,e,n){let i;const s=["to","replace","state","getProps"];let r=zv(e,s),o,a,{$$slots:l={},$$scope:c}=e,{to:u="#"}=e,{replace:f=!1}=e,{state:h={}}=e,{getProps:d=()=>({})}=e;const{base:p}=ka(kf);dt(t,p,w=>n(14,a=w));const m=ka(Bp);dt(t,m,w=>n(13,o=w));const _=Oa();let b,g,x,y;function v(w){if(_("click",w),_C(w)){w.preventDefault();const S=o.pathname===b||f;Fp(b,{state:h,replace:S})}}return t.$$set=w=>{e=Io(Io({},e),Q0(w)),n(6,r=zv(e,s)),"to"in w&&n(7,u=w.to),"replace"in w&&n(8,f=w.replace),"state"in w&&n(9,h=w.state),"getProps"in w&&n(10,d=w.getProps),"$$scope"in w&&n(15,c=w.$$scope)},t.$$.update=()=>{t.$$.dirty&16512&&n(0,b=u==="/"?a.uri:gC(u,a.uri)),t.$$.dirty&8193&&n(11,g=s1(o.pathname,b)),t.$$.dirty&8193&&n(12,x=b===o.pathname),t.$$.dirty&4096&&n(2,i=x?"page":void 0),t.$$.dirty&15361&&n(1,y=d({location:o,href:b,isPartiallyCurrent:g,isCurrent:x}))},[b,y,i,p,m,v,r,u,f,h,d,g,x,o,a,c,l]}class Mh extends xt{constructor(e){super(),wt(this,e,kC,TC,yt,{to:7,replace:8,state:9,getProps:10})}}//! moment.js
//! version : 2.29.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var TE;function rt(){return TE.apply(null,arguments)}function AC(t){TE=t}function Lr(t){return t instanceof Array||Object.prototype.toString.call(t)==="[object Array]"}function al(t){return t!=null&&Object.prototype.toString.call(t)==="[object Object]"}function Tn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ib(t){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(t).length===0;var e;for(e in t)if(Tn(t,e))return!1;return!0}function gs(t){return t===void 0}function Do(t){return typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]"}function Sh(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function kE(t,e){var n=[],i,s=t.length;for(i=0;i<s;++i)n.push(e(t[i],i));return n}function da(t,e){for(var n in e)Tn(e,n)&&(t[n]=e[n]);return Tn(e,"toString")&&(t.toString=e.toString),Tn(e,"valueOf")&&(t.valueOf=e.valueOf),t}function ao(t,e,n,i){return KE(t,e,n,i,!0).utc()}function LC(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function $t(t){return t._pf==null&&(t._pf=LC()),t._pf}var r1;Array.prototype.some?r1=Array.prototype.some:r1=function(t){var e=Object(this),n=e.length>>>0,i;for(i=0;i<n;i++)if(i in e&&t.call(this,e[i],i,e))return!0;return!1};function sb(t){if(t._isValid==null){var e=$t(t),n=r1.call(e.parsedDateParts,function(s){return s!=null}),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(t))t._isValid=i;else return i}return t._isValid}function qm(t){var e=ao(NaN);return t!=null?da($t(e),t):$t(e).userInvalidated=!0,e}var jv=rt.momentProperties=[],Hg=!1;function rb(t,e){var n,i,s,r=jv.length;if(gs(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),gs(e._i)||(t._i=e._i),gs(e._f)||(t._f=e._f),gs(e._l)||(t._l=e._l),gs(e._strict)||(t._strict=e._strict),gs(e._tzm)||(t._tzm=e._tzm),gs(e._isUTC)||(t._isUTC=e._isUTC),gs(e._offset)||(t._offset=e._offset),gs(e._pf)||(t._pf=$t(e)),gs(e._locale)||(t._locale=e._locale),r>0)for(n=0;n<r;n++)i=jv[n],s=e[i],gs(s)||(t[i]=s);return t}function Eh(t){rb(this,t),this._d=new Date(t._d!=null?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Hg===!1&&(Hg=!0,rt.updateOffset(this),Hg=!1)}function Cr(t){return t instanceof Eh||t!=null&&t._isAMomentObject!=null}function AE(t){rt.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+t)}function lr(t,e){var n=!0;return da(function(){if(rt.deprecationHandler!=null&&rt.deprecationHandler(null,t),n){var i=[],s,r,o,a=arguments.length;for(r=0;r<a;r++){if(s="",typeof arguments[r]=="object"){s+=`
[`+r+"] ";for(o in arguments[0])Tn(arguments[0],o)&&(s+=o+": "+arguments[0][o]+", ");s=s.slice(0,-2)}else s=arguments[r];i.push(s)}AE(t+`
Arguments: `+Array.prototype.slice.call(i).join("")+`
`+new Error().stack),n=!1}return e.apply(this,arguments)},e)}var Yv={};function LE(t,e){rt.deprecationHandler!=null&&rt.deprecationHandler(t,e),Yv[t]||(AE(e),Yv[t]=!0)}rt.suppressDeprecationWarnings=!1;rt.deprecationHandler=null;function lo(t){return typeof Function<"u"&&t instanceof Function||Object.prototype.toString.call(t)==="[object Function]"}function CC(t){var e,n;for(n in t)Tn(t,n)&&(e=t[n],lo(e)?this[n]=e:this["_"+n]=e);this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function o1(t,e){var n=da({},t),i;for(i in e)Tn(e,i)&&(al(t[i])&&al(e[i])?(n[i]={},da(n[i],t[i]),da(n[i],e[i])):e[i]!=null?n[i]=e[i]:delete n[i]);for(i in t)Tn(t,i)&&!Tn(e,i)&&al(t[i])&&(n[i]=da({},n[i]));return n}function ob(t){t!=null&&this.set(t)}var a1;Object.keys?a1=Object.keys:a1=function(t){var e,n=[];for(e in t)Tn(t,e)&&n.push(e);return n};var PC={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function RC(t,e,n){var i=this._calendar[t]||this._calendar.sameElse;return lo(i)?i.call(e,n):i}function Kr(t,e,n){var i=""+Math.abs(t),s=e-i.length,r=t>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var ab=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Gh=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Vg={},Lc={};function Nt(t,e,n,i){var s=i;typeof i=="string"&&(s=function(){return this[i]()}),t&&(Lc[t]=s),e&&(Lc[e[0]]=function(){return Kr(s.apply(this,arguments),e[1],e[2])}),n&&(Lc[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),t)})}function IC(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function DC(t){var e=t.match(ab),n,i;for(n=0,i=e.length;n<i;n++)Lc[e[n]]?e[n]=Lc[e[n]]:e[n]=IC(e[n]);return function(s){var r="",o;for(o=0;o<i;o++)r+=lo(e[o])?e[o].call(s,t):e[o];return r}}function ep(t,e){return t.isValid()?(e=CE(e,t.localeData()),Vg[e]=Vg[e]||DC(e),Vg[e](t)):t.localeData().invalidDate()}function CE(t,e){var n=5;function i(s){return e.longDateFormat(s)||s}for(Gh.lastIndex=0;n>=0&&Gh.test(t);)t=t.replace(Gh,i),Gh.lastIndex=0,n-=1;return t}var OC={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function NC(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.match(ab).map(function(i){return i==="MMMM"||i==="MM"||i==="DD"||i==="dddd"?i.slice(1):i}).join(""),this._longDateFormat[t])}var BC="Invalid date";function FC(){return this._invalidDate}var zC="%d",UC=/\d{1,2}/;function HC(t){return this._ordinal.replace("%d",t)}var VC={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function GC(t,e,n,i){var s=this._relativeTime[n];return lo(s)?s(t,e,n,i):s.replace(/%d/i,t)}function WC(t,e){var n=this._relativeTime[t>0?"future":"past"];return lo(n)?n(e):n.replace(/%s/i,e)}var tf={};function ns(t,e){var n=t.toLowerCase();tf[n]=tf[n+"s"]=tf[e]=t}function cr(t){return typeof t=="string"?tf[t]||tf[t.toLowerCase()]:void 0}function lb(t){var e={},n,i;for(i in t)Tn(t,i)&&(n=cr(i),n&&(e[n]=t[i]));return e}var PE={};function is(t,e){PE[t]=e}function jC(t){var e=[],n;for(n in t)Tn(t,n)&&e.push({unit:n,priority:PE[n]});return e.sort(function(i,s){return i.priority-s.priority}),e}function Xm(t){return t%4===0&&t%100!==0||t%400===0}function Js(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function un(t){var e=+t,n=0;return e!==0&&isFinite(e)&&(n=Js(e)),n}function fu(t,e){return function(n){return n!=null?(RE(this,t,n),rt.updateOffset(this,e),this):zp(this,t)}}function zp(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function RE(t,e,n){t.isValid()&&!isNaN(n)&&(e==="FullYear"&&Xm(t.year())&&t.month()===1&&t.date()===29?(n=un(n),t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),eg(n,t.month()))):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function YC(t){return t=cr(t),lo(this[t])?this[t]():this}function qC(t,e){if(typeof t=="object"){t=lb(t);var n=jC(t),i,s=n.length;for(i=0;i<s;i++)this[n[i].unit](t[n[i].unit])}else if(t=cr(t),lo(this[t]))return this[t](e);return this}var IE=/\d/,Us=/\d\d/,DE=/\d{3}/,cb=/\d{4}/,Zm=/[+-]?\d{6}/,Jn=/\d\d?/,OE=/\d\d\d\d?/,NE=/\d\d\d\d\d\d?/,Jm=/\d{1,3}/,ub=/\d{1,4}/,Km=/[+-]?\d{1,6}/,hu=/\d+/,$m=/[+-]?\d+/,XC=/Z|[+-]\d\d:?\d\d/gi,Qm=/Z|[+-]\d\d(?::?\d\d)?/gi,ZC=/[+-]?\d+(\.\d{1,3})?/,Th=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Up;Up={};function Mt(t,e,n){Up[t]=lo(e)?e:function(i,s){return i&&n?n:e}}function JC(t,e){return Tn(Up,t)?Up[t](e._strict,e._locale):new RegExp(KC(t))}function KC(t){return Is(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,n,i,s,r){return n||i||s||r}))}function Is(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var l1={};function zn(t,e){var n,i=e,s;for(typeof t=="string"&&(t=[t]),Do(e)&&(i=function(r,o){o[e]=un(r)}),s=t.length,n=0;n<s;n++)l1[t[n]]=i}function kh(t,e){zn(t,function(n,i,s,r){s._w=s._w||{},e(n,s._w,s,r)})}function $C(t,e,n){e!=null&&Tn(l1,t)&&l1[t](e,n._a,n,t)}var Ji=0,Eo=1,Wr=2,Ti=3,Mr=4,To=5,tl=6,QC=7,eP=8;function tP(t,e){return(t%e+e)%e}var mi;Array.prototype.indexOf?mi=Array.prototype.indexOf:mi=function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1};function eg(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=tP(e,12);return t+=(e-n)/12,n===1?Xm(t)?29:28:31-n%7%2}Nt("M",["MM",2],"Mo",function(){return this.month()+1});Nt("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)});Nt("MMMM",0,0,function(t){return this.localeData().months(this,t)});ns("month","M");is("month",8);Mt("M",Jn);Mt("MM",Jn,Us);Mt("MMM",function(t,e){return e.monthsShortRegex(t)});Mt("MMMM",function(t,e){return e.monthsRegex(t)});zn(["M","MM"],function(t,e){e[Eo]=un(t)-1});zn(["MMM","MMMM"],function(t,e,n,i){var s=n._locale.monthsParse(t,i,n._strict);s!=null?e[Eo]=s:$t(n).invalidMonth=t});var nP="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),BE="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),FE=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,iP=Th,sP=Th;function rP(t,e){return t?Lr(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||FE).test(e)?"format":"standalone"][t.month()]:Lr(this._months)?this._months:this._months.standalone}function oP(t,e){return t?Lr(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[FE.test(e)?"format":"standalone"][t.month()]:Lr(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function aP(t,e,n){var i,s,r,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)r=ao([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(r,"").toLocaleLowerCase();return n?e==="MMM"?(s=mi.call(this._shortMonthsParse,o),s!==-1?s:null):(s=mi.call(this._longMonthsParse,o),s!==-1?s:null):e==="MMM"?(s=mi.call(this._shortMonthsParse,o),s!==-1?s:(s=mi.call(this._longMonthsParse,o),s!==-1?s:null)):(s=mi.call(this._longMonthsParse,o),s!==-1?s:(s=mi.call(this._shortMonthsParse,o),s!==-1?s:null))}function lP(t,e,n){var i,s,r;if(this._monthsParseExact)return aP.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=ao([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[i]&&(r="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&e==="MMMM"&&this._longMonthsParse[i].test(t))return i;if(n&&e==="MMM"&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function zE(t,e){var n;if(!t.isValid())return t;if(typeof e=="string"){if(/^\d+$/.test(e))e=un(e);else if(e=t.localeData().monthsParse(e),!Do(e))return t}return n=Math.min(t.date(),eg(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function UE(t){return t!=null?(zE(this,t),rt.updateOffset(this,!0),this):zp(this,"Month")}function cP(){return eg(this.year(),this.month())}function uP(t){return this._monthsParseExact?(Tn(this,"_monthsRegex")||HE.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(Tn(this,"_monthsShortRegex")||(this._monthsShortRegex=iP),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function fP(t){return this._monthsParseExact?(Tn(this,"_monthsRegex")||HE.call(this),t?this._monthsStrictRegex:this._monthsRegex):(Tn(this,"_monthsRegex")||(this._monthsRegex=sP),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function HE(){function t(o,a){return a.length-o.length}var e=[],n=[],i=[],s,r;for(s=0;s<12;s++)r=ao([2e3,s]),e.push(this.monthsShort(r,"")),n.push(this.months(r,"")),i.push(this.months(r,"")),i.push(this.monthsShort(r,""));for(e.sort(t),n.sort(t),i.sort(t),s=0;s<12;s++)e[s]=Is(e[s]),n[s]=Is(n[s]);for(s=0;s<24;s++)i[s]=Is(i[s]);this._monthsRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}Nt("Y",0,0,function(){var t=this.year();return t<=9999?Kr(t,4):"+"+t});Nt(0,["YY",2],0,function(){return this.year()%100});Nt(0,["YYYY",4],0,"year");Nt(0,["YYYYY",5],0,"year");Nt(0,["YYYYYY",6,!0],0,"year");ns("year","y");is("year",1);Mt("Y",$m);Mt("YY",Jn,Us);Mt("YYYY",ub,cb);Mt("YYYYY",Km,Zm);Mt("YYYYYY",Km,Zm);zn(["YYYYY","YYYYYY"],Ji);zn("YYYY",function(t,e){e[Ji]=t.length===2?rt.parseTwoDigitYear(t):un(t)});zn("YY",function(t,e){e[Ji]=rt.parseTwoDigitYear(t)});zn("Y",function(t,e){e[Ji]=parseInt(t,10)});function nf(t){return Xm(t)?366:365}rt.parseTwoDigitYear=function(t){return un(t)+(un(t)>68?1900:2e3)};var VE=fu("FullYear",!0);function hP(){return Xm(this.year())}function dP(t,e,n,i,s,r,o){var a;return t<100&&t>=0?(a=new Date(t+400,e,n,i,s,r,o),isFinite(a.getFullYear())&&a.setFullYear(t)):a=new Date(t,e,n,i,s,r,o),a}function Lf(t){var e,n;return t<100&&t>=0?(n=Array.prototype.slice.call(arguments),n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)):e=new Date(Date.UTC.apply(null,arguments)),e}function Hp(t,e,n){var i=7+e-n,s=(7+Lf(t,0,i).getUTCDay()-e)%7;return-s+i-1}function GE(t,e,n,i,s){var r=(7+n-i)%7,o=Hp(t,i,s),a=1+7*(e-1)+r+o,l,c;return a<=0?(l=t-1,c=nf(l)+a):a>nf(t)?(l=t+1,c=a-nf(t)):(l=t,c=a),{year:l,dayOfYear:c}}function Cf(t,e,n){var i=Hp(t.year(),e,n),s=Math.floor((t.dayOfYear()-i-1)/7)+1,r,o;return s<1?(o=t.year()-1,r=s+Co(o,e,n)):s>Co(t.year(),e,n)?(r=s-Co(t.year(),e,n),o=t.year()+1):(o=t.year(),r=s),{week:r,year:o}}function Co(t,e,n){var i=Hp(t,e,n),s=Hp(t+1,e,n);return(nf(t)-i+s)/7}Nt("w",["ww",2],"wo","week");Nt("W",["WW",2],"Wo","isoWeek");ns("week","w");ns("isoWeek","W");is("week",5);is("isoWeek",5);Mt("w",Jn);Mt("ww",Jn,Us);Mt("W",Jn);Mt("WW",Jn,Us);kh(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=un(t)});function pP(t){return Cf(t,this._week.dow,this._week.doy).week}var mP={dow:0,doy:6};function gP(){return this._week.dow}function _P(){return this._week.doy}function bP(t){var e=this.localeData().week(this);return t==null?e:this.add((t-e)*7,"d")}function vP(t){var e=Cf(this,1,4).week;return t==null?e:this.add((t-e)*7,"d")}Nt("d",0,"do","day");Nt("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)});Nt("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)});Nt("dddd",0,0,function(t){return this.localeData().weekdays(this,t)});Nt("e",0,0,"weekday");Nt("E",0,0,"isoWeekday");ns("day","d");ns("weekday","e");ns("isoWeekday","E");is("day",11);is("weekday",11);is("isoWeekday",11);Mt("d",Jn);Mt("e",Jn);Mt("E",Jn);Mt("dd",function(t,e){return e.weekdaysMinRegex(t)});Mt("ddd",function(t,e){return e.weekdaysShortRegex(t)});Mt("dddd",function(t,e){return e.weekdaysRegex(t)});kh(["dd","ddd","dddd"],function(t,e,n,i){var s=n._locale.weekdaysParse(t,i,n._strict);s!=null?e.d=s:$t(n).invalidWeekday=t});kh(["d","e","E"],function(t,e,n,i){e[i]=un(t)});function yP(t,e){return typeof t!="string"?t:isNaN(t)?(t=e.weekdaysParse(t),typeof t=="number"?t:null):parseInt(t,10)}function wP(t,e){return typeof t=="string"?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function fb(t,e){return t.slice(e,7).concat(t.slice(0,e))}var xP="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),WE="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),MP="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),SP=Th,EP=Th,TP=Th;function kP(t,e){var n=Lr(this._weekdays)?this._weekdays:this._weekdays[t&&t!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return t===!0?fb(n,this._week.dow):t?n[t.day()]:n}function AP(t){return t===!0?fb(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort}function LP(t){return t===!0?fb(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin}function CP(t,e,n){var i,s,r,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)r=ao([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(r,"").toLocaleLowerCase();return n?e==="dddd"?(s=mi.call(this._weekdaysParse,o),s!==-1?s:null):e==="ddd"?(s=mi.call(this._shortWeekdaysParse,o),s!==-1?s:null):(s=mi.call(this._minWeekdaysParse,o),s!==-1?s:null):e==="dddd"?(s=mi.call(this._weekdaysParse,o),s!==-1||(s=mi.call(this._shortWeekdaysParse,o),s!==-1)?s:(s=mi.call(this._minWeekdaysParse,o),s!==-1?s:null)):e==="ddd"?(s=mi.call(this._shortWeekdaysParse,o),s!==-1||(s=mi.call(this._weekdaysParse,o),s!==-1)?s:(s=mi.call(this._minWeekdaysParse,o),s!==-1?s:null)):(s=mi.call(this._minWeekdaysParse,o),s!==-1||(s=mi.call(this._weekdaysParse,o),s!==-1)?s:(s=mi.call(this._shortWeekdaysParse,o),s!==-1?s:null))}function PP(t,e,n){var i,s,r;if(this._weekdaysParseExact)return CP.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=ao([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(r="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(r.replace(".",""),"i")),n&&e==="dddd"&&this._fullWeekdaysParse[i].test(t))return i;if(n&&e==="ddd"&&this._shortWeekdaysParse[i].test(t))return i;if(n&&e==="dd"&&this._minWeekdaysParse[i].test(t))return i;if(!n&&this._weekdaysParse[i].test(t))return i}}function RP(t){if(!this.isValid())return t!=null?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return t!=null?(t=yP(t,this.localeData()),this.add(t-e,"d")):e}function IP(t){if(!this.isValid())return t!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return t==null?e:this.add(t-e,"d")}function DP(t){if(!this.isValid())return t!=null?this:NaN;if(t!=null){var e=wP(t,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function OP(t){return this._weekdaysParseExact?(Tn(this,"_weekdaysRegex")||hb.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(Tn(this,"_weekdaysRegex")||(this._weekdaysRegex=SP),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function NP(t){return this._weekdaysParseExact?(Tn(this,"_weekdaysRegex")||hb.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Tn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=EP),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function BP(t){return this._weekdaysParseExact?(Tn(this,"_weekdaysRegex")||hb.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Tn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=TP),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function hb(){function t(u,f){return f.length-u.length}var e=[],n=[],i=[],s=[],r,o,a,l,c;for(r=0;r<7;r++)o=ao([2e3,1]).day(r),a=Is(this.weekdaysMin(o,"")),l=Is(this.weekdaysShort(o,"")),c=Is(this.weekdays(o,"")),e.push(a),n.push(l),i.push(c),s.push(a),s.push(l),s.push(c);e.sort(t),n.sort(t),i.sort(t),s.sort(t),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function db(){return this.hours()%12||12}function FP(){return this.hours()||24}Nt("H",["HH",2],0,"hour");Nt("h",["hh",2],0,db);Nt("k",["kk",2],0,FP);Nt("hmm",0,0,function(){return""+db.apply(this)+Kr(this.minutes(),2)});Nt("hmmss",0,0,function(){return""+db.apply(this)+Kr(this.minutes(),2)+Kr(this.seconds(),2)});Nt("Hmm",0,0,function(){return""+this.hours()+Kr(this.minutes(),2)});Nt("Hmmss",0,0,function(){return""+this.hours()+Kr(this.minutes(),2)+Kr(this.seconds(),2)});function jE(t,e){Nt(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}jE("a",!0);jE("A",!1);ns("hour","h");is("hour",13);function YE(t,e){return e._meridiemParse}Mt("a",YE);Mt("A",YE);Mt("H",Jn);Mt("h",Jn);Mt("k",Jn);Mt("HH",Jn,Us);Mt("hh",Jn,Us);Mt("kk",Jn,Us);Mt("hmm",OE);Mt("hmmss",NE);Mt("Hmm",OE);Mt("Hmmss",NE);zn(["H","HH"],Ti);zn(["k","kk"],function(t,e,n){var i=un(t);e[Ti]=i===24?0:i});zn(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t});zn(["h","hh"],function(t,e,n){e[Ti]=un(t),$t(n).bigHour=!0});zn("hmm",function(t,e,n){var i=t.length-2;e[Ti]=un(t.substr(0,i)),e[Mr]=un(t.substr(i)),$t(n).bigHour=!0});zn("hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[Ti]=un(t.substr(0,i)),e[Mr]=un(t.substr(i,2)),e[To]=un(t.substr(s)),$t(n).bigHour=!0});zn("Hmm",function(t,e,n){var i=t.length-2;e[Ti]=un(t.substr(0,i)),e[Mr]=un(t.substr(i))});zn("Hmmss",function(t,e,n){var i=t.length-4,s=t.length-2;e[Ti]=un(t.substr(0,i)),e[Mr]=un(t.substr(i,2)),e[To]=un(t.substr(s))});function zP(t){return(t+"").toLowerCase().charAt(0)==="p"}var UP=/[ap]\.?m?\.?/i,HP=fu("Hours",!0);function VP(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}var qE={calendar:PC,longDateFormat:OC,invalidDate:BC,ordinal:zC,dayOfMonthOrdinalParse:UC,relativeTime:VC,months:nP,monthsShort:BE,week:mP,weekdays:xP,weekdaysMin:MP,weekdaysShort:WE,meridiemParse:UP},ni={},Su={},Pf;function GP(t,e){var n,i=Math.min(t.length,e.length);for(n=0;n<i;n+=1)if(t[n]!==e[n])return n;return i}function qv(t){return t&&t.toLowerCase().replace("_","-")}function WP(t){for(var e=0,n,i,s,r;e<t.length;){for(r=qv(t[e]).split("-"),n=r.length,i=qv(t[e+1]),i=i?i.split("-"):null;n>0;){if(s=tg(r.slice(0,n).join("-")),s)return s;if(i&&i.length>=n&&GP(r,i)>=n-1)break;n--}e++}return Pf}function jP(t){return t.match("^[^/\\\\]*$")!=null}function tg(t){var e=null,n;if(ni[t]===void 0&&typeof module<"u"&&module&&module.exports&&jP(t))try{e=Pf._abbr,n=require,n("./locale/"+t),xa(e)}catch{ni[t]=null}return ni[t]}function xa(t,e){var n;return t&&(gs(e)?n=jo(t):n=pb(t,e),n?Pf=n:typeof console<"u"&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Pf._abbr}function pb(t,e){if(e!==null){var n,i=qE;if(e.abbr=t,ni[t]!=null)LE("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ni[t]._config;else if(e.parentLocale!=null)if(ni[e.parentLocale]!=null)i=ni[e.parentLocale]._config;else if(n=tg(e.parentLocale),n!=null)i=n._config;else return Su[e.parentLocale]||(Su[e.parentLocale]=[]),Su[e.parentLocale].push({name:t,config:e}),null;return ni[t]=new ob(o1(i,e)),Su[t]&&Su[t].forEach(function(s){pb(s.name,s.config)}),xa(t),ni[t]}else return delete ni[t],null}function YP(t,e){if(e!=null){var n,i,s=qE;ni[t]!=null&&ni[t].parentLocale!=null?ni[t].set(o1(ni[t]._config,e)):(i=tg(t),i!=null&&(s=i._config),e=o1(s,e),i==null&&(e.abbr=t),n=new ob(e),n.parentLocale=ni[t],ni[t]=n),xa(t)}else ni[t]!=null&&(ni[t].parentLocale!=null?(ni[t]=ni[t].parentLocale,t===xa()&&xa(t)):ni[t]!=null&&delete ni[t]);return ni[t]}function jo(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Pf;if(!Lr(t)){if(e=tg(t),e)return e;t=[t]}return WP(t)}function qP(){return a1(ni)}function mb(t){var e,n=t._a;return n&&$t(t).overflow===-2&&(e=n[Eo]<0||n[Eo]>11?Eo:n[Wr]<1||n[Wr]>eg(n[Ji],n[Eo])?Wr:n[Ti]<0||n[Ti]>24||n[Ti]===24&&(n[Mr]!==0||n[To]!==0||n[tl]!==0)?Ti:n[Mr]<0||n[Mr]>59?Mr:n[To]<0||n[To]>59?To:n[tl]<0||n[tl]>999?tl:-1,$t(t)._overflowDayOfYear&&(e<Ji||e>Wr)&&(e=Wr),$t(t)._overflowWeeks&&e===-1&&(e=QC),$t(t)._overflowWeekday&&e===-1&&(e=eP),$t(t).overflow=e),t}var XP=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ZP=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,JP=/Z|[+-]\d\d(?::?\d\d)?/,Wh=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Gg=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],KP=/^\/?Date\((-?\d+)/i,$P=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,QP={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function XE(t){var e,n,i=t._i,s=XP.exec(i)||ZP.exec(i),r,o,a,l,c=Wh.length,u=Gg.length;if(s){for($t(t).iso=!0,e=0,n=c;e<n;e++)if(Wh[e][1].exec(s[1])){o=Wh[e][0],r=Wh[e][2]!==!1;break}if(o==null){t._isValid=!1;return}if(s[3]){for(e=0,n=u;e<n;e++)if(Gg[e][1].exec(s[3])){a=(s[2]||" ")+Gg[e][0];break}if(a==null){t._isValid=!1;return}}if(!r&&a!=null){t._isValid=!1;return}if(s[4])if(JP.exec(s[4]))l="Z";else{t._isValid=!1;return}t._f=o+(a||"")+(l||""),_b(t)}else t._isValid=!1}function eR(t,e,n,i,s,r){var o=[tR(t),BE.indexOf(e),parseInt(n,10),parseInt(i,10),parseInt(s,10)];return r&&o.push(parseInt(r,10)),o}function tR(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function nR(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function iR(t,e,n){if(t){var i=WE.indexOf(t),s=new Date(e[0],e[1],e[2]).getDay();if(i!==s)return $t(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function sR(t,e,n){if(t)return QP[t];if(e)return 0;var i=parseInt(n,10),s=i%100,r=(i-s)/100;return r*60+s}function ZE(t){var e=$P.exec(nR(t._i)),n;if(e){if(n=eR(e[4],e[3],e[2],e[5],e[6],e[7]),!iR(e[1],n,t))return;t._a=n,t._tzm=sR(e[8],e[9],e[10]),t._d=Lf.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),$t(t).rfc2822=!0}else t._isValid=!1}function rR(t){var e=KP.exec(t._i);if(e!==null){t._d=new Date(+e[1]);return}if(XE(t),t._isValid===!1)delete t._isValid;else return;if(ZE(t),t._isValid===!1)delete t._isValid;else return;t._strict?t._isValid=!1:rt.createFromInputFallback(t)}rt.createFromInputFallback=lr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))});function pc(t,e,n){return t!=null?t:e!=null?e:n}function oR(t){var e=new Date(rt.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function gb(t){var e,n,i=[],s,r,o;if(!t._d){for(s=oR(t),t._w&&t._a[Wr]==null&&t._a[Eo]==null&&aR(t),t._dayOfYear!=null&&(o=pc(t._a[Ji],s[Ji]),(t._dayOfYear>nf(o)||t._dayOfYear===0)&&($t(t)._overflowDayOfYear=!0),n=Lf(o,0,t._dayOfYear),t._a[Eo]=n.getUTCMonth(),t._a[Wr]=n.getUTCDate()),e=0;e<3&&t._a[e]==null;++e)t._a[e]=i[e]=s[e];for(;e<7;e++)t._a[e]=i[e]=t._a[e]==null?e===2?1:0:t._a[e];t._a[Ti]===24&&t._a[Mr]===0&&t._a[To]===0&&t._a[tl]===0&&(t._nextDay=!0,t._a[Ti]=0),t._d=(t._useUTC?Lf:dP).apply(null,i),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),t._tzm!=null&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Ti]=24),t._w&&typeof t._w.d<"u"&&t._w.d!==r&&($t(t).weekdayMismatch=!0)}}function aR(t){var e,n,i,s,r,o,a,l,c;e=t._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,o=4,n=pc(e.GG,t._a[Ji],Cf(Zn(),1,4).year),i=pc(e.W,1),s=pc(e.E,1),(s<1||s>7)&&(l=!0)):(r=t._locale._week.dow,o=t._locale._week.doy,c=Cf(Zn(),r,o),n=pc(e.gg,t._a[Ji],c.year),i=pc(e.w,c.week),e.d!=null?(s=e.d,(s<0||s>6)&&(l=!0)):e.e!=null?(s=e.e+r,(e.e<0||e.e>6)&&(l=!0)):s=r),i<1||i>Co(n,r,o)?$t(t)._overflowWeeks=!0:l!=null?$t(t)._overflowWeekday=!0:(a=GE(n,i,s,r,o),t._a[Ji]=a.year,t._dayOfYear=a.dayOfYear)}rt.ISO_8601=function(){};rt.RFC_2822=function(){};function _b(t){if(t._f===rt.ISO_8601){XE(t);return}if(t._f===rt.RFC_2822){ZE(t);return}t._a=[],$t(t).empty=!0;var e=""+t._i,n,i,s,r,o,a=e.length,l=0,c,u;for(s=CE(t._f,t._locale).match(ab)||[],u=s.length,n=0;n<u;n++)r=s[n],i=(e.match(JC(r,t))||[])[0],i&&(o=e.substr(0,e.indexOf(i)),o.length>0&&$t(t).unusedInput.push(o),e=e.slice(e.indexOf(i)+i.length),l+=i.length),Lc[r]?(i?$t(t).empty=!1:$t(t).unusedTokens.push(r),$C(r,i,t)):t._strict&&!i&&$t(t).unusedTokens.push(r);$t(t).charsLeftOver=a-l,e.length>0&&$t(t).unusedInput.push(e),t._a[Ti]<=12&&$t(t).bigHour===!0&&t._a[Ti]>0&&($t(t).bigHour=void 0),$t(t).parsedDateParts=t._a.slice(0),$t(t).meridiem=t._meridiem,t._a[Ti]=lR(t._locale,t._a[Ti],t._meridiem),c=$t(t).era,c!==null&&(t._a[Ji]=t._locale.erasConvertYear(c,t._a[Ji])),gb(t),mb(t)}function lR(t,e,n){var i;return n==null?e:t.meridiemHour!=null?t.meridiemHour(e,n):(t.isPM!=null&&(i=t.isPM(n),i&&e<12&&(e+=12),!i&&e===12&&(e=0)),e)}function cR(t){var e,n,i,s,r,o,a=!1,l=t._f.length;if(l===0){$t(t).invalidFormat=!0,t._d=new Date(NaN);return}for(s=0;s<l;s++)r=0,o=!1,e=rb({},t),t._useUTC!=null&&(e._useUTC=t._useUTC),e._f=t._f[s],_b(e),sb(e)&&(o=!0),r+=$t(e).charsLeftOver,r+=$t(e).unusedTokens.length*10,$t(e).score=r,a?r<i&&(i=r,n=e):(i==null||r<i||o)&&(i=r,n=e,o&&(a=!0));da(t,n||e)}function uR(t){if(!t._d){var e=lb(t._i),n=e.day===void 0?e.date:e.day;t._a=kE([e.year,e.month,n,e.hour,e.minute,e.second,e.millisecond],function(i){return i&&parseInt(i,10)}),gb(t)}}function fR(t){var e=new Eh(mb(JE(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function JE(t){var e=t._i,n=t._f;return t._locale=t._locale||jo(t._l),e===null||n===void 0&&e===""?qm({nullInput:!0}):(typeof e=="string"&&(t._i=e=t._locale.preparse(e)),Cr(e)?new Eh(mb(e)):(Sh(e)?t._d=e:Lr(n)?cR(t):n?_b(t):hR(t),sb(t)||(t._d=null),t))}function hR(t){var e=t._i;gs(e)?t._d=new Date(rt.now()):Sh(e)?t._d=new Date(e.valueOf()):typeof e=="string"?rR(t):Lr(e)?(t._a=kE(e.slice(0),function(n){return parseInt(n,10)}),gb(t)):al(e)?uR(t):Do(e)?t._d=new Date(e):rt.createFromInputFallback(t)}function KE(t,e,n,i,s){var r={};return(e===!0||e===!1)&&(i=e,e=void 0),(n===!0||n===!1)&&(i=n,n=void 0),(al(t)&&ib(t)||Lr(t)&&t.length===0)&&(t=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=s,r._l=n,r._i=t,r._f=e,r._strict=i,fR(r)}function Zn(t,e,n,i){return KE(t,e,n,i,!1)}var dR=lr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Zn.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:qm()}),pR=lr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=Zn.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:qm()});function $E(t,e){var n,i;if(e.length===1&&Lr(e[0])&&(e=e[0]),!e.length)return Zn();for(n=e[0],i=1;i<e.length;++i)(!e[i].isValid()||e[i][t](n))&&(n=e[i]);return n}function mR(){var t=[].slice.call(arguments,0);return $E("isBefore",t)}function gR(){var t=[].slice.call(arguments,0);return $E("isAfter",t)}var _R=function(){return Date.now?Date.now():+new Date},Eu=["year","quarter","month","week","day","hour","minute","second","millisecond"];function bR(t){var e,n=!1,i,s=Eu.length;for(e in t)if(Tn(t,e)&&!(mi.call(Eu,e)!==-1&&(t[e]==null||!isNaN(t[e]))))return!1;for(i=0;i<s;++i)if(t[Eu[i]]){if(n)return!1;parseFloat(t[Eu[i]])!==un(t[Eu[i]])&&(n=!0)}return!0}function vR(){return this._isValid}function yR(){return Ir(NaN)}function ng(t){var e=lb(t),n=e.year||0,i=e.quarter||0,s=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=bR(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+r*7,this._months=+s+i*3+n*12,this._data={},this._locale=jo(),this._bubble()}function tp(t){return t instanceof ng}function c1(t){return t<0?Math.round(-1*t)*-1:Math.round(t)}function wR(t,e,n){var i=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),r=0,o;for(o=0;o<i;o++)(n&&t[o]!==e[o]||!n&&un(t[o])!==un(e[o]))&&r++;return r+s}function QE(t,e){Nt(t,0,0,function(){var n=this.utcOffset(),i="+";return n<0&&(n=-n,i="-"),i+Kr(~~(n/60),2)+e+Kr(~~n%60,2)})}QE("Z",":");QE("ZZ","");Mt("Z",Qm);Mt("ZZ",Qm);zn(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=bb(Qm,t)});var xR=/([\+\-]|\d\d)/gi;function bb(t,e){var n=(e||"").match(t),i,s,r;return n===null?null:(i=n[n.length-1]||[],s=(i+"").match(xR)||["-",0,0],r=+(s[1]*60)+un(s[2]),r===0?0:s[0]==="+"?r:-r)}function vb(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(Cr(t)||Sh(t)?t.valueOf():Zn(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),rt.updateOffset(n,!1),n):Zn(t).local()}function u1(t){return-Math.round(t._d.getTimezoneOffset())}rt.updateOffset=function(){};function MR(t,e,n){var i=this._offset||0,s;if(!this.isValid())return t!=null?this:NaN;if(t!=null){if(typeof t=="string"){if(t=bb(Qm,t),t===null)return this}else Math.abs(t)<16&&!n&&(t=t*60);return!this._isUTC&&e&&(s=u1(this)),this._offset=t,this._isUTC=!0,s!=null&&this.add(s,"m"),i!==t&&(!e||this._changeInProgress?nT(this,Ir(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,rt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?i:u1(this)}function SR(t,e){return t!=null?(typeof t!="string"&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function ER(t){return this.utcOffset(0,t)}function TR(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(u1(this),"m")),this}function kR(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var t=bb(XC,this._i);t!=null?this.utcOffset(t):this.utcOffset(0,!0)}return this}function AR(t){return this.isValid()?(t=t?Zn(t).utcOffset():0,(this.utcOffset()-t)%60===0):!1}function LR(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function CR(){if(!gs(this._isDSTShifted))return this._isDSTShifted;var t={},e;return rb(t,this),t=JE(t),t._a?(e=t._isUTC?ao(t._a):Zn(t._a),this._isDSTShifted=this.isValid()&&wR(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function PR(){return this.isValid()?!this._isUTC:!1}function RR(){return this.isValid()?this._isUTC:!1}function eT(){return this.isValid()?this._isUTC&&this._offset===0:!1}var IR=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,DR=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ir(t,e){var n=t,i=null,s,r,o;return tp(t)?n={ms:t._milliseconds,d:t._days,M:t._months}:Do(t)||!isNaN(+t)?(n={},e?n[e]=+t:n.milliseconds=+t):(i=IR.exec(t))?(s=i[1]==="-"?-1:1,n={y:0,d:un(i[Wr])*s,h:un(i[Ti])*s,m:un(i[Mr])*s,s:un(i[To])*s,ms:un(c1(i[tl]*1e3))*s}):(i=DR.exec(t))?(s=i[1]==="-"?-1:1,n={y:za(i[2],s),M:za(i[3],s),w:za(i[4],s),d:za(i[5],s),h:za(i[6],s),m:za(i[7],s),s:za(i[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=OR(Zn(n.from),Zn(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),r=new ng(n),tp(t)&&Tn(t,"_locale")&&(r._locale=t._locale),tp(t)&&Tn(t,"_isValid")&&(r._isValid=t._isValid),r}Ir.fn=ng.prototype;Ir.invalid=yR;function za(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xv(t,e){var n={};return n.months=e.month()-t.month()+(e.year()-t.year())*12,t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function OR(t,e){var n;return t.isValid()&&e.isValid()?(e=vb(e,t),t.isBefore(e)?n=Xv(t,e):(n=Xv(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function tT(t,e){return function(n,i){var s,r;return i!==null&&!isNaN(+i)&&(LE(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=i,i=r),s=Ir(n,i),nT(this,s,t),this}}function nT(t,e,n,i){var s=e._milliseconds,r=c1(e._days),o=c1(e._months);!t.isValid()||(i=i==null?!0:i,o&&zE(t,zp(t,"Month")+o*n),r&&RE(t,"Date",zp(t,"Date")+r*n),s&&t._d.setTime(t._d.valueOf()+s*n),i&&rt.updateOffset(t,r||o))}var NR=tT(1,"add"),BR=tT(-1,"subtract");function iT(t){return typeof t=="string"||t instanceof String}function FR(t){return Cr(t)||Sh(t)||iT(t)||Do(t)||UR(t)||zR(t)||t===null||t===void 0}function zR(t){var e=al(t)&&!ib(t),n=!1,i=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,r,o=i.length;for(s=0;s<o;s+=1)r=i[s],n=n||Tn(t,r);return e&&n}function UR(t){var e=Lr(t),n=!1;return e&&(n=t.filter(function(i){return!Do(i)&&iT(t)}).length===0),e&&n}function HR(t){var e=al(t)&&!ib(t),n=!1,i=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,r;for(s=0;s<i.length;s+=1)r=i[s],n=n||Tn(t,r);return e&&n}function VR(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function GR(t,e){arguments.length===1&&(arguments[0]?FR(arguments[0])?(t=arguments[0],e=void 0):HR(arguments[0])&&(e=arguments[0],t=void 0):(t=void 0,e=void 0));var n=t||Zn(),i=vb(n,this).startOf("day"),s=rt.calendarFormat(this,i)||"sameElse",r=e&&(lo(e[s])?e[s].call(this,n):e[s]);return this.format(r||this.localeData().calendar(s,this,Zn(n)))}function WR(){return new Eh(this)}function jR(t,e){var n=Cr(t)?t:Zn(t);return this.isValid()&&n.isValid()?(e=cr(e)||"millisecond",e==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf()):!1}function YR(t,e){var n=Cr(t)?t:Zn(t);return this.isValid()&&n.isValid()?(e=cr(e)||"millisecond",e==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf()):!1}function qR(t,e,n,i){var s=Cr(t)?t:Zn(t),r=Cr(e)?e:Zn(e);return this.isValid()&&s.isValid()&&r.isValid()?(i=i||"()",(i[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(i[1]===")"?this.isBefore(r,n):!this.isAfter(r,n))):!1}function XR(t,e){var n=Cr(t)?t:Zn(t),i;return this.isValid()&&n.isValid()?(e=cr(e)||"millisecond",e==="millisecond"?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf())):!1}function ZR(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function JR(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function KR(t,e,n){var i,s,r;if(!this.isValid())return NaN;if(i=vb(t,this),!i.isValid())return NaN;switch(s=(i.utcOffset()-this.utcOffset())*6e4,e=cr(e),e){case"year":r=np(this,i)/12;break;case"month":r=np(this,i);break;case"quarter":r=np(this,i)/3;break;case"second":r=(this-i)/1e3;break;case"minute":r=(this-i)/6e4;break;case"hour":r=(this-i)/36e5;break;case"day":r=(this-i-s)/864e5;break;case"week":r=(this-i-s)/6048e5;break;default:r=this-i}return n?r:Js(r)}function np(t,e){if(t.date()<e.date())return-np(e,t);var n=(e.year()-t.year())*12+(e.month()-t.month()),i=t.clone().add(n,"months"),s,r;return e-i<0?(s=t.clone().add(n-1,"months"),r=(e-i)/(i-s)):(s=t.clone().add(n+1,"months"),r=(e-i)/(s-i)),-(n+r)||0}rt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";rt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function $R(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function QR(t){if(!this.isValid())return null;var e=t!==!0,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?ep(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):lo(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",ep(n,"Z")):ep(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function e5(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="",n,i,s,r;return this.isLocal()||(t=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),n="["+t+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(n+i+s+r)}function t5(t){t||(t=this.isUtc()?rt.defaultFormatUtc:rt.defaultFormat);var e=ep(this,t);return this.localeData().postformat(e)}function n5(t,e){return this.isValid()&&(Cr(t)&&t.isValid()||Zn(t).isValid())?Ir({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function i5(t){return this.from(Zn(),t)}function s5(t,e){return this.isValid()&&(Cr(t)&&t.isValid()||Zn(t).isValid())?Ir({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function r5(t){return this.to(Zn(),t)}function sT(t){var e;return t===void 0?this._locale._abbr:(e=jo(t),e!=null&&(this._locale=e),this)}var rT=lr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===void 0?this.localeData():this.locale(t)});function oT(){return this._locale}var Vp=1e3,Cc=60*Vp,Gp=60*Cc,aT=(365*400+97)*24*Gp;function Pc(t,e){return(t%e+e)%e}function lT(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-aT:new Date(t,e,n).valueOf()}function cT(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-aT:Date.UTC(t,e,n)}function o5(t){var e,n;if(t=cr(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?cT:lT,t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=Pc(e+(this._isUTC?0:this.utcOffset()*Cc),Gp);break;case"minute":e=this._d.valueOf(),e-=Pc(e,Cc);break;case"second":e=this._d.valueOf(),e-=Pc(e,Vp);break}return this._d.setTime(e),rt.updateOffset(this,!0),this}function a5(t){var e,n;if(t=cr(t),t===void 0||t==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?cT:lT,t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Gp-Pc(e+(this._isUTC?0:this.utcOffset()*Cc),Gp)-1;break;case"minute":e=this._d.valueOf(),e+=Cc-Pc(e,Cc)-1;break;case"second":e=this._d.valueOf(),e+=Vp-Pc(e,Vp)-1;break}return this._d.setTime(e),rt.updateOffset(this,!0),this}function l5(){return this._d.valueOf()-(this._offset||0)*6e4}function c5(){return Math.floor(this.valueOf()/1e3)}function u5(){return new Date(this.valueOf())}function f5(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function h5(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function d5(){return this.isValid()?this.toISOString():null}function p5(){return sb(this)}function m5(){return da({},$t(this))}function g5(){return $t(this).overflow}function _5(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Nt("N",0,0,"eraAbbr");Nt("NN",0,0,"eraAbbr");Nt("NNN",0,0,"eraAbbr");Nt("NNNN",0,0,"eraName");Nt("NNNNN",0,0,"eraNarrow");Nt("y",["y",1],"yo","eraYear");Nt("y",["yy",2],0,"eraYear");Nt("y",["yyy",3],0,"eraYear");Nt("y",["yyyy",4],0,"eraYear");Mt("N",yb);Mt("NN",yb);Mt("NNN",yb);Mt("NNNN",A5);Mt("NNNNN",L5);zn(["N","NN","NNN","NNNN","NNNNN"],function(t,e,n,i){var s=n._locale.erasParse(t,i,n._strict);s?$t(n).era=s:$t(n).invalidEra=t});Mt("y",hu);Mt("yy",hu);Mt("yyy",hu);Mt("yyyy",hu);Mt("yo",C5);zn(["y","yy","yyy","yyyy"],Ji);zn(["yo"],function(t,e,n,i){var s;n._locale._eraYearOrdinalRegex&&(s=t.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?e[Ji]=n._locale.eraYearOrdinalParse(t,s):e[Ji]=parseInt(t,10)});function b5(t,e){var n,i,s,r=this._eras||jo("en")._eras;for(n=0,i=r.length;n<i;++n){switch(typeof r[n].since){case"string":s=rt(r[n].since).startOf("day"),r[n].since=s.valueOf();break}switch(typeof r[n].until){case"undefined":r[n].until=1/0;break;case"string":s=rt(r[n].until).startOf("day").valueOf(),r[n].until=s.valueOf();break}}return r}function v5(t,e,n){var i,s,r=this.eras(),o,a,l;for(t=t.toUpperCase(),i=0,s=r.length;i<s;++i)if(o=r[i].name.toUpperCase(),a=r[i].abbr.toUpperCase(),l=r[i].narrow.toUpperCase(),n)switch(e){case"N":case"NN":case"NNN":if(a===t)return r[i];break;case"NNNN":if(o===t)return r[i];break;case"NNNNN":if(l===t)return r[i];break}else if([o,a,l].indexOf(t)>=0)return r[i]}function y5(t,e){var n=t.since<=t.until?1:-1;return e===void 0?rt(t.since).year():rt(t.since).year()+(e-t.offset)*n}function w5(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].name;return""}function x5(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].narrow;return""}function M5(){var t,e,n,i=this.localeData().eras();for(t=0,e=i.length;t<e;++t)if(n=this.clone().startOf("day").valueOf(),i[t].since<=n&&n<=i[t].until||i[t].until<=n&&n<=i[t].since)return i[t].abbr;return""}function S5(){var t,e,n,i,s=this.localeData().eras();for(t=0,e=s.length;t<e;++t)if(n=s[t].since<=s[t].until?1:-1,i=this.clone().startOf("day").valueOf(),s[t].since<=i&&i<=s[t].until||s[t].until<=i&&i<=s[t].since)return(this.year()-rt(s[t].since).year())*n+s[t].offset;return this.year()}function E5(t){return Tn(this,"_erasNameRegex")||wb.call(this),t?this._erasNameRegex:this._erasRegex}function T5(t){return Tn(this,"_erasAbbrRegex")||wb.call(this),t?this._erasAbbrRegex:this._erasRegex}function k5(t){return Tn(this,"_erasNarrowRegex")||wb.call(this),t?this._erasNarrowRegex:this._erasRegex}function yb(t,e){return e.erasAbbrRegex(t)}function A5(t,e){return e.erasNameRegex(t)}function L5(t,e){return e.erasNarrowRegex(t)}function C5(t,e){return e._eraYearOrdinalRegex||hu}function wb(){var t=[],e=[],n=[],i=[],s,r,o=this.eras();for(s=0,r=o.length;s<r;++s)e.push(Is(o[s].name)),t.push(Is(o[s].abbr)),n.push(Is(o[s].narrow)),i.push(Is(o[s].name)),i.push(Is(o[s].abbr)),i.push(Is(o[s].narrow));this._erasRegex=new RegExp("^("+i.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+t.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Nt(0,["gg",2],0,function(){return this.weekYear()%100});Nt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function ig(t,e){Nt(0,[t,t.length],0,e)}ig("gggg","weekYear");ig("ggggg","weekYear");ig("GGGG","isoWeekYear");ig("GGGGG","isoWeekYear");ns("weekYear","gg");ns("isoWeekYear","GG");is("weekYear",1);is("isoWeekYear",1);Mt("G",$m);Mt("g",$m);Mt("GG",Jn,Us);Mt("gg",Jn,Us);Mt("GGGG",ub,cb);Mt("gggg",ub,cb);Mt("GGGGG",Km,Zm);Mt("ggggg",Km,Zm);kh(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=un(t)});kh(["gg","GG"],function(t,e,n,i){e[i]=rt.parseTwoDigitYear(t)});function P5(t){return uT.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function R5(t){return uT.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function I5(){return Co(this.year(),1,4)}function D5(){return Co(this.isoWeekYear(),1,4)}function O5(){var t=this.localeData()._week;return Co(this.year(),t.dow,t.doy)}function N5(){var t=this.localeData()._week;return Co(this.weekYear(),t.dow,t.doy)}function uT(t,e,n,i,s){var r;return t==null?Cf(this,i,s).year:(r=Co(t,i,s),e>r&&(e=r),B5.call(this,t,e,n,i,s))}function B5(t,e,n,i,s){var r=GE(t,e,n,i,s),o=Lf(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Nt("Q",0,"Qo","quarter");ns("quarter","Q");is("quarter",7);Mt("Q",IE);zn("Q",function(t,e){e[Eo]=(un(t)-1)*3});function F5(t){return t==null?Math.ceil((this.month()+1)/3):this.month((t-1)*3+this.month()%3)}Nt("D",["DD",2],"Do","date");ns("date","D");is("date",9);Mt("D",Jn);Mt("DD",Jn,Us);Mt("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient});zn(["D","DD"],Wr);zn("Do",function(t,e){e[Wr]=un(t.match(Jn)[0])});var fT=fu("Date",!0);Nt("DDD",["DDDD",3],"DDDo","dayOfYear");ns("dayOfYear","DDD");is("dayOfYear",4);Mt("DDD",Jm);Mt("DDDD",DE);zn(["DDD","DDDD"],function(t,e,n){n._dayOfYear=un(t)});function z5(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return t==null?e:this.add(t-e,"d")}Nt("m",["mm",2],0,"minute");ns("minute","m");is("minute",14);Mt("m",Jn);Mt("mm",Jn,Us);zn(["m","mm"],Mr);var U5=fu("Minutes",!1);Nt("s",["ss",2],0,"second");ns("second","s");is("second",15);Mt("s",Jn);Mt("ss",Jn,Us);zn(["s","ss"],To);var H5=fu("Seconds",!1);Nt("S",0,0,function(){return~~(this.millisecond()/100)});Nt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Nt(0,["SSS",3],0,"millisecond");Nt(0,["SSSS",4],0,function(){return this.millisecond()*10});Nt(0,["SSSSS",5],0,function(){return this.millisecond()*100});Nt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Nt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Nt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Nt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ns("millisecond","ms");is("millisecond",16);Mt("S",Jm,IE);Mt("SS",Jm,Us);Mt("SSS",Jm,DE);var pa,hT;for(pa="SSSS";pa.length<=9;pa+="S")Mt(pa,hu);function V5(t,e){e[tl]=un(("0."+t)*1e3)}for(pa="S";pa.length<=9;pa+="S")zn(pa,V5);hT=fu("Milliseconds",!1);Nt("z",0,0,"zoneAbbr");Nt("zz",0,0,"zoneName");function G5(){return this._isUTC?"UTC":""}function W5(){return this._isUTC?"Coordinated Universal Time":""}var nt=Eh.prototype;nt.add=NR;nt.calendar=GR;nt.clone=WR;nt.diff=KR;nt.endOf=a5;nt.format=t5;nt.from=n5;nt.fromNow=i5;nt.to=s5;nt.toNow=r5;nt.get=YC;nt.invalidAt=g5;nt.isAfter=jR;nt.isBefore=YR;nt.isBetween=qR;nt.isSame=XR;nt.isSameOrAfter=ZR;nt.isSameOrBefore=JR;nt.isValid=p5;nt.lang=rT;nt.locale=sT;nt.localeData=oT;nt.max=pR;nt.min=dR;nt.parsingFlags=m5;nt.set=qC;nt.startOf=o5;nt.subtract=BR;nt.toArray=f5;nt.toObject=h5;nt.toDate=u5;nt.toISOString=QR;nt.inspect=e5;typeof Symbol<"u"&&Symbol.for!=null&&(nt[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});nt.toJSON=d5;nt.toString=$R;nt.unix=c5;nt.valueOf=l5;nt.creationData=_5;nt.eraName=w5;nt.eraNarrow=x5;nt.eraAbbr=M5;nt.eraYear=S5;nt.year=VE;nt.isLeapYear=hP;nt.weekYear=P5;nt.isoWeekYear=R5;nt.quarter=nt.quarters=F5;nt.month=UE;nt.daysInMonth=cP;nt.week=nt.weeks=bP;nt.isoWeek=nt.isoWeeks=vP;nt.weeksInYear=O5;nt.weeksInWeekYear=N5;nt.isoWeeksInYear=I5;nt.isoWeeksInISOWeekYear=D5;nt.date=fT;nt.day=nt.days=RP;nt.weekday=IP;nt.isoWeekday=DP;nt.dayOfYear=z5;nt.hour=nt.hours=HP;nt.minute=nt.minutes=U5;nt.second=nt.seconds=H5;nt.millisecond=nt.milliseconds=hT;nt.utcOffset=MR;nt.utc=ER;nt.local=TR;nt.parseZone=kR;nt.hasAlignedHourOffset=AR;nt.isDST=LR;nt.isLocal=PR;nt.isUtcOffset=RR;nt.isUtc=eT;nt.isUTC=eT;nt.zoneAbbr=G5;nt.zoneName=W5;nt.dates=lr("dates accessor is deprecated. Use date instead.",fT);nt.months=lr("months accessor is deprecated. Use month instead",UE);nt.years=lr("years accessor is deprecated. Use year instead",VE);nt.zone=lr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",SR);nt.isDSTShifted=lr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",CR);function j5(t){return Zn(t*1e3)}function Y5(){return Zn.apply(null,arguments).parseZone()}function dT(t){return t}var kn=ob.prototype;kn.calendar=RC;kn.longDateFormat=NC;kn.invalidDate=FC;kn.ordinal=HC;kn.preparse=dT;kn.postformat=dT;kn.relativeTime=GC;kn.pastFuture=WC;kn.set=CC;kn.eras=b5;kn.erasParse=v5;kn.erasConvertYear=y5;kn.erasAbbrRegex=T5;kn.erasNameRegex=E5;kn.erasNarrowRegex=k5;kn.months=rP;kn.monthsShort=oP;kn.monthsParse=lP;kn.monthsRegex=fP;kn.monthsShortRegex=uP;kn.week=pP;kn.firstDayOfYear=_P;kn.firstDayOfWeek=gP;kn.weekdays=kP;kn.weekdaysMin=LP;kn.weekdaysShort=AP;kn.weekdaysParse=PP;kn.weekdaysRegex=OP;kn.weekdaysShortRegex=NP;kn.weekdaysMinRegex=BP;kn.isPM=zP;kn.meridiem=VP;function Wp(t,e,n,i){var s=jo(),r=ao().set(i,e);return s[n](r,t)}function pT(t,e,n){if(Do(t)&&(e=t,t=void 0),t=t||"",e!=null)return Wp(t,e,n,"month");var i,s=[];for(i=0;i<12;i++)s[i]=Wp(t,i,n,"month");return s}function xb(t,e,n,i){typeof t=="boolean"?(Do(e)&&(n=e,e=void 0),e=e||""):(e=t,n=e,t=!1,Do(e)&&(n=e,e=void 0),e=e||"");var s=jo(),r=t?s._week.dow:0,o,a=[];if(n!=null)return Wp(e,(n+r)%7,i,"day");for(o=0;o<7;o++)a[o]=Wp(e,(o+r)%7,i,"day");return a}function q5(t,e){return pT(t,e,"months")}function X5(t,e){return pT(t,e,"monthsShort")}function Z5(t,e,n){return xb(t,e,n,"weekdays")}function J5(t,e,n){return xb(t,e,n,"weekdaysShort")}function K5(t,e,n){return xb(t,e,n,"weekdaysMin")}xa("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=un(t%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return t+n}});rt.lang=lr("moment.lang is deprecated. Use moment.locale instead.",xa);rt.langData=lr("moment.langData is deprecated. Use moment.localeData instead.",jo);var fo=Math.abs;function $5(){var t=this._data;return this._milliseconds=fo(this._milliseconds),this._days=fo(this._days),this._months=fo(this._months),t.milliseconds=fo(t.milliseconds),t.seconds=fo(t.seconds),t.minutes=fo(t.minutes),t.hours=fo(t.hours),t.months=fo(t.months),t.years=fo(t.years),this}function mT(t,e,n,i){var s=Ir(e,n);return t._milliseconds+=i*s._milliseconds,t._days+=i*s._days,t._months+=i*s._months,t._bubble()}function Q5(t,e){return mT(this,t,e,1)}function eI(t,e){return mT(this,t,e,-1)}function Zv(t){return t<0?Math.floor(t):Math.ceil(t)}function tI(){var t=this._milliseconds,e=this._days,n=this._months,i=this._data,s,r,o,a,l;return t>=0&&e>=0&&n>=0||t<=0&&e<=0&&n<=0||(t+=Zv(f1(n)+e)*864e5,e=0,n=0),i.milliseconds=t%1e3,s=Js(t/1e3),i.seconds=s%60,r=Js(s/60),i.minutes=r%60,o=Js(r/60),i.hours=o%24,e+=Js(o/24),l=Js(gT(e)),n+=l,e-=Zv(f1(l)),a=Js(n/12),n%=12,i.days=e,i.months=n,i.years=a,this}function gT(t){return t*4800/146097}function f1(t){return t*146097/4800}function nI(t){if(!this.isValid())return NaN;var e,n,i=this._milliseconds;if(t=cr(t),t==="month"||t==="quarter"||t==="year")switch(e=this._days+i/864e5,n=this._months+gT(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(f1(this._months)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return e*24+i/36e5;case"minute":return e*1440+i/6e4;case"second":return e*86400+i/1e3;case"millisecond":return Math.floor(e*864e5)+i;default:throw new Error("Unknown unit "+t)}}function iI(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+un(this._months/12)*31536e6:NaN}function Yo(t){return function(){return this.as(t)}}var sI=Yo("ms"),rI=Yo("s"),oI=Yo("m"),aI=Yo("h"),lI=Yo("d"),cI=Yo("w"),uI=Yo("M"),fI=Yo("Q"),hI=Yo("y");function dI(){return Ir(this)}function pI(t){return t=cr(t),this.isValid()?this[t+"s"]():NaN}function Dl(t){return function(){return this.isValid()?this._data[t]:NaN}}var mI=Dl("milliseconds"),gI=Dl("seconds"),_I=Dl("minutes"),bI=Dl("hours"),vI=Dl("days"),yI=Dl("months"),wI=Dl("years");function xI(){return Js(this.days()/7)}var wo=Math.round,_c={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function MI(t,e,n,i,s){return s.relativeTime(e||1,!!n,t,i)}function SI(t,e,n,i){var s=Ir(t).abs(),r=wo(s.as("s")),o=wo(s.as("m")),a=wo(s.as("h")),l=wo(s.as("d")),c=wo(s.as("M")),u=wo(s.as("w")),f=wo(s.as("y")),h=r<=n.ss&&["s",r]||r<n.s&&["ss",r]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(h=h||u<=1&&["w"]||u<n.w&&["ww",u]),h=h||c<=1&&["M"]||c<n.M&&["MM",c]||f<=1&&["y"]||["yy",f],h[2]=e,h[3]=+t>0,h[4]=i,MI.apply(null,h)}function EI(t){return t===void 0?wo:typeof t=="function"?(wo=t,!0):!1}function TI(t,e){return _c[t]===void 0?!1:e===void 0?_c[t]:(_c[t]=e,t==="s"&&(_c.ss=e-1),!0)}function kI(t,e){if(!this.isValid())return this.localeData().invalidDate();var n=!1,i=_c,s,r;return typeof t=="object"&&(e=t,t=!1),typeof t=="boolean"&&(n=t),typeof e=="object"&&(i=Object.assign({},_c,e),e.s!=null&&e.ss==null&&(i.ss=e.s-1)),s=this.localeData(),r=SI(this,!n,i,s),n&&(r=s.pastFuture(+this,r)),s.postformat(r)}var Wg=Math.abs;function Ul(t){return(t>0)-(t<0)||+t}function sg(){if(!this.isValid())return this.localeData().invalidDate();var t=Wg(this._milliseconds)/1e3,e=Wg(this._days),n=Wg(this._months),i,s,r,o,a=this.asSeconds(),l,c,u,f;return a?(i=Js(t/60),s=Js(i/60),t%=60,i%=60,r=Js(n/12),n%=12,o=t?t.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=Ul(this._months)!==Ul(a)?"-":"",u=Ul(this._days)!==Ul(a)?"-":"",f=Ul(this._milliseconds)!==Ul(a)?"-":"",l+"P"+(r?c+r+"Y":"")+(n?c+n+"M":"")+(e?u+e+"D":"")+(s||i||t?"T":"")+(s?f+s+"H":"")+(i?f+i+"M":"")+(t?f+o+"S":"")):"P0D"}var xn=ng.prototype;xn.isValid=vR;xn.abs=$5;xn.add=Q5;xn.subtract=eI;xn.as=nI;xn.asMilliseconds=sI;xn.asSeconds=rI;xn.asMinutes=oI;xn.asHours=aI;xn.asDays=lI;xn.asWeeks=cI;xn.asMonths=uI;xn.asQuarters=fI;xn.asYears=hI;xn.valueOf=iI;xn._bubble=tI;xn.clone=dI;xn.get=pI;xn.milliseconds=mI;xn.seconds=gI;xn.minutes=_I;xn.hours=bI;xn.days=vI;xn.weeks=xI;xn.months=yI;xn.years=wI;xn.humanize=kI;xn.toISOString=sg;xn.toString=sg;xn.toJSON=sg;xn.locale=sT;xn.localeData=oT;xn.toIsoString=lr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",sg);xn.lang=rT;Nt("X",0,0,"unix");Nt("x",0,0,"valueOf");Mt("x",$m);Mt("X",ZC);zn("X",function(t,e,n){n._d=new Date(parseFloat(t)*1e3)});zn("x",function(t,e,n){n._d=new Date(un(t))});//! moment.js
rt.version="2.29.4";AC(Zn);rt.fn=nt;rt.min=mR;rt.max=gR;rt.now=_R;rt.utc=ao;rt.unix=j5;rt.months=q5;rt.isDate=Sh;rt.locale=xa;rt.invalid=qm;rt.duration=Ir;rt.isMoment=Cr;rt.weekdays=Z5;rt.parseZone=Y5;rt.localeData=jo;rt.isDuration=tp;rt.monthsShort=X5;rt.weekdaysMin=K5;rt.defineLocale=pb;rt.updateLocale=YP;rt.locales=qP;rt.weekdaysShort=J5;rt.normalizeUnits=cr;rt.relativeTimeRounding=EI;rt.relativeTimeThreshold=TI;rt.calendarFormat=VR;rt.prototype=nt;rt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};function AI(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,13H5V11H19V13Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function LI(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Mb extends xt{constructor(e){super(),wt(this,e,LI,AI,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function CI(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function PI(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class qo extends xt{constructor(e){super(),wt(this,e,PI,CI,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}const kc=class{constructor(){Me(this,"ipc");Me(this,"algSub");Me(this,"cardSub");Me(this,"tutSub");Me(this,"solveSub");Me(this,"contestSub");Me(this,"sessSub");Me(this,"anySub");Me(this,"isElectron");this.algSub=nn([]),this.cardSub=nn([]),this.solveSub=nn(),this.tutSub=nn(),this.sessSub=nn(),this.contestSub=nn(),this.anySub=nn(),navigator.userAgent.indexOf("Electron")>-1?(this.ipc=window.electronAPI,this.isElectron=!0,this.setIpc()):(this.ipc={},this.isElectron=!1)}static getInstance(){return kc._instance?kc._instance:kc._instance=new kc}setIpc(){this.ipc.handleTutorials((e,n)=>{this.tutSub.set(n)}),this.ipc.handleAlgorithms((e,n)=>{this.algSub.set(n)}),this.ipc.handleCards((e,n)=>{this.cardSub.set(n)}),this.ipc.handleSolves((e,n)=>{this.solveSub.set({type:n[0],data:n[1]})}),this.ipc.handleContests((e,n)=>{this.contestSub.set({type:n[0],data:n[1]})}),this.ipc.handleSessions((e,n)=>{this.sessSub.set({type:n[0],data:n[1]})}),this.ipc.handleAny((e,n)=>{this.anySub.set({type:n[0],data:n[1]})})}getAlgorithms(e){this.isElectron&&this.ipc.getAlgorithms(e)}getCards(){this.isElectron&&this.ipc.getCards()}getTutorials(){this.isElectron&&this.ipc.getTutorials()}addTutorial(e){this.isElectron&&this.ipc.addTutorial(e)}updateTutorial(e){this.isElectron&&this.ipc.updateTutorial(e)}getSolves(){this.isElectron&&this.ipc.getSolves()}addSolve(e){this.isElectron&&this.ipc.addSolve(e)}updateSolve(e){this.isElectron&&this.ipc.updateSolve(e)}removeSolves(e){this.isElectron&&this.ipc.removeSolves(e.map(n=>n._id))}getSessions(){this.isElectron&&this.ipc.getSessions()}addSession(e){this.isElectron&&this.ipc.addSession(e)}removeSession(e){this.isElectron&&this.ipc.removeSession(e)}renameSession(e){this.isElectron&&this.ipc.renameSession(e)}updateSession(e){this.isElectron&&this.ipc.updateSession(e)}addContest(e){this.isElectron&&this.ipc.addContest(e)}getContests(){this.isElectron&&this.ipc.getContests()}updateContest(e){this.isElectron&&this.ipc.updateContest(e)}removeContests(e){this.isElectron&&this.ipc.removeContests(e)}minimize(){this.isElectron&&this.ipc.minimize()}maximize(){this.isElectron&&this.ipc.maximize()}close(){this.isElectron&&this.ipc.close()}generatePDF(e){this.isElectron&&this.ipc.generatePDF(e)}zipPDF(e){this.isElectron&&this.ipc.zipPDF(e)}openFile(e){this.isElectron&&this.ipc.openFile(e)}revealFile(e){this.isElectron&&this.ipc.revealFile(e)}update(){this.isElectron&&this.ipc.update()}};let Ds=kc;Me(Ds,"_instance");function RI(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function II(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class DI extends xt{constructor(e){super(),wt(this,e,II,RI,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function Jv(t,e,n){const i=t.slice();return i[17]=e[n],i[19]=n,i}function OI(t){let e;return{c(){e=C("hr"),M(e,"class","h-0 w-full border-0 border-t border-gray-500")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function Kv(t){let e,n,i=t[5](t[17])+"",s,r,o,a=t[19]&&OI();function l(){return t[14](t[17],t[19])}return{c(){a&&a.c(),e=O(),n=C("button"),s=ae(i),M(n,"class","option text-gray-300 text-left transition-all duration-200 hover:bg-gray-800 p-1 rounded-md svelte-1nklvxu"),pt(n,"selected",t[6](t[17],t[19],t[3])===t[0])},m(c,u){a&&a.m(c,u),R(c,e,u),R(c,n,u),E(n,s),r||(o=$e(n,"click",l),r=!0)},p(c,u){t=c,u&40&&i!==(i=t[5](t[17])+"")&&ke(s,i),u&73&&pt(n,"selected",t[6](t[17],t[19],t[3])===t[0])},d(c){a&&a.d(c),c&&P(e),c&&P(n),r=!1,o()}}}function NI(t){let e,n,i=(t[3].some(t[12])?t[5](t[3].find(t[13])):t[2])+"",s,r,o,a,l,c,u,f,h,d;a=new DI({props:{width:"100%",height:"100%"}});let p=t[3],m=[];for(let _=0;_<p.length;_+=1)m[_]=Kv(Jv(t,p,_));return{c(){e=C("main"),n=C("button"),s=ae(i),r=O(),o=C("div"),ue(a.$$.fragment),l=O(),c=C("div");for(let _=0;_<m.length;_+=1)m[_].c();M(n,"tabindex","0"),M(n,"class","bg-gray-700 text-gray-200 p-2 flex items-center rounded-md select-none pr-8 whitespace-nowrap text-ellipsis w-full h-full text-left overflow-hidden"),M(o,"class","expand w-5 h-full absolute right-2 top-0 flex my-auto pointer-events-none"),M(c,"class","options bg-gray-700 bg-opacity-100 p-2 w-full rounded-md border border-solid border-gray-400 absolute z-10 grid grid-cols-1 max-h-72 overflow-x-hidden overflow-y-scroll svelte-1nklvxu"),pt(c,"visible",t[7]),M(e,"class",u=hs("select-container relative cursor-pointer border border-solid border-gray-400 h-max-10 rounded-md "+(t[1]||""))+" svelte-1nklvxu")},m(_,b){R(_,e,b),E(e,n),E(n,s),E(e,r),E(e,o),le(a,o,null),E(e,l),E(e,c);for(let g=0;g<m.length;g+=1)m[g].m(c,null);t[15](c),f=!0,h||(d=[$e(window,"click",t[11],!0),$e(n,"click",mE(pE(t[9]))),$e(c,"keydown",t[10])],h=!0)},p(_,[b]){if((!f||b&109)&&i!==(i=(_[3].some(_[12])?_[5](_[3].find(_[13])):_[2])+"")&&ke(s,i),b&249){p=_[3];let g;for(g=0;g<p.length;g+=1){const x=Jv(_,p,g);m[g]?m[g].p(x,b):(m[g]=Kv(x),m[g].c(),m[g].m(c,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=p.length}(!f||b&128)&&pt(c,"visible",_[7]),(!f||b&2&&u!==(u=hs("select-container relative cursor-pointer border border-solid border-gray-400 h-max-10 rounded-md "+(_[1]||""))+" svelte-1nklvxu"))&&M(e,"class",u)},i(_){f||(I(a.$$.fragment,_),f=!0)},o(_){H(a.$$.fragment,_),f=!1},d(_){_&&P(e),ce(a),en(m,_),t[15](null),h=!1,Vn(d)}}}function BI(t,e,n){let{class:i=""}=e,{placeholder:s="Select"}=e,{value:r=s}=e,{items:o}=e,{onChange:a=(y,v,w)=>{}}=e,{label:l=y=>y||""}=e,{transform:c=(y,v,w)=>y.value}=e,u=!1,f;function h(){for(let y=0,v=o.length;y<v;y+=1)if(c(o[y],y,o)===r)return y;return-1}function d(y){let v=h();v>-1&&(f.children[v*2].scrollIntoView({inline:"center",block:"center"}),Tf().then(()=>{var w;(w=f.firstElementChild)==null||w.focus()})),n(7,u=!0)}function p(y){let v=document.activeElement,w=T=>T.previousElementSibling,S=T=>T.nextElementSibling;if(y.code==="ArrowDown"||y.code==="ArrowUp"){for(;v;)if(v=y.code==="ArrowDown"?S(v):w(v),v&&v.tagName==="BUTTON"){Tf().then(()=>v.focus());break}}}const m=()=>n(7,u=!1),_=(y,v,w)=>c(y,v,w)===r,b=(y,v,w)=>c(y,v,w)===r,g=(y,v)=>{n(7,u=!1),n(0,r=c(y,v,o)),a(y,v,o)};function x(y){vt[y?"unshift":"push"](()=>{f=y,n(8,f)})}return t.$$set=y=>{"class"in y&&n(1,i=y.class),"placeholder"in y&&n(2,s=y.placeholder),"value"in y&&n(0,r=y.value),"items"in y&&n(3,o=y.items),"onChange"in y&&n(4,a=y.onChange),"label"in y&&n(5,l=y.label),"transform"in y&&n(6,c=y.transform)},[r,i,s,o,a,l,c,u,f,d,p,m,_,b,g,x]}class Wi extends xt{constructor(e){super(),wt(this,e,BI,NI,yt,{class:1,placeholder:2,value:0,items:3,onChange:4,label:5,transform:6})}}const _T={name:"English",code:"en-EN",global:{done:"Done!",scrambleCopied:"Scramble copied to clipboard",copiedToClipboard:"Copied to clipboard"},NAVBAR:{home:"Home",routeMap:t=>{let e=[[/pll-trainer/i,"PLL Recognition"]];for(let n=0,i=e.length;n<i;n+=1)if(e[n][0].test(t))return e[n][1];return t}},HOME:{tutorials:"Tutorials",algorithms:"Algorithms",timer:"Timer",battle:"Battle",pll_recognition:"PLL Recognition",simulator:"Puzzle Simulator",settings:"Settings",importExport:"Import / Export",contest:"Contest"},SETTINGS:{title:"Settings",language:"Language",appFont:"Application font",timerFont:"Timer font",save:"Save",reset:"Reset",saved:"Saved",settingsSaved:"Settings saved",update:"Update",version:"Version",checkUpdate:"Check for update",updateAvailable:"Update available",updateAvailableText:"There's a new version available.",alreadyUpdated:"Already updated",alreadyUpdatedText:"You have the last version of CubeDB.",cancelAction:"Cancel",updateAction:"Update",updateError:"Update error",updateErrorText:"There was an error when trying to update.",updateCompleted:"Update completed. Please restart to apply it.",updateFailed:"Update failed. Please try later."},ALGORITHMS:{algorithms:"Algorithms",case:"Case",moves:"Moves",solution:"Solution"},TIMER:{stackmatStatus:"Timer Status",cross:"Cross",nextAo5:"Next Ao5",best:"Best",worst:"Worst",average:"Average",deviation:"Deviation",count:"Count",cancel:"Cancel",save:"Save",scramble:"Scramble",time:"Time",inputMethod:"Input method",device:"Device",inspection:"Inspection",showTime:"Show time when running",genImage:"Generate images",canHurtPerformance:"This can hurt performance on complex puzzles",refreshScramble:"Refresh scramble after cancel",aoxCalculation:"AoX calculation",sequential:"Sequential",groupOfX:"Group of X solves",delete:"Delete",reloadScramble:"Reload scramble",edit:"Edit",useOldScramble:"Use old scramble",copyScramble:"Copy scramble",notes:"Notes",settings:"Settings",manageSessions:"Manage sessions",selectSession:"Select session",selectGroup:"Select group",selectMode:"Select mode",selectFilter:"Select filter",addNewSession:"Add session",deleteAll:"Delete all",shareAo5:"Share Ao5",shareAo12:"Share Ao12",selectAll:"Select All",selectInterval:"Select Interval",invertSelection:"Invert selection",comment:"Comments...",noPenalty:"No penalty",removeAllSolves:"Do you want to remove all the solves?",select:"Select",totalTime:"Total time",clean:"Clean",solve:"Solve",timeDistribution:"Time distribution",timeChartLabels:["Time","Ao5","A012","Ao50","AoX","Best","Trend"],solves:"Solves",hourDistribution:"Hour distribution",weekDistribution:"Week distribution",histogram:"Histogram",bestMarks:"Best marks",go:"Go",bestList:[{title:"Best",key:"best",select:1},{title:"Worst",key:"worst",select:1},{title:"Best Ao5",key:"Ao5",select:5},{title:"Best Ao12",key:"Ao12",select:12},{title:"Best Ao50",key:"Ao50",select:1},{title:"Best Ao100",key:"Ao100",select:1},{title:"Best Ao200",key:"Ao200",select:1},{title:"Best Ao500",key:"Ao500",select:1},{title:"Best Ao1k",key:"Ao1k",select:1},{title:"Best Ao2k",key:"Ao2k",select:1}]},PLL:{title:"PLL Recognition Trainer",topFace:"Top face",cases:"Cases",next:"Next",completed:"Completed",tryAgain:"Try again",colorNeutral:"Color neutral",white:"White",yellow:"Yellow",red:"Red",orange:"Orange",blue:"Blue",green:"Green",case:"Case",expected:"Expected",answer:"Answer",time:"Time",keyBindings:"Key bindings",singleLetter:"Single letter PLL",singleLetterBlock:"Just tap the letter to answer the quiz.",twoVariant:"Two variants PLL",twoVariantBlock:"For PLL's like <mark>Ja</mark> and <mark>Jb</mark>, lowercase letter is the <mark>a</mark> variant <mark>(j is Ja)</mark> and capital letter is the <mark>b</mark> variant <mark>(J is Jb)</mark>.",gPerms:"G perms",gPermsBlock:"For the G Perms you can use the numbers <mark>1</mark> to <mark>4</mark> (Ga, Gb, Gc and Gd)."},SIMULATOR:{settings:"Settings",puzzleSettings:"Puzzle settings",puzzle:"Puzzle",order:"Order",cancel:"Cancel",setPuzzle:"Set puzzle"},IMPORT_EXPORT:{title:"Import / Export",import:"Import",export:"Export",from:"From",selectFile:"Select file",selectAll:"Select all",selectNone:"Select none",save:"Save",total:"Total",showingOnly50:"showing only 50"}},FI={name:"Espa\xF1ol",code:"es-ES",global:{done:"Hecho!",scrambleCopied:"Mezcla copiada al portapapeles",copiedToClipboard:"Copiado al portapapeles"},NAVBAR:{home:"Inicio",routeMap:t=>{let e=[[/tutorials/i,"Tutoriales"],[/algorithms/i,"Algoritmos"],[/timer/i,"Timer"],[/battle/i,"Batalla"],[/pll-trainer/i,"Reconocimiento PLL"],[/simulator/i,"Simulador"],[/contest/i,"Concursos"],[/import-export/i,"Importar-Exportar"],[/settings/i,"Configuraci\xF3n"]];for(let n=0,i=e.length;n<i;n+=1)if(e[n][0].test(t))return e[n][1];return t}},HOME:{tutorials:"Tutoriales",algorithms:"Algoritmos",timer:"Temporizador",battle:"Batalla",pll_recognition:"Reconocimiento PLL",simulator:"Simulador",settings:"Configuraci\xF3n",importExport:"Importar / Exportar",contest:"Concursos"},SETTINGS:{title:"Configuraci\xF3n",language:"Idioma",appFont:"Fuente",timerFont:"Fuente del timer",save:"Guardar",reset:"Reiniciar",saved:"Hecho!",settingsSaved:"Configuraci\xF3n guardada",update:"Actualizaci\xF3n",version:"Versi\xF3n",checkUpdate:"Buscar actualizaci\xF3n",updateAvailable:"Actualizaci\xF3n disponible",updateAvailableText:"Hay una nueva versi\xF3n disponible.",alreadyUpdated:"Actualizado",alreadyUpdatedText:"Ya tienes la \xFAltima versi\xF3n de CubeDB.",cancelAction:"Cancelar",updateAction:"Actualizar",updateError:"Error",updateErrorText:"Hubo un error al intentar actualizar.",updateCompleted:"Actualizaci\xF3n completada. Reinicie para aplicar los cambios.",updateFailed:"Actualizaci\xF3n fallida. Por favor, int\xE9ntelo m\xE1s tarde."},ALGORITHMS:{algorithms:"Algoritmos",case:"Caso",moves:"Movimientos",solution:"Soluci\xF3n"},TIMER:{stackmatStatus:"Estado del timer",cross:"Cruz",nextAo5:"Pr\xF3ximo Ao5",best:"Mejor",worst:"Peor",average:"Promedio",deviation:"Desviaci\xF3n",count:"Total",cancel:"Cancelar",save:"Guardar",scramble:"Mezcla",time:"Tiempo",inputMethod:"M\xE9todo de entrada",device:"Dispositivo",inspection:"Inspecci\xF3n",showTime:"Mostrar tiempo durante la marcha",genImage:"Generar im\xE1genes",canHurtPerformance:"Esto puede afectar el rendimiento en puzzles complejos",refreshScramble:"Refrescar mezcla luego de cancelar",aoxCalculation:"C\xE1lculo del AoX",sequential:"Secuencial",groupOfX:"En grupos de X solves",delete:"Eliminar",reloadScramble:"Nueva mezcla",edit:"Editar",useOldScramble:"Usar mezcla anterior",copyScramble:"Copiar mezcla",notes:"Notas",settings:"Configuraci\xF3n",manageSessions:"Administrar sesiones",selectSession:"Elegir sesi\xF3n",selectGroup:"Elegir grupo",selectMode:"Elegir modo",selectFilter:"Elegir filtro",addNewSession:"Crear sesi\xF3n",deleteAll:"Eliminar todos",shareAo5:"Compartir Ao5",shareAo12:"Compartir Ao12",selectAll:"Seleccionar Todo",selectInterval:"Seleccionar Intervalo",invertSelection:"Invertir selecci\xF3n",comment:"Comentarios...",noPenalty:"Sin penalizaci\xF3n",removeAllSolves:"Deseas eliminar todos los tiempos?",select:"Seleccionar",totalTime:"Tiempo total",clean:"Limpios",solve:"Resoluci\xF3n",timeDistribution:"Distribuci\xF3n de tiempos",timeChartLabels:["Tiempo","Ao5","A012","Ao50","AoX","Mejor","Tendencia"],solves:"Resoluciones",hourDistribution:"Distribuci\xF3n por horas",weekDistribution:"Distribuci\xF3n semanal",histogram:"Histograma",bestMarks:"Mejores marcas",go:"Ir",bestList:[{title:"Mejor",key:"best",select:1},{title:"Peor",key:"worst",select:1},{title:"Mejor Ao5",key:"Ao5",select:5},{title:"Mejor Ao12",key:"Ao12",select:12},{title:"Mejor Ao50",key:"Ao50",select:1},{title:"Mejor Ao100",key:"Ao100",select:1},{title:"Mejor Ao200",key:"Ao200",select:1},{title:"Mejor Ao500",key:"Ao500",select:1},{title:"Mejor Ao1k",key:"Ao1k",select:1},{title:"Mejor Ao2k",key:"Ao2k",select:1}]},PLL:{title:"Reconocimiento de PLL",topFace:"Capa superior",cases:"Casos",next:"Siguiente",completed:"Completados",tryAgain:"Reiniciar",colorNeutral:"Neutral",white:"Blanca",yellow:"Amarilla",red:"Roja",orange:"Naranja",blue:"Azul",green:"Verde",case:"Caso",expected:"Esperado",answer:"Respuesta",time:"Tiempo",keyBindings:"Atajos de teclado",singleLetter:"PLL de una sola letra",singleLetterBlock:"Solo toca la letra correspondiente al nombre para contestar.",twoVariant:"PLL de dos variantes",twoVariantBlock:"Para PLL's como <mark>Ja</mark> y <mark>Jb</mark>, la letra en min\xFAscila es la variante <mark>a</mark> <mark>(j is Ja)</mark> y la letra en may\xFAsculas es la variante <mark>b</mark> <mark>(J is Jb)</mark>.",gPerms:"Permutaci\xF3n G",gPermsBlock:"Para las permutaciones G, puedes usar los n\xFAmeros del <mark>1</mark> al <mark>4</mark> (Ga, Gb, Gc y Gd)."},SIMULATOR:{settings:"Configuraci\xF3n",puzzleSettings:"Configurar puzzle",puzzle:"Puzzle",order:"Orden",cancel:"Cancelar",setPuzzle:"Establecer"},IMPORT_EXPORT:{title:"Importar / Exportar",import:"Importar",export:"Exportar",from:"Desde",selectFile:"Abrir",selectAll:"Elegir todas",selectNone:"Elegir ninguna",save:"Guardar",total:"Total",showingOnly50:"mostrando solo 50"}};let sf=[[/^en/i,_T],[/^es/i,FI]];function Dr(t){for(let e=0,n=sf.length;e<n;e+=1)if(sf[e][0].test(t))return sf[e][1];return _T}let Hi=nn("en-EN");function $v(t){let e,n=Qv(t[1])+"",i;return{c(){e=C("span"),i=ae(n),M(e,"class","mr-2")},m(s,r){R(s,e,r),E(e,i)},p(s,r){r&2&&n!==(n=Qv(s[1])+"")&&ke(i,n)},d(s){s&&P(e)}}}function zI(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S=t[1]&&$v(t);function T(A){t[6](A)}let k={class:"w-20 h-[2rem] mr-4",items:sf,label:UI,transform:HI,onChange:t[5]};return t[2]!==void 0&&(k.value=t[2]),c=new Wi({props:k}),vt.push(()=>Vt(c,"value",T)),_=new Mb({}),x=new qo({props:{height:"100%"}}),{c(){e=C("section"),n=C("img"),s=O(),r=C("h4"),r.textContent="CubeDB",o=O(),a=C("div"),S&&S.c(),l=O(),ue(c.$$.fragment),f=O(),h=C("span"),d=ae(t[0]),p=O(),m=C("span"),ue(_.$$.fragment),b=O(),g=C("span"),ue(x.$$.fragment),M(n,"draggable","false"),wi(n.src,i="/assets/logo.png")||M(n,"src",i),M(n,"alt",""),M(n,"class","ml-1 w-8 flex my-auto"),M(r,"class","ml-1"),M(m,"class","ml-2 cursor-pointer"),M(g,"class","ml-2 mr-1 cursor-pointer"),M(a,"class","absolute right-0 top-0 flex h-8 items-center"),M(e,"class","w-full h-8 shadow-sm bg-white bg-opacity-10 text-gray-400 fixed z-50 mb-3 select-none flex items-center")},m(A,L){R(A,e,L),E(e,n),E(e,s),E(e,r),E(e,o),E(e,a),S&&S.m(a,null),E(a,l),le(c,a,null),E(a,f),E(a,h),E(h,d),E(a,p),E(a,m),le(_,m,null),E(a,b),E(a,g),le(x,g,null),y=!0,v||(w=[$e(m,"click",t[3]),$e(g,"click",t[4])],v=!0)},p(A,[L]){A[1]?S?S.p(A,L):(S=$v(A),S.c(),S.m(a,l)):S&&(S.d(1),S=null);const D={};!u&&L&4&&(u=!0,D.value=A[2],Ht(()=>u=!1)),c.$set(D),(!y||L&1)&&ke(d,A[0])},i(A){y||(I(c.$$.fragment,A),I(_.$$.fragment,A),I(x.$$.fragment,A),y=!0)},o(A){H(c.$$.fragment,A),H(_.$$.fragment,A),H(x.$$.fragment,A),y=!1},d(A){A&&P(e),S&&S.d(),ce(c),ce(_),ce(x),v=!1,Vn(w)}}}function Qv(t){let e=["B","KB","MB","GB"],n=0;for(;t>=1e3;)t/=1024,n+=1;return t.toFixed(2)+e[n]}const UI=t=>t[1].code,HI=t=>t[1].code;function VI(t,e,n){let i;dt(t,Hi,d=>n(2,i=d));const s=Ds.getInstance();let r,o,a,l=0;ji(()=>{n(0,r=rt().format("hh:mm a")),o=setInterval(()=>{n(0,r=rt().format("hh:mm a"))},1e3),a=s.anySub.subscribe(d=>{!d||d.type==="update-progress"&&(d.data!="end"?n(1,l=d.data):n(1,l=0))})}),Es(()=>{clearInterval(o),a()});function c(){s.minimize()}function u(){s.close()}function f(){localStorage.setItem("language",i)}function h(d){i=d,Hi.set(i)}return[r,l,i,c,u,f,h]}class GI extends xt{constructor(e){super(),wt(this,e,VI,zI,yt,{})}}function ey(t,e,n){const i=t.slice();return i[6]=e[n],i}function WI(t){let e=t[0].NAVBAR.home+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&1&&e!==(e=i[0].NAVBAR.home+"")&&ke(n,e)},d(i){i&&P(n)}}}function jI(t){let e=t[6].name+"",n,i;return{c(){n=ae(e),i=O()},m(s,r){R(s,n,r),R(s,i,r)},p(s,r){r&2&&e!==(e=s[6].name+"")&&ke(n,e)},d(s){s&&P(n),s&&P(i)}}}function ty(t){let e,n;return e=new Mh({props:{class:"mr-1 rounded-sm shadow-md uppercase p-2 bg-white bg-opacity-10 text-gray-400",to:t[6].link,$$slots:{default:[jI]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s&2&&(r.to=i[6].link),s&514&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function YI(t){let e,n,i,s;n=new Mh({props:{class:"mr-1 rounded-sm shadow-md uppercase p-2 bg-white bg-opacity-10 text-gray-400",to:"/",$$slots:{default:[WI]},$$scope:{ctx:t}}});let r=t[1],o=[];for(let l=0;l<r.length;l+=1)o[l]=ty(ey(t,r,l));const a=l=>H(o[l],1,1,()=>{o[l]=null});return{c(){e=C("nav"),ue(n.$$.fragment),i=O();for(let l=0;l<o.length;l+=1)o[l].c();M(e,"class","w-full px-5 inline-flex mt-10 select-none fixed z-10")},m(l,c){R(l,e,c),le(n,e,null),E(e,i);for(let u=0;u<o.length;u+=1)o[u].m(e,null);s=!0},p(l,[c]){const u={};if(c&513&&(u.$$scope={dirty:c,ctx:l}),n.$set(u),c&2){r=l[1];let f;for(f=0;f<r.length;f+=1){const h=ey(l,r,f);o[f]?(o[f].p(h,c),I(o[f],1)):(o[f]=ty(h),o[f].c(),I(o[f],1),o[f].m(e,null))}for(ot(),f=r.length;f<o.length;f+=1)a(f);at()}},i(l){if(!s){I(n.$$.fragment,l);for(let c=0;c<r.length;c+=1)I(o[c]);s=!0}},o(l){H(n.$$.fragment,l),o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)H(o[c]);s=!1},d(l){l&&P(e),ce(n),en(o,l)}}}function qI(t,e,n){let i,s;const{activeRoute:r}=ka(kf);dt(t,r,c=>n(4,i=c));let o=[],a=Rr(Hi,c=>Dr(c));dt(t,a,c=>n(0,s=c));function l(c){if(n(1,o.length=0,o),!c){Fp("/");return}let u=c.route._path.split("?")[0].split("/").map(f=>f==="*"?f.replace("*",c.params["*"]||""):f[0]===":"?c.params[f.slice(1)]:f).join("/").split("/").filter(f=>f).map(f=>s.NAVBAR.routeMap(f));n(1,o=[...u.map((f,h)=>({link:"/"+u.slice(0,h+1).join("/"),name:f}))])}return t.$$.update=()=>{t.$$.dirty&17&&l(i)},[s,o,r,a,i]}class XI extends xt{constructor(e){super(),wt(this,e,qI,YI,yt,{})}}const ZI="modulepreload",JI=function(t,e){return new URL(t,e).href},ny={},bT=function(e,n,i){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(r=>{if(r=JI(r,i),r in ny)return;ny[r]=!0;const o=r.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!i)for(let u=s.length-1;u>=0;u--){const f=s[u];if(f.href===r&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":ZI,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e())};async function Ol(t,e,n,i,s){let r=nn("__initial__");const o=await bT(()=>import("./imageWorker.1db4f646.js"),[],import.meta.url),a=new o.default;let l=0;return a.onmessage=c=>{if(c.data||(console.log("!e.data terminate"),r.update(()=>null),a.terminate()),!n&&!i)r.update(()=>c.data);else if(!n&&i)t[l++].img=c.data,l>=t.length&&(r.update(()=>null),a.terminate());else{if(i)if(!n)t[l++].img=c.data;else for(let u=0,f=t.length;u<f;u+=1)t[u].img=c.data[u];r.update(()=>c.data),(l>=t.length||n)&&(r.update(()=>null),a.terminate())}},a.postMessage([t.map(c=>c.options),e,n,s]),r}const jg=["w","x","y","z"],KI=[[1,1,1,1],[1,-1,1,-1],[1,-1,-1,1],[1,1,-1,-1]],$I=[[0,1,2,3],[1,0,3,2],[2,3,0,1],[3,2,1,0]];class Rf{constructor(e,n,i,s){Me(this,"w");Me(this,"x");Me(this,"y");Me(this,"z");this.w=e,this.x=n,this.y=i,this.z=s}conjugate(){return new Rf(this.w,-this.x,-this.y,-this.z)}multiply(e){const n=new Rf(0,0,0,0);for(let i=0;i<4;i++)for(let s=0;s<4;s++)n[jg[$I[i][s]]]+=KI[i][s]*this[jg[i]]*e[jg[s]];return n}}class et{constructor(e,n,i){Me(this,"x");Me(this,"y");Me(this,"z");this.x=e||0,this.y=n||0,this.z=i||0}static cross(e,n,i){let s=n.sub(e),r=i.sub(n);return s.cross(r)}static crossValue(e,n,i){return e.x*(n.y*i.z-i.y*n.z)-e.y*(n.x*i.z-i.x*n.z)+e.x*(n.x*i.y-i.x*n.y)}static direction(e,n,i,s){return et.direction1(e,et.cross(e,n,i),s)}static direction1(e,n,i){let s=n.dot(i.sub(e));return Math.abs(s)<1e-6?0:Math.sign(s)}static project(e,n,i,s){return et.project1(e,n,et.cross(n,i,s).unit())}static project1(e,n,i){let s=e.sub(n),r=i.dot(s);return e.add(i.mul(-r))}project(e,n,i){return this.project1(e,et.cross(e,n,i).unit())}project1(e,n){return et.project1(this,e,n)}reflect(e,n,i,s){return this.reflect1(e,et.cross(e,n,i).unit(),s)}reflect1(e,n,i){return this.add(n.mul(-2*this.sub(e).dot(n)),i)}cross(e){return new et(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}add(e,n){return n?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this):new et(this.x+e.x,this.y+e.y,this.z+e.z)}sub(e,n){return n?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this):new et(this.x-e.x,this.y-e.y,this.z-e.z)}mul(e,n){return n?(this.x*=e,this.y*=e,this.z*=e,this):new et(this.x*e,this.y*e,this.z*e)}div(e,n){return n?(this.x/=e,this.y/=e,this.z/=e,this):new et(this.x/e,this.y/e,this.z/e)}rotate(e,n,i,s){const r=Math.cos(i/2),o=Math.sin(i/2);let a=n.unit(),l=new Rf(0,this.x-e.x,this.y-e.y,this.z-e.z),c=new Rf(r,o*a.x,o*a.y,o*a.z),u=c.multiply(l).multiply(c.conjugate());return s?(this.x=u.x+e.x,this.y=u.y+e.y,this.z=u.z+e.z,this):new et(u.x+e.x,u.y+e.y,u.z+e.z)}clone(){return new et(this.x,this.y,this.z)}abs(){return this.abs2()**.5}abs2(){return this.x**2+this.y**2+this.z**2}unit(){let e=this.abs();return e!=0?this.div(e):new et(1,0,0)}proj(e){return e.setLength(this.dot(e)/e.abs())}setLength(e){return this.unit().mul(e)}toString(){return`<${this.x}; ${this.y}; ${this.z}>`}toNormal(){let e=[this.x,this.y,this.z].map(n=>Math.abs(n)<1e-6?0:Math.sign(n));return this.x=e[0],this.y=e[1],this.z=e[2],this}}const ie=new et(0,0,0),pe=new et(1,0,0),we=new et(-1,0,0),ge=new et(0,0,1),Ge=new et(0,0,-1),G=new et(0,1,0),Ne=new et(0,-1,0);function QI(t){let e=[];for(let n=0,i=t.length;n<i;n+=1)if(Array.isArray(t[n]))e.push("a");else switch(typeof t[n]){case"number":case"string":case"object":case"undefined":case"function":{e.push((typeof t[n])[0]);break}default:{e.push("?");break}}return e.join("")}function Jo(t,e,n){let i=e||0,s=n||255;return i>s&&(i+=s,s=i-s,i=i-s),Math.min(Math.max(i,t),s)}const Zs=class{constructor(e,n,i,s,r){Me(this,"color");let o=QI([e,n,i,s,r]);switch(this.color=[0,1,2].map(a=>Math.round(Math.random()*255)),this.color[0]=Jo(this.color[0]),this.color[1]=Jo(this.color[1]),this.color[2]=Jo(this.color[2]),this.color[3]=1,o){case"nnnns":{if(r.match(/cmyk/i))this.fromCMYK(e,n,i,s);else if(r.match(/rgba/i))this.fromRGBA(e,n,i,s);else throw new TypeError(`Unknown format color ${r}`);break}case"nnnnu":{this.fromRGBA(e,n,i,s);break}case"nnnsu":{if(s.match(/cmy/i))this.fromCMY(e,n,i);else if(s.match(/ryb/i))this.fromRYB(e,n,i);else if(s.match(/hsv/i))this.fromHSV(e,n,i);else throw new TypeError(`Unknown format color ${r}`);break}case"nnnuu":{this.fromRGB(e,n,i);break}case"suuuu":{this.fromString(e);break}}}set(e,n){this.color[e]=n}fromCMY(e,n,i){throw new ReferenceError("CMY not supported yet")}fromCMYK(e,n,i,s){throw new ReferenceError("CMYK not supported yet")}fromRYB(e,n,i){throw new ReferenceError("RYB not supported yet")}fromHSV(e,n,i){throw new ReferenceError("HSV not supported yet")}fromRGB(e,n,i){this.color[0]=Jo(e),this.color[1]=Jo(n),this.color[2]=Jo(i)}fromRGBA(e,n,i,s){this.fromRGB(e,n,i),this.color[3]=Jo(s,0,1)}fromString(e){let n=/$rgba\(([0-9]*),([0-9]*),([0-9]*),([0-9]*)\)$/,i=/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)$/,s=/^\#(\w{2})(\w{2})(\w{2})$/,r=/^\#(\w{2})(\w{2})(\w{2})(\w{2})$/,o=e.replace(/\s/g,"");if(n.test(o)){let[a,l,c,u]=o.replace(n,"$1 $2 $3 $4").split(" ").map(Number);this.fromRGBA(a,l,c,u)}else if(i.test(o)){let[a,l,c]=o.replace(i,"$1 $2 $3").split(" ").map(Number);this.fromRGB(a,l,c)}else if(r.test(o)){let[a,l,c,u]=o.replace(r,"$1 $2 $3 $4").split(" ").map(f=>parseInt(f,16));this.fromRGBA(a,l,c,u)}else if(s.test(o)){let[a,l,c]=o.replace(s,"$1 $2 $3").split(" ").map(u=>parseInt(u,16));this.fromRGB(a,l,c)}else throw new TypeError("String format other than rgb() or rgba() not supported yet")}interpolate(e,n){let i=new Zs;return i.color=this.color.map((s,r)=>s*(1-n)+e.color[r]*n),i}clone(){let e=new Zs(0,0,0);return e.color=this.color.map(n=>n),e}toHex(e=!0){let n=this.color.map(i=>i);return n[3]=Jo(n[3]*255),!e&&n.pop(),"#"+n.map(i=>("00"+i.toString(16)).substr(-2,2)).join("")}toNumber(){let e=0;for(let n=0;n<3;n+=1)e*=256,e+=this.color[n];return e}toRGBStr(){return`rgb(${this.color[0]}, ${this.color[1]}, ${this.color[2]})`}toRGBAStr(){return`rgba(${this.color[0]}, ${this.color[1]}, ${this.color[2]}, ${~~(this.color[3]*255)})`}toArray(){return this.color.map(e=>e)}};let qs=Zs;Me(qs,"GREEN",new Zs(63,197,69)),Me(qs,"RED",new Zs(229,57,53)),Me(qs,"BLUE",new Zs(25,118,210)),Me(qs,"ORANGE",new Zs(225,167,38)),Me(qs,"YELLOW",new Zs(255,235,59)),Me(qs,"WHITE",new Zs(230,230,230)),Me(qs,"BLACK",new Zs(0,0,0)),Me(qs,"GRAY",new Zs(80,80,80));const eD=[[/^\s+/,null],[/^\n/,null],[/^\r/,null],[/^\./,null],[/^\/\/.*/,null],[/^,/,","],[/^\(/,"("],[/^\)([1-9]\d{0,1})?/,")"],[/^\[/,"["],[/^\]([1-9]\d{0,1})?/,"]"],[/^([\d]+)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?('|2'|2)?/,"MOVE"]];class tD{constructor(){Me(this,"_string","");Me(this,"_cursor",0)}init(e){this._string=e,this._cursor=0}hasMoreTokens(){return this._cursor<this._string.length}isEOF(){return this._cursor===this._string.length}getNextToken(){if(!this.hasMoreTokens())return null;const e=this._string.slice(this._cursor);for(const[n,i]of eD){let s=this._match(n,e);if(s!=null)return i==null?this.getNextToken():{type:i,value:s}}throw new SyntaxError(`Unexpected token: ${e[0]}`)}_match(e,n){const i=e.exec(n);return i==null?null:(this._cursor+=i[0].length,i[0])}}class nD{constructor(){}invert(e){let n=[];for(let i=e.length-1;i>=0;i-=1)e[i].indexOf("2")>-1||e[i].indexOf("'")>-1?n.push(e[i].replace("'","")):n.push(e[i]+"'");return n}simplify(e){let n=new Map,i=new Map;n.set(-3,""),n.set(-2,"2"),n.set(-1,"'"),n.set(1,""),n.set(2,"2"),n.set(3,"'"),i.set("2",-2),i.set("'",-1),i.set("",1),i.set("2",2);let s=e.map(r=>{let o=r.replace(/^(\d*)([a-zA-Z]+)(['2]?)$/,"$1$2 $3").split(" ");return[o[0],i.get(o[1])]});for(let r=1,o=s.length;r<o;r+=1)s[r][0]===s[r-1][0]&&(s[r-1][1]=(s[r-1][1]+s[r][1])%4,s.splice(r,1),r--,o--);return s.filter(r=>r[1]).map(r=>r[0]+n.get(r[1]))}solve(e){switch(e.type){case"Program":return this.simplify(this.solve(e.value)).join(" ");case"Expression":return e.value.map(s=>this.solve(s)).reduce((s,r)=>[...s,...r],[]);case"Sequence":return e.value.map(s=>s.value);case"ParentesizedExpression":let n=this.solve(e.value.expr),i=[];for(let s=1,r=e.value.cant;s<=r;s+=1)i=[...i,...n];return i;case"ConmutatorExpression":{let s=this.solve(e.value.expr1),r=this.solve(e.value.expr2),o=this.invert(s),a=this.invert(r),l=[...s,...r,...o,...a],c=[];for(let u=1,f=e.value.cant;u<=f;u+=1)c=[...c,...l];return c}default:throw new SyntaxError(`Unexpected type: "${e.type}"`)}}}class iD{constructor(){Me(this,"_tokenizer");Me(this,"_solver");Me(this,"_lookahead");this._tokenizer=new tD,this._solver=new nD,this._lookahead=null}input(e){this._tokenizer.init(e.replaceAll("\u2019","'")),this._lookahead=this._tokenizer.getNextToken();let n=this.Program();if(this._lookahead)throw new SyntaxError("Missing operators");return this._solver.solve(n)}Program(){return{type:"Program",value:this.Expression()}}Expression(){if(!this._lookahead)return{type:"Expression",value:[]};let e=[];for(;this._lookahead;)switch(this._lookahead.type){case"MOVE":{e.push(this.Sequence());break}case"(":{e.push(this.ParentesizedExpression());break}case"[":{e.push(this.ConmutatorExpression());break}default:return e.length===1?e[0]:{type:"Expression",value:e}}return e.length===1?e[0]:{type:"Expression",value:e}}ParentesizedExpression(){this._eat("(");let e=this.Expression(),n=+this._eat(")").value.slice(1)||1;return{type:"ParentesizedExpression",value:{expr:e,cant:n}}}ConmutatorExpression(){this._eat("[");let e=this.Expression();this._eat(",");let n=this.Expression(),i=+this._eat("]").value.slice(1)||1;return{type:"ConmutatorExpression",value:{expr1:e,expr2:n,cant:i}}}Sequence(){let e=[];for(;this._lookahead&&this._lookahead.type==="MOVE";)e.push(this.Move());return{type:"Sequence",value:e}}Move(){return{type:"Move",value:this._eat("MOVE").value}}_eat(e,n){const i=this._lookahead;if(i==null)throw new SyntaxError(`Unexpected end of input, expected: ${e}`);if(i.type!=e)throw new SyntaxError(`Unexpected token: ${i.type}, expected: ${e}`);if(n&&i.value!=n)throw new SyntaxError(`Error, expected "${n}" but got "${i.value}"`);return this._lookahead=this._tokenizer.getNextToken(),i}}const sD=/^([\d]+)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/;class Ks{constructor(){}static parseScramble(e,n){let i=[],s=e.split(/\s+/g),r,o,a,l;for(let c=0,u=s.length;c<u;c+=1)if(r=sD.exec(s[c]),r!=null){if(a="FRUBLDfrubldzxySME".indexOf(r[2]),a>14){l="2'".indexOf(r[5]||"X")+2,a=[0,4,5][a%3],i.push([n.indexOf("FRUBLD".charAt(a)),2,l]),i.push([n.indexOf("FRUBLD".charAt(a)),1,4-l]);continue}o=a<12?~~r[1]||~~r[4]||(r[3]=="w"||a>5)&&2||1:-1,l=(a<12?1:-1)*("2'".indexOf(r[5]||"X")+2),i.push([n.indexOf("FRUBLD".charAt(a%6)),o,l])}return i}static parseNNN(e,n){let i=Ks.parseNNNString(e);const s="URFDLB";let r=Ks.parseScramble(i,s),o=[];for(let a=0,l=r.length;a<l;a+=1)r[a][1]>0?o.push([r[a][1],s.charAt(r[a][0]),[1,2,-1][r[a][2]-1]]):o.push([n,s.charAt(r[a][0]),[1,2,-1][-r[a][2]-1]]);return o}static parseMegaminx(e){let n=[];if(/R|D/.test(e)){if(/(\+\+|\-\-)/.test(e)){let i=e.match(/[RD](?:\+\+|--)|U'?/g)||[];for(let s=0,r=i.length;s<r;s+=1)switch(i[s]){case"R++":n.push([1,2,-1]);break;case"R--":n.push([1,-2,-1]);break;case"D++":n.push([0,2,-1]);break;case"D--":n.push([0,-2,-1]);break;case"U":n.push([0,-1,1]);break;case"U'":n.push([0,1,1]);break}}}else{let i=e.match(/[+-]{2}|U'?/g);if(!i)return n;for(let s=0,r=i.length;s<r;s+=1)switch(i[s]){case"U":n.push([0,-1,1]);break;case"U'":n.push([0,1,1]);break;case"++":case"+-":case"-+":case"--":n.push([1,2*(i[s][0]=="-"?-1:1),-1]),n.push([0,2*(i[s][1]=="-"?-1:1),-1]);break}}return n}static parsePyraminx(e){let n=Ks.parseScramble(e,"URLB"),i=[];for(let s=0,r=n.length;s<r;s+=1)i.push([n[s][0],n[s][2]-2,-3,n[s][1]]);return i}static parseSkewb(e){let n=Ks.parseScramble(e,"URLB"),i=[];for(let s=0,r=n.length;s<r;s++)i.push([n[s][0],n[s][2]-2]);return i}static parseSquare1(e){let n=e.replace(/\s+/g,"").split("/"),i=/\s*\(?(-?\d+), *(-?\d+)\)?\s*/,s=[];for(let r=0,o=n.length;r<o;r+=1){let a=i.exec(n[r]);if(a){let l=~~a[1],c=~~a[2];l!=0&&s.push([1,l]),c!=0&&s.push([2,c])}r!=o-1&&s.push([0,6])}return s}static parseClock(e){let n=e.replace("\\n"," ").split(/\s+/g),i=[];if(e.indexOf("/")>-1)console.info("Concise notation not implemented yet!");else if(!/(u|d)/.test(e)){let s=["UL","UR","DL","DR","ALL","U","R","D","L"],r=[8,4,2,1,15,12,5,3,10],o=1;for(let a=0,l=n.length;a<l;a+=1)if(n[a]==="y2")i.push([-1,-1,-1]);else{let c=[0,0,0];for(let u=0,f=s.length;u<f;u+=1)if(n[a].startsWith(s[u])){let h=parseInt(n[a].substr(s[u].length,1));n[a].indexOf("-")>-1&&(h=-h),c[0]=r[u],c[o]=h;break}(c[1]!=0||c[2]!=0)&&i.push(c)}}return i}static parseNNNString(e){return new iD().input(e)}}class rD{constructor(e,n){Me(this,"N");Me(this,"mask");Me(this,"mt",[]);Me(this,"mti");Me(this,"m01");Me(this,"M");Me(this,"N1");Me(this,"NM");Me(this,"MN");Me(this,"U");Me(this,"L");Me(this,"R");this.N=624,this.mask=4294967295,this.mt=[],this.mti=NaN,this.m01=[0,2567483615],this.M=397,this.N1=this.N-1,this.NM=this.N-this.M,this.MN=this.M-this.N,this.U=2147483648,this.L=2147483647,this.R=4294967296,arguments.length>1?this.initByArray(n,e):arguments.length>0?this.init(e):this.init()}dmul0(e,n){var i=4294901760,s=65535,r=4294967296,o=e&s,a=(e&i)>>>16,l=n&s,c=(n&i)>>>16,u,f,h;return u=o*l,f=u>>>16,u&=s,f+=o*c,f&=s,f+=a*l,f&=s,h=f<<16|u,h<0?h+r:h}init0(e){let n=arguments.length>0&&isFinite(e)?e&this.mask:4357,i;for(this.mt=[n],this.mti=this.N,i=1;i<this.N;this.mt[i++]=n=69069*n&this.mask);}init(e){let n=arguments.length>0&&isFinite(e)?e&this.mask:5489,i;for(this.mt=[n],this.mti=this.N,i=1;i<this.N;this.mt[i]=n=this.dmul0(n^n>>>30,1812433253)+i++);}initByArray(e,n){var i=this.N-1;let s=e.length,r,o,a,l;for(this.init(arguments.length>1&&isFinite(n)?n:19650218),r=this.mt[0],o=1,a=0,l=Math.max(this.N,s);l;a%=s,l--)this.mt[o]=r=(this.mt[o++]^this.dmul0(r^r>>>30,1664525))+e[a]+a++&this.mask,o>i&&(this.mt[0]=r=this.mt[i],o=1);for(l=this.N-1;l;l--)this.mt[o]=r=(this.mt[o]^this.dmul0(r^r>>>30,1566083941))-o++&this.mask,o>i&&(this.mt[0]=r=this.mt[i],o=1);this.mt[0]=2147483648}skip(e){this.mti=e<=0?-1:this.mti+e}randomInt32(){for(var e,n;this.mti>=this.N||this.mti<0;){for(this.mti=Math.max(0,this.mti-this.N),n=0;n<this.NM;e=this.mt[n]&this.U|this.mt[n+1]&this.L,this.mt[n]=this.mt[n+this.M]^e>>>1^this.m01[e&1],n++);for(;n<this.N1;e=this.mt[n]&this.U|this.mt[n+1]&this.L,this.mt[n]=this.mt[n+this.MN]^e>>>1^this.m01[e&1],n++);e=this.mt[this.N1]&this.U|this.mt[0]&this.L,this.mt[this.N1]=this.mt[this.M-1]^e>>>1^this.m01[e&1]}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e<0?e+this.R:e}randomInt53(){var e=67108864;return(this.randomInt32()>>>5)*e+(this.randomInt32()>>>6)}randomReal32(){var e=4294967296;return this.randomInt32()/e}randomReal53(){var e=9007199254740992;return this.randomInt53()/e}randomString(e){var n,i,s="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=0;n<e;s+=r.charAt((n++%5>0?i:i=this.randomInt32())&63),i>>>=6);return s}}const Mn=[],h1=[1];for(let t=0;t<32;++t){Mn[t]=[];for(let e=0;e<32;++e)Mn[t][e]=0}for(let t=0;t<32;++t){Mn[t][0]=Mn[t][t]=1,h1[t+1]=h1[t]*(t+1);for(let e=1;e<t;++e)Mn[t][e]=Mn[t-1][e-1]+Mn[t-1][e]}function Hl(t,e,n,i,s,r){let o=t[e];t[e]=t[s]^r,t[s]=t[i]^r,t[i]=t[n]^r,t[n]=o^r}function on(t,...e){let n=e.length-1,i=t[e[n]];for(let s=n;s>0;s-=1)t[e[s]]=t[e[s-1]];return t[e[0]]=i,on}function Ms(t,e,n,i){n=n||1;let s=e.length,r=[];for(let o=0;o<s;o++)r[o]=t[e[o]];for(let o=0;o<s;o++){let a=(o+n)%s;t[e[a]]=r[o],i&&(t[e[a]]+=i[a]-i[o]+i[i.length-1])}return Ms}function Os(t,e){return t[e>>3]>>((e&7)<<2)&15}function jp(t,e,n){let i,s;for(t[n-1]=0,i=n-2;i>=0;--i)for(t[i]=e%(n-i),e=~~(e/(n-i)),s=i+1;s<n;++s)t[s]>=t[i]&&++t[s]}function ko(t,e){let n,i,s;for(i=0,n=0;n<e;++n)for(i*=e-n,s=n+1;s<e;++s)t[s]<t[n]&&++i;return i}function Rc(t,e){let n,i;for(i=0,n=e-2;n>=0;--n)i^=t%(e-n),t=~~(t/(e-n));return i&1}function us(t,e,n){e=e||8;let i=0,s=1985229328;for(let r=0;r<e-1;++r){let o=t[r]<<2;i=(e-r)*i+(s>>o&7),s-=286331152<<o}return n<0?i>>1:i}function xs(t,e,n,i){n=(n||8)-1;let s=1985229328,r=0;i<0&&(e<<=1);for(let o=0;o<n;++o){let a=h1[n-o],l=~~(e/a);r^=l,e%=a,l<<=2,t[o]=s>>l&7;let c=(1<<l)-1;s=(s&c)+(s>>4&~c)}return i<0&&(r&1)!=0?(t[n]=t[n-1],t[n-1]=s&7):t[n]=s&7,t}function oD(t,e,n){let i=Math.abs(n),s=n<0?0:t[0]%i;for(let r=e-1;r>0;r--)s=s*i+t[r]%i;return s}function aD(t,e,n,i){let s=Math.abs(i),r=s*n;for(let o=1;o<n;o++)t[o]=e%s,r-=t[o],e=~~(e/s);return t[0]=(i<0?r:e)%s,t}function Xo(t,e,n){let i=this;i.length=e,i.evenbase=n,i.get=t=="p"?function(s){let r=this;return us(s,r.length,r.evenbase)}:function(s){let r=this;return oD(s,r.length,r.evenbase)},i.set=t=="p"?function(s,r){let o=this;return xs(s,r,o.length,o.evenbase)}:function(s,r){let o=this;return aD(s,r,o.length,o.evenbase)}}function If(t,e,n,i,s){for(let r=0;r<t.length;r++)for(let o=0;o<t[r].length;o++)e[t[r][(o+i[r])%t[r].length]]=~~(t[n[r]][o]/s)}function Yp(t,e,n,i){if(i=i||6,Array.isArray(n)){let s=new Xo(n[1],n[2],n[3]);n=n[0];for(let r=0;r<i;r++){t[r]=[];for(let o=0;o<e;o++){let a=s.set([],o);n(a,r),t[r][o]=s.get(a)}}}else for(let s=0;s<i;s++){t[s]=[];for(let r=0;r<e;r++)t[s][r]=n(r,s)}}function vT(t,e){e==0?Hl(t,0,7,8,4,1):e==1?Hl(t,3,6,11,7,0):e==2?Hl(t,0,1,2,3,0):e==3?Hl(t,2,5,10,6,1):e==4?Hl(t,1,4,9,5,0):e==5&&Hl(t,11,10,9,8,0)}let iy=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],sy=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];class Aa{constructor(){Me(this,"ca");Me(this,"ea");this.ca=[0,1,2,3,4,5,6,7],this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}static EdgeMult(e,n,i){for(let s=0;s<12;s++)i.ea[s]=e.ea[n.ea[s]>>1]^n.ea[s]&1}static CornMult(e,n,i){for(let s=0;s<8;s++){let r=((e.ca[n.ca[s]&7]>>3)+(n.ca[s]>>3))%3;i.ca[s]=e.ca[n.ca[s]&7]&7|r<<3}}static CubeMult(e,n,i){Aa.CornMult(e,n,i),Aa.EdgeMult(e,n,i)}init(e,n){return this.ca=e.slice(),this.ea=n.slice(),this}isEqual(e){return!(this.ca.some((n,i)=>n!=e.ca[i])||this.ea.some((n,i)=>n!=e.ea[i]))}toFaceCube(e,n){e=e||iy,n=n||sy;let i="URFDLB",s=[];for(let r=0;r<54;r++)s[r]=i[~~(r/9)];for(let r=0;r<8;r++){let o=this.ca[r]&7,a=this.ca[r]>>3;for(let l=0;l<3;l++)s[e[r][(l+a)%3]]=i[~~(e[o][l]/9)]}for(let r=0;r<12;r++){let o=this.ea[r]>>1,a=this.ea[r]&1;for(let l=0;l<2;l++)s[n[r][(l+a)%2]]=i[~~(n[o][l]/9)]}return s.join("")}invForm(e){for(let n=0;n<12;n++)this.ea[e.ea[n]>>1]=n<<1|e.ea[n]&1;for(let n=0;n<8;n++)this.ca[e.ca[n]&7]=n|32>>(e.ca[n]>>3)&24;return this}fromFacelet(e,n,i){n=n||iy,i=i||sy;let s=0,r=[],o=e[4]+e[13]+e[22]+e[31]+e[40]+e[49];for(let h=0;h<54;++h){if(r[h]=o.indexOf(e[h]),r[h]==-1)return-1;s+=1<<(r[h]<<2)}if(s!=10066329)return-1;let a,l,c,u,f;for(c=0;c<8;++c){for(f=0;f<3&&!(r[n[c][f]]==0||r[n[c][f]]==3);++f);for(a=r[n[c][(f+1)%3]],l=r[n[c][(f+2)%3]],u=0;u<8;++u)if(a==~~(n[u][1]/9)&&l==~~(n[u][2]/9)){this.ca[c]=u|f%3<<3;break}}for(c=0;c<12;++c)for(u=0;u<12;++u){if(r[i[c][0]]==~~(i[u][0]/9)&&r[i[c][1]]==~~(i[u][1]/9)){this.ea[c]=u<<1;break}if(r[i[c][0]]==~~(i[u][1]/9)&&r[i[c][1]]==~~(i[u][0]/9)){this.ea[c]=u<<1|1;break}}return this}}let _s=[];for(let t=0;t<18;t++)_s[t]=new Aa;_s[0].init([3,0,1,2,4,5,6,7],[6,0,2,4,8,10,12,14,16,18,20,22]);_s[3].init([20,1,2,8,15,5,6,19],[16,2,4,6,22,10,12,14,8,18,20,0]);_s[6].init([9,21,2,3,16,12,6,7],[0,19,4,6,8,17,12,14,3,11,20,22]);_s[9].init([0,1,2,3,5,6,7,4],[0,2,4,6,10,12,14,8,16,18,20,22]);_s[12].init([0,10,22,3,4,17,13,7],[0,2,20,6,8,10,18,14,16,4,12,22]);_s[15].init([0,1,11,23,4,5,18,14],[0,2,4,23,8,10,12,21,16,18,7,15]);for(let t=0;t<18;t+=3)for(let e=0;e<2;e++)Aa.EdgeMult(_s[t+e],_s[t],_s[t+e+1]),Aa.CornMult(_s[t+e],_s[t],_s[t+e+1]);Aa.moveCube=_s;Aa.prototype.edgeCycles=function(){let t=[],e=[0,0,0],n=0,i=!1;for(let s=0;s<12;++s){if(t[s])continue;let r=-1,o=0,a=s;do t[a]=!0,++r,o^=this.ea[a]&1,a=this.ea[a]>>1;while(a!=s);n+=r>>1,r&1&&(i=!i,++n),o&&(r==0?++e[0]:r&1?e[2]^=1:++e[1])}if(e[1]+=e[2],e[0]<e[1])n+=e[0]+e[1]>>1;else{let s=[0,2,3,5,6,8,9];n+=e[1]+s[e[0]-e[1]>>1]}return n-~~i};function ml(t,e,n,i,s,r,o,a){let l=Array.isArray(s);r=r||6,o=o||3,a=a||256,i=i||256;for(let u=0,f=n+7>>>3;u<f;u++)t[u]=-1;t[e>>3]^=15<<((e&7)<<2);let c=0;for(let u=0;u<=i;u++){let f=0,h=u>=a,d=u+1^15,p=h?15:u,m=h?u:15;e:for(let _=0;_<n;_++,c>>=4){if((_&7)==0&&(c=t[_>>3],!h&&c==-1)){_+=7;continue}if((c&15)==p)for(let b=0;b<r;b++){let g=_;for(let x=0;x<o;x++)if(g=l?s[b][g]:s(g,b),Os(t,g)==m){if(++f,h){t[_>>3]^=d<<((_&7)<<2);continue e}t[g>>3]^=d<<((g&7)<<2)}}}if(f==0)break}}function Nl(t,e,n){this.N_STATES=n.length,this.N_MOVES=t,this.N_POWER=e,this.state_params=n,this.inited=!1}let Or=Nl.prototype;Or.search=function(t,e,n){if(n=(n||99)+1,!this.inited){this.move=[],this.prun=[];for(let s=0;s<this.N_STATES;s++){let r=this.state_params[s],o=r[0],a=r[1],l=r[2],c=r[3],u=r[4];this.move[s]=[],this.prun[s]=[],Yp(this.move[s],l,a,this.N_MOVES),ml(this.prun[s],o,l,c,this.move[s],this.N_MOVES,this.N_POWER,u)}this.inited=!0}this.sol=[];let i;for(i=e;i<n&&!this.idaSearch(t,i,-1);i++);return i==n?null:this.sol.reverse()};Or.toStr=function(t,e,n){let i=[];for(let s=0;s<t.length;s++)i.push(e[t[s][0]]+n[t[s][1]]);return i.join(" ").replace(/ +/g," ")};Or.idaSearch=function(t,e,n){let i=this.N_STATES;for(let r=0;r<i;r++)if(Os(this.prun[r],t[r])>e)return!1;if(e==0)return!0;let s=t[0]+e+n+1;for(let r=0;r<this.N_MOVES;r++){let o=(r+s)%this.N_MOVES;if(o==n)continue;let a=t.slice();for(let l=0;l<this.N_POWER;l++){for(let c=0;c<i;c++)a[c]=this.move[c][o][a[c]];if(this.idaSearch(a,e-1,o))return this.sol.push([o,l]),!0}}return!1};function lD(t){return t}function cD(t,e,n,i){this.solvedStates=t,this.doMove=e,this.movesList=[];for(let s in n)this.movesList.push([s,n[s]]);this.prunHash=i||lD,this.prunTable={},this.toUpdateArr=null,this.prunTableSize=0,this.prunDepth=-1,this.cost=0}Or=cD.prototype;Or.updatePrun=function(t){t=t===void 0?this.prunDepth+1:t;for(let e=this.prunDepth+1;e<=t;e++){if(e<1){this.prevSize=0;for(let n=0;n<this.solvedStates.length;n++){let i=this.prunHash(this.solvedStates[n]);i in this.prunTable||(this.prunTable[i]=e,this.prunTableSize++)}}else this.updatePrunBFS(e-1);if(this.cost==0)return;this.prunDepth=e,this.prevSize=this.prunTableSize}};Or.updatePrunBFS=function(t){if(this.toUpdateArr==null){this.toUpdateArr=[];for(let e in this.prunTable)this.prunTable[e]==t&&this.toUpdateArr.push(e)}for(;this.toUpdateArr.length!=0;){let e=this.toUpdateArr.pop();for(let n=0;n<this.movesList.length;n++){let i=this.doMove(e,this.movesList[n][0]);!i||i in this.prunTable||(this.prunTable[i]=t+1,this.prunTableSize++)}if(this.cost>=0){if(this.cost==0)return;this.cost--}}this.toUpdateArr=null};Or.search=function(t,e,n){return this.sol=[],this.subOpt=!1,this.state=t,this.visited={},this.maxl=e=e||0,this.searchNext(n)};Or.searchNext=function(t,e){for(t=t+1||99,this.prevSolStr=this.solArr?this.solArr.join(","):null,this.solArr=null,this.cost=e||-1;this.maxl<t;this.maxl++){if(this.updatePrun(Math.ceil(this.maxl/2)),this.cost==0)return null;if(this.idaSearch(this.state,this.maxl,null,0))break}return this.solArr};Or.getPruning=function(t){let e=this.prunTable[this.prunHash(t)];return e===void 0?this.prunDepth+1:e};Or.idaSearch=function(t,e,n,i){if(this.getPruning(t)>e)return!1;if(e==0){if(this.solvedStates.indexOf(t)==-1)return!1;let o=this.getSolArr();return this.subOpt=!0,o.join(",")==this.prevSolStr?!1:(this.solArr=o,!0)}if(!this.subOpt){if(t in this.visited&&this.visited[t]<i)return!1;this.visited[t]=i}if(this.cost>=0){if(this.cost==0)return!0;this.cost--}let s=n==null?"":this.movesList[n][0],r=n==null?-1:this.movesList[n][1];for(let o=this.sol[i]||0;o<this.movesList.length;o++){let a=this.movesList[o],l=a[1]^r,c=a[0];if(l==0||(l&15)==0&&c<=s)continue;let u=this.doMove(t,c);if(!(!u||u==t)){if(this.sol[i]=o,this.idaSearch(u,e-1,o,i+1))return!0;this.sol.pop()}}return!1};Or.getSolArr=function(){let t=[];for(let e=0;e<this.sol.length;e++)t.push(this.movesList[this.sol[e]][0]);return t};let Sb=function(){let t,e,n;function i(){return e++,t.randomReal53()}function s(){return[e,n]}function r(o,a){if(a&&(a!=n||e>o)){let l=[];for(let c=0;c<a.length;c++)l[c]=a.charCodeAt(c);t=new rD(l[0],l),e=0,n=a}for(;e<o;)t.randomReal53(),e++}return r(0,""+new Date().getTime()),{random:i,getSeed:s,setSeed:r}}();function li(t){return t[~~(Sb.random()*t.length)]}function Et(t){return~~(Sb.random()*t)}function uD(t){let e=0,n=0;for(let i=0;i<t.length;i++)t[i]!=0&&(Sb.random()<t[i]/(e+t[i])&&(n=i),e+=t[i]);return n}function Po(t,e,n){t=t||[[""]],e=e||[""],n=n||0;for(var i=0,s=-1,r=[],o,a,l=0;l<n;l++){do o=Et(t.length),a=Et(t[o].length),o!=s&&(i=0,s=o);while((i>>a&1)!=0);i|=1<<a,t[o][a].constructor==Array?r.push(li(t[o][a])+li(e)):r.push(t[o][a]+li(e))}return r.join(" ")}let Df=new Map,d1=new Map,ry=new Map,jc=new Map;function xi(t,e,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)Df.set(t[i],e),d1.set(t[i],[]),ry.set(t[i],[]);else Df.set(t,e),n!=null&&(d1.set(t,n[0]),ry.set(t,n[1]));return xi}function p1(t){var e=function(i,s){if(i[0]=="$"){var r=[s];return s[0]=="["&&(r=JSON.parse(s)),Df.get(r[0].toString()).apply(this,r)}else return i[0]=="#"?Po.apply(this,JSON.parse("["+s+"]")):""},n=/[$#]\{([^\}]+)\}/g;return t.replace(n,e)}function du(t,e){return t==null?uD(e):t}var ai=(t=>(t[t.NORMAL=0]="NORMAL",t[t.OLL=1]="OLL",t[t.PLL=2]="PLL",t[t.CMLL=3]="CMLL",t[t.F2L=4]="F2L",t[t.COLL=5]="COLL",t[t.WV=6]="WV",t[t.ELL=7]="ELL",t[t.VLS=8]="VLS",t[t.ZBLL=9]="ZBLL",t[t.OLLCP=10]="OLLCP",t[t.GRAY=11]="GRAY",t[t.CENTERS=12]="CENTERS",t[t.CROSS=13]="CROSS",t[t.FL=14]="FL",t[t.YCROSS=15]="YCROSS",t))(ai||{});const fD={green:"rgb(0, 157, 84)",red:"rgb(220,66,47)",blue:"rgb(61, 129, 246)",orange:"rgb(232, 112, 0)",yellow:"rgb(255,235,59)",white:"rgb(230, 230, 230)",black:"rgb(0, 0, 0)",gray:"rgb(80, 80, 80)",lightGray:"rgb(232, 232, 232)",violet:"rgb(138, 27, 255)",pink:"rgb(237, 150, 161)",lgreen:"rgb(74, 217, 49)",lyellow:"rgb(220, 211, 165)",lblue:"rgb(83, 177, 243)",pgreen:"rgb(16, 162, 4)",pred:"rgb(213, 0, 0)",pblue:"rgb(43, 43, 255)",porange:"rgb(255, 108, 11)",pyellow:"rgb(255, 242, 0)",pwhite:"rgb(255, 255, 255)",pblack:"rgb(0, 0, 0)",pgray:"rgb(200, 200, 200)",pviolet:"rgb(185, 104, 251)",ppink:"rgb(249, 187, 204)",plgreen:"rgb(74, 217, 49)",plyellow:"rgb(255, 255, 183)",plblue:"rgb(83, 177, 243)"};function oi(t){return fD[t]||"rgb(150, 150, 150)"}function hD(t){let e=t.split("(")[1].split(")")[0].split(",").map(Number);return e[0]<<16|e[1]<<8|e[2]}const Kn={y:oi("yellow"),r:oi("red"),o:oi("orange"),b:oi("blue"),g:oi("green"),w:oi("white"),x:oi("gray"),d:oi("black"),v:oi("violet"),yellow:oi("yellow"),red:oi("red"),orange:oi("orange"),blue:oi("blue"),green:oi("green"),white:oi("white"),gray:oi("gray"),lightGray:oi("lightGray"),black:oi("black"),violet:oi("violet"),pink:oi("pink"),lblue:oi("lblue"),lyellow:oi("lyellow"),lgreen:oi("lgreen")},Eb="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NgAAIAAAUAAR4f7BQAAAAASUVORK5CYII=",yT=["222so","222o","2223","222eg","222eg0","222eg1","222eg2","222nb"],wT=["333","333ni","333fm","333oh","333o","edges","corners","ll","zbll","cll","ell","lse","lsemu","cmll","f2l","lsll2","2gll","zbls","zzll","oll","pll","eoline","easyc","333ft","2gen","2genl","roux","3gen_F","3gen_L","RrU","half","lsll"],xT=["444wca","444bld","444m","444","444yj","4edge","RrUu"],MT=["555wca","555bld","555","5edge"],ST=["666wca","666si","666p","666s","6edge"],ET=["777wca","777si","777p","777s","7edge"],dD=["pyrso","pyro","pyrm","pyrl4e","pyr4c","pyrnb"],pD=["skbso","skbo","skb","skbnb"],mD=["sqrs","sqrcsp","sq1h","sq1t"],gD=["clkwca","clk","clkwca","clko","clkc","clke"],_D=["mgmp","mgmc","mgmo"],oy=[{type:"rubik",order:[2]},{type:"rubik",order:[3]},{type:"rubik",order:[4]},{type:"rubik",order:[5]},{type:"rubik",order:[6]},{type:"rubik",order:[7]},{type:"pyraminx",order:[3]},{type:"skewb"},{type:"square1"},{type:"clock"},{type:"megaminx"}],Yg=[yT,wT,xT,MT,ST,ET,dD,pD,mD,gD,_D];for(let t=0,e=Yg.length;t<e;t+=1){oy[t].view="2d";for(let n=0,i=Yg[t].length;n<i;n+=1)jc.set(Yg[t][n],oy[t])}const ma=[["WCA",[["3x3x3","333",0,30,[3]],["2x2x2","222so",0,30,[3]],["4x4x4","444wca",-40,40,[4]],["5x5x5","555wca",-60,48,[4]],["6x6x6","666wca",-80,54,[6]],["7x7x7","777wca",-100,60,[6]],["3x3x3 BLD","333ni",0,30,[3]],["3x3x3 BLD","r3ni",5,30,[3]],["3x3 FM","333fm",0,30,[3]],["3x3 OH","333oh",0,30,[3]],["Clock","clkwca",0,30,[6]],["Megaminx","mgmp",-70,55,[5]],["Pyraminx","pyrso",-10,36,[3]],["Skewb","skbso",0,33,[3]],["Sq-1","sqrs",0,50,[8,2]],["4x4 BLD","444bld",-40,40,[4]],["5x5 BLD","555bld",-60,48,[4]]]],["3x3x3",[["WCA","333",0],["Random Move","333o",25],["3x3 for noobs","333noob",25],["Edges only","edges",0],["Corners only","corners",0],["Last Layer (LL)","ll",0],["ZBLL","zbll",0],["LL Corners","cll",0],["LL Edges","ell",0],["Last six edges","lse",0],["Last six edges <M,U>","lsemu",0],["Roux L10P","cmll",0],["F2L","f2l",0],["LS + LL","lsll2",0],["2GLL","2gll",0],["ZBLS","zbls",0],["ZZLL","zzll",0],["OLL","oll",0],["PLL","pll",0],["EOLine","eoline",0],["Easy Cross","easyc",3],["3x3 FT","333ft",0]]],["3x3x3 subsets",[["2-generator R,U","2gen",25],["2-generator L,U","2genl",25],["Roux-generator M,U","roux",25],["3-generator F,R,U","3gen_F",25],["3-generator R,U,L","3gen_L",25],["3-generator R,r,U","RrU",25],["half turns only","half",25],["last slot + last layer (old)","lsll",15]]],["2x2x2",[["WCA","222so",0],["Optimal","222o",0],["3-gen","2223",25],["EG","222eg",0],["EG0","222eg0",0],["EG1","222eg1",0],["EG2","222eg2",0],["No Bar","222nb",0]]],["4x4x4",[["WCA","444wca",-40],["Random State","444m",40],["SiGN","444",40],["YJ","444yj",40],["Edges","4edge",8],["R,r,U,u","RrUu",40]]],["5x5x5",[["WCA","555wca",60],["SiGN","555",60],["Edges","5edge",8]]],["6x6x6",[["WCA","666wca",80],["SiGN","666si",80],["Prefix","666p",80],["Suffix","666s",80],["Edges","6edge",8]]],["7x7x7",[["WCA","777wca",100],["SiGN","777si",100],["Prefix","777p",100],["Suffix","777s",100],["Edges","7edge",8]]],["Clock",[["WCA","clkwca",0],["JAAP","clk",0],["Optimal","clko",0],["Conciso","clkc",0],["Efficient Pin Order","clke",0]]],["Megaminx",[["WCA","mgmp",70],["Carrot","mgmc",70],["Old Style","mgmo",70]]],["Pyraminx",[["WCA","pyrso",10],["Optimal","pyro",0],["Random Move","pyrm",25],["L4E","pyrl4e",0],["4 tips","pyr4c",0],["No bar","pyrnb",0]]],["Skewb",[["WCA","skbso",0],["Optimal","skbo",0],["Random Move","skb",25],["No bar","skbnb",0]]],["Square-1",[["WCA","sqrs",0],["CSP","sqrcsp",0],["Face Turn Metric","sq1h",40],["Twist Metric","sq1t",20]]],["LxMxN",[["1x3x3 (Floppy Cube)","133",0],["2x2x3 (Tower Cube)","223",0],["2x3x3 (Domino)","233",25],["3x3x4","334",40],["3x3x5","335",25],["3x3x6","336",40],["3x3x7","337",40],["8x8x8","888",120],["9x9x9","999",120],["10x10x10","101010",120],["11x11x11","111111",120],["NxNxN","cubennn",12]]],["Gear Cube",[["Random State","gearso",0],["Optimal","gearo",0],["Random Move","gear",10]]],["Gigaminx",[["Pochmann","giga",300]]],["Helicopter Cube",[["Random","heli",40]]],["Redi Cube",[["MoYu","redim",8],["old","redi",20]]],["Ivy cube",[["Random State","ivyso",0],["Optimal","ivyo",0],["Random Move","ivy",10]]],["Master Pyraminx",[["Random","mpyr",42]]],["Pyraminx Crystal",[["Pochmann","prcp",70],["Old Style","prco",70]]],["Siamese Cube",[["1x1x3","sia113",25],["1x2x3","sia123",25],["2x2x2","sia222",25]]],["Square-2",[["Random","sq2",20]]],["Super Floppy",[["Random","sfl",25]]],["Super Square-1",[["Twist Metric","ssq1t",20]]],["UFO",[["Jaap Style","ufo",25]]],["Other",[["FTO (Face-Turning Octahedron)","fto",25]]],["Bandaged Cube",[["Bicube","bic",30],["Square-1 /,(1,0)","bsq",25]]],["Megaminx subsets",[["2-generator R,U","minx2g",30],["LS + LL","mlsll",20]]],["Relays",[["Lots of 3x3x3s","r3",5],["234 Relay","r234",0],["2345 Relay","r2345",0],["23456 Relay","r23456",0],["234567 Relay","r234567",0],["234 Relay (WCA)","r234w",0],["2345 Relay (WCA)","r2345w",0],["23456 Relay (WCA)","r23456w",0],["234567 Relay (WCA)","r234567w",0]]]];function bD(t){return[yT,wT,xT,MT,ST,ET].some(e=>e.some(n=>n===t))}const ay=new Map(ma.reduce((t,e)=>[...t,...e[1].map(n=>[n[1],n[0]==="WCA"?e[0]:n[0]])],[]));class Tt{constructor(e){Me(this,"stickers");Me(this,"boundingBox");Me(this,"hasCallback");Me(this,"callback");Me(this,"anchor");Me(this,"_cached_mass_center");Me(this,"raw");Me(this,"allPointsRef");this.stickers=(e||[]).map(n=>n.clone()),this.hasCallback=!1,this.callback=()=>{},this.allPointsRef=[],this.boundingBox=[],this.anchor=ie,this._cached_mass_center=ie,this.updateMassCenter(),this.computeBoundingBox()}updateMassCenter(e){let n=this.getAllPoints(),i=n.reduce((s,r)=>s.add(r),new et);return this._cached_mass_center=i.div(n.length||1),e&&this.stickers.forEach(s=>s.updateMassCenter()),this._cached_mass_center}get length(){return this.stickers.length}get totalPoints(){let e=0,n=this.stickers;for(let i=0,s=n.length;i<s;i+=1)e+=n[i].points.length;return e}getAllPoints(){let e=[];for(let n=0,i=this.stickers.length;n<i;n+=1)e.push(...this.stickers[n]._generator.points);return e}getMassCenter(e=!0){return e||this.updateMassCenter(),this._cached_mass_center}setColor(e){for(let n=0,i=Math.min(e.length,this.stickers.length);n<i;n+=1)this.stickers[n].color=e[n]}add(e,n){return n?(this.stickers.forEach(i=>i.add(e,!0)),this.boundingBox.forEach(i=>i.add(e,!0)),this._cached_mass_center.add(e,!0),this.anchor&&this.anchor.add(e,!0),this):this.clone().add(e,!0)}sub(e,n){return n?(this.stickers.forEach(i=>i.sub(e,!0)),this.boundingBox.forEach(i=>i.sub(e,!0)),this._cached_mass_center.sub(e,!0),this.anchor&&this.anchor.sub(e,!0),this):this.clone().sub(e,!0)}mul(e,n){return n?(this.stickers.forEach(i=>i.mul(e,!0)),this.boundingBox.forEach(i=>i.mul(e,!0)),this._cached_mass_center.mul(e,!0),this.anchor&&this.anchor.mul(e,!0),this):this.clone().mul(e,!0)}div(e){return self?(this.stickers.forEach(n=>n.div(e,!0)),this.boundingBox.forEach(n=>n.div(e,!0)),this._cached_mass_center.div(e,!0),this.anchor&&this.anchor.div(e,!0),this):this.clone().div(e)}rotate(e,n,i,s){if(s)return this.stickers.map(o=>o.rotate(e,n,i,!0)),this._cached_mass_center.rotate(e,n,i,!0),this.anchor&&this.anchor.rotate(e,n,i,!0).toNormal(),this;let r=new Tt;return r.stickers=this.stickers.map(o=>o.rotate(e,n,i)),r._cached_mass_center=this._cached_mass_center.rotate(e,n,i),this.anchor&&(r.anchor=this.anchor.rotate(e,n,i).toNormal()),r}direction(e,n,i,s,r){let o=[0,0,0],a=this.stickers,l=0,c=r||(()=>!0);for(let u=0,f=a.length;u<f;u+=1)if(c(a[u])&&(l+=1,o[a[u].direction(e,n,i,s)+1]+=1,o[0]>0&&o[2]>0))return 0;return o[1]===l?0:o[0]>0?-1:1}direction1(e,n,i){let s=[0,0,0],r=this.stickers,o=r.length;for(let a=0;a<o;a+=1)if(s[r[a].direction1(e,n,i)+1]+=1,s[0]>0&&s[2]>0||s[1]>0)return 0;return s[0]?-1:1}reflect(e,n,i,s){let r=this.clone();return r.stickers=r.stickers.map(o=>o.reflect(e,n,i)),r.anchor&&(r.anchor=r.anchor.reflect(e,n,i)),s&&r.stickers.forEach(o=>o.reverse(!0)),r}reflect1(e,n,i){let s=this.clone();return s.stickers=s.stickers.map(r=>r.reflect1(e,n)),s.anchor&&(s.anchor=s.anchor.reflect1(e,n)),i&&s.stickers.forEach(r=>r.reverse(!0)),s}reverse(){return new Tt(this.stickers.map(e=>e.reverse()))}contains(e){for(let n=0,i=this.stickers.length;n<i;n+=1)if(this.stickers[n].color===e||this.stickers[n].oColor===e)return!0;return!1}clone(e){let n=new Tt(this.stickers);return e&&this.hasCallback&&(n.hasCallback=this.hasCallback,n.callback=this.callback),this.anchor&&(n.anchor=this.anchor.clone()),n.allPointsRef=this.allPointsRef.map(i=>i.slice()),n}equal(e){let n=this.stickers,i=e.stickers;if(n.length!=i.length)return!1;for(let s=0,r=n.length;s<r;s+=1)if(!n[s].equal(i[s]))return!1;return!0}computeBoundingBox(){let n=this.stickers.map(i=>i.computeBoundingBox()).reduce((i,s)=>[Math.min(i[0],s[0].x),Math.min(i[1],s[0].y),Math.min(i[2],s[0].z),Math.max(i[3],s[1].x),Math.max(i[4],s[1].y),Math.max(i[5],s[1].z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return this.boundingBox=[new et(n[0],n[1],n[2]),new et(n[3],n[4],n[5])],this.boundingBox}}class Ve{constructor(e,n,i){Me(this,"points");Me(this,"color");Me(this,"oColor");Me(this,"_generator");Me(this,"_generated");Me(this,"vecs");Me(this,"boundingBox");Me(this,"_cached_mass_center");this.points=(e||[]).map(s=>s.clone()),this.oColor=n||"w",this.color=this.oColor,this.boundingBox=[],this._cached_mass_center=ie,this.updateMassCenter(),this._generator=this,this._generated=this,this.vecs=(i||[]).map(s=>s.clone())}computeBoundingBox(){let e=this.points.reduce((n,i)=>[Math.min(n[0],i.x),Math.min(n[1],i.y),Math.min(n[2],i.z),Math.max(n[3],i.x),Math.max(n[4],i.y),Math.max(n[5],i.z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return this.boundingBox=[new et(e[0],e[1],e[2]),new et(e[3],e[4],e[5])]}updateMassCenter(){let e=this.points;return this._cached_mass_center=e.reduce((n,i)=>n.add(i),new et).div(e.length||1),this._cached_mass_center}getMassCenter(){return this._cached_mass_center}add(e,n){if(n)return this.points.forEach(s=>s.add(e,!0)),this._cached_mass_center.add(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.add(e)),i._cached_mass_center=i._cached_mass_center.add(e),i}sub(e,n){if(n)return this.points.forEach(s=>s.sub(e,!0)),this._cached_mass_center.sub(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.sub(e)),i._cached_mass_center=i._cached_mass_center.sub(e),i}mul(e,n){if(n)return this.points.forEach(s=>s.mul(e,!0)),this._cached_mass_center.mul(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.mul(e)),i._cached_mass_center=i._cached_mass_center.mul(e),i}div(e,n){if(n)return this.points.forEach(s=>s.div(e,!0)),this._cached_mass_center.div(e,!0),this;let i=this.clone(!0);return i.points=this.points.map(s=>s.div(e)),i._cached_mass_center=i._cached_mass_center.div(e),i}dot(e){return this.points.map(n=>n.dot(e))}getOrientation(){let e=this.points.length,n=[0,1,2].map(i=>Math.round(i/3*e));return et.cross(this.points[n[0]],this.points[n[1]],this.points[n[2]]).unit()}normal(){return this.getOrientation()}rotate(e,n,i,s,r){if(s)return this.points.forEach(a=>a.rotate(e,n,i,!0)),this._cached_mass_center.rotate(e,n,i,!0),this.color=r||this.color,this.vecs.forEach(a=>a.rotate(ie,n,i,!0)),this;let o=this.clone(!0);return o.points=this.points.map(a=>a.rotate(e,n,i)),o._cached_mass_center=this._cached_mass_center.rotate(e,n,i),o.color=r||o.color,o.vecs.map(a=>a.rotate(ie,n,i,!0)),o}clone(e){let n=new Ve(e?[]:this.points,this.color);return n.color=this.color,n.oColor=this.oColor,n._cached_mass_center=this._cached_mass_center.clone(),n.vecs=this.vecs.map(i=>i.clone()),n}direction1(e,n,i){let s=[0,0,0],r=i?[this.getMassCenter()]:this.points,o=r.length;for(let a=0;a<o;a+=1)if(s[et.direction1(e,n,r[a])+1]+=1,s[0]>0&&s[2]>0)return 0;return s[1]===o?0:s[0]>0?-1:1}direction(e,n,i,s){let r=[0,0,0],o=s?[this.getMassCenter()]:this.points;for(let a=0,l=o.length;a<l;a+=1)r[et.direction(e,n,i,o[a])+1]+=1;return r[0]>0&&r[2]>0||r[1]===o.length?0:r[0]>0?-1:1}reflect(e,n,i,s){return this.reflect1(e,et.cross(e,n,i),s)}reflect1(e,n,i){let s=n.unit(),r=this.clone(!0),o=a=>a.sub(e).dot(s);return r.points=this.points.map(a=>a.add(s.mul(-2*o(a)))),i&&r.reverse(!0),r._cached_mass_center=r._cached_mass_center.add(s.mul(-2*o(r._cached_mass_center))),r.vecs=r.vecs.map(a=>a.add(s.mul(-2*a.dot(s)))),r}reverse(e){if(e)return this.points.reverse(),this.points.unshift(this.points[this.points.length-1]),this.points.pop(),this;let n=this.clone(!0);return n.points=this.points.map(i=>i.clone()).reverse(),n.points.unshift(n.points[n.points.length-1]),n.points.pop(),n}contains(e){let n=this.points[this.points.length-1],i=0,s;for(const r of this.points){if(s=n.sub(r).cross(n.sub(e)),i<0&&s.z>0||i>0&&s.z<0)return!1;s.z!==0&&(i=s.z),n=r}return!0}equal(e){let n=this.points,i=e.points;if(this.color!=e.color||n.length!=i.length)return!1;for(let s=0,r=n.length;s<r;s+=1)if(n[s].sub(i[s]).abs()>1e-6)return!1;return!0}}class Yc extends Ve{constructor(n,i,s,r){super(n,s,r);Me(this,"faces");this.faces=i.map(o=>o.map(a=>a))}getOrientation(){let n=this.faces.length;return this.faces.reduce((s,r)=>s.add(et.cross(this.points[r[0]],this.points[r[1]],this.points[r[2]]).unit()),new et).div(n,!0).unit()}clone(n){let i=new Yc(n?[]:this.points,this.faces);return i.color=this.color,i.oColor=this.oColor,i._cached_mass_center=this._cached_mass_center.clone(),i.vecs=this.vecs.map(s=>s.clone()),i}}function $n(t,e){let n=e||["y","o","g","w","r","b"],i=t.getAllStickers(),s=t.pieces;for(let r=0,o=i.length;r<o;r+=1){let l=i[r].points;for(let c=0,u=l.length;c<u;c+=1)for(let f=-1;f<=1;f+=1)Math.abs(l[c].x-f)<1e-6&&(l[c].x=f),Math.abs(l[c].y-f)<1e-6&&(l[c].y=f),Math.abs(l[c].z-f)<1e-6&&(l[c].z=f)}for(let r=0,o=i.length;r<o;r+=1){let a=i[r],l=[0,1,2].map(p=>Math.round(p/3*a.points.length)),c=a.points[l[0]],u=a.points[l[1]],f=a.points[l[2]],h=[0,0,0],d=!1;for(let p=0,m=s.length;p<m;p+=1)if(h[s[p].direction(c,u,f,!0)+1]+=1,h[0]>0&&h[2]>0){a.color="x",a.oColor="x",d=!0;break}if(!d)if(h[0]>0){let p=a.getOrientation();for(let m=0,_=n.length;m<_;m+=1)if(p.sub(t.faceVectors[m]).abs()<1e-6){a.color=n[m],a.oColor=n[m];break}}else a.color="x",a.oColor="x"}}function Qn(){let t=[],e=this.pieces;for(let n=0,i=e.length;n<i;n+=1){let s=e[n].stickers;t.push(...s)}return t}function TT(t,e){const n=e||.925;let i=t.getOrientation(),s=t.updateMassCenter();return t.sub(s).mul(n).add(s).add(i.mul(.005))}function vD(t,e,n,i){const s=e||.11,r=i||10,o=[1,2,1],a=n||.925;let c=t.points,u=new Ve;for(let f=0,h=c.length;f<h;f+=1){let d=c[(f+1)%h].sub(c[f]).mul(s),p=c[(f-1+h)%h].sub(c[f]).mul(s),m=[c[f].add(p),c[f],c[f].add(d)];for(let _=0;_<=r;_+=1){let b=_/r;u.points.push(m.reduce((g,x,y)=>g.add(x.mul(o[y]*Math.pow(1-b,2-y)*Math.pow(b,y))),new et))}}return TT(u,a)}function yD(t,e,n,i,s,r){if(t.isRounded)return;const o=s||(l=>!(l instanceof Yc));t.isRounded=!0;let a=t.pieces;for(let l=0,c=a.length;l<c;l+=1){let u=a[l],f=u.stickers;for(let h=0,d=f.length;h<d;h+=1){if(!o(f[h]))continue;let p=r?TT(f[h],0):vD(f[h],e,n,i);p.updateMassCenter(),p.color=f[h].color,p.oColor=f[h].oColor,p.vecs=f[h].vecs.map(m=>m.clone()),f[h].color="d",f[h].oColor="d",f[h].vecs.length=0,u.stickers.push(p),p._generator=f[h],f[h]._generated=p}}}function wD(t){let e=t.pieces;for(let n=0,i=e.length;n<i;n+=1){let s=e[n].stickers,r=e[n].stickers.reduce((o,a)=>(a.color!="x"&&a.color!="d"&&o.push(a.getOrientation()),o),[]);for(let o=0,a=s.length;o<a;o+=1)s[o].color!="x"&&s[o].color!="d"&&(s[o].vecs=r.map(l=>l.clone()))}}function Ic(t){if(Array.isArray(t)||typeof t=="string")return t[~~(Math.random()*t.length)];if(typeof t=="object"){let e=Object.keys(t);return t[e[~~(Math.random()*e.length)]]}return~~(Math.random()*t)}function xD(t,e,n){const i=[t,e,n].sort(),s=i[0],r=i[1],o=i[2],a=s==r&&r==o,l=i.reduce((y,v)=>Math.min(y,2/v),2),c={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],dims:i,faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};let u=c.faceColors;c.getAllStickers=Qn.bind(c);const f=we.mul(s).add(Ge.mul(r)).add(G.mul(o)).mul(l/2),h=Math.PI,d=h/2,p=[pe,ge,G],m=[[G,d*(1+(s===1?1:(s^r)&1))],[ge,d*(1+(s===1?1:(s^o)&1))],[pe,d*(1+(s===1?1:(r^o)&1))]];for(let y=0;y<o;y+=1)for(let v=0;v<r;v+=1)for(let w=0;w<s;w+=1){let S=f.add(Ne.mul(y).add(ge.mul(v)).add(pe.mul(w)).mul(l)),T=S.add(ge.add(pe).add(Ne).mul(l/2)),k=new Tt,A=new Ve([S,S.add(ge.mul(l)),S.add(ge.add(pe).mul(l)),S.add(pe.mul(l))],u[0]),L=new Ve([S,S.add(Ne.mul(l)),S.add(Ne.add(ge).mul(l)),S.add(ge.mul(l))],u[4]);A.vecs=p.map(D=>D.clone()),L.vecs=p.map(D=>D.clone()),(!a||y==0)&&k.stickers.push(A),(!a||w==s-1)&&k.stickers.push(L.rotate(T,G,h)),(!a||v==r-1)&&k.stickers.push(L.rotate(T,G,d)),(!a||y==o-1)&&k.stickers.push(A.rotate(T,pe,h)),(!a||w==0)&&k.stickers.push(L),(!a||v==0)&&k.stickers.push(L.rotate(T,G,-d)),k.stickers.length&&(k.stickers.length===1&&a&&((y==0||y==o-1)&&o>1?k.stickers.push(k.stickers[0].rotate(T,pe,h)):((w==0||w==s-1)&&s>1||(v==0||v==r-1)&&r>1)&&k.stickers.push(k.stickers[0].rotate(T,G,h))),k.updateMassCenter(),c.pieces.push(k))}let _=c.pieces;const b="URFDLB";let g=f.add(pe.mul(s*l)).add(ge.mul(r*l)).add(Ne.mul(o*l)),x=[[f,f.add(ge),f.add(pe)],[g,g.add(Ge),g.add(G)],[g,g.add(G),g.add(we)],[g,g.add(we),g.add(Ge)],[f,f.add(Ne),f.add(ge)],[f,f.add(pe),f.add(Ne)]];return c.move=function(y){for(let v=0,w=y.length;v<w;v+=1){let S=y[v],T=b.indexOf(S[1]),k=S[0]===s?S[0]+1:S[0],A=S[2];const L=x[T],B=et.cross(L[0],L[1],L[2]).unit().mul(-1),U=L.map($=>$.add(B.mul(l*k))),N=Math.PI/2*A;for(let $=0,W=_.length;$<W;$+=1){let j=_[$].direction(U[0],U[1],U[2],!0);if(j===0)return console.log("Invalid move. Piece intersection detected.","URFDLB"[T],A,S),console.log("Piece: ",$,_[$],U),!1;j>0&&_[$].stickers.map(J=>J.rotate(ie,B,N,!0))}}return!0},c.toMove=function(y,v,w){let S=v.updateMassCenter(),T=_.filter(A=>A.direction1(S,w)===0),k=m.map(A=>[A[0].cross(w).abs2(),A[1]]).sort((A,L)=>A[0]-L[0]);return{pieces:T,ang:k[0][1]}},c.scramble=function(){let v=[];for(let w=0;w<100;w+=1)v.push([Ic(s-1)+1,Ic(b),Ic(3)+1]);c.move(v)},c.rotation={x:h/6,y:-h/4,z:0},c.faceVectors=[G,pe,ge,Ne,we,Ge],$n(c,c.faceColors),c}function MD(){let t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["w","r","g","y","o","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=1,n=Math.PI,i=n/2;let s=new Tt([new Ve([G.add(Ge).mul(e),G.add(we).mul(e),G.add(ge).mul(e),G.add(pe).mul(e)])]);s.stickers[0].vecs=[G.add(Ge).add(we).unit(),G.add(Ge).add(pe).unit(),G.add(ge).add(we).unit(),G.add(ge).add(pe).unit()];let r=new Ve([G.add(pe).mul(e),G.add(ge).mul(e),G.add(ge).add(pe).mul(e)]),o=G.add(ge).add(pe).mul(e),a=new Tt([r,r.rotate(o,G,i).rotate(o,pe,i),r.rotate(o,Ne,i).rotate(o,Ge,i)]);a.stickers.forEach(f=>{f.vecs=[G.add(pe).add(Ge).unit(),Ne.add(pe).add(ge).unit(),G.add(we).add(ge).unit()]});for(let f=0;f<4;f+=1)t.pieces.push(s.rotate(ie,pe,f*i));t.pieces.push(s.rotate(ie,Ge,i)),t.pieces.push(s.rotate(ie,ge,i));for(let f=0;f<=1;f+=1)for(let h=0;h<4;h+=1)t.pieces.push(a.rotate(ie,pe,f*i).rotate(ie,G,h*i));const l="URLB";let c=t.pieces,u=[[pe.add(G).mul(e),ge.add(G).mul(e),ge.add(we).mul(e)],[Ge.add(G).mul(e),pe.add(ge).mul(e),pe.add(G).mul(e)],[pe.add(ge).mul(e),we.add(G).mul(e),G.add(ge).mul(e)],[we.add(G).mul(e),pe.add(Ge).mul(e),Ge.add(G).mul(e)]];return t.move=function(f){for(let h=0,d=f.length;h<d;h+=1){let p=f[h],m=p[0],_=p[1];const b=u[m],x=et.cross(b[0],b[1],b[2]).unit().mul(-1),y=2*Math.PI/3*_;for(let v=0,w=c.length;v<w;v+=1){let S=c[v].direction(b[0],b[1],b[2]);if(S===0){console.log("Invalid move. Piece intersection detected.",l[m],_,p),console.log("Piece: ",v,c[v],b);return}S<0&&c[v].stickers.map(T=>T.rotate(ie,x,y,!0))}}},t.toMove=function(f,h,d){let p=h.updateMassCenter();return{pieces:c.filter(_=>_.direction1(p,d)>=0),ang:2*n/3}},t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function SD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["w","b","r","y","g","o"],move:()=>!0,roundParams:[null,.95]};t.getAllStickers=Qn.bind(t);const e=1,n=2*e/3,i=e*Math.sqrt(2),s=Math.PI,r=s/2,o=s/6,a=i*Math.sin(o)/Math.sin(7*s/12);let l=t.pieces,c=new Tt([new Ve([we.add(Ge).add(G).mul(e),we.add(Ge).add(G).mul(e).add(ge.mul(a)),G.mul(e),we.add(Ge).add(G).mul(e).add(pe.mul(a))]),new Ve([we.add(Ge).add(G).mul(e),we.add(Ge).add(G).mul(e).add(Ne.mul(n)),we.add(Ge).add(G).mul(e).add(Ne.mul(n)).add(ge.mul(a)),we.add(Ge).add(G).mul(e).add(ge.mul(a))])]);c.stickers.push(c.stickers[0].add(Ne.mul(n)).reverse()),c.stickers.push(c.stickers[1].rotate(we.add(Ge).add(G).mul(e),Ne,r).add(pe.mul(a)));let u=new Tt([new Ve([pe.add(G).add(Ge).mul(e).add(we.mul(a)),pe.add(G).add(Ge).mul(e).add(we.mul(a)).add(Ne.mul(n)),we.add(G).add(Ge).mul(e).add(pe.mul(a)).add(Ne.mul(n)),we.add(G).add(Ge).mul(e).add(pe.mul(a))]),new Ve([we.add(G).add(Ge).mul(e).add(pe.mul(a)),G.mul(e),pe.add(G).add(Ge).mul(e).add(we.mul(a))])]);c.stickers.forEach(p=>{p.vecs=[G.clone()]}),u.stickers.forEach(p=>{p.vecs=[G.clone()]});let f=new Tt([new Ve([we.add(Ge).add(G).mul(e).add(Ne.mul(n)),we.add(Ge).add(Ne).mul(e).add(G.mul(n)),we.add(ge).add(Ne).mul(e).add(G.mul(n)),we.add(ge).add(G).mul(e).add(Ne.mul(n))]),new Ve([we.add(ge).add(G).mul(e).add(Ne.mul(n)),we.add(ge).add(Ne).mul(e).add(G.mul(n)),we.add(ge).add(Ne).mul(e).add(G.mul(n)).add(pe.mul(a)),we.add(ge).add(G).mul(e).add(Ne.mul(n)).add(pe.mul(a))]),new Ve([we.add(ge).add(G).mul(e).add(Ne.mul(n)).add(pe.mul(a)),we.add(ge).add(Ne).mul(e).add(G.mul(n)).add(pe.mul(a)),pe.add(Ge).add(Ne).mul(e).add(G.mul(n)).add(we.mul(a)),pe.add(Ge).add(G).mul(e).add(Ne.mul(n)).add(we.mul(a))]),new Ve([pe.add(Ge).add(G).mul(e).add(Ne.mul(n)).add(we.mul(a)),pe.add(Ge).add(Ne).mul(e).add(G.mul(n)).add(we.mul(a)),we.add(Ge).add(Ne).mul(e).add(G.mul(n)),we.add(Ge).add(G).mul(e).add(Ne.mul(n))]),new Ve([we.add(Ge).add(G).mul(e).add(Ne.mul(n)),we.add(ge).add(G).mul(e).add(Ne.mul(n)),we.add(ge).add(G).mul(e).add(Ne.mul(n)).add(pe.mul(a)),pe.add(Ge).add(G).mul(e).add(Ne.mul(n)).add(we.mul(a))]),new Ve([we.add(Ge).add(Ne).mul(e).add(G.mul(n)),we.add(ge).add(Ne).mul(e).add(G.mul(n)),we.add(ge).add(Ne).mul(e).add(G.mul(n)).add(pe.mul(a)),pe.add(Ge).add(Ne).mul(e).add(G.mul(n)).add(we.mul(a))]).reverse()]),h=f.stickers[2].getOrientation();f.stickers.forEach(p=>{p.vecs=[h.mul(-1),G.clone()]});for(let p=0;p<4;p+=1)l.push(u.rotate(ie,G,p*r)),l.push(c.rotate(ie,G,p*r));for(let p=0,m=l.length;p<m;p+=1)l.push(l[p].rotate(ie,pe,s));l.push(f),l.push(f.rotate(ie,G,s));let d=[f.stickers[2].clone().points,c.stickers[2].clone().points.reverse(),f.stickers[5].clone().points];return t.move=function(p){for(let m=0,_=p.length;m<_;m+=1){let b=p[m],g=b[0],x=b[1];const y=d[g],w=et.cross(y[0],y[1],y[2]).unit().mul(-1),S=o*x;let T=[];for(let k=0,A=l.length;k<A;k+=1){let L=l[k].direction(y[0],y[1],y[2],!1,D=>D.color!="x"&&D.color!="d");if(L===0)return console.log("Invalid move. Piece intersection detected.",m,"/UD"[g],x,b),console.log("Piece: ",k,l[k],y),!1;L>0&&T.push(l[k])}T.forEach(k=>k.stickers.map(A=>A.rotate(ie,w,S,!0)))}return!0},t.toMove=function(p,m,_){let b=m.vecs[0].cross(G).abs()<1e-6?o:s,g=[];if(b>o&&_.cross(G).abs()>1e-6)t.move([[0,6]])&&(t.move([[0,6]]),g=l.filter(x=>x.direction1(_.mul(.06),_)===0));else{let x=m.updateMassCenter(),y=b>o;g=l.filter(v=>y?v.direction1(x,_)===0:v.direction1(x,_)>=0)}return{pieces:g,ang:b}},t.rotation={x:o,y:-o,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function ED(t){let e={center:new et(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:()=>[],faceColors:["g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};e.getAllStickers=Qn.bind(e);const n=Math.PI,i=n/3,s=2.6,r=s/Math.sqrt(3),o=Math.sqrt(s**2-r**2),a=Math.sqrt(6)*s/12;let l=G.mul(o-a),c=Ne.mul(a).add(ge.mul(r)).rotate(ie,G,i),u=c.rotate(ie,G,2*i),f=u.rotate(ie,G,2*i);e.pieces=[];const h=[l,c,u,f],d=[[f.sub(l).div(t),c.sub(f).div(t)],[u.sub(c).div(t),l.sub(u).div(t)],[c.sub(u).div(t),f.sub(c).div(t)],[l.sub(f).div(t),u.sub(l).div(t)]];e.faceVectors=[d[0][0].cross(d[0][1]).unit(),d[1][0].cross(d[1][1]).unit(),d[2][0].cross(d[2][1]).unit(),d[3][0].cross(d[3][1]).unit()];let p=function(x,y,v){let w=[x,y,v],S=w[2].sub(w[1]).cross(w[1].sub(w[0])).unit().mul(o/t),T=w.reduce((k,A)=>k.add(A),new et(0,0,0)).div(3).add(S);return new Tt([new Ve(w),new Ve([T,T,T])])};for(let x=0;x<4;x+=1)for(let y=0;y<t;y+=1)for(let v=0;v<=y;v+=1)e.pieces.push(p(h[x].add(d[x][0].mul(y).add(d[x][1].mul(v))),h[x].add(d[x][0].mul(y+1).add(d[x][1].mul(v))),h[x].add(d[x][0].mul(y+1).add(d[x][1].mul(v+1))))),v<y&&e.pieces.push(p(h[x].add(d[x][0].mul(y).add(d[x][1].mul(v))),h[x].add(d[x][0].mul(y+1).add(d[x][1].mul(v+1))),h[x].add(d[x][0].mul(y).add(d[x][1].mul(v+1)))));const m="URLB";let _=e.pieces,b=[[f,u,c],[f,l,u],[c,u,l],[c,l,f]],g=l.sub(f).div(t).y;return _.forEach(x=>x.stickers.forEach(y=>y.vecs=e.faceVectors.map(v=>v.clone()))),e.move=function(x){for(let y=0,v=x.length;y<v;y+=1){let w=x[y],S=w[0],T=w[3],k=w[1];const A=b[S],D=et.cross(A[0],A[1],A[2]).unit().mul(-1),B=A.map(N=>N.add(D.mul(g*T))),U=2*Math.PI/3*k;for(let N=0,$=_.length;N<$;N+=1){let W=_[N].direction(B[0],B[1],B[2]);if(W===0)return console.log("Invalid move. Piece intersection detected.",m[S],k,w),console.log("Piece: ",N,_[N],B),!1;W<0&&_[N].stickers.map(j=>j.rotate(ie,D,U,!0))}}return!0},e.toMove=function(x,y,v){let w=y.updateMassCenter();return{pieces:_.filter(T=>T.direction1(w,v)===0),ang:2*n/3}},$n(e,e.faceColors),e.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},e}function TD(){let t={center:new et(0,0,0),faceVectors:[],palette:Kn,pieces:[],rotation:{},getAllStickers:()=>[],faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=1,n=Math.PI,i=n/2,s=[Ge.add(G).cross(we.add(ge.div(2))).unit(),ge.add(pe).cross(Ne.add(Ge.div(2))).unit(),Ge.add(pe.div(2)).cross(Ne.add(we)).unit()];let r=G.add(ge).mul(e),o=pe.add(G).add(Ge).mul(e),a=Math.sqrt(e**2+(e/2)**2),l=n/4,c=Math.asin(e/2/a),u=l+c,f=e*Math.sin(l)/Math.sin(u),h=r.add(o.sub(r).unit().mul(f)),d=we.add(G).add(Ge).mul(e),p=we.add(G).add(ge).mul(e),m=pe.add(G).add(ge).mul(e),_=d.add(p).div(2),b=_.add(o.sub(_).unit().mul(f)),g=b.rotate(ie,Ne,i).rotate(ie,ge,i),x=new Ve([d,_,b]);new Ve([d,b,o]);let y=new Ve([o,b,h]),v=new Ve([b,_,r,h]),w=new Ve([o,h,m]),S=new Ve([_,p,r]),T=new Ve([h,r,m]),k=[r,o,r.rotate(p,Ge,i)],A=[o,_,_.rotate(p,we,i)],L=d.project(k[0],k[1],k[2]),D=_.project(k[0],k[1],k[2]),B=b.project(k[0],k[1],k[2]),U=g.project(k[0],k[1],k[2]),N=h.project(A[0],A[1],A[2]),$=r.project(A[0],A[1],A[2]),W=new Ve([r,$,D,_]),j=new Tt([S,S.rotate(p,p,2*n/3),S.rotate(p,p,-2*n/3),new Ve([r,r.rotate(p,Ge,i),_]),W,W.rotate(p,p,2*n/3),W.rotate(p,p,-2*n/3)]),J=new Tt([x,T.rotate(ie,G,i).rotate(ie,ge,i),new Ve([d,b,B,L]),new Ve([b,_,D,B]),new Ve([_,g,U,D]),new Ve([g,d,L,U])]),se=new Tt([v,new Ve([b,_,D,B]),new Ve([b,h,N,B]),new Ve([h,r,$,N]),new Ve([r,_,D,$])]),ne=new Tt([y,new Ve([o,B,b]),new Ve([h,b,B,N]),new Ve([o,h,N])]),K=new Tt([w,new Ve([h,o,N]),J.stickers[5].rotate(p,p,-n*2/3)]);K.stickers.push(...K.rotate(ie,o.add(m).div(2),n).stickers);let q=t.pieces;q.push(j),q.push(J),q.push(se),q.push(ne),q.push(K),q.push(K.reflect(p,o,ie).reverse());for(let te=1,re=q.length;te<re;te+=1)q.push(q[te].rotate(p,p,-n*2/3)),q.push(q[te].rotate(p,p,n*2/3));for(let te=0,re=5;te<re;te+=1)q.push(q[te].rotate(ie,G,n).rotate(ie,we,i));for(let te=6,re=12;te<re;te+=1)q.push(q[te].rotate(ie,G,n).rotate(ie,we,i));return q.forEach(te=>te.stickers.forEach(re=>re.vecs=s.map(Oe=>Oe.clone()))),t.toMove=function(te,re,Oe){let Ee=te.updateMassCenter();return{pieces:q.filter(xe=>xe.direction1(Ee,Oe)===0),ang:i}},t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function kD(){let t={center:new et(0,0,0),faceVectors:[],palette:Kn,pieces:[],rotation:{},getAllStickers:()=>[],faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=Math.sqrt(2),s=i/2,r=1,o=r*2/3,a=r*i/3,l=(r-a)*2;let c=we.add(G).add(Ge).mul(r),u=we.add(G).add(ge).mul(r),f=pe.add(G).add(Ge).mul(r),h=u.sub(c).unit(),d=f.sub(c).unit(),p=h.mul(l*s).rotate(ie,G,e/4),m=new Tt([new Ve([c.clone(),c.add(h.mul(a)),c.add(h.mul(a)).add(p),c.add(d.mul(a)).add(p),c.add(d.mul(a))]),new Ve([c.clone(),c.add(Ne.mul(o)),c.add(Ne.mul(o)).add(ge.mul(a)),c.add(ge.mul(a))]),new Ve([c.add(ge.mul(a)),c.add(ge.mul(a)).add(Ne.mul(o)),c.add(ge.mul(a)).add(Ne.mul(o)).add(p),c.add(ge.mul(a)).add(p)])]);m.stickers.push(m.stickers[0].add(Ne.mul(o)).reverse()),m.stickers.push(m.stickers[1].rotate(c,G,-n).add(pe.mul(a))),m.stickers.push(m.stickers[2].add(pe.sub(ge).mul(a)).reverse());let _=new Tt([new Ve([c.add(d.mul(a)),c.add(d.mul(a)).add(p),f.sub(d.mul(a))]),m.stickers[2].add(pe.sub(ge).mul(a)),m.stickers[2].rotate(c.add(ge.mul(a)),G,n).add(pe.sub(ge).mul(a).add(p)),new Ve([c.add(pe.mul(a)),c.add(pe.mul(a+l)),c.add(pe.mul(a+l)).add(Ne.mul(o)),c.add(pe.mul(a)).add(Ne.mul(o))])]);_.stickers.push(_.stickers[0].add(Ne.mul(o)));let b=[_,m];for(let w=1;w<=3;w+=1)b.push(b[0].rotate(ie,G,w*n)),b.push(b[1].rotate(ie,G,w*n));let g=new Ve([0,1,2,3].map(w=>b[w*2+1].stickers[0].points[2].clone()));b.push(new Tt([g,g.rotate(G.mul(2/3),pe,e)]));let x=b.map(w=>w.add(Ne.mul(o))),y=b.map(w=>w.rotate(ie,pe,e));x.pop();let v=t.pieces;return v.push(...b),v.push(...x),v.push(...y),v.forEach(w=>{w.updateMassCenter(),w.stickers.forEach(S=>{S.vecs=[pe,ge,G].map(T=>T.rotate(ie,G,e/4))})}),t.toMove=function(w,S,T){let k=w.updateMassCenter();return{pieces:v.filter(L=>L.direction1(k,T)===0),ang:n}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function AD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=we.add(G).add(Ge),r=pe.add(G).add(ge),o=new Ve([s]),a=[];for(let f=0,h=25;f<=h;f+=1){let d=f/h;a.push(r.add(we.mul(2).rotate(ie,Ne,d*n)))}o.points.push(...a.map(f=>f.clone()));let l=new Tt([new Ve([...a.map(f=>f.clone()).reverse(),...a.map(f=>f.rotate(ie,G,e)).reverse()])]);l.stickers[0].vecs=[s.unit(),r.unit()],l.stickers[0].points.pop();let c=new Tt([o,o.rotate(ie,s,i),o.rotate(ie,s,-i)]);c.stickers.forEach(f=>f.vecs=[s.unit()]);let u=t.pieces;return u.push(c,c.rotate(ie,G,e),c.rotate(ie,we,e),c.rotate(ie,we,e).rotate(ie,G,e),l,l.rotate(ie,G,n).rotate(ie,pe,n),l.rotate(ie,G,n).rotate(ie,we,n),l.rotate(ie,G,n).rotate(ie,ge,n),l.rotate(ie,G,n).rotate(ie,Ge,n),l.rotate(ie,G,e).rotate(ie,pe,e)),t.toMove=function(f,h,d){let p=h.updateMassCenter();return{pieces:u.filter(_=>_.direction1(p,d)===0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function LD(){let t={center:ie,faceColors:["white","black"],faceVectors:[ge,Ge],getAllStickers:()=>[],move:()=>!0,palette:{black:"#181818",white:"#aaa",gray:"#7f7f7f"},pieces:[],rotation:{x:0,y:0,z:0},dims:[],roundParams:[],isRounded:!0},e=[!1,!1,!1,!1],n=[[[0,0,0],[0,0,0],[0,0,0]],[[0,0,0],[0,0,0],[0,0,0]]],i=function(r,o,a,l){n[r][o][a]=((n[r][o][a]+l)%12+12)%12},s=[[0,0,0],[0,0,0],[0,0,0]];return t.move=function(r){let o=!0,a=0;for(let l=0,c=r.length;l<c;l+=1){let u=r[l],f=u[0],h=u[1],d=u[2];if(u[0]===-1){a^=1;continue}for(let p=0;p<3;p+=1)for(let m=0;m<3;m+=1)s[p][m]=0;for(let p=0,m=8;p<4;p+=1,m>>=1)if(isNaN(h)||isNaN(d)?(o&&(e.length=0,e.push(!1,!1,!1,!1),o=!1),e[p]=f&m?!0:e[p]):e[p]=!!(f&m),e[p]){let _=p>>1,b=p&1;s[_][b]=s[_+1][b]=s[_][b+1]=s[_+1][b+1]=1}if(!isNaN(h)&&!isNaN(d))for(let p=0;p<3;p+=1)for(let m=0;m<3;m+=1)s[p][m]&&(i(a,p,m,h),(p&1)==0&&(m&1)==0&&i(1-a,p,2-m,-h))}},t.raw=[e,n],t}function CD(t,e){const n=Math.max(2,~~t),i=~~(n/2),s={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],dims:[],faceColors:["white","yellow","violet","green","red","blue","orange","lblue","lyellow","pink","lgreen","gray"],move:()=>!1,roundParams:[]};s.getAllStickers=Qn.bind(s);let r=s.pieces;const o=Math.PI,a=Math.sqrt,l=a((50+22*a(5))/5)/4,c=a(6)/4*a(3+a(5)),u=1,f=u/l,h=f*c,d=a(h**2-u**2),p=2/(2*n-n%2),m=o-Math.acos(Math.tan(18*o/180)*Math.tan(54*o/180)),_=2*o/5,b=o*2/3;let g=[];for(let ne=0;ne<5;ne+=1)g.push(G.mul(u).add(Ge.mul(d).rotate(ie,G,ne*_)));const x=g[1].sub(g[0]).mul(p),y=x.rotate(ie,g[0],-b),v=g[4].sub(g[0]).mul(p),w=g[2].sub(g[1]).mul(p),S=g[0].sub(g[1]).mul(p);let T=[],k=G.rotate(ie,g[0],b),A=G.rotate(ie,g[0],-b);for(let ne=0;ne<=i;ne+=1)for(let K=0;K<i;K+=1){if(ne<i){let q=new Ve([g[0].add(x.mul(ne)).add(v.mul(K)),g[0].add(x.mul(ne+1)).add(v.mul(K)),g[0].add(x.mul(ne+1)).add(v.mul(K+1)),g[0].add(x.mul(ne)).add(v.mul(K+1))],"",[G,k,A]);T.push(new Tt([q,q.add(y)]))}if(ne==i){let q=new Ve([g[0].add(x.mul(i)).add(v.mul(K)),g[1].add(S.mul(i)).add(w.mul(K)),g[1].add(S.mul(i)).add(w.mul(K+1)),g[0].add(x.mul(i)).add(v.mul(K+1))],"",[G,A]);T.push(new Tt([q,q.sub(q.getMassCenter()).div(2).add(q.getMassCenter().add(y.proj(Ne)))]))}}let L=[g[0].add(x.add(v).mul(i))];for(let ne=1;ne<5;ne+=1)L.push(L[0].rotate(ie,G,_*ne));for(let ne=1;ne<5;ne+=1)for(let K=0,q=i*(i+1);K<q;K+=1)T.push(T[K].rotate(ie,G,ne*_));let D=new Tt([new Ve(L,"b"),new Ve(L).add(new et(0,y.y,0))]);T.push(D);let B=[...T];for(let ne=0;ne<5;ne+=1){let K=g[ne];for(let q=0,te=T.length;q<te;q+=1)B.push(T[q].rotate(K,K,b))}let U=B.map(ne=>ne.reflect1(ie,G,!0).rotate(ie,G,_/2,!0));r.push(...B),r.push(...U);let N=new Ve([g[0],g[0].add(x),g[0].add(x.add(v)),g[0].add(v)],"white"),$=new Tt([N,N.rotate(g[0],G,3*o/5).rotate(g[0],v,m-o),N.rotate(g[0],G,-3*o/5).rotate(g[0],x,o-m)]),W=[];[0,1,2,3,4].forEach(ne=>W.push(D.reflect(ie,g[ne],g[(ne+1)%5],!0))),W.push(...W.map(ne=>ne.reflect(ie,ie.add(pe),ie.add(ge),!0).rotate(ie,G,o/5))),s.faceVectors.push(D.stickers[0].getOrientation());for(let ne=0,K=W.length;ne<K;ne+=1)s.faceVectors.push(W[ne].stickers[0].getOrientation());s.faceVectors.push(D.stickers[0].getOrientation().rotate(ie,pe,o));let j=Math.abs($.stickers[1].points[2].sub(g[0]).y),J=[D.stickers[0],W[1].stickers[0]].map(ne=>{let K=ne.getMassCenter();return ne.points.map(q=>q.add(K.unit().mul(-j)))});s.move=function(ne){for(let K=0,q=ne.length;K<q;K+=1){let te=ne[K],re=te[0],Oe=te[1];const Ee=J[re].map(Ae=>Ae.clone()),ye=et.cross(Ee[0],Ee[1],Ee[2]).unit(),xe=_*Oe;for(let Ae=0,De=r.length;Ae<De;Ae+=1){let de=r[Ae].direction(Ee[0],Ee[1],Ee[2],!0);if(de===0)return console.log("Invalid move. Piece intersection detected.","URFDLB"[re],Oe,te),console.log("Piece: ",Ae,r[Ae],Ee),!1;if(de*te[2]>0)for(let me=0,We=r[Ae].stickers.length;me<We;me+=1)r[Ae].stickers[me].rotate(ie,ye,xe,!0)}}return!0},s.toMove=function(ne,K,q){let te=K.getMassCenter();return{pieces:r.filter(re=>re.direction1(te,q)==0),ang:_}},s.rotation={x:o/6,y:-o/4,z:0},$n(s,s.faceColors),s.raw=[g,m,p,d,f];let se=ne=>ne.stickers.filter(q=>q.points.length===5).length===2;for(let ne=0,K=r.length;ne<K;ne+=1){let q=r[ne];if(!se(q)){for(let te=0,re=q.stickers.length;te<re;te+=1){let Oe=q.stickers[te];e&&(Oe.color==="x"||Oe.color==="d")?(q.stickers.splice(te,1),te-=1,re-=1):Oe.color=Oe.color==="x"?"d":Oe.color}q.stickers.length===0&&(r.splice(ne,1),ne-=1,K-=1)}}return s}function PD(t){const n={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],dims:[t,t,t],faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};n.faceColors,n.getAllStickers=Qn.bind(n);const i=Math.PI,s=i/2,r=[pe,ge,G],o=[[22/19,1,16/19],[25/19,1,13/19],[9/19,1,29/19]];let a=function(m,_){return _<1?o[m][0]:_<t-1?o[m][1]:o[m][2]},l=function(m,_){return _==0?0:_==1?o[m][0]:o[m][0]+(_-1)*o[m][1]};for(let m=0;m<t;m+=1)for(let _=0;_<t;_+=1)for(let b=0;b<t;b+=1){if(b!=0&&_!=0&&m!=0&&b!=t-1&&_!=t-1&&m!=t-1)continue;let g=Ne.mul(l(2,m)).add(ge.mul(l(1,_))).add(pe.mul(l(0,b))),x=a(0,b),y=a(1,_),v=a(2,m),w=g.add(pe.mul(x).add(ge.mul(y)).add(Ne.mul(v)).div(2)),S=new Tt,T=new Ve([g,g.add(ge.mul(y)),g.add(ge.mul(y).add(pe.mul(x))),g.add(pe.mul(x))]),k=new Ve([g,g.add(Ne.mul(v)),g.add(Ne.mul(v).add(ge.mul(y))),g.add(ge.mul(y))]),A=new Ve([g,g.add(pe.mul(x)),g.add(pe.mul(x).add(Ne.mul(v))),g.add(Ne.mul(v))]);T.vecs=r.map(L=>L.clone()),k.vecs=r.map(L=>L.clone()),A.vecs=r.map(L=>L.clone()),S.stickers.push(T),S.stickers.push(k.rotate(w,G,i)),S.stickers.push(A.rotate(w,G,i)),S.stickers.push(T.rotate(w,pe,i)),S.stickers.push(k),S.stickers.push(A),S.stickers.length===1&&((m==0||m==t-1)&&t>1?S.stickers.push(S.stickers[0].rotate(w,pe,i)):((b==0||b==t-1)&&t>1||(_==0||_==t-1)&&t>1)&&S.stickers.push(S.stickers[0].rotate(w,G,i))),S.updateMassCenter(),n.pieces.push(S)}let c=n.pieces,f=function(){let _=c.map(b=>b.computeBoundingBox()).reduce((b,g)=>[Math.min(b[0],g[0].x),Math.min(b[1],g[0].y),Math.min(b[2],g[0].z),Math.max(b[3],g[1].x),Math.max(b[4],g[1].y),Math.max(b[5],g[1].z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return[new et(_[0],_[1],_[2]),new et(_[3],_[4],_[5])]}(),h=Ne.mul(l(2,1)).add(ge.mul(l(1,1))).add(pe.mul(l(0,1))),d=Ne.mul(l(2,t-1)).add(ge.mul(l(1,t-1))).add(pe.mul(l(0,t-1)));n.center=h.add(d).div(2);let p=f[0].add(f[1]).div(2);return c.forEach(m=>m.sub(p,!0).mul(2/t,!0)),n.center.sub(p,!0).mul(2/t,!0),n.toMove=function(m,_,b){let g=m.stickers.find(v=>v.color==="x"&&v.normal().cross(b).abs()<1e-6);if(!g)return{pieces:[],ang:s};g=g._generator;let x=g.updateMassCenter().add(g.normal().mul(-.01));return{pieces:c.filter(v=>v.direction1(x,b)===0),ang:s}},n.scramble=function(){let _=[G,Ne,ge,Ge,we,pe];for(let b=0;b<100;b+=1){let g=Ic(_),x=n.toMove?n.toMove(Ic(c),null,g):[],y=1+Ic(3);x.pieces.forEach(v=>v.rotate(n.center,g,x.ang*y,!0))}},n.rotation={x:i/6,y:-i/4,z:0},n.faceVectors=[G,pe,ge,Ne,we,Ge],$n(n,n.faceColors),c.forEach(m=>m.stickers.forEach(_=>_.color=_.color.match(/^[xd]$/)?_.color:"lightGray")),n}function RD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=t.pieces,r=we.add(G).add(Ge),o=new Tt([new Ve([we.add(G).add(Ge),we.add(G).add(ge),G]),new Ve([we.add(G).add(Ge),we,we.add(G).add(ge)])]);o.stickers.forEach(a=>a.vecs=[we.add(G).add(Ge).unit(),we.add(G).add(ge).unit()]);for(let a=0;a<4;a+=1)s.push(o.rotate(ie,G,n*a)),s.push(o.rotate(ie,G,n*a).rotate(ie,ge,e)),s.push(o.rotate(r,r,-2*e/3).rotate(ie,G,n*a));return t.toMove=function(a,l,c){let u=l.updateMassCenter();return{pieces:s.filter(h=>h.direction1(u,c)===0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function ly(t,e){return Math.acos(t.unit().dot(e.unit()))}function ID(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["w","r","g","y","o","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3,s=Math.sqrt(5),r=Math.sqrt((s-1)**2+(-s-1)**2),o=Math.sqrt(r**2-s**2);let a=t.pieces,l=we.add(Ge).add(G),c=we.add(ge).add(G),u=pe.add(Ge).add(G),f=pe.add(ge).add(G),h=G.add(pe.add(ge).mul(s)),d=G.add(pe.add(Ge).mul(s)),p=new et(s-o,1,0),m=p.rotate(ie,Ne,n);const _=ly(p.sub(h),c.sub(h)),b=ly(m.sub(h),p.sub(h));let g=[],x=[],y=[],v=[],w=[],S=[];const T=10,k=10;for(let W=0;W<=T;W+=1){let j=W/T;g.push(c.rotate(h,Ne,j*_))}for(let W=0;W<=T;W+=1){let j=W/T;x.push(l.rotate(d,G,j*_))}for(let W=0;W<=k;W+=1){let j=W/k;y.push(m.rotate(h,G,j*b))}v=g.map(W=>W.clone()).reverse(),w=x.map(W=>W.clone()).reverse(),S=y.map(W=>W.clone()).reverse();let A=new Ve([we.add(G),c,...g,...w,l]),L=new Ve([...x,...S,...v.map(W=>W.rotate(ie,Ne,n))]),D=new Ve([0,1,2,3].reduce((W,j)=>(W.push(...y.map(J=>J.rotate(ie,G,j*n))),W),[])),B=new Tt([A,A.rotate(l,Ge,n).reverse()]),U=new Tt([L]),N=new Tt([D]);B.stickers.forEach(W=>W.vecs=[l.unit(),c.unit()]),U.stickers.forEach(W=>W.vecs=[l.unit(),c.unit(),pe.add(Ge).add(G).unit()]),N.stickers.forEach(W=>W.vecs=[l.unit(),c.unit(),u.unit(),f.unit()]);let $=[0,1,2,3].reduce((W,j)=>(W.push(U.rotate(ie,G,n*j)),W.push(U.rotate(l,l,-2*e/3).rotate(ie,G,n*j)),W.push(U.rotate(l,l,2*e/3).rotate(ie,G,n*j)),W),[]);for(let W=0;W<4;W+=1)a.push(B.rotate(ie,G,n*W)),a.push(B.rotate(ie,G,n*W).rotate(ie,ge,e)),a.push(B.rotate(l,l,-2*e/3).rotate(ie,G,n*W)),a.push(N.rotate(ie,ge,n*W));return a.push(...$),a.push(...$.map(W=>W.rotate(ie,ge,e))),a.push(N.rotate(ie,pe,n),N.rotate(ie,we,n)),t.toMove=function(W,j,J){let se=new et(Math.sign(J.x)/3,Math.sign(J.y)/3,Math.sign(J.z)/3);return{pieces:a.filter(K=>K.direction1(se,J,!0)>=0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function DD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["y","o","g","w","r","b"],move:()=>!0,dims:[],roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=t.pieces,r=we.add(G).add(Ge),o=new Ve([r,r.add(ge.mul(2/3)),r.add(ge.mul(2/3)).add(pe.mul(2/3)),r.add(pe.mul(2/3))]);o.vecs=[r.unit()];let a=new Tt([o,o.rotate(r,r,2*e/3),o.rotate(r,r,-2*e/3)]),l=new Ve([r.add(ge.mul(2/3)),r.add(ge.mul(4/3)),r.add(ge.mul(4/3)).add(pe.mul(2/3)),r.add(ge.mul(4/3)).add(pe).add(Ge.mul(1/3)),r.add(ge.mul(4/3)).add(pe.mul(2/3)).add(Ge.mul(2/3))]);l.vecs=[r.unit(),we.add(G).add(ge).unit()];let c=new Tt([l,l.rotate(we.add(G),we.add(G),e)]);for(let u=0;u<4;u+=1)s.push(a.rotate(ie,G,n*u)),s.push(a.rotate(ie,G,n*u).rotate(ie,ge,e)),s.push(c.rotate(ie,G,n*u)),s.push(c.rotate(ie,we,n).rotate(ie,G,n*u)),s.push(c.rotate(ie,G,n*u).rotate(ie,ge,e));return t.toMove=function(u,f,h){let d=new et(Math.sign(h.x)/2,Math.sign(h.y)/2,Math.sign(h.z)/2);return{pieces:s.filter(m=>m.direction1(d,h,!0)>=0),ang:i}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function OD(){const e={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],dims:[3,3,3],faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};e.getAllStickers=Qn.bind(e);const n=Math.PI,i=n/2,s=[pe,ge,G],r=1/(1+Math.SQRT2),o=r*Math.SQRT2;let a=e.pieces,l=we.add(G).add(Ge),c=pe.add(G).add(Ge),u=we.add(G).add(ge),f=l.sub(l.mul(o/2)),h=new Ve([l,l.add(ge.mul(o)),l.add(ge.add(pe).mul(o)),l.add(pe.mul(o))]),d=new Tt([h,h.rotate(l,l,2*n/3),h.rotate(l,l,-2*n/3),h.reflect1(f,G,!0),h.rotate(l,l,-2*n/3).reflect1(f,pe,!0),h.rotate(l,l,2*n/3).reflect1(f,Ge,!0)]);d.stickers.forEach(y=>{y.vecs=[we,G,Ge].map(v=>v.clone())});for(let y=0;y<4;y+=1)a.push(d.rotate(ie,G,i*y)),a.push(d.rotate(ie,ge,n/2).rotate(ie,G,i*y));let p=new Ve([l.add(ge.mul(o)),u.add(Ge.mul(o)),u.add(Ge.add(pe).mul(o)),l.add(ge.add(pe).mul(o))]),m=new Ve([u.add(Ge.mul(o)),u.add(Ge.add(Ne).mul(o)),u.add(Ge.add(pe).mul(o))]),_=new Ve([l.add(ge.add(pe).mul(o)),u.add(Ge.add(pe).mul(o)),we.add(G).add(pe.mul(o)).add(pe.add(Ne).setLength(o/2))]),b=new Tt([p,p.rotate(we.add(G),we.add(G),n),m,m.rotate(we.add(G),we.add(G),n),_,_.rotate(we.add(G),we.add(G),n)]);b.stickers.forEach(y=>{y.vecs=[...s,pe.add(G).unit()].map(v=>v.clone())});for(let y=0;y<4;y+=1)a.push(b.rotate(ie,G,i*y)),a.push(b.rotate(l,l,-2*n/3).rotate(ie,G,i*y)),a.push(b.rotate(ie,ge,i).rotate(ie,G,i*y));let g=new Ve([l.add(ge.add(pe).mul(o)),c.add(ge.add(we).mul(o)),c.add(Ne.add(we).mul(o)),l.add(Ne.add(pe).mul(o))]),x=new Tt([g.rotate(ie,pe,n/4),new Ve([l.add(pe.add(Ne).mul(o)),l.add(pe.add(ge).add(Ne).mul(o)),l.add(pe.add(ge).mul(o))]).rotate(ie,pe,n/4),new Ve([c.add(we.add(Ne).mul(o)),c.add(we.add(ge).mul(o)),c.add(we.add(ge).add(Ne).mul(o))]).rotate(ie,pe,n/4),new Ve([l.add(pe.add(Ne).mul(o)),c.add(we.add(Ne).mul(o)),c.add(we.add(Ne).add(ge).mul(o)),l.add(pe.add(Ne).add(ge).mul(o))]).rotate(ie,pe,n/4),new Ve([l.add(pe.add(Ne).mul(o)),c.add(we.add(Ne).mul(o)),c.add(we.add(Ne).add(ge).mul(o)),l.add(pe.add(Ne).add(ge).mul(o))]).rotate(G.add(Ge).mul(r),G.add(Ge).mul(r),n).rotate(ie,pe,n/4)]);x.stickers.forEach(y=>{y.vecs=s.map(v=>v.clone())});for(let y=0;y<4;y+=1)a.push(x.rotate(ie,ge,i*y)),y<2&&a.push(x.rotate(ie,pe,i*Math.pow(-1,y)));return e.toMove=function(y,v,w){let S=y.stickers.filter(D=>!D.color.match(/^[xd]$/)).length,T=y.updateMassCenter(),k=y.stickers.reduce((D,B)=>(B.color==="x"&&B.getOrientation().cross(w).abs()<1e-6&&D.push([B._generator.points[0],B._generator.getOrientation()]),D),[]);k.push([y.updateMassCenter(),w.unit()]);let A=a.reduce((D,B)=>(B.stickers.filter(N=>k.reduce(($,W)=>/^[xd]$/.test(N.color)?$:$||N.direction1(W[0],W[1])===0,!1)).length&&D.push(B),D),[]);if(A.length){let D=!!A.find(B=>B.stickers.filter(U=>/^[^xd]$/.test(U.color)).length==3);if(S<3&&D)return{pieces:[],ang:0}}return{pieces:S==3?a.filter(D=>D.direction1(T,w)>=0):a.filter(D=>D.direction1(T,w)===0),ang:S<3?n/4:i}},e.rotation={x:n/6,y:-n/4,z:0},e.faceVectors=[G,pe,ge,Ne,we,Ge],$n(e,e.faceColors),e}function ND(){let e={center:new et(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:()=>[],faceColors:["g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};e.getAllStickers=Qn.bind(e);const n=Math.PI,i=n/2,s=n/3,r=2.6,o=r/Math.sqrt(3),a=Math.sqrt(r**2-o**2),l=Math.sqrt(6)*r/12;let c=G.mul(a-l),u=Ne.mul(l).add(ge.mul(o)).rotate(ie,G,s),f=u.rotate(ie,G,2*s),h=f.rotate(ie,G,2*s);e.pieces=[];const d=[c,u,f,h],p=[[h.sub(c).div(2),u.sub(h).div(2)],[f.sub(u).div(2),c.sub(f).div(2)],[u.sub(f).div(2),h.sub(u).div(2)],[c.sub(h).div(2),f.sub(c).div(2)]];e.faceVectors=[p[0][0].cross(p[0][1]).unit(),p[1][0].cross(p[1][1]).unit(),p[2][0].cross(p[2][1]).unit(),p[3][0].cross(p[3][1]).unit()];let m=function(g,x,y){let v=[g,x,y],w=v[2].sub(v[1]).cross(v[1].sub(v[0])).unit().mul(a/2);return v.reduce((S,T)=>S.add(T),new et(0,0,0)).div(3).add(w),new Tt([new Ve(v)])};for(let g=0;g<4;g+=1)for(let x=0;x<2;x+=1)for(let y=0;y<=x;y+=1)e.pieces.push(m(d[g].add(p[g][0].mul(x).add(p[g][1].mul(y))),d[g].add(p[g][0].mul(x+1).add(p[g][1].mul(y))),d[g].add(p[g][0].mul(x+1).add(p[g][1].mul(y+1))))),y<x&&e.pieces.push(m(d[g].add(p[g][0].mul(x).add(p[g][1].mul(y))),d[g].add(p[g][0].mul(x+1).add(p[g][1].mul(y+1))),d[g].add(p[g][0].mul(x).add(p[g][1].mul(y+1)))));let _=e.pieces,b=[et.cross(c.add(h).div(2),c.add(u).div(2),u.add(f).div(2)).unit(),et.cross(c.add(f).div(2),c.add(h).div(2),h.add(u).div(2)).unit(),et.cross(h.add(u).div(2),c.add(u).div(2),c.add(f).div(2)).unit()];return _.forEach(g=>g.stickers.forEach(x=>x.vecs=b.map(y=>y.clone()))),e.toMove=function(g,x,y){let v=x.updateMassCenter();return{pieces:_.filter(S=>S.direction1(v,y)==0),ang:i}},$n(e,e.faceColors),e.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},e}function qg(t,e,n,i,s){let r=[...t],o=[...e];for(let a=r.length-2;a>=1;a-=1){let l=new et(r[a],o[a],0);l=l.reflect(n,i,s),r.push(l.x),o.push(l.y)}return new Ve(r.map((a,l)=>new et(a,1,-o[l])))}function BD(t){return t.stickers.filter(e=>e.color!="d").length}function FD(t,e,n,i,s,r){if(s){let o=t,a=new et(n.x,n.y,n.z),l=o.userData.anchor.rotate(e,a,i),u=new r(l.x,l.y,l.z).clone().normalize();o.rotateOnWorldAxis(n,i),o.rotateOnWorldAxis(u,-i*4/3)}else t.rotate(e,t.anchor,-i*4/3,!0).rotate(e,n,i,!0)}function zD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[.2,.9,null,A=>A.color!="x"]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=e*2/3;let s=we.add(G).add(ge),r=t.pieces,l=qg([-1,-.35,-.35,-.527,-.486,-.333,-.313,-.484],[-1,-1,-.9175,-.792,-.623,-.62,-.521,-.484],ie,ge,we.add(Ne)),c=s.add(pe.add(Ge).add(Ne).mul(.65));l.vecs=[we,G,ge];let u=[l];for(let A=0,L=l.points.length;A<L;A+=1)u.push(new Ve([c,l.points[(A+1)%L],l.points[A]]));for(let A=0,L=u.length;A<L;A+=1)u.push(u[A].rotate(s,s,i)),u.push(u[A].rotate(s,s,-i));let f=new Tt(u);for(let A=0;A<4;A+=1)r.push(f.rotate(ie,G,n*A)),r.push(f.rotate(ie,ge,n).rotate(ie,G,n*A));let p=qg([-1,-1,-.895,-.8,-.673,-.769,-.685,-.532,-.532],[0,.32,.321,.457,.37,.233,.091,.088,0],ie,ge,we).reverse(),m=G.add(we);p.vecs=[G,we];for(let A=0;A<2;A+=1)p.vecs.push(p.vecs[A].rotate(ie,m,i)),p.vecs.push(p.vecs[A].rotate(ie,m,-i));let _=we.add(G).sub(we.add(G).mul(.65)),b=[p];for(let A=0,L=p.points.length;A<L;A+=1)b.push(new Ve([_,p.points[(A+1)%L],p.points[A]]));for(let A=0,L=b.length;A<L;A+=1)b.push(b[A].rotate(we.add(G),we.add(G),e));let g=new Tt(b);g.anchor=we.add(G);for(let A=0;A<4;A+=1)r.push(g.rotate(ie,G,n*A)),r.push(g.rotate(ie,ge,n).rotate(ie,G,n*A)),r.push(g.rotate(ie,pe,n).rotate(ie,G,n*A));let v=qg([.49,.49,.295,.287,.373,.373],[0,.22,.22,.149,.15,0],ie,ge,we);v.vecs=[pe];let w=new Tt([v]);for(let A=0;A<4;A+=1)r.push(w.rotate(ie,G,n*A)),r.push(w.rotate(ie,ge,n).rotate(ie,G,n*A)),r.push(w.rotate(ie,Ge,n).rotate(ie,G,n*A)),r.push(w.rotate(ie,pe,n).rotate(ie,G,n*A)),r.push(w.rotate(ie,we,n).rotate(ie,G,n*A)),r.push(w.rotate(ie,pe,e).rotate(ie,G,n*A));let S=[new Ve([G.add(we.add(Ge).mul(.23)),G.add(we.add(ge).mul(.23)),G.add(pe.add(ge).mul(.23)),G.add(pe.add(Ge).mul(.23))])],T=S[0].add(Ne).mul(2.2).add(G.mul(.5));for(let A=0;A<4;A+=1)S.push(new Ve([S[0].points[A],T.points[A],T.points[(A+1)%4],S[0].points[(A+1)%4]]));let k=new Tt(S);for(let A=0;A<4;A+=1)r.push(k.rotate(ie,ge,n*A));return r.push(k.rotate(ie,pe,n)),r.push(k.rotate(ie,we,n)),t.toMove=function(A,L,D){if(![we,G,ge].reduce(($,W)=>$||W.cross(D).abs()<1e-6,!1))return[];let B=r.filter($=>$.stickers.filter(j=>j.color!="d").reduce((j,J)=>j||J.direction1(ie,D)>=0,!1)),U=[],N=[];return B.forEach($=>{$.stickers.filter(J=>J.color!="d").reduce((J,se)=>J||se.direction1(ie,D)==0,!1)?(BD($)===2&&($.hasCallback=!0,$.callback=FD),U.push($)):($.hasCallback=!1,N.push($))}),[{pieces:U,ang:n,animationTime:600},{pieces:N,ang:e,animationTime:600}]},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),r.forEach(A=>A.stickers.forEach(L=>{L.color=="x"&&(L.color="d",L.oColor="d")})),t}class Ii{constructor(e,n){Me(this,"x");Me(this,"y");this.x=e||0,this.y=n||0}add(e){return new Ii(this.x+e.x,this.y+e.y)}sub(e){return new Ii(this.x-e.x,this.y-e.y)}mul(e){return new Ii(this.x*e,this.y*e)}div(e){return new Ii(this.x/e,this.y/e)}rot(e){return new Ii(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e))}abs(){return(this.x**2+this.y**2)**.5}unit(){let e=this.abs();return new Ii(this.x/e,this.y/e)}}function cy(t,e,n){return t.add(e.sub(t).mul(n))}function m1(t,e){return new Ii(t.x*e.x-t.y*e.y,t.x*e.y+t.y*e.x)}function UD(t){const e=1/(t.x**2+t.y**2);return new Ii(e*t.x,-e*t.y)}function HD(t,e){return m1(t,UD(e))}function Xg(t,e,n){const i=n.sub(e),s=e.sub(t),r=m1(t,i),o=m1(n,s);return a=>HD(cy(r,o,a),cy(i,s,a))}function Vl(t,e,n){return t*n+e}function VD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],dims:[],faceColors:["w","r","g","y","o","b"],move:()=>!1,roundParams:[]};t.getAllStickers=Qn.bind(t);let e=t.pieces;const n=we.add(G),i=n.add(Ge),s=n.add(ge),r=pe.add(G).add(ge),o=r.add(Ge.mul(2)),a=we.add(Ne).add(Ge),l=we.add(Ne).add(ge),c=pe.add(Ne).add(ge),u=c.add(Ge.mul(2)),f=[i,s,r,o,a,l,c,u],h=Math.PI,d=h/2,p=h/3,m=2*p;let _=new Ve([i,n,Ge.add(G)],"",[...[we,G,Ge].map(J=>J.rotate(i,i,m/2)),i.unit()]),b=new Tt([_,_.rotate(ie,i,m),_.rotate(ie,i,-m)]);for(let J=0;J<4;J+=1)e.push(b.rotate(ie,G,d*J)),e.push(b.rotate(ie,we,d).rotate(ie,G,d*J));let g=new Ve([we.add(Ge),we.add(ge),pe.add(ge),pe.add(Ge)]).mul(1/3,!0).add(G,!0),x=new Tt([g]);for(let J=0;J<4;J+=1)e.push(x.rotate(ie,ge,d*J)),J<2&&e.push(x.rotate(ie,pe,d+J*h));let y=new Ve([]),v=Xg(new Ii(-1,0),new Ii(-1/3,-1/3),new Ii(0,-1));for(let J=0,se=30;J<=se;J+=1){let ne=J/se,K=v(ne);y.points.push(new et(K.x,1,K.y))}y.vecs=[i.unit()],y.updateMassCenter(),y.computeBoundingBox();let w=new Tt([y]);for(let J=0;J<4;J+=1)for(let se=0;se<3;se+=1)e.push(w.rotate(ie,i,m*se).rotate(ie,G,d*J)),e.push(w.rotate(ie,i,m*se).rotate(ie,we,d).rotate(ie,G,d*J));let S=new Ve([],"",[we,G]),T=[],k=[],A=Xg(new Ii(0,-1),new Ii(-1/3,-1/3),new Ii(-1,0)),L=Xg(new Ii(-1,0),new Ii(-1/3,1/3),new Ii(0,1));S.points.push(g.points[0].add(g.points[1]).div(2));for(let J=0,se=10;J<=se;J+=1){let ne=J/se/2,K=A(ne+.5),q=L(ne);T.push(new et(K.x,1,K.y)),k.push(new et(q.x,1,q.y))}S.points.push(...T,...k),S.updateMassCenter(),S.computeBoundingBox();let D=new Tt([S,S.rotate(n,n,h)]),B=[],U=[],N=[],$=5,W=k.length;for(let J=0,se=$-1;J<=se;J+=1){let ne=J/se;N.push(k.map(K=>K.rotate(n,Ge,d*ne)))}for(let J=0,se=$-1;J<se;J+=1)for(let ne=0,K=W-1;ne<K;ne+=1)U.push([Vl(J,ne,W),Vl(J+1,ne,W),Vl(J,ne+1,W)]),U.push([Vl(J+1,ne,W),Vl(J+1,ne+1,W),Vl(J,ne+1,W)]);B=N.reduce((J,se)=>(J.push(...se),J),[]);let j=new Yc(B,U,"d");D.stickers.push(j),D.stickers.push(j.reflect1(n,Ge)),D.updateMassCenter();for(let J=0;J<4;J+=1)e.push(D.rotate(ie,G,d*J)),e.push(D.rotate(ie,we,d).rotate(ie,G,d*J)),e.push(D.rotate(ie,we,h).rotate(ie,G,d*J));return t.toMove=function(J,se,ne){let K=[we,G,Ge].reduce((Ee,ye)=>Ee||ye.cross(ne).abs()<1e-6,!1),q=f.reduce((Ee,ye)=>Ee||ye.cross(ne).abs()<1e-6,!1);if(!K&&!q)return{pieces:[],ang:0};if(!K){let Ee=se.getMassCenter(),ye=f.reduce((Ae,De)=>{let de=De.sub(Ee).abs();return de<Ae[0]?[de,De]:Ae},[1/0,new et(0,0,0)])[1];return{pieces:e.filter(Ae=>Ae.getMassCenter().sub(ye).abs()<=1),ang:p}}let te=[ne.x,ne.y,ne.z].map(Ee=>Math.abs(1-Math.abs(Ee))<1e-6?Math.sign(Ee):0),re=new et(te[0],te[1],te[2]),Oe=e.reduce((Ee,ye)=>{let xe=ye.direction1(re.mul(.3333333333333333),re);return xe>=0&&Ee[xe].push(ye),Ee},[[],[]]);return{pieces:Oe[0].length>0?[]:Oe[1],ang:d}},t.rotation={x:h/6,y:-h/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t.getAllStickers().forEach(J=>{J instanceof Yc&&(J.color="d",J.oColor="d")}),t}function GD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["y","o","g","w","r","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2;let i=t.pieces,s=new Tt([new Ve([we.add(G).add(Ge),we.add(G),G,G.add(Ge)]),new Ve([we.add(G).add(Ge),we.add(Ge),we,we.add(G)]),new Ve([we.add(G).add(Ge),G.add(Ge),Ge,Ge.add(we)])]);s.stickers.forEach(o=>o.vecs=[we,G,Ge].map(a=>a.clone()));let r=new Tt([new Ve([we,we.add(Ne),we.add(Ne).add(ge),we.add(ge)]),new Ve([pe,pe.add(ge),pe.add(Ne).add(ge),pe.add(Ne)]),new Ve([we.add(ge),we.add(ge).add(Ne),pe.add(ge).add(Ne),pe.add(ge)]),new Ve([we.add(ge),we.add(ge).add(Ne),pe.add(ge).add(Ne),pe.add(ge)]).rotate(ie,ge.add(Ne),e)]);return r.stickers.forEach(o=>o.vecs=[we,ge,Ne].map(a=>a.clone())),i.push(s),i.push(s.rotate(ie,G,n)),i.push(s.rotate(ie,we,n)),i.push(s.rotate(ie,ge,e)),i.push(r),i.push(r.rotate(ie,ge,e).rotate(ie,G,n)),t.toMove=function(o,a,l){let c=a.updateMassCenter(),u=i.filter(h=>h.direction1(ie,l)===0),f=i.filter(h=>h.direction1(c,l)===0);return{pieces:u.length>0?[]:f,ang:n}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function gn(t,e,n){return we.add(G).add(Ge).add(pe.mul(2*t/3).add(Ne.mul(2*e/3)).add(ge.mul(2*n/3)))}function WD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["y","g","r","w","b","o"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3;let s=t.pieces,r=new Tt([new Ve([gn(2,0,2),gn(2,0,3),gn(3,0,3),gn(3,0,2)]),new Ve([gn(2,0,3),gn(2,1,3),gn(3,1,3),gn(3,0,3)]),new Ve([gn(3,0,3),gn(3,1,3),gn(3,1,2),gn(3,0,2)])]),o=new Tt([new Ve([gn(0,0,0),gn(0,0,1),gn(2,0,1),gn(2,0,0)]),new Ve([gn(0,0,0),gn(2,0,0),gn(2,1,0),gn(0,1,0)]),new Ve([gn(0,0,0),gn(0,1,0),gn(0,1,1),gn(0,0,1)]),new Ve([gn(0,0,1),gn(0,1,1),gn(2,1,1),gn(2,0,1)])]),a=new Tt([new Ve([gn(1,1,0),gn(2,1,0),gn(2,3,0),gn(1,3,0)]),new Ve([gn(1,3,0),gn(2,3,0),gn(2,3,2),gn(1,3,2)])]),l=[o,o.add(ge.mul(2/3)),o.add(ge.mul(4/3))];return s.push(r),s.push(...l),s.push(...l.map(c=>c.rotate(ie,pe.add(G).add(ge),i))),s.push(...l.map(c=>c.rotate(ie,pe.add(G).add(ge),-i))),s.push(...l.map(c=>c.rotate(ie,ge,n))),s.pop(),s.push(a),t.toMove=function(c,u,f){let h=u.updateMassCenter(),d=f.unit().toNormal().div(3),p=s.filter(_=>_.direction1(d,f)===0),m=s.filter(_=>_.direction1(h,f)===0);return{pieces:p.length>0?[]:m,ang:n}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),wD(t),s.forEach(c=>{c.stickers=c.stickers.filter(u=>u.color!="x")}),t}function jh(t,e,n){let i=0,s=1,r=0;for(let o=1;o<=50;o+=1){r=(i+s)/2;let a=t.add(e.sub(t).mul(r));Math.abs(a[n])<1?i=r:s=r}return t.add(e.sub(t).mul(r))}function jD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["w","b","r","y","g","o"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);let e=t.pieces;const n=1,i=2*n/3,s=2*n*Math.sqrt(2)/2,r=Math.PI,o=r/6,a=s*Math.sin(o)/Math.sin(7*r/12);let l=[],c=we.add(Ge),u=we.add(ge),f=pe.add(ge),h=pe.add(Ge),d=c.add(G),p=c.add(Ne),m=h.add(G),_=h.add(Ne),b=u.add(G),g=u.add(Ne);f.add(G),f.add(Ne);for(let v=0;v<3;v+=1)l.push(jh(ie,c.rotate(ie,G,o*v),"x").add(G));for(let v=0;v<3;v+=1)l.push(jh(ie,u.rotate(ie,G,o*v),"z").add(G));for(let v=0;v<3;v+=1)l.push(jh(ie,f.rotate(ie,G,o*v),"x").add(G));for(let v=0;v<3;v+=1)l.push(jh(ie,h.rotate(ie,G,o*v),"z").add(G));for(let v=0,w=l.length;v<w;v+=1){let S=l[v],T=l[(v+1)%w],k=new Tt([new Ve([ie.add(G),S,T]),new Ve([ie.add(G),S,T]).add(Ne.mul(2/3),!0).reverse(!0),new Ve([S,S.add(Ne.mul(2/3)),T.add(Ne.mul(2/3)),T],"",[G.clone()]),new Ve([ie.add(G),T,T.add(Ne.mul(2/3)),ie.add(G.div(3))]),new Ve([ie.add(G),ie.add(G.div(3)),S.add(Ne.mul(2/3)),S])]);e.push(k),e.push(k.rotate(ie,pe,r))}let x=new Tt([new Ve([d.add(Ne.mul(i)),p.add(G.mul(i)),g.add(G.mul(i)),b.add(Ne.mul(i))]),new Ve([b.add(Ne.mul(i)),g.add(G.mul(i)),g.add(G.mul(i)).add(pe.mul(a)),b.add(Ne.mul(i)).add(pe.mul(a))]),new Ve([b.add(Ne.mul(i)).add(pe.mul(a)),g.add(G.mul(i)).add(pe.mul(a)),_.add(G.mul(i)).add(we.mul(a)),m.add(Ne.mul(i)).add(we.mul(a))]),new Ve([m.add(Ne.mul(i)).add(we.mul(a)),_.add(G.mul(i)).add(we.mul(a)),p.add(G.mul(i)),d.add(Ne.mul(i))]),new Ve([d.add(Ne.mul(i)),b.add(Ne.mul(i)),b.add(Ne.mul(i)).add(pe.mul(a)),m.add(Ne.mul(i)).add(we.mul(a))]),new Ve([p.add(G.mul(i)),g.add(G.mul(i)),g.add(G.mul(i)).add(pe.mul(a)),_.add(G.mul(i)).add(we.mul(a))]).reverse()]),y=x.stickers[2].getOrientation();return x.stickers.forEach(v=>{v.vecs=[y.mul(-1),G.clone()]}),e.push(x),e.push(x.rotate(ie,G,r)),t.toMove=function(v,w,S){let T=w.vecs[0].cross(G).abs()<1e-6?o:r,k=[];if(T>o&&S.cross(G).abs()>1e-6)k=e.filter(A=>A.direction1(S.mul(.06),S)===0);else{let A=w.updateMassCenter(),L=T>o;k=e.filter(D=>L?D.direction1(A,S)===0:D.direction1(A,S)>=0)}return{pieces:k,ang:T}},t.rotation={x:o,y:-o,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}let Tb=new Map;function Wn(t,e,n,i){Tb.set(t,{code:t,name:e,constr:n,order:i})}function YD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["w","r","g","y","o","b"],move:()=>!0,roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/2,i=2*e/3,s=n,r=[pe,ge,G];let o=t.pieces,a=new Ve([pe.add(G).add(ge),ge.add(G),ge.add(pe)],"",r),l=new Tt([0,1,2].map(b=>a.rotate(ie,pe.add(G).add(ge),i*b))),c=[0,1,2,3].map(b=>l.rotate(ie,G,n*b));o.push(...c),o.push(...c.map(b=>b.rotate(ie,ge,e)));let u=G.add(Ge).add(G.add(we)).div(2),f=new Tt([new Ve([0,1,2,3].map(b=>u.rotate(ie,G,n*b)),"",r),new Ve([0,1,2,3].map(b=>u.rotate(ie,G,n*b).mul(.5)),"",r)]),h=[...[0,1,2,3].map(b=>f.rotate(ie,pe,n*b)),f.rotate(ie,ge,n),f.rotate(ie,ge,-n)];o.push(...h);let d=new Ve([u,we.add(G),u.rotate(ie,G,n)],"",[G,we,ge]),p=new Ve([Ge.add(we).div(2).add(G),Ge.add(G).div(2).add(we),we.add(G)]),m=new Tt([d,d.rotate(ie,we.add(G),e),p,p.rotate(ie,we.add(G),e)]),_=[0,1,2,3].map(b=>m.rotate(ie,G,n*b));return o.push(..._),o.push(..._.map(b=>b.rotate(ie,b.stickers[0].points[1],n).rotate(ie,b.stickers[1].getOrientation().rotate(ie,G,n),n/2).rotate(ie,G,n/2))),o.push(..._.map(b=>b.rotate(ie,ge,e))),t.toMove=function(b,g,x){let y=g.updateMassCenter();return{pieces:o.filter(w=>w.direction1(y,x,!0)===0),ang:s}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[G,pe,ge,Ne,we,Ge],$n(t,t.faceColors),t}function qD(){const t={pieces:[],palette:Kn,rotation:{},center:new et(0,0,0),faceVectors:[],getAllStickers:()=>[],faceColors:["white","yellow","violet","green","red","blue","orange","lblue","lyellow","pink","lgreen","gray"],move:()=>!0,roundParams:[]},e=Math.PI,n=Math.sqrt,i=n((50+22*n(5))/5)/4,s=n(6)/4*n(3+n(5)),r=1,a=r/i*s,l=n(a**2-r**2),c=2*e/5,u=2*e/3;let f=[];for(let L=0;L<5;L+=1)f.push(G.mul(r).add(Ge.mul(l).rotate(ie,G,L*c)));t.getAllStickers=Qn.bind(t);let h=(L,D)=>f[L].add(f[D]).div(2),d=et.cross(ie,h(0,4),h(2,3)),p=et.cross(ie,h(0,1),h(4,3)),m=t.pieces,_=[et.cross(ie,h(2,3),h(0,4)),et.cross(ie,h(3,4),h(0,1)),et.cross(ie,h(0,4).reflect(ie,h(1,1),h(2,2)),h(2,3).reflect(ie,h(1,1),h(2,2)))],b=h(3,4).add(h(4,0)).sub(f[4]),g=new Ve([h(0,1),f[1],f[2],h(2,3),b],"",_),x=new Ve([f[0],h(0,1),b,h(0,4)],"",[_[0],_[1].mul(-1),_[2].reflect(ie,f[4],h(1,2))]),y=new Tt([g,g.rotate(ie,h(1,2),e)]),v=y.stickers,w=new Ve([v[0].points[0],v[0].points[0].add(v[1].points[3]).sub(v[0].points[1]),v[1].points[3],v[0].points[1]],"",_);y.stickers.push(w,w.reflect1(ie,f[2].sub(f[1]),!0)),v.forEach(L=>L.vecs=_.map(D=>D.clone()));let S=y.rotate(ie,y.stickers[1].getOrientation(),c).rotate(ie,G,c*3),T=x.reflect(ie,f[3],f[4],!0),k=new Tt([x,x.rotate(ie,f[0],-2*e/3),T.rotate(ie,T.getOrientation(),c*2).reflect(ie,b,f[4],!0)]),A=k.reflect1(ie,f[2].sub(f[1]),!0);return m.push(...[0,1,2].map(L=>y.rotate(ie,d,u*L)),...[0,1,2].map(L=>S.rotate(ie,d,u*L)),...[0,1,2].map(L=>k.rotate(ie,d,u*L)),...[0,1,2].map(L=>A.rotate(ie,d,u*L)),k.rotate(ie,p,u),A.rotate(ie,p,-u)),t.toMove=function(L,D,B){let U=L.updateMassCenter();return{pieces:m.filter($=>$.direction1(U,B,!0)>=0),ang:u}},t.rotation={x:e/6,y:-e/4,z:0},t.faceVectors=[y.stickers[0].getOrientation(),...[0,1,2,3,4].map(L=>y.stickers[1].rotate(ie,G,c*L).getOrientation())],t.faceVectors.push(...t.faceVectors.map(L=>L.rotate(ie,ge,e).rotate(ie,G,c/2))),$n(t,t.faceColors),t}function XD(){const t={pieces:[],palette:Kn,rotation:{},center:ie,faceVectors:[],getAllStickers:()=>[],faceColors:["white","yellow","violet","green","red","blue","orange","lblue","lyellow","pink","lgreen","gray"],move:()=>!0,roundParams:[]},e=Math.PI,n=Math.sqrt,i=n((50+22*n(5))/5)/4,s=n(6)/4*n(3+n(5)),r=1,a=r/i*s,l=n(a**2-r**2),c=2*e/5,u=2*e/3,f=.276393202250021,h=.4472135954999585;let d=[],p=(B,U)=>B.add(U.sub(B).mul(f));for(let B=0;B<5;B+=1)d.push(G.mul(r).add(Ge.mul(l).rotate(ie,G,B*c)));let _=new Ve(d).getMassCenter();t.getAllStickers=Qn.bind(t);let b=t.pieces,g=[G,...[0,1,2].map(B=>_.rotate(ie,d[B],u))],x=new Ve([p(d[0],d[4]),d[0],p(d[0],d[1]),_],"",g.slice(0,3)),y=new Tt([...[0,1,2].map(B=>x.rotate(ie,d[0],u*B))]),v=[0,1,2,3,4].map(B=>y.rotate(ie,G,c*B)),w=t.faceVectors=[G,...v.map(B=>B.stickers[2].getOrientation())];w.push(...t.faceVectors.slice().map(B=>B.rotate(ie,pe,e))),b.push(...v),b.push(...v.map(B=>B.rotate(ie,pe,e)));let S=v.reduce((B,U,N)=>[...B,...[1,2].map($=>U.rotate(ie,w[N+1],c*$))],[]);b.push(...S);let T=new Ve([p(d[0],d[1]),p(d[1],d[0]),_],"",g),k=new Tt([T,T.reflect1(ie,et.cross(ie,d[0],d[1]),!0)]),A=[0,1,2,3,4].map(B=>k.rotate(ie,G,c*B)),L=A.map(B=>B.rotate(ie,pe,e));b.push(...A,...L);let D=A.reduce((B,U,N)=>[...B,...[1,2,3].map($=>U.rotate(ie,w[N+1],c*$))],[]);return b.push(...D),b.push(...A.map((B,U)=>B.rotate(ie,w[U+1],c).reflect1(ie,G,!0).rotate(ie,G,c/2))),$n(t,t.faceColors),t.toMove=function(B,U,N){let $=N.unit().mul(h);return{pieces:b.filter(j=>j.direction1($,N,!0)>=0),ang:c}},t.rotation={x:e/6,y:-e/4,z:0},t}function ZD(){let t={center:new et(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:()=>[],faceColors:["g","b","y","r","g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};t.getAllStickers=Qn.bind(t);const e=Math.PI,n=e/3,i=2.6,s=i/Math.sqrt(3),r=Math.sqrt(i**2-s**2),o=Math.sqrt(6)*i/12;let a=G.mul(r-o),l=Ne.mul(o).add(ge.mul(s)).rotate(ie,G,n),c=l.rotate(ie,G,2*n),u=c.rotate(ie,G,2*n);t.pieces=[];const f=[a,l,c,u],h=[[u.sub(a).div(3),l.sub(u).div(3)],[c.sub(l).div(3),a.sub(c).div(3)],[a.sub(u).div(3),c.sub(a).div(3)],[l.sub(c).div(3),u.sub(l).div(3)]];t.faceVectors=[h[0][0].cross(h[0][1]).unit(),h[1][0].cross(h[1][1]).unit(),h[3][0].cross(h[3][1]).unit(),h[2][0].cross(h[2][1]).unit()];let d=t.faceVectors,p=t.pieces,m=new Ve([f[0].add(h[0][0]),f[0].add(h[0][0].add(h[0][1])),f[0].add(h[2][1])],"",[G,d[0],d[1],d[3]]),_=new Ve([a.add(h[0][0]),a.add(h[0][0].mul(2)).add(h[0][1]),a.add(h[0][0]).add(h[0][1])],"",[G,d[1],d[2]]),b=new Tt([m,...[0,1,2].map(y=>_.rotate(ie,G,2*n*y))]);p.push(b,b.reflect(ie,l,c,!0),b.reflect(ie,l,u,!0),b.reflect(ie,c,u,!0));let g=new Ve([a.add(h[0][0]),a.add(h[0][0].mul(2)),a.add(h[0][0].mul(2)).add(h[0][1])]),x=new Tt([g,g.reflect(ie,a,u,!0)]);return x.stickers.forEach(y=>y.vecs=[G,d[0],d[1].mul(-1),d[2]].map(v=>v.clone())),p.push(...[0,1,2].map(y=>x.rotate(ie,G,2*n*y))),p.push(...[0,1,2].map(y=>x.rotate(ie,d[0],2*n).rotate(ie,G,2*n*y))),t.toMove=function(y,v,w){let S=y.updateMassCenter();return{pieces:p.filter(k=>k.direction1(S,w)===0),ang:2*e/3}},t.faceVectors.push(a.unit(),l.unit(),u.unit(),c.unit()),$n(t,t.faceColors),t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t}function JD(){let t={center:new et(0,0,0),palette:Kn,pieces:[],rotation:{},faceVectors:[],getAllStickers:()=>[],faceColors:["g","b","y","r"],move:()=>!0,dims:[],roundParams:[]};t.getAllStickers=Qn.bind(t);const n=2*Math.PI/3,i=2.6,s=i/Math.sqrt(3),r=Math.sqrt(i**2-s**2),o=Math.sqrt(6)*i/12;let a=G.mul(r-o),l=Ne.mul(o).add(ge.mul(s)).rotate(ie,G,n/2),c=l.rotate(ie,G,n),u=c.rotate(ie,G,n),f=t.pieces=[],h=t.faceVectors=[],d=et.cross;const p=1/4,m=[a,l,c,u];let _=(k,A)=>m[A].sub(m[k]).mul(p),b=_(0,3),g=_(0,1),x=_(3,1),y=new Ve([a,a.add(b),a.add(b).add(g),a.add(g)],"",[d(a,u,l),d(a,l,c),d(a,c,u)]),v=new Tt([0,1,2].map(k=>y.rotate(ie,G,n*k)));h.push(Ne,...v.stickers.map(k=>k.getOrientation())),f.push(...[0,1,2].map(k=>v.rotate(ie,h[1],n*k))),f.push(v.rotate(ie,h[1],n).rotate(ie,Ne,n));let w=new Ve([a.add(b),u.sub(b),u.sub(b).add(x),a.add(b).add(g)],"",[d(a,c,u)]),S=new Tt([w,w.reflect(ie,a,u,!0)]);f.push(...[0,1,2].map(k=>S.rotate(ie,G,n*k))),f.push(...[0,1,2].map(k=>S.reflect(ie,u,c,!0).rotate(ie,G,n*k)));let T=new Tt([new Ve([0,1,2].map(k=>a.add(b).add(g).rotate(ie,h[1],n*k)))]);return f.push(...[0,1,2].map(k=>T.rotate(ie,G,n*k))),f.push(T.reflect(ie,u,l,!0)),t.toMove=function(k,A,L){let D=A.updateMassCenter();return{pieces:f.filter(U=>U.direction1(D,L)>=0),ang:n}},$n(t,t.faceColors),t.rotation={x:Math.PI/6,y:-Math.PI/4,z:0},t}function KD(){const t={pieces:[],palette:Kn,rotation:{},center:ie,faceVectors:[G,Ne],faceColors:["green","blue"],getAllStickers:Qn,move:()=>!0,roundParams:[]},e=Math.PI,n=e/3,i=e/6,s=1/3,r=3/4,o=1,a=30,l=G.mul(s);let c=t.pieces,u=new Ve([pe.mul(s),...new Array(a).fill(0).map((b,g)=>pe.mul(s).rotate(ie,G,g*e/(a-1))),pe.mul(-s),pe.mul(s)],"",[Ge]).add(l),f=new Tt([u,u.rotate(ie,ge,e)]),h=pe.mul(o).rotate(ie,G,i).unit(),d=new Ve([pe.mul(o).rotate(ie,G,i),pe.mul(r).rotate(ie,G,n),...new Array(a).fill(0).map((b,g)=>pe.mul(s).rotate(ie,G,(1-g/(a-1))*n)),pe.mul(r)],"",[G,h]).add(l),p=new Ve([pe.mul(r),pe.mul(o).rotate(ie,G,i),pe.mul(o).rotate(ie,G,i).add(l),pe.mul(r).add(l)],"",[G,h]),m=new Tt([d,p,p.reflect(ie,pe.mul(o).rotate(ie,G,i),pe.mul(o).rotate(ie,G,i).add(l),!0)]);c.push(f,f.rotate(ie,G,e)),c.push(...[0,1,2,3,4,5].map(b=>m.rotate(ie,G,b*n)),...[0,1,2,3,4,5].map(b=>m.rotate(ie,G,b*n).rotate(ie,pe,e)));let _=["red","violet","white","yellow","pink","orange"];for(let b=0;b<6;b+=1){let g=m.rotate(ie,G,b*n);t.faceColors.push(_[b],_[b]),t.faceVectors.push(g.stickers[1].getOrientation(),g.stickers[2].getOrientation())}return $n(t,t.faceColors),t.toMove=function(b,g,x){let y=g.updateMassCenter(),v=x.cross(G).abs()<1e-4?n:e,w=x;return v>n&&(w=y.dot(Ge)>0?Ge:ge),{pieces:c.filter(T=>T.direction1(ie,w,!0)>=0&&(v>n?!0:T.stickers.some(k=>k.getOrientation().cross(G).abs()>1e-4))),ang:v,dir:w}},t.rotation={x:e/6,y:-e/4,z:0},t}Wn("rubik","Rubik",xD,!0);Wn("mirror","Mirror",PD,!0);Wn("pyraminx","Pyraminx",ED,!0);Wn("megaminx","Megaminx",CD,!0);Wn("skewb","Skewb",MD,!1);Wn("square1","Square One",SD,!1);Wn("square2","Square Two",jD,!1);Wn("axis","Axis",TD,!1);Wn("fisher","Fisher",kD,!1);Wn("ivy","Ivy",AD,!1);Wn("clock","Rubik's clock",LD,!1);Wn("dino","Dino",RD,!1);Wn("rex","Rex",ID,!1);Wn("redi","Redi",DD,!1);Wn("mixup","Mixup",OD,!1);Wn("pyramorphix","Pyramorphix",ND,!1);Wn("gear","Gear",zD,!1);Wn("dreidel","Dreidel",VD,!1);Wn("bandaged222","Bandaged 2x2x2",GD,!1);Wn("bicube","Bicube",WD,!1);Wn("pandora","Pandora",YD,!1);Wn("ultimateSkewb","Ultimate Skewb",qD,!1);Wn("pyraminxCrystal","Pyraminx Crystal",XD,!1);Wn("tetraminx","Tetraminx",ZD,!1);Wn("meierHalpernPyramid","Meier-Halpern Pyramid",JD,!1);Wn("sq1Star","Square-1 Star",KD,!1);class Ns{constructor(e){Me(this,"rotation");Me(this,"p");Me(this,"order");Me(this,"arrows");Me(this,"type");Me(this,"mode");Me(this,"view");Me(this,"headless");Me(this,"img");Me(this,"options");var i;if(this.options=e,this.type=e.type||"rubik",this.mode=e.mode||ai.NORMAL,this.view=e.view||"trans",this.headless=!!e.headless,this.img=Eb,this.arrows=[],this.options.sequence="",this.view==="plan")switch(this.type){case"megaminx":case"pyraminx":case"skewb":case"square1":this.view="2d";break}this.type==="mirror"&&(this.view="trans",this.mode=ai.NORMAL),this.setTips(e.tips||[]);let n;if(Array.isArray(e.order))if(e.order.length>=3)n=[...e.order.slice(0,3)];else{n=[...e.order];let s=0;for(;n.length<3;)n.push(e.order[s]),s=(s+1)%e.order.length}else typeof e.order=="number"?n=[e.order,e.order,e.order]:n=[3,3,3];["megaminx","pyraminx"].indexOf(this.type)>-1&&(n.length=1),n.push(this.headless),this.p=(i=Tb.get(this.type))==null?void 0:i.constr.apply(null,n),this.order=n,this.rotation=this.p.rotation,this.adjustColors()}adjustColors(){if(this.type!="rubik")return;let e=this.p.pieces,n;if(this.mode===ai.NORMAL||this.mode===ai.ELL||this.mode===ai.ZBLL||this.mode===ai.PLL){for(let r=0,o=e.length;r<o;r+=1){let a=e[r].stickers;for(let l=0,c=a.length;l<c;l+=1)a[l].color=a[l].oColor}return}if(this.order[0]===1)n=e[0].stickers.filter(r=>r.getOrientation().sub(G).abs()<1e-6)[0];else if(this.order[0]===2){for(let r=0,o=e.length;r<o;r+=1)if(e[r].getMassCenter(!1).y>0){n=e[r].stickers.filter(a=>a.getOrientation().sub(G).abs()<1e-6)[0];break}}else this.order[0]%2==1?n=e.filter(r=>{let o=r.stickers.filter(c=>c.oColor!="x"&&c.oColor!="d");if(o.length!=1)return!1;let l=o[0].getMassCenter();return o[0].getOrientation().sub(G).abs()<1e-6&&Math.abs(l.x)<1e-6&&Math.abs(l.z)<1e-6})[0].stickers.filter(r=>r.oColor!="x"&&r.oColor!="d")[0]:n=e.filter(r=>r.length===2&&r.stickers[0].getOrientation().sub(G).abs()<1e-6)[0].stickers[0];let i=n.oColor,s=this.p.faceColors[(this.p.faceColors.indexOf(i)+3)%6];for(let r=0,o=e.length;r<o;r+=1){let a=e[r].stickers.filter(u=>"xd".indexOf(u.oColor)===-1),l=a.length,c=a.reduce((u,f)=>u||f.getOrientation().sub(G).abs()<1e-6,!1);switch(this.mode){case ai.OLL:{for(let u=0;u<l;u+=1)a[u].oColor!=i?a[u].color="x":a[u].color=a[u].oColor;break}case ai.F2L:{for(let u=0;u<l;u+=1)e[r].contains(i)?a[u].color="x":a[u].color=a[u].oColor;break}case ai.CMLL:{for(let u=0;u<l;u+=1)c&&l===2?a[u].color="x":a[u].color=a[u].oColor;break}case ai.OLLCP:{if(c)for(let u=0;u<l;u+=1)l===2&&a[u].oColor!=i?a[u].color="x":a[u].color=a[u].oColor;else for(let u=0;u<l;u+=1)a[u].color="x";break}case ai.COLL:{if(c)for(let u=0;u<l;u+=1)if(l===2){let f=!0,h=a[u].points;for(let d=1,p=h.length;d<p;d+=1)if(Math.abs(h[d].y-h[0].y)>1e-5){f=!1;break}f?a[u].color=a[u].oColor:a[u].color="x"}else a[u].color=a[u].oColor;else for(let u=0;u<l;u+=1)a[u].color="x";break}case ai.VLS:case ai.WV:{for(let u=0;u<l;u+=1)e[r].contains(i)&&a[u].oColor!=i?a[u].color="x":a[u].color=a[u].oColor;break}case ai.GRAY:{for(let u=0;u<l;u+=1)a[u].color="x";break}case ai.CENTERS:{for(let u=0;u<l;u+=1)l!=1?a[u].color="x":a[u].color=a[u].oColor;break}case ai.CROSS:{let u=l>2||l===2&&!e[r].contains(s);for(let f=0;f<l;f+=1)a[f].color=u?"x":a[f].oColor;break}case ai.FL:{let u=l>=2&&!e[r].contains(s);for(let f=0;f<l;f+=1)a[f].color=u?"x":a[f].oColor;break}case ai.YCROSS:{let u=e[r].contains(i)&&l>2;for(let f=0;f<l;f+=1)a[f].color=u?"x":a[f].oColor;break}}}}static inverse(e,n){let i=n.trim().split(" ").map(r=>r.trim()).filter(r=>r!=""),s=[];if(e!=="square1")for(let r=i.length-1;r>=0;r-=1)i[r].indexOf("2")>-1||i[r].indexOf("'")>-1?s.push(i[r].replace("'","")):s.push(i[r]+"'");else{let r=/\s*\(?(-?\d+), *(-?\d+)\)?\s*/;i=n.replace(/\s+/g,"").split("/");for(let o=i.length-1;o>=0;o-=1){let a=i[o].match(r);a&&s.push(`(${-a[1]}, ${-a[2]})`),o>0&&s.push("/")}}return s.join(" ")}static fromSequence(e,n,i){let s=new Ns(n),r=i?Ns.inverse(n.type,e):e;return s.move(r),s.options.sequence=r,s}setTips(e){this.arrows=e.map(n=>n)}isComplete(){let e=this.p.pieces,n=this.p.faceVectors,i=n.length,s=[];for(let r=0;r<i;r+=1)s.push("-");for(let r=0,o=e.length;r<o;r+=1){let a=e[r].stickers;for(let l=0,c=a.length;l<c;l+=1){if("xd".indexOf(a[l].oColor)>-1)continue;let u=a[l].getOrientation(),f=!1;for(let h=0;h<i;h+=1)if(u.sub(n[h]).abs()<1e-6){if(s[h]==="-")s[h]=a[l].oColor;else if(s[h]!=a[l].oColor)return!1;f=!0;break}if(!f)return!1}}return!0}move(e){let n;if(["rubik","axis","fisher","ivy"].indexOf(this.type)>-1)n=Ks.parseNNN(e,this.order[0]);else if(this.type==="pyraminx")n=Ks.parsePyraminx(e);else if(this.type==="skewb")n=Ks.parseSkewb(e);else if(this.type==="square1")n=Ks.parseSquare1(e);else if(this.type==="clock")n=Ks.parseClock(e);else if(this.type==="megaminx")n=Ks.parseMegaminx(e);else return;this.p.move(n),this.adjustColors()}getColor(e){return this.p.palette[e]}getHexColor(e){let n=new qs(this.p.palette[e]);return hD(n.toRGBStr())}getHexStrColor(e){return new qs(this.p.palette[e]).toHex()}get pieces(){return this.p.pieces}getAllStickers(){return this.p.getAllStickers()}clone(e){let n=new Ns({type:this.type,mode:typeof e<"u"?e:this.mode,view:this.view,order:[this.order[0]],tips:this.arrows,headless:this.options.headless,rounded:this.options.rounded,sequence:this.options.sequence});n.p.pieces.length=0;let i=this.p.pieces;for(let s=0,r=i.length;s<r;s+=1)n.p.pieces.push(i[s].clone());return n.p.center=this.p.center.clone(),n.p.dims=(this.p.dims||[]).map(s=>s),n.p.rotation=Object.assign({},this.p.rotation),n.rotation=Object.assign({},this.rotation),n}moveFromMouse(e,n,i,s){return this.p.toMove?this.p.toMove(e,n,i,s):[]}getPiece(e){let n=this.pieces,i=1/0,s,r;for(let o=0,a=n.length;o<a;o+=1){let l=n[o].stickers;for(let c=0,u=l.length;c<u;c+=1){let f=l[c].points;if(e.length===f.length){let h=f.reduce((d,p,m)=>d+p.sub(new et(e[m].x,e[m].y,e[m].z)).abs(),0);h<i&&(i=h,s=n[o],r=l[c])}}}return[s,r]}computeBoundingBox(){let n=this.pieces.map(i=>i.computeBoundingBox()).reduce((i,s)=>[Math.min(i[0],s[0].x),Math.min(i[1],s[0].y),Math.min(i[2],s[0].z),Math.max(i[3],s[1].x),Math.max(i[4],s[1].y),Math.max(i[5],s[1].z)],[1/0,1/0,1/0,-1/0,-1/0,-1/0]);return[new et(n[0],n[1],n[2]),new et(n[3],n[4],n[5])]}}function uy(t,e,n){const i=t.slice();return i[3]=e[n],i}function $D(t){let e,n,i,s,r,o,a=t[3].title+"",l,c;return{c(){e=C("li"),n=C("img"),r=O(),o=C("h2"),l=ae(a),c=O(),M(n,"class","w-32 h-32"),wi(n.src,i=t[3].puzzle?t[3].puzzle.img:t[3].cube)||M(n,"src",i),M(n,"alt",s=t[3].title),M(e,"class","w-40 h-48 text-center shadow-md rounded-md select-none cursor-pointer transition-all duration-200 flex flex-col items-center justify-between py-3 bg-white bg-opacity-10 text-gray-400 hover:rotate-3 hover:shadow-lg")},m(u,f){R(u,e,f),E(e,n),E(e,r),E(e,o),E(o,l),R(u,c,f)},p(u,f){f&1&&!wi(n.src,i=u[3].puzzle?u[3].puzzle.img:u[3].cube)&&M(n,"src",i),f&1&&s!==(s=u[3].title)&&M(n,"alt",s),f&1&&a!==(a=u[3].title+"")&&ke(l,a)},d(u){u&&P(e),u&&P(c)}}}function fy(t,e){let n,i,s;return i=new Mh({props:{to:e[3].route,$$slots:{default:[$D]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=ts(),ue(i.$$.fragment),this.first=n},m(r,o){R(r,n,o),le(i,r,o),s=!0},p(r,o){e=r;const a={};o&1&&(a.to=e[3].route),o&65&&(a.$$scope={dirty:o,ctx:e}),i.$set(a)},i(r){s||(I(i.$$.fragment,r),s=!0)},o(r){H(i.$$.fragment,r),s=!1},d(r){r&&P(n),ce(i,r)}}}function QD(t){let e,n,i=[],s=new Map,r,o=t[0];const a=l=>l[3].route;for(let l=0;l<o.length;l+=1){let c=uy(t,o,l),u=a(c);s.set(u,i[l]=fy(u,c))}return{c(){e=C("main"),n=C("ul");for(let l=0;l<i.length;l+=1)i[l].c();M(n,"class","w-full grid gap-4 place-items-center svelte-ukzwim"),M(e,"class","container-mini")},m(l,c){R(l,e,c),E(e,n);for(let u=0;u<i.length;u+=1)i[u].m(n,null);r=!0},p(l,[c]){c&1&&(o=l[0],ot(),i=xE(i,c,a,1,l,o,s,n,wE,fy,null,uy),at())},i(l){if(!r){for(let c=0;c<o.length;c+=1)I(i[c]);r=!0}},o(l){for(let c=0;c<i.length;c+=1)H(i[c]);r=!1},d(l){l&&P(e);for(let c=0;c<i.length;c+=1)i[c].d()}}}function eO(t,e,n){let i;dt(t,Hi,o=>n(1,i=o));let s=[];function r(){const o=Dr(i).HOME;n(0,s=[{title:o.tutorials,route:"/tutorials",ready:!1,timer:!1,cube:"/assets/cube.png"},{title:o.algorithms,route:"/algorithms",timer:!1,ready:!1,cube:"/assets/pll.png"},{title:o.timer,route:"/timer",timer:!0,ready:!1,cube:"/assets/cube.png"},{title:o.pll_recognition,route:"/pll-trainer",timer:!0,ready:!1,cube:"/assets/pll.png"},{title:o.simulator,route:"/simulator",timer:!0,ready:!1,cube:"/assets/megaminx.png"},{title:o.settings,route:"/settings",timer:!1,ready:!1,cube:"/assets/logo.png",puzzle:new Ns({type:"rubik",mode:ai.GRAY,order:[2]})},{title:o.importExport,route:"/import-export",cube:"/assets/logo.png",ready:!0,timer:!1},{title:o.contest,route:"/contest",cube:"/assets/logo.png",ready:!0,puzzle:new Ns({type:"redi"})}]);let a=s.reduce((l,c)=>(c.puzzle&&l.push(c.puzzle),l),[]);Ol(a,void 0,!1,!0).then(l=>{let c=l.subscribe(u=>{u===null&&(c(),n(0,s))})})}return t.$$.update=()=>{t.$$.dirty&2&&r()},[s,i]}class tO extends xt{constructor(e){super(),wt(this,e,eO,QD,yt,{})}}function nO(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function iO(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class kb extends xt{constructor(e){super(),wt(this,e,iO,nO,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function sO(t,e){let n,i,s;const r=document.createElement("span");t.appendChild(r);let o=p=>{n=(p||{}).position||"cursor",i=Math.abs((p||{}).duration||400),s=(p||{}).background||"#fff"};o(e);let a=0,l=0,c=0,u=!1,f=p=>{u&&(performance.now()<=l?(c=(performance.now()-a)*1.2/(l-a),p.style.transform=`translate(-50%, -50%) scale(${c})`,p.style.opacity=""+(.5-.5*c/1.2),window.requestAnimationFrame(()=>f(p))):(c=0,p.style.transform=`translate(-50%, -50%) scale(${c})`,p.style.opacity="0",u=!1,t.style.overflow="unset"))};const h=p=>{let m=t.getBoundingClientRect(),_=m.width,b=m.height;return n==="center"?{x:_/2,y:b/2,rad:((_/2)**2+(b/2)**2)**.5}:{x:p.clientX-t.offsetLeft,y:p.clientY-t.offsetTop,rad:2*(_**2+b**2)**.5}},d=p=>{let m=h(p);r.style.left=`${m.x}px`,r.style.top=`${m.y}px`,r.style.position="absolute",r.style.background=s,r.style.pointerEvents="none",r.style.width=m.rad+"px",r.style.height=m.rad+"px",r.style.borderRadius="50%",r.style.opacity="0.5",r.style.borderRadius="50%",t.style.overflow="hidden",a=performance.now(),l=a+i,!u&&(u=!0)&&f(r)};return t.addEventListener("click",d),{update(p){o(p)},destroy(){t.removeEventListener("click",d),r.remove()}}}function rO(t){let e,n,i,s,r,o;const a=t[8].default,l=Ho(a,t,t[7],null);return{c(){e=C("button"),l&&l.c(),M(e,"tabindex",t[2]),M(e,"aria-label",t[3]),M(e,"class",n=hs(`
    border px-4 py-2 rounded-md shadow-md flex items-center justify-center border-none
    relative uppercase font-bold text-gray-400 transition-all duration-200

    hover:shadow-lg
  `+(t[0]?" shadow-none px-2 py-1 ":"")+(t[4]||" hover:bg-white hover:bg-opacity-10 "))+" svelte-16y3hvc")},m(c,u){R(c,e,u),l&&l.m(e,null),s=!0,r||(o=[$e(e,"click",t[5]),JL(i=sO.call(null,e,t[1]))],r=!0)},p(c,[u]){l&&l.p&&(!s||u&128)&&Go(l,a,c,c[7],s?Vo(a,c[7],u,null):Wo(c[7]),null),(!s||u&4)&&M(e,"tabindex",c[2]),(!s||u&8)&&M(e,"aria-label",c[3]),(!s||u&17&&n!==(n=hs(`
    border px-4 py-2 rounded-md shadow-md flex items-center justify-center border-none
    relative uppercase font-bold text-gray-400 transition-all duration-200

    hover:shadow-lg
  `+(c[0]?" shadow-none px-2 py-1 ":"")+(c[4]||" hover:bg-white hover:bg-opacity-10 "))+" svelte-16y3hvc"))&&M(e,"class",n),i&&Il(i.update)&&u&2&&i.update.call(null,c[1])},i(c){s||(I(l,c),s=!0)},o(c){H(l,c),s=!1},d(c){c&&P(e),l&&l.d(c),r=!1,Vn(o)}}}function oO(t,e,n){let{$$slots:i={},$$scope:s}=e;const r=Oa();let{flat:o=!1}=e,{rp:a={}}=e,{file:l=!1}=e,{tabindex:c=0}=e,{ariaLabel:u=""}=e,{class:f=""}=e;function h(d){if(r("click",d),l){let p=document.createElement("input");p.type="file",p.style.display="none",p.addEventListener("change",m=>{r("files",p.files),p.remove()}),document.body.appendChild(p),p.click()}}return t.$$set=d=>{"flat"in d&&n(0,o=d.flat),"rp"in d&&n(1,a=d.rp),"file"in d&&n(6,l=d.file),"tabindex"in d&&n(2,c=d.tabindex),"ariaLabel"in d&&n(3,u=d.ariaLabel),"class"in d&&n(4,f=d.class),"$$scope"in d&&n(7,s=d.$$scope)},[o,a,c,u,f,h,l,s,i]}class Ct extends xt{constructor(e){super(),wt(this,e,oO,rO,yt,{flat:0,rp:1,file:6,tabindex:2,ariaLabel:3,class:4})}}function hy(t,e,n){const i=t.slice();return i[5]=e[n],i}function dy(t,e,n){const i=t.slice();return i[8]=e[n],i}function aO(t){let e=t[8].title+"",n,i;return{c(){n=ae(e),i=O()},m(s,r){R(s,n,r),R(s,i,r)},p(s,r){r&6&&e!==(e=s[8].title+"")&&ke(n,e)},d(s){s&&P(n),s&&P(i)}}}function py(t){let e,n;return e=new Mh({props:{to:t[0].pathname+"/"+t[8].puzzle+"/"+t[8].titleLower+"?id="+t[8]._id,class:"m-1.5 text-gray-400 p-2.5 shadow-md bg-purple-900 rounded-md",$$slots:{default:[aO]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s&7&&(r.to=i[0].pathname+"/"+i[8].puzzle+"/"+i[8].titleLower+"?id="+i[8]._id),s&2054&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function my(t){let e,n,i=t[5]+"",s,r,o,a,l,c=t[1][t[5]],u=[];for(let h=0;h<c.length;h+=1)u[h]=py(dy(t,c,h));const f=h=>H(u[h],1,1,()=>{u[h]=null});return{c(){e=C("section"),n=C("h2"),s=ae(i),r=O(),o=C("div");for(let h=0;h<u.length;h+=1)u[h].c();a=O(),M(n,"class","text-gray-400 font-bold svelte-ghky7i"),M(o,"class","flex"),M(e,"class","container-mini grid grid-cols-1")},m(h,d){R(h,e,d),E(e,n),E(n,s),E(e,r),E(e,o);for(let p=0;p<u.length;p+=1)u[p].m(o,null);E(e,a),l=!0},p(h,d){if((!l||d&4)&&i!==(i=h[5]+"")&&ke(s,i),d&7){c=h[1][h[5]];let p;for(p=0;p<c.length;p+=1){const m=dy(h,c,p);u[p]?(u[p].p(m,d),I(u[p],1)):(u[p]=py(m),u[p].c(),I(u[p],1),u[p].m(o,null))}for(ot(),p=c.length;p<u.length;p+=1)f(p);at()}},i(h){if(!l){for(let d=0;d<c.length;d+=1)I(u[d]);l=!0}},o(h){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)H(u[d]);l=!1},d(h){h&&P(e),en(u,h)}}}function lO(t){let e,n,i,s=cO,r=t[2],o=[];for(let l=0;l<r.length;l+=1)o[l]=my(hy(t,r,l));const a=l=>H(o[l],1,1,()=>{o[l]=null});return{c(){e=O();for(let l=0;l<o.length;l+=1)o[l].c();n=ts()},m(l,c){R(l,e,c);for(let u=0;u<o.length;u+=1)o[u].m(l,c);R(l,n,c),i=!0},p(l,[c]){if(c&7){r=l[2];let u;for(u=0;u<r.length;u+=1){const f=hy(l,r,u);o[u]?(o[u].p(f,c),I(o[u],1)):(o[u]=my(f),o[u].c(),I(o[u],1),o[u].m(n.parentNode,n))}for(ot(),u=r.length;u<o.length;u+=1)a(u);at()}},i(l){if(!i){I(s);for(let c=0;c<r.length;c+=1)I(o[c]);i=!0}},o(l){H(s),o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)H(o[c]);i=!1},d(l){l&&P(e),en(o,l),l&&P(n)}}}let cO=!1;function uO(t,e,n){let{location:i}=e,s=Ds.getInstance(),r={},o=[],a=s.tutSub.subscribe(l=>{if(!!l)switch(l[0]){case"get-tutorials":{let c=l[1];n(1,r=c.reduce((u,f)=>(!u[f.puzzle]&&(u[f.puzzle]=[]),u[f.puzzle].push(f),u),{})),n(2,o=Object.keys(r)),o.forEach(u=>r[u].sort((f,h)=>f.level<h.level?-1:1));break}case"update-tutorial":{let c=l[1],u=r[c.puzzle].reduce((f,h,d)=>h._id===c._id?d:f,-1);n(1,r[c.puzzle][u]=c,r);break}}});return ji(()=>{s.getTutorials()}),Es(()=>{a()}),t.$$set=l=>{"location"in l&&n(0,i=l.location)},[i,r,o]}class gy extends xt{constructor(e){super(),wt(this,e,uO,lO,yt,{location:0})}}let _y=new Nl(4,1,[[0,hO,384]]),fO=[[0,1],[2,3],[0,3],[1,2]];function hO(t,e){let n=xs([],t>>4,4);return Ms(n,fO[e]),(us(n,4)<<4)+(t&15^1<<e)}function dO(){let t=1+Et(191);return t=t*2+((Rc(t>>3,4)^t>>1^t>>2^t)&1),_y.toStr(_y.search([t],0),"RLFB",[""])}xi("133",dO);let Zg=new Nl(3,3,[[0,[mO,"p",7],5040],[0,[AT,"o",7,-3],729]]),kT=[[0,2,3,1],[0,1,5,4],[0,4,6,2]],pO=[null,[0,1,0,1,3],[1,0,1,0,3]],g1=new Xo("o",7,-3);function mO(t,e){Ms(t,kT[e])}function AT(t,e){Ms(t,kT[e],1,pO[e])}let gO=[[3,4,9],[1,20,5],[2,8,17],[0,16,21],[13,11,6],[15,7,22],[12,19,10]];function _O(t,e){let n=xs([],t,7),i=g1.set([],e),s=[];for(let r=0;r<24;r++)s[r]=r>>2;If(gO,s,n,i,4);for(let r=0;r<24;r+=4)if((1<<s[r]|1<<s[r+3])&(1<<s[r+1]|1<<s[r+2]))return!1;return!0}let Yh=[1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4,1,2,4,4,4,4,4,4],bO=[0,17,5,14,8,1,2,4],qh=["EG0-O","EG0-H","EG0-L","EG0-Pi","EG0-S","EG0-T","EG0-U","EG0-aS","EG1B-O","EG1B-H","EG1B-L","EG1B-Pi","EG1B-S","EG1B-T","EG1B-U","EG1B-aS","EG1L-O","EG1L-H","EG1L-L","EG1L-Pi","EG1L-S","EG1L-T","EG1L-U","EG1L-aS","EG1F-O","EG1F-H","EG1F-L","EG1F-Pi","EG1F-S","EG1F-T","EG1F-U","EG1F-aS","EG1R-O","EG1R-H","EG1R-L","EG1R-Pi","EG1R-S","EG1R-T","EG1R-U","EG1R-aS","EG2-O","EG2-H","EG2-L","EG2-Pi","EG2-S","EG2-T","EG2-U","EG2-aS"],vO=[[4,5,6],[4,6,5],[6,5,4],[5,4,6],[5,6,4],[6,4,5]];function mc(t,e,n){let i,s,r,o=t=="222o"?0:9;do if(r=2,t=="222o"||t=="222so")s=Et(5040),i=Et(729),r=3;else if(t=="222eg"){i=bO[n&7],s=[0,2,3,4,5,1][n>>3];let a=xs([0,0,0,0].concat(vO[s]),Et(24),4);s=us(a,7);let l=Et(4);for(i=g1.set([],i);l-- >0;)AT(i,0);i=g1.get(i)}else{if(/^222eg[012]$/.exec(t))return mc("222eg",e,[0,8,40][~~t[5]]+n);if(t=="222nb")do s=Et(5040),i=Et(729);while(!_O(s,i))}while(s==0&&i==0||Zg.search([s,i],0,r)!=null);return Zg.toStr(Zg.search([s,i],o).reverse(),"URF","'2 ")}xi(["222o","222so","222nb"],mc)("222eg0",mc,[qh.slice(0,8),Yh.slice(0,8)])("222eg1",mc,[qh.slice(8,40),Yh.slice(8,40)])("222eg2",mc,[qh.slice(40,48),Yh.slice(40,48)])("222eg",mc,[qh,Yh]);let $a=[],LT=[];function yO(){let t=[],e;for(let n=0;n<40320;n++)$a[n]=[];for(let n=0;n<40320;n++)xs(t,n),on(t,0,1,2,3),e=$a[0][n]=us(t),on(t,4,5,6,7),e=$a[1][e]=us(t),on(t,2,5)(t,3,6),e=$a[2][e]=us(t),on(t,0,5)(t,3,4),$a[3][e]=us(t)}function wO(t,e){if(e<2)return t;let n=xs([],t,3);return e==2?on(n,0,1):e==3&&on(n,0,2),us(n,3)}let by=!1;function xO(){by||(by=!0,yO(),ml(LT,0,40320,12,$a,4,3))}function CT(t,e,n,i,s){if(n==0)return t+e==0;if(Os(LT,t)>n)return!1;let r,o,a,l;for(l=0;l<4;l++)if(l!=i){for(r=t,o=e,a=0;a<(l<2?3:1);a++)if(r=$a[l][r],o=wO(o,l),CT(r,o,n-1,l,s))return s.push(["U","D","R2","F2"][l]+(l<2?" 2'".charAt(a):"")),!0}}function MO(){xO();let t,e;do e=Et(40320),t=Et(6);while(t+e==0);let n=[];for(let i=0;i<99&&!CT(e,t,i,-1,n);i++);return n.reverse().join(" ")}xi("223",MO);let PT=[[0,1,2,3],[0,2,5,4]],SO=[[0,0,0,0,2],[0,1,0,1,2]];function EO(t,e){let n=t>>3,i=t,s=t<<1|Rc(n,6)^i>>1&1,r=xs([],n,6);return Ms(r,PT[e]),e==0&&(i=i+2),e==1&&(s=s+1),ko(r,6)<<3|i&6|s>>1&1}function TO(t,e){Ms(t,PT[e],1,SO[e])}let vy=new Nl(2,3,[[0,EO,5760],[0,[TO,"o",6,-2],32]]);function kO(){let t,e;do e=Et(5760),t=Et(32);while(t+e==0);return vy.toStr(vy.search([e,t],0),"UM"," 2'").replace(/ +/g," ")}xi("lsemu",kO);let AO=[[0,1,1,0,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,0,1,1,0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,1,1,0,1,1,0,1,1,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,0,0,0,0,0],[1,1,0,1,1,0,1,1,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,0,0,0,0,0],[11,0,0,0,0,0,0,0,0,1,0,1,1,0],[0,0,0,0,0,0,11,0,0,0,0,1,1,1],[0,0,0,0,0,0,0,0,11,0,1,1,0,1],[0,0,11,0,0,0,0,0,0,1,1,1,0,0],[11,0,11,0,0,0,0,0,0,1,1,1,1,0],[11,0,0,0,0,0,11,0,0,1,0,1,1,1],[0,0,0,0,0,0,11,0,11,0,1,1,1,1],[0,0,11,0,0,0,0,0,11,1,1,1,0,1],[11,0,11,0,0,0,11,0,11,1,1,1,1,1]];function LO(t,e,n){let i=e,s=0;for(let r=t-1;r>=0;r--)n>=Mn[r][i]&&(n-=Mn[r][i--],s|=1<<r);return s}let Xh=[-1,1,-1,-1,-1,5,-1,7,-1,-1,-1,11];function CO(){let t=[];for(let e=0;e<14;e++)t[e]=Et(12);return t}function PO(t,e){return t.length!=14||e.length!=18?-1:IO(14,t,e)}function RO(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}function _1(t,e,n,i,s){let r=t[0].length;for(let o=i;o<r;o++)t[n][o]=(t[n][o]+t[e][o]*s)%12}let Jg=[7695,42588,47187,85158,86697,156568,181700,209201,231778];function IO(t,e,n){let i=18,s=t+1;for(let r=0;r<Mn[i][t];r++){let o=LO(i,t,r),a=!1;for(let p=0;p<Jg.length;p++)if((o&Jg[p])==Jg[p]){a=!0;break}if(a)continue;let l=[],c=0;for(let p=0;p<i;p++)(o>>p&1)==1&&(l[c++]=p);let u=[];for(let p=0;p<14;p++){u[p]=[];for(let m=0;m<t;m++)u[p][m]=AO[l[m]][p];u[p][t]=e[p]}if(DO(u)!=0)continue;let h=!0;for(let p=t;p<14;p++)if(u[p][t]!=0){h=!1;break}if(!h)continue;OO(u);let d=0;for(let p=0;p<t;p++)u[p][t]!=0&&d++;if(d<s){for(let p=0;p<18;p++)n[p]=0;for(let p=0;p<t;p++)n[l[p]]=u[p][t];s=d}}return s==t+1?-1:s}function DO(t){let e=14,n=t[0].length;for(let i=0;i<n-1;i++){if(Xh[t[i][i]]==-1){let r=-1;for(let o=i+1;o<e;o++)if(Xh[t[o][i]]!=-1){r=o;break}if(r==-1){e:for(let o=i;o<e-1;o++)for(let a=o+1;a<e;a++)if(Xh[(t[o][i]+t[a][i])%12]!=-1){_1(t,a,o,i,1),r=o;break e}}if(r==-1){for(let o=i+1;o<e;o++)if(t[o][i]!=0)return-1;return i+1}RO(t,i,r)}let s=Xh[t[i][i]];for(let r=i;r<n;r++)t[i][r]=t[i][r]*s%12;for(let r=i+1;r<e;r++)_1(t,i,r,i,12-t[r][i])}return 0}function OO(t){let e=t[0].length;for(let n=e-2;n>0;n--)for(let i=n-1;i>=0;i--)t[i][n]!=0&&_1(t,n,i,n,12-t[i][n])}let Kg=["UR","DR","DL","UL","U","R","D","L","ALL"];function NO(t){let e=CO(),n=[];n.length=18,PO(e,n);let i="";for(let r=0;r<9;r++){let o=n[r];if(o==0)continue;let a=o<=6;o>6&&(o=12-o),i+=Kg[r]+o+(a?"+":"-")+" "}i+="y2 ";for(let r=0;r<9;r++){let o=n[r+9];if(o==0)continue;let a=o<=6;o>6&&(o=12-o),i+=Kg[r]+o+(a?"+":"-")+" "}let s=!0;for(let r=0;r<4;r++)Et(2)==1&&(i+=(s?"":" ")+Kg[r],s=!1);return i}xi("clko",NO);let Ab=[],Lb=[],rf=[[],[],[]],BO=[[0,3,2,1],[0,1],[0,3]];function FO(t,e){Ms(t,[0,e+1])}function zO(t,e){let n=xs([],~~(t/3),4);return Ms(n,BO[e]),us(n,4)*3+(t%3+(e==0?1:0))%3}function UO(t,e,n){let i=e%72,s=~~(e/72);return s=Ab[n][s],i=Lb[(n+t)%3][i],s*72+i}function HO(t){return Math.max(Os(rf[0],t[0]*72+t[1]),Os(rf[1],t[0]*72+t[2]),Os(rf[2],t[0]*72+t[3]))}function RT(t,e,n,i){if(e==0)return t[0]==0&&t[1]==0&&t[2]==0&&t[3]==0;if(HO(t)>e)return!1;for(let s=0;s<3;s++){if(s==n)continue;let r=t.slice();for(let o=0;o<11;o++){r[0]=Ab[s][r[0]];for(let a=1;a<4;a++)r[a]=Lb[(s+a-1)%3][r[a]];if(RT(r,e-1,s,i))return i.push("URF".charAt(s)+["'","2'","3'","4'","5'","6","5","4","3","2",""][o]),!0}}}let yy=!1;function VO(){if(!yy){yy=!0,Yp(Lb,72,zO,3),Yp(Ab,24,[FO,"p",4],3);for(let t=0;t<3;t++)ml(rf[t],0,24*72,5,UO.bind(null,t),3,12,0)}}function GO(){let t=[Et(24)];for(let e=0;e<3;e++)do t[e+1]=Et(72);while(Os(rf[e],t[0]*72+t[e+1])==15);return t}function WO(t){VO();let e;do e=GO();while(e==0);let n=t=="gearso"?4:0,i=[];for(;!RT(e,n,-1,i);)n++;return i.reverse().join(" ")}xi(["gearo","gearso"],WO);let yn=["","2","'"],wy=["","2","'","2'"],IT={111:[[["x"],["y"],["z"]],yn],2223:[[["U"],["R"],["F"]],yn],2226:[[[["U","D"]],[["R","L"]],[["F","B"]]],yn],"333o":[[["U","D"],["R","L"],["F","B"]],yn],334:[[[["U","U'","U2"],["u","u'","u2"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],336:[[[["U","U'","U2"],["u","u'","u2"],["3u","3u2","3u'"]],[["R2","L2","M2"]],[["F2","B2","S2"]]]],888:[[["U","D","u","d","3u","3d","4u"],["R","L","r","l","3r","3l","4r"],["F","B","f","b","3f","3b","4f"]],yn],999:[[["U","D","u","d","3u","3d","4u","4d"],["R","L","r","l","3r","3l","4r","4l"],["F","B","f","b","3f","3b","4f","4b"]],yn],101010:[[["U","D","u","d","3u","3d","4u","4d","5u"],["R","L","r","l","3r","3l","4r","4l","5r"],["F","B","f","b","3f","3b","4f","4b","5f"]],yn],111111:[[["U","D","u","d","3u","3d","4u","4d","5u","5d"],["R","L","r","l","3r","3l","4r","4l","5r","5l"],["F","B","f","b","3f","3b","4f","4b","5f","5b"]],yn],444:[[["U","D","u"],["R","L","r"],["F","B","f"]],yn],"444m":[[["U","D","Uw"],["R","L","Rw"],["F","B","Fw"]],yn],555:[[["U","D","u","d"],["R","L","r","l"],["F","B","f","b"]],yn],"555wca":[[["U","D","Uw","Dw"],["R","L","Rw","Lw"],["F","B","Fw","Bw"]],yn],"666p":[[["U","D","2U","2D","3U"],["R","L","2R","2L","3R"],["F","B","2F","2B","3F"]],yn],"666wca":[[["U","D","Uw","Dw","3Uw"],["R","L","Rw","Lw","3Rw"],["F","B","Fw","Bw","3Fw"]],yn],"666s":[[["U","D","U&sup2;","D&sup2;","U&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;"]],yn],"666si":[[["U","D","u","d","3u"],["R","L","r","l","3r"],["F","B","f","b","3f"]],yn],"777p":[[["U","D","2U","2D","3U","3D"],["R","L","2R","2L","3R","3L"],["F","B","2F","2B","3F","3B"]],yn],"777wca":[[["U","D","Uw","Dw","3Uw","3Dw"],["R","L","Rw","Lw","3Rw","3Lw"],["F","B","Fw","Bw","3Fw","3Bw"]],yn],"777s":[[["U","D","U&sup2;","D&sup2;","U&sup3;","D&sup3;"],["R","L","R&sup2;","L&sup2;","R&sup3;","L&sup3;"],["F","B","F&sup2;","B&sup2;","F&sup3;","B&sup3;"]],yn],"777si":[[["U","D","u","d","3u","3d"],["R","L","r","l","3r","3l"],["F","B","f","b","3f","3b"]],yn],cm3:[[[["U<","U>","U2"],["E<","E>","E2"],["D<","D>","D2"]],[["R^","Rv","R2"],["M^","Mv","M2"],["L^","Lv","L2"]]]],cm2:[[[["U<","U>","U2"],["D<","D>","D2"]],[["R^","Rv","R2"],["L^","Lv","L2"]]]],233:[[[["U","U'","U2"]],["R2","L2"],["F2","B2"]]],fto:[[["U","D"],["F","B"],["L","BR"],["R","BL"]],["","'"]],gear:[[["U"],["R"],["F"]],["","2","3","4","5","6","'","2'","3'","4'","5'"]],sfl:[[["R","L"],["U","D"]],yn],ufo:[[["A"],["B"],["C"],[["U","U'","U2'","U2","U3"]]]],"2gen":[[["U"],["R"]],yn],"2genl":[[["U"],["L"]],yn],roux:[[["U"],["M"]],yn],"3gen_F":[[["U"],["R"],["F"]],yn],"3gen_L":[[["U"],["R","L"]],yn],RrU:[[["U"],["R","r"]],yn],RrUu:[[["U","u"],["R","r"]],yn],minx2g:[[["U"],["R"]],wy],mlsll:[[[["R U R'","R U2 R'","R U' R'","R U2' R'"]],[["F' U F","F' U2 F","F' U' F","F' U2' F"]],[["U","U2","U'","U2'"]]]],half:[[["U","D"],["R","L"],["F","B"]],["2"]],lsll:[[[["R U R'","R U2 R'","R U' R'"]],[["F' U F","F' U2 F","F' U' F"]],[["U","U2","U'"]]]],prco:[[["F","B"],["U","D"],["L","DBR"],["R","DBL"],["BL","DR"],["BR","DL"]],wy],skb:[[["R"],["L"],["B"],["U"]],["","'"]],ivy:[[["R"],["L"],["D"],["B"]],["","'"]],112:[[["R"],["R"]],yn],eide:[[["OMG"],["WOW"],["WTF"],[["WOO-HOO","WOO-HOO","MATYAS","YES","YES","YAY","YEEEEEEEEEEEES"]],["HAHA"],["XD"],[":D"],["LOL"]],["","","","!!!"]]},DT={sia113:'#{[["U","u"],["R","r"]],%c,%l} z2 #{[["U","u"],["R","r"]],%c,%l}',sia123:'#{[["U"],["R","r"]],%c,%l} z2 #{[["U"],["R","r"]],%c,%l}',sia222:'#{[["U"],["R"],["F"]],%c,%l} z2 y #{[["U"],["R"],["F"]],%c,%l}',335:`#{[[["U","U'","U2"],["D","D'","D2"]],["R2","L2"],["F2","B2"]],0,%l} / \${333}`,337:`#{[[["U","U'","U2","u","u'","u2","U u","U u'","U u2","U' u","U' u'","U' u2","U2 u","U2 u'","U2 u2"],["D","D'","D2","d","d'","d2","D d","D d'","D d2","D' d","D' d'","D' d2","D2 d","D2 d'","D2 d2"]],["R2","L2"],["F2","B2"]],0,%l} / \${333}`,r234:"2) ${222so}\\n3) ${333}\\n4) ${[444,40]}",r2345:'${r234}\\n5) ${["555",60]}',r23456:'${r2345}\\n6) ${["666p",80]}',r234567:'${r23456}\\n7) ${["777p",100]}',r234w:'2) ${222so}\\n3) ${333}\\n4) ${["444m",40]}',r2345w:'${r234w}\\n5) ${["555wca",60]}',r23456w:'${r2345w}\\n6) ${["666wca",80]}',r234567w:'${r23456w}\\n7) ${["777wca",100]}',"333ni":`\${333}#{[[""]],["","Rw ","Rw2 ","Rw' ","Fw ","Fw' "],1}#{[[""]],["","Uw","Uw2","Uw'"],1}`,"444bld":`\${444wca}#{[[""]],[""," x"," x2"," x'"," z"," z'"],1}#{[[""]],[""," y"," y2"," y'"],1}`,"555bld":`\${["555wca",%l]}#{[[""]],[""," 3Rw"," 3Rw2"," 3Rw'"," 3Fw"," 3Fw'"],1}#{[[""]],[""," 3Uw"," 3Uw2"," 3Uw'"],1}`},OT={"4edge":["r b2",["b2 r'","b2 U2 r U2 r U2 r U2 r"],["u"]],"5edge":["r R b B",["B' b' R' r'","B' b' R' U2 r U2 r U2 r U2 r"],["u","d"]],"6edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","d"]],"7edge":["3r r 3b b",["3b' b' 3r' r'","3b' b' 3r' U2 r U2 r U2 r U2 r","3b' b' r' U2 3r U2 3r U2 3r U2 3r","3b' b' r2 U2 3r U2 3r U2 3r U2 3r U2 r"],["u","3u","3d","d"]]};function jO(t,e){let n=IT[t];switch(n.length){case 1:return Po(n[0],[""],e);case 2:return Po(n[0],n[1],e);case 3:return Po(n[0],n[1],n[2])}}function YO(t,e){let n=OT[t];return ZO(n[0],n[1],n[2],e)}function qO(t,e){let n=DT[t].replace(/%l/g,e).replace(/%c/g,`["","2","'"]`);return p1(n)}for(let t in IT)xi(t,jO);for(let t in DT)xi(t,qO);for(let t in OT)xi(t,YO);function XO(t,e){let n=e;if(n<=1)return"N/A";let i=[[],[],[]];for(let s=0;s<e-1;s++)s%2==0?(i[0].push((s<4?"":~~(s/2+1))+(s<2?"U":"u")),i[1].push((s<4?"":~~(s/2+1))+(s<2?"R":"r")),i[2].push((s<4?"":~~(s/2+1))+(s<2?"F":"f"))):(i[0].push((s<4?"":~~(s/2+1))+(s<2?"D":"d")),i[1].push((s<4?"":~~(s/2+1))+(s<2?"L":"l")),i[2].push((s<4?"":~~(s/2+1))+(s<2?"B":"b")));return Po(i,yn,n*10)}xi("cubennn",XO);function ZO(t,e,n,i){let s=0,r=0,o=[],a=[["R","R'"],["R'","R"],["L","L'"],["L'","L"],["F'","F"],["F","F'"],["B","B'"],["B'","B"]],l=["U","D"],c=t;for(let u=0;u<n.length;u++)o[u]=0;for(let u=0;u<i;u++){let f=!1,h="";for(;!f;)for(let _=0;_<n.length;_++){let b=Et(4);o[_]+=b,b!=0&&(f=!0,h+=" "+n[_]+yn[b-1])}let d=Et(8),p=Et(2),m=Et(3);c+=h+" "+a[d][0]+" "+l[p]+yn[m]+" "+a[d][1],p==0&&(s+=m+1),p==1&&(r+=m+1)}for(let u=0;u<n.length;u++){let f=4-o[u]%4;f<4&&(c+=" "+n[u]+yn[f-1])}return s=4-s%4,r=4-r%4,s<4&&(c+=" U"+yn[s-1]),r<4&&(c+=" D"+yn[r-1]),c+=" "+li(e),c}let JO=[[3,16,11],[4,23,15],[5,9,22],[10,17,21]],$g=[[1,7],[2,14],[0,18],[6,12],[8,20],[13,19]];function KO(t,e){let n=b1.set([],e&31),i=v1.set([],e>>5),s=e6.set([],t),r=[];If(JO,r,[0,1,2,3],i,6),If($g,r,s,n,6);let o=[4,2,3,1,5,0];for(let a=0;a<6;a++)for(let l=0;l<2;l++){let c=$g[a][0^l],u=$g[a][1^l],f=~~(c/6)*6+o[(o.indexOf(c%6)+5)%6],h=~~(u/6)*6+o[(o.indexOf(u%6)+1)%6];if(r[f]==r[c]&&r[h]==r[u])return!1}return!0}let Qg=new Nl(4,2,[[0,[QO,"p",6,-1],360],[0,t6,2592]]),NT=[[0,1,3],[1,2,5],[0,4,2],[3,5,4]],$O=[[0,1,0,2],[0,1,0,2],[0,0,1,2],[0,0,1,2]];function QO(t,e){Ms(t,NT[e])}let b1=new Xo("o",6,-2),e6=new Xo("p",6,-1),v1=new Xo("o",4,3);function t6(t,e){let n=b1.set([],t&31),i=v1.set([],t>>5);return i[e]++,Ms(n,NT[e],1,$O[e]),v1.get(i)<<5|b1.get(n)}function n6(t){let e=t=="pyro"?0:8,n=t=="pyrl4e"?2:7,i=0,s,r,o;do{if(t=="pyro"||t=="pyrso"||t=="pyr4c")r=Et(360),o=Et(2592);else if(t=="pyrl4e")r=us(xs([],Et(12),4,-1).concat([4,5]),6,-1),o=Et(3)*864+Et(8);else if(t=="pyrnb")do r=Et(360),o=Et(2592);while(!KO(r,o));i=Qg.search([r,o],0).length,s=Qg.toStr(Qg.search([r,o],e).reverse(),"ULRB",["'",""])+" ";for(let a=0;a<4;a++){let l=Et(t=="pyr4c"?2:3);l<2&&(s+="lrbu".charAt(a)+[" ","' "][l],i++)}}while(i<n);return s}xi(["pyro","pyrso","pyrl4e","pyrnb","pyr4c"],n6);let BT=20,e0=7,i6=13,s6=2;function Ts(){this.move=[],this.moveSol=[],this.nodeUD=[],this.valid1=0,this.allowShorter=!1,this.cc=new Xe,this.urfCubieCube=[],this.urfCoordCube=[],this.phase1Cubie=[],this.preMoveCubes=[],this.preMoves=[],this.preMoveLen=0,this.maxPreMoves=0,this.isRec=!1;for(let t=0;t<21;t++)this.nodeUD[t]=new _l,this.phase1Cubie[t]=new Xe;for(let t=0;t<6;t++)this.urfCubieCube[t]=new Xe,this.urfCoordCube[t]=new _l;for(let t=0;t<BT;t++)this.preMoveCubes[t+1]=new Xe}let r6=0,o6=1,a6=2,l6=3,c6=4,u6=5,f6=6,h6=7,d6=8,p6=9,m6=10,g6=11,_6=12,b6=13,v6=14,y6=15,w6=16,x6=17,t0=18,Zh=10,M6=2048,S6=336,E6=2187,T6=324,k6=40320,n0=2768,Cb=24,gl=495,Of=140,A6=165,L6=14540032,xo=[],y1=[1],xy=["U ","U2","U'","R ","R2","R'","F ","F2","F'","D ","D2","D'","L ","L2","L'","B ","B2","B'"],ga=[r6,o6,a6,c6,h6,p6,m6,g6,b6,w6,l6,u6,f6,d6,_6,v6,y6,x6],w1=[],ip=[],My=[[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17],[6,7,8,0,1,2,3,4,5,15,16,17,9,10,11,12,13,14],[3,4,5,6,7,8,0,1,2,12,13,14,15,16,17,9,10,11],[2,1,0,5,4,3,8,7,6,11,10,9,14,13,12,17,16,15],[8,7,6,2,1,0,5,4,3,17,16,15,11,10,9,14,13,12],[5,4,3,8,7,6,2,1,0,14,13,12,17,16,15,11,10,9]];{for(let t=0;t<18;t++)w1[ga[t]]=t;for(let t=0;t<10;t++){let e=~~(ga[t]/3);ip[t]=0;for(let n=0;n<10;n++){let i=~~(ga[n]/3);ip[t]|=(e==i||e%3==i%3&&e>=i?1:0)<<n}}ip[10]=0;for(let t=0;t<13;t++){xo[t]=[],y1[t+1]=y1[t]*(t+1),xo[t][0]=xo[t][t]=1;for(let e=1;e<13;e++)xo[t][e]=e<=t?xo[t-1][e-1]+xo[t-1][e]:0}}function ll(t,e,n){return n?e<<1|t&1:e|t&248}function cl(t,e){return e?t>>1:t&7}function Gl(t,e,n){t[e>>3]^=n<<(e<<2)}function i0(t,e){return t[e>>3]>>(e<<2)&15}function Vi(t,e,n){return Math.min(t,e[n>>3]>>(n<<2)&15)}function C6(t){return(t-286331153&~t&2290649224)!=0}function FT(t){return t^L6>>((t&15)<<1)&3}function Sy(t,e,n){let i=YT[t];return n&&(i=FT(i)),i&65520|Dc[i&15][e]}function Xe(){this.ca=[0,1,2,3,4,5,6,7],this.ea=[0,2,4,6,8,10,12,14,16,18,20,22]}function rg(t,e,n,i){n--;let s=1985229328;for(let r=0;r<n;++r){let o=y1[n-r],a=~~(e/o);e%=o,a<<=2,t[r]=ll(t[r],s>>a&15,i);let l=(1<<a)-1;s=(s&l)+(s>>4&~l)}t[n]=ll(t[n],s&15,i)}function og(t,e,n){let i=0,s=1985229328;for(let r=0;r<e-1;++r){let o=cl(t[r],n)<<2;i=(e-r)*i+(s>>o&15),s-=286331152<<o}return i}function zT(t,e,n,i){t[n-1]=ll(t[n-1],0,i);for(let s=n-2;s>=0;--s){t[s]=ll(t[s],e%(n-s),i),e=~~(e/(n-s));for(let r=s+1;r<n;++r)cl(t[r],i)>=cl(t[s],i)&&(t[r]=ll(t[r],cl(t[r],i)+1,i))}}function UT(t,e,n){let i=0;for(let s=0;s<e;++s){i*=e-s;for(let r=s+1;r<e;++r)cl(t[r],n)<cl(t[s],n)&&++i}return i}function Pb(t,e,n){let i=t.length-1,s=0,r=4;for(let o=i;o>=0;o--)(cl(t[o],n)&12)==e&&(s+=xo[o][r--]);return s}function HT(t,e,n,i){let s=t.length-1,r=4,o=s;for(let a=s;a>=0;a--)e>=xo[a][r]?(e-=xo[a][r--],t[a]=ll(t[a],r|n,i)):((o&12)==n&&(o-=4),t[a]=ll(t[a],o--,i))}function x1(t,e){let n=0;for(let i=e-2;i>=0;i--)n^=t%(e-i),t=~~(t/(e-i));return n&1}Xe.EdgeMult=function(t,e,n){for(let i=0;i<12;i++)n.ea[i]=t.ea[e.ea[i]>>1]^e.ea[i]&1};Xe.CornMult=function(t,e,n){for(let i=0;i<8;i++){let s=((t.ca[e.ca[i]&7]>>3)+(e.ca[i]>>3))%3;n.ca[i]=t.ca[e.ca[i]&7]&7|s<<3}};Xe.CornMultFull=function(t,e,n){for(let i=0;i<8;i++){let s=t.ca[e.ca[i]&7]>>3,r=e.ca[i]>>3,o=s+(s<3?r:6-r);o=o%3+(s<3==r<3?0:3),n.ca[i]=t.ca[e.ca[i]&7]&7|o<<3}};Xe.CornConjugate=function(t,e,n){let i=Nf[vr[0][e]],s=Nf[e];for(let r=0;r<8;r++){let o=i.ca[t.ca[s.ca[r]&7]&7]>>3,a=t.ca[s.ca[r]&7]>>3,l=o<3?a:(3-a)%3;n.ca[r]=i.ca[t.ca[s.ca[r]&7]&7]&7|l<<3}};Xe.EdgeConjugate=function(t,e,n){let i=Nf[vr[0][e]],s=Nf[e];for(let r=0;r<12;r++)n.ea[r]=i.ea[t.ea[s.ea[r]>>1]>>1]^t.ea[s.ea[r]>>1]&1^s.ea[r]&1};Xe.prototype.init=function(t,e){return this.ca=t.slice(),this.ea=e.slice(),this};Xe.prototype.initCoord=function(t,e,n,i){return rg(this.ca,t,8,!1),this.setTwist(e),zT(this.ea,n,12,!0),this.setFlip(i),this};Xe.prototype.isEqual=function(t){for(let e=0;e<8;e++)if(this.ca[e]!=t.ca[e])return!1;for(let e=0;e<12;e++)if(this.ea[e]!=t.ea[e])return!1;return!0};Xe.prototype.setFlip=function(t){let e=0,n;for(let i=10;i>=0;i--,t>>=1)e^=n=t&1,this.ea[i]=this.ea[i]&254|n;this.ea[11]=this.ea[11]&254|e};Xe.prototype.getFlip=function(){let t=0;for(let e=0;e<11;e++)t=t<<1|this.ea[e]&1;return t};Xe.prototype.getFlipSym=function(){return Xp[this.getFlip()]};Xe.prototype.setTwist=function(t){let e=15,n;for(let i=6;i>=0;i--,t=~~(t/3))e-=n=t%3,this.ca[i]=this.ca[i]&7|n<<3;this.ca[7]=this.ca[7]&7|e%3<<3};Xe.prototype.getTwist=function(){let t=0;for(let e=0;e<7;e++)t+=(t<<1)+(this.ca[e]>>3);return t};Xe.prototype.getTwistSym=function(){return WT[this.getTwist()]};Xe.prototype.setCPerm=function(t){rg(this.ca,t,8,!1)};Xe.prototype.getCPerm=function(){return og(this.ca,8,!1)};Xe.prototype.getCPermSym=function(){return FT(Zp[og(this.ca,8,!1)])};Xe.prototype.setEPerm=function(t){rg(this.ea,t,8,!0)};Xe.prototype.getEPerm=function(){return og(this.ea,8,!0)};Xe.prototype.getEPermSym=function(){return Zp[og(this.ea,8,!0)]};Xe.prototype.getUDSlice=function(){return 494-Pb(this.ea,8,!0)};Xe.prototype.setUDSlice=function(t){HT(this.ea,494-t,8,!0)};Xe.prototype.getMPerm=function(){return UT(this.ea,12,!0)%24};Xe.prototype.setMPerm=function(t){zT(this.ea,t,12,!0)};Xe.prototype.getCComb=function(){return Pb(this.ca,0,!1)};Xe.prototype.setCComb=function(t){HT(this.ca,t,0,!1)};Xe.prototype.URFConjugate=function(){let t=new Xe;Xe.CornMult(Xe.urf2,this,t),Xe.CornMult(t,Xe.urf1,this),Xe.EdgeMult(Xe.urf2,this,t),Xe.EdgeMult(t,Xe.urf1,this)};let VT=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],GT=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];Xe.prototype.toFaceCube=function(t,e){t=t||VT,e=e||GT;let n="URFDLB",i=[];for(let s=0;s<54;s++)i[s]=n[~~(s/9)];for(let s=0;s<8;s++){let r=this.ca[s]&7,o=this.ca[s]>>3;for(let a=0;a<3;a++)i[t[s][(a+o)%3]]=n[~~(t[r][a]/9)]}for(let s=0;s<12;s++){let r=this.ea[s]>>1,o=this.ea[s]&1;for(let a=0;a<2;a++)i[e[s][(a+o)%2]]=n[~~(e[r][a]/9)]}return i.join("")};Xe.prototype.invFrom=function(t){for(let e=0;e<12;e++)this.ea[t.ea[e]>>1]=e<<1|t.ea[e]&1;for(let e=0;e<8;e++)this.ca[t.ca[e]&7]=e|32>>(t.ca[e]>>3)&24;return this};Xe.prototype.fromFacelet=function(t,e,n){e=e||VT,n=n||GT;let i=0,s=[],r=t[4]+t[13]+t[22]+t[31]+t[40]+t[49];for(let f=0;f<54;++f){if(s[f]=r.indexOf(t[f]),s[f]==-1)return-1;i+=1<<(s[f]<<2)}if(i!=10066329)return-1;let o,a,l,c,u;for(l=0;l<8;++l){for(u=0;u<3&&!(s[e[l][u]]==0||s[e[l][u]]==3);++u);for(o=s[e[l][(u+1)%3]],a=s[e[l][(u+2)%3]],c=0;c<8;++c)if(o==~~(e[c][1]/9)&&a==~~(e[c][2]/9)){this.ca[l]=c|u%3<<3;break}}for(l=0;l<12;++l)for(c=0;c<12;++c){if(s[n[l][0]]==~~(n[c][0]/9)&&s[n[l][1]]==~~(n[c][1]/9)){this.ea[l]=c<<1;break}if(s[n[l][0]]==~~(n[c][1]/9)&&s[n[l][1]]==~~(n[c][0]/9)){this.ea[l]=c<<1|1;break}}};function _l(){this.twist=0,this.tsym=0,this.flip=0,this.fsym=0,this.slice=0,this.prun=0,this.twistc=0,this.flipc=0}_l.prototype.set=function(t){this.twist=t.twist,this.tsym=t.tsym,this.flip=t.flip,this.fsym=t.fsym,this.slice=t.slice,this.prun=t.prun,this.twistc=t.twistc,this.flipc=t.flipc};_l.prototype.calcPruning=function(t){this.prun=Math.max(Math.max(Vi(cg,ag,this.twist*gl+$r[this.slice][this.tsym]),Vi(ug,lg,this.flip*gl+$r[this.slice][this.fsym])),Math.max(Vi(yl,vl,this.twistc>>3<<11|Oo[this.flipc^this.twistc&7]),Vi(yl,vl,this.twist<<11|Oo[this.flip<<3|this.fsym^this.tsym])))};_l.prototype.setWithPrun=function(t,e){if(this.twist=t.getTwistSym(),this.flip=t.getFlipSym(),this.tsym=this.twist&7,this.twist=this.twist>>3,this.prun=Vi(yl,vl,this.twist<<11|Oo[this.flip^this.tsym]),this.prun>e||(this.fsym=this.flip&7,this.flip=this.flip>>3,this.slice=t.getUDSlice(),this.prun=Math.max(this.prun,Math.max(Vi(cg,ag,this.twist*gl+$r[this.slice][this.tsym]),Vi(ug,lg,this.flip*gl+$r[this.slice][this.fsym]))),this.prun>e))return!1;{let n=new Xe;Xe.CornConjugate(t,1,n),Xe.EdgeConjugate(t,1,n),this.twistc=n.getTwistSym(),this.flipc=n.getFlipSym(),this.prun=Math.max(this.prun,Vi(yl,vl,this.twistc>>3<<11|Oo[this.flipc^this.twistc&7]))}return this.prun<=e};_l.prototype.doMovePrun=function(t,e,n){return this.slice=Bf[t.slice][e],this.flip=Ah[t.flip][bl[e<<3|t.fsym]],this.fsym=this.flip&7^t.fsym,this.flip>>=3,this.twist=Ff[t.twist][bl[e<<3|t.tsym]],this.tsym=this.twist&7^t.tsym,this.twist>>=3,this.prun=Math.max(Math.max(Vi(cg,ag,this.twist*gl+$r[this.slice][this.tsym]),Vi(ug,lg,this.flip*gl+$r[this.slice][this.fsym])),Vi(yl,vl,this.twist<<11|Oo[this.flip<<3|this.fsym^this.tsym])),this.prun};_l.prototype.doMovePrunConj=function(t,e){return e=sp[3][e],this.flipc=Ah[t.flipc>>3][bl[e<<3|t.flipc&7]]^t.flipc&7,this.twistc=Ff[t.twistc>>3][bl[e<<3|t.twistc&7]]^t.twistc&7,Vi(yl,vl,this.twistc>>3<<11|Oo[this.flipc^this.twistc&7])};Ts.prototype.solution=function(t,e,n,i,s){R6();let r=this.verify(t);return r!=0?"Error "+Math.abs(r):(e===void 0&&(e=21),n===void 0&&(n=1e9),i===void 0&&(i=0),s===void 0&&(s=0),this.sol=e+1,this.probe=0,this.probeMax=n,this.probeMin=Math.min(i,n),this.verbose=s,this.moveSol=null,this.isRec=!1,this.initSearch(),this.search())};Ts.prototype.initSearch=function(){this.conjMask=0,this.maxPreMoves=this.conjMask>7?0:BT;for(let t=0;t<6;t++)if(this.urfCubieCube[t].init(this.cc.ca,this.cc.ea),this.urfCoordCube[t].setWithPrun(this.urfCubieCube[t],20),this.cc.URFConjugate(),t%3==2){let e=new Xe().invFrom(this.cc);this.cc.init(e.ca,e.ea)}};Ts.prototype.next=function(t,e,n){return this.probe=0,this.probeMax=t,this.probeMin=Math.min(e,t),this.moveSol=null,this.isRec=!0,this.verbose=n,this.search()};Ts.prototype.verify=function(t){if(this.cc.fromFacelet(t)==-1)return-1;let e=0,n=0;for(let s=0;s<12;s++)n|=1<<(this.cc.ea[s]>>1),e^=this.cc.ea[s]&1;if(n!=4095)return-2;if(e!=0)return-3;let i=0;e=0;for(let s=0;s<8;s++)i|=1<<(this.cc.ca[s]&7),e+=this.cc.ca[s]>>3;return i!=255?-4:e%3!=0?-5:(x1(UT(this.cc.ea,12,!0),12)^x1(this.cc.getCPerm(),8))!=0?-6:0};Ts.prototype.phase1PreMoves=function(t,e,n){if(this.preMoveLen=this.maxPreMoves-t,(this.isRec?this.depth1==this.length1-this.preMoveLen:this.preMoveLen==0||(225207>>e&1)==0)&&(this.depth1=this.length1-this.preMoveLen,this.phase1Cubie[0].init(n.ca,n.ea),this.allowShorter=this.depth1==e0&&this.preMoveLen!=0,this.nodeUD[this.depth1+1].setWithPrun(n,this.depth1)&&this.phase1(this.nodeUD[this.depth1+1],this.depth1,-1)==0))return 0;if(t==0||this.preMoveLen+e0>=this.length1)return 1;let i=0;(t==1||this.preMoveLen+1+e0>=this.length1)&&(i|=225207),e=~~(e/3)*3;for(let s=0;s<18;s++){if(s==e||s==e-9||s==e+9){s+=2;continue}if(this.isRec&&s!=this.preMoves[this.maxPreMoves-t]||(i&1<<s)!=0)continue;if(Xe.CornMult(jn[s],n,this.preMoveCubes[t]),Xe.EdgeMult(jn[s],n,this.preMoveCubes[t]),this.preMoves[this.maxPreMoves-t]=s,this.phase1PreMoves(t-1,s,this.preMoveCubes[t])==0)return 0}return 1};Ts.prototype.search=function(){for(this.length1=this.isRec?this.length1:0;this.length1<this.sol;this.length1++)for(this.urfIdx=this.isRec?this.urfIdx:0;this.urfIdx<6;this.urfIdx++)if((this.conjMask&1<<this.urfIdx)==0&&this.phase1PreMoves(this.maxPreMoves,-30,this.urfCubieCube[this.urfIdx],0)==0)return this.moveSol==null?"Error 8":this.moveSol;return this.moveSol==null?"Error 7":this.moveSol};Ts.prototype.initPhase2Pre=function(){if(this.isRec=!1,this.probe>=(this.moveSol==null?this.probeMax:this.probeMin))return 0;++this.probe;for(let n=this.valid1;n<this.depth1;n++)Xe.CornMult(this.phase1Cubie[n],jn[this.move[n]],this.phase1Cubie[n+1]),Xe.EdgeMult(this.phase1Cubie[n],jn[this.move[n]],this.phase1Cubie[n+1]);this.valid1=this.depth1;let t=this.initPhase2(this.phase1Cubie[this.depth1]);if(t==0||this.preMoveLen==0||t==2)return t;let e=~~(this.preMoves[this.preMoveLen-1]/3)*3+1;return Xe.CornMult(jn[e],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]),Xe.EdgeMult(jn[e],this.phase1Cubie[this.depth1],this.phase1Cubie[this.depth1+1]),this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2,t=this.initPhase2(this.phase1Cubie[this.depth1+1]),this.preMoves[this.preMoveLen-1]+=2-this.preMoves[this.preMoveLen-1]%3*2,t};Ts.prototype.initPhase2=function(t){let e=t.getCPermSym(),n=e&15;e>>=4;let i=t.getEPermSym(),s=i&15;i>>=4;let r=t.getMPerm(),o=Math.max(Vi(Qp,$p,i*Of+qc[Jp[e]&255][vr[s][n]]),Vi(Ob,Db,e*Cb+zf[r][n])),a=Math.min(i6,this.sol-this.length1);if(o>=a)return o>a?2:1;let l;for(l=a-1;l>=o;l--){let c=this.phase2(i,s,e,n,r,l,this.depth1,10);if(c<0)break;l-=c,this.moveSol=[];for(let u=0;u<this.depth1+l;u++)this.appendSolMove(this.move[u]);for(let u=this.preMoveLen-1;u>=0;u--)this.appendSolMove(this.preMoves[u]);this.sol=this.moveSol.length,this.moveSol=this.solutionToString()}return l!=a-1&&this.probe>=this.probeMin?0:1};Ts.prototype.phase1=function(t,e,n){if(t.prun==0&&e<5)if(this.allowShorter||e==0){this.depth1-=e;let i=this.initPhase2Pre();return this.depth1+=e,i}else return 1;for(let i=0;i<18;i+=3)if(!(i==n||i==n-9))for(let s=0;s<3;s++){let r=i+s;if(this.isRec&&r!=this.move[this.depth1-e])continue;let o=this.nodeUD[e].doMovePrun(t,r,!0);if(o>e)break;if(o==e)continue;{if(o=this.nodeUD[e].doMovePrunConj(t,r),o>e)break;if(o==e)continue}this.move[this.depth1-e]=r,this.valid1=Math.min(this.valid1,this.depth1-e);let a=this.phase1(this.nodeUD[e],e-1,i);if(a==0)return 0;if(a==2)break}return 1};Ts.prototype.appendSolMove=function(t){if(this.moveSol.length==0){this.moveSol.push(t);return}let e=~~(t/3),n=~~(this.moveSol[this.moveSol.length-1]/3);if(e==n){let i=(t%3+this.moveSol[this.moveSol.length-1]%3+1)%4;i==3?this.moveSol.pop():this.moveSol[this.moveSol.length-1]=e*3+i;return}if(this.moveSol.length>1&&e%3==n%3&&e==~~(this.moveSol[this.moveSol.length-2]/3)){let i=(t%3+this.moveSol[this.moveSol.length-2]%3+1)%4;i==3?(this.moveSol[this.moveSol.length-2]=this.moveSol[this.moveSol.length-1],this.moveSol.pop()):this.moveSol[this.moveSol.length-2]=e*3+i;return}this.moveSol.push(t)};Ts.prototype.phase2=function(t,e,n,i,s,r,o,a){if(t==0&&n==0&&s==0)return r;let l=ip[a];for(let c=0;c<10;c++){if((l>>c&1)!=0){c+=66>>c&3;continue}let u=Kp[s][c],f=Rb[n][qp[i][c]],h=Dc[f&15][i];if(f>>=4,Vi(Ob,Db,f*Cb+zf[u][h])>=r)continue;let d=Ib[t][qp[e][c]],p=Dc[d&15][e];if(d>>=4,Vi(Qp,$p,d*Of+qc[Jp[f]&255][vr[p][h]])>=r)continue;let m=Sy(d,p,!1),_=Sy(f,h,!0);if(Vi(Qp,$p,(m>>4)*Of+qc[Jp[_>>4]&255][vr[m&15][_&15]])>=r)continue;let b=this.phase2(d,p,f,h,u,r-1,o+1,c);if(b>=0)return this.move[o]=ga[c],b}return-1};Ts.prototype.solutionToString=function(){let t="",e=(this.verbose&s6)!=0?(this.urfIdx+3)%6:this.urfIdx;if(e<3)for(let n=0;n<this.moveSol.length;++n)t+=xy[My[e][this.moveSol[n]]]+" ";else for(let n=this.moveSol.length-1;n>=0;--n)t+=xy[My[e][this.moveSol[n]]]+" ";return t};let jn=[],Nf=[],Dc=[],vr=[],sp=[],qp=[],bl=[],Ey=[],Xp=[],Ty=[],WT=[],Tu=[],Zp=[],jT=[],M1=[],S1=[],Oo=[],Jp=[],YT=[],Bf=[],Ff=[],Ah=[],$r=[],ag=[],lg=[],vl=[],Rb=[],Ib=[],Kp=[],zf=[],E1=[],qc=[],Db=[],$p=[],yl=15,cg=15,ug=15,Ob=15,Qp=15;{for(let t=0;t<18;t++)jn[t]=new Xe;jn[0].initCoord(15120,0,119750400,0),jn[3].initCoord(21021,1494,323403417,0),jn[6].initCoord(8064,1236,29441808,550),jn[9].initCoord(9,0,5880,0),jn[12].initCoord(1230,412,2949660,0),jn[15].initCoord(224,137,328552,137);for(let t=0;t<18;t+=3)for(let e=0;e<2;e++)Xe.EdgeMult(jn[t+e],jn[t],jn[t+e+1]),Xe.CornMult(jn[t+e],jn[t],jn[t+e+1]);Xe.urf1=new Xe().initCoord(2531,1373,67026819,1367),Xe.urf2=new Xe().initCoord(2089,1906,322752913,2040)}function P6(){{var t=new Xe;let e=new Xe,n=new Xe().initCoord(28783,0,259268407,0),i=new Xe().initCoord(15138,0,119765538,7),s=new Xe().initCoord(5167,0,83473207,0);for(let r=0;r<8;r++)s.ca[r]|=3<<3;for(let r=0;r<16;r++)Nf[r]=new Xe().init(t.ca,t.ea),Xe.CornMultFull(t,i,e),Xe.EdgeMult(t,i,e),t.init(e.ca,e.ea),r%4==3&&(Xe.CornMultFull(t,s,e),Xe.EdgeMult(t,s,e),t.init(e.ca,e.ea)),r%8==7&&(Xe.CornMultFull(t,n,e),Xe.EdgeMult(t,n,e),t.init(e.ca,e.ea))}{for(let n=0;n<16;n++)Dc[n]=[],vr[n]=[],sp[n]=[],bl[n]=[],qp[n]=[];for(let n=0;n<16;n++)for(let i=0;i<16;i++)Dc[n][i]=n^i^84660>>i&n<<1&2,vr[Dc[n][i]][i]=n;var t=new Xe;for(let n=0;n<16;n++)for(let i=0;i<18;i++){Xe.CornConjugate(jn[i],vr[0][n],t);e:for(let s=0;s<18;s++){for(let r=0;r<8;r++)if(jn[s].ca[r]!=t.ca[r])continue e;sp[n][i]=s,qp[n][w1[i]]=w1[s];break}n%2==0&&(bl[i<<3|n>>1]=sp[n][i])}}{let e=function(i,s,r,o,a,l,c){let u=new Xe,f=new Xe,h=0,d=a>=2?1:2,p=a!=1?Xe.EdgeConjugate:Xe.CornConjugate;for(let m=0;m<i;m++)if(r[m]===void 0){l.call(u,m);for(let _=0;_<16;_+=d){p(u,_,f);let b=c.call(f);a==0&&(Oo[h<<3|_>>1]=b),b==m&&(o[h]|=1<<_/d),r[b]=(h<<4|_)/d}s[h++]=m}return h};e(M6,Ey,Xp,jT,0,Xe.prototype.setFlip,Xe.prototype.getFlip),e(E6,Ty,WT,M1,1,Xe.prototype.setTwist,Xe.prototype.getTwist),e(k6,Tu,Zp,S1,2,Xe.prototype.setEPerm,Xe.prototype.getEPerm);let n=new Xe;for(let i=0;i<n0;i++)rg(n.ea,Tu[i],8,!0),Jp[i]=Pb(n.ea,0,!0)+x1(Tu[i],8)*70,t.invFrom(n),YT[i]=Zp[t.getEPerm()]}{let e=function(s,r,o,a,l,c,u,f){for(let h=0;h<o;h++){s[h]=[],l.call(t,r[h]);for(let d=0;d<a;d++)u(t,jn[f?f[d]:d],i),s[h][d]=c.call(i)}};var t=new Xe;let i=new Xe;e(Ah,Ey,S6,t0,Xe.prototype.setFlip,Xe.prototype.getFlipSym,Xe.EdgeMult),e(Ff,Ty,T6,t0,Xe.prototype.setTwist,Xe.prototype.getTwistSym,Xe.CornMult),e(Ib,Tu,n0,Zh,Xe.prototype.setEPerm,Xe.prototype.getEPermSym,Xe.EdgeMult,ga),e(Rb,Tu,n0,Zh,Xe.prototype.setCPerm,Xe.prototype.getCPermSym,Xe.CornMult,ga);for(let s=0;s<gl;s++){Bf[s]=[],$r[s]=[],t.setUDSlice(s);for(let r=0;r<t0;r++)Xe.EdgeMult(t,jn[r],i),Bf[s][r]=i.getUDSlice();for(let r=0;r<16;r+=2)Xe.EdgeConjugate(t,vr[0][r],i),$r[s][r>>1]=i.getUDSlice()}for(let s=0;s<Cb;s++){Kp[s]=[],zf[s]=[],t.setMPerm(s);for(let r=0;r<Zh;r++)Xe.EdgeMult(t,jn[ga[r]],i),Kp[s][r]=i.getMPerm();for(let r=0;r<16;r++)Xe.EdgeConjugate(t,vr[0][r],i),zf[s][r]=i.getMPerm()}for(let s=0;s<Of;s++){E1[s]=[],qc[s]=[],t.setCComb(s%70);for(let r=0;r<Zh;r++)Xe.CornMult(t,jn[ga[r]],i),E1[s][r]=i.getCComb()+70*(A6>>r&1^~~(s/70));for(let r=0;r<16;r++)Xe.CornConjugate(t,vr[0][r],i),qc[s][r]=i.getCComb()+70*~~(s/70)}}}let jr=-1;function ku(t,e,n,i,s,r,o,a){let l=a&15,c=(a>>4&1)==1?14540032:0,u=(a>>5&1)==1,f=a>>8&15,h=a>>12&15,d=a>>16&15,p=(1<<l)-1,m=i==null,_=e*n,b=u?10:18,g=b==10?66:599186,x=i0(t,_)-1;if(x==-1){for(let v=0;v<(_>>3)+1;v++)t[v]=4294967295;Gl(t,0,15),x=0}else Gl(t,_,15^x+1);let y=Math.min(Math.max(x+1,d),h);for(;x<y;){let v=x>f,w=v?15:x,S=w*286331153,T=v?x:15;x++,jr++;let k=x^15,A=0;for(let L=0;L<_;L++,A>>=4){if((L&7)==0&&(A=t[L>>3],!C6(A^S))){L+=7;continue}if((A&15)!=w)continue;let D=L%e,B=~~(L/e),U=0,N=0;m&&(U=Xp[D],N=U&7,U>>=3);for(let $=0;$<b;$++){let W=r[B][$],j;m?j=Oo[Ah[U][bl[$<<3|N]]^N^W&p]:j=s[i[D][$]][W&p],W>>=l;let J=W*e+j,se=i0(t,J);if(se!=T){se<x-1&&($+=g>>$&3);continue}if(v){Gl(t,L,k);break}Gl(t,J,k);for(let ne=1,K=o[W];(K>>=1)!=0;ne++){if((K&1)!=1)continue;let q=W*e;m?q+=Oo[Xp[j]^ne]:q+=s[j][ne^c>>(ne<<1)&3],i0(t,q)==T&&Gl(t,q,k)}}}}return Gl(t,_,x+1^15),x+1}function ky(t){yl=ku(vl,2048,324,null,null,Ff,M1,103939),!(jr>t)&&(cg=ku(ag,495,324,Bf,$r,Ff,M1,431619),!(jr>t)&&(ug=ku(lg,495,336,Bf,$r,Ah,jT,431619),!(jr>t)&&(Ob=ku(Db,24,2768,Kp,zf,Rb,S1,584244),!(jr>t)&&(Qp=ku($p,Of,2768,E1,qc,Ib,S1,514084)))))}function R6(){if(jr<0&&(P6(),jr=0),jr==0)ky(99);else if(jr<54)ky(jr);else return!0;return!1}let em,tm,T1,k1,fg=[],nm=[],im=[],of=[],af=[];function Lh(t,e){let n=fg[e][~~(t/24)];return 24*~~(n/384)+nm[t%24][(n>>4)%24]}function Ch(t,e){let n=fg[e][t>>4];return~~(n/384)<<4|im[t&15][(n>>4)%24]^n&15}function qT(t,e){for(let n=3;0<=n;n--)e[n]=t&1,t>>=1}function I6(t){let e,n;for(e=0,n=0;4>n;n++)e<<=1,e|=t[n];return e}function D6(t,e){let n=fg[e][~~(t/384)],i=im[t&15][(n>>4)%24]^n&15,s=nm[(t>>4)%24][(n>>4)%24];return~~(n/384)*384+16*s+i}let Ay=!1;function Nb(){if(Ay)return;Ay=!0;for(let s=0;s<24;s++)nm[s]=[];for(let s=0;s<16;s++)im[s]=[];let t=[],e=[],n=[];for(let s=0;s<24;s++)for(let r=0;r<24;r++){jp(t,s,4),jp(e,r,4);for(let o=0;o<4;o++)n[o]=t[e[o]];if(nm[s][r]=ko(n,4),s<16){qT(s,t);for(let o=0;o<4;o++)n[o]=t[e[o]];im[s][r]=I6(n)}}Yp(fg,495,i),em=[],tm=[],ml(em,0,11880,5,Lh),ml(tm,0,7920,6,Ch);function i(s,r){let o=[0,0,0,0,0,0,0,0,0,0,0,0],a=4;for(let u=0;u<12;u++)s>=Mn[11-u][a]?(s-=Mn[11-u][a--],o[u]=a<<1):o[u]=-1;vT(o,r),s=0,a=4;let l=0,c=[];for(let u=0;u<12;u++)o[u]>=0&&(s+=Mn[11-u][a--],c[a]=o[u]>>1,l|=(o[u]&1)<<3-a);return s*24+ko(c,4)<<4|l}}let Ly=!1;function O6(){if(Ly)return;Ly=!0,Nb();for(let e=0;e<24;e++){af[e]=[],of[e]=[];for(let n=0;n<6;n++){af[e][n]=t(e,n);let i=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];i[e>>1]=e&1,vT(i,n);for(let s=0;s<12;s++)if(i[s]>=0){of[e][n]=s<<1|i[s];break}}}T1=[];for(let e=0;e<4;e++){let n=[];ml(n,(e+4)*3*24+(e+4)*2,576,5,function(i,s){return af[~~(i/24)][s]*24+of[i%24][s]}),T1[e]=n}function t(e,n){let i=~~(e/3),s=e%3,r=[[3,1,2,7,0,5,6,4],[0,1,6,2,4,5,7,3],[1,2,3,0,4,5,6,7],[0,5,1,3,4,6,2,7],[4,0,2,3,5,1,6,7],[0,1,2,3,7,4,5,6]];return s=(s+[[2,0,0,1,1,0,0,2],[0,0,1,2,0,0,2,1],[0,0,0,0,0,0,0,0],[0,1,2,0,0,2,1,0],[1,2,0,0,2,1,0,0],[0,0,0,0,0,0,0,0]][n][i])%3,r[n][i]*3+s}}function XT(t,e,n,i,s,r,o,a){if(r==0)return t==0&&e==0&&n==(s+4)*2&&i==(s+4)*3;{if(Os(em,t)>r||Os(tm,e)>r||Os(T1[s],i*24+n)>r)return!1;let l,c,u,f,h,d;for(d=0;d<6;d++)if(d!=o&&d!=o-3){for(l=t,c=e,u=n,f=i,h=0;h<3;h++)if(l=Lh(l,d),c=Ch(c,d),u=of[u][d],f=af[f][d],XT(l,c,u,f,s,r-1,d,a))return a.push("FRUBLD".charAt(d)+" 2'".charAt(h)),!0}}return!1}function ZT(t,e,n,i,s){if(n==0)return t==0&&e==0;{if(Os(em,t)>n||Os(tm,e)>n)return!1;let r,o,a,l;for(l=0;l<6;l++)if(l!=i&&l!=i-3){for(r=t,o=e,a=0;a<3;a++)if(r=Lh(r,l),o=Ch(o,l),ZT(r,o,n-1,l,s))return s.push("FRUBLD".charAt(l)+" 2'".charAt(a)),!0}}return!1}let JT=["FRUBLD","FLDBRU","FDRBUL","FULBDR","URBDLF","DRFULB"];const N6=/^([\d]+)?([FRUBLDfrubldzxySME])(?:([w])|&sup([\d]);)?([2'])?$/;function KT(t,e){for(var n=[],i=t.split(" "),s,r,o,a,l=0;l<i.length;l++)if(s=N6.exec(i[l]),s!=null){if(o="FRUBLDfrubldzxySME".indexOf(s[2]),o>14){a="2'".indexOf(s[5]||"X")+2,o=[0,4,5][o%3],n.push([e.indexOf("FRUBLD".charAt(o)),2,a]),n.push([e.indexOf("FRUBLD".charAt(o)),1,4-a]);continue}r=o<12?~~s[1]||~~s[4]||(s[3]=="w"||o>5)&&2||1:-1,a=(o<12?1:-1)*("2'".indexOf(s[5]||"X")+2),n.push([e.indexOf("FRUBLD".charAt(o%6)),r,a])}return n}function B6(t){Nb();let e=KT(t,"FRUBLD"),n=[];for(let i=0;i<6;i++){let s=0,r=0;for(let a=0;a<e.length;a++){let l=JT[i].indexOf("FRUBLD".charAt(e[a][0])),c=e[a][2];for(let u=0;u<c;u++)s=Ch(s,l),r=Lh(r,l)}let o=[];for(let a=0;a<100&&!ZT(r,s,a,-1,o);a++);o.reverse(),n.push(o)}return n}function F6(t,e){O6();let n=0,i=0,s=[8,10,12,14],r=[12,15,18,21],o=KT(t,"FRUBLD");for(let u=0;u<o.length;u++){let f=JT[e].indexOf("FRUBLD".charAt(o[u][0])),h=o[u][2];for(let d=0;d<h;d++){n=Ch(n,f),i=Lh(i,f);for(let p=0;p<4;p++)s[p]=of[s[p]][f],r[p]=af[r[p]][f]}}let a=[],l=!1,c=0;for(;!l;){for(let u=0;u<4;u++)if(XT(i,n,s[u],r[u],u,c,-1,a)){l=!0;break}c++}return a.reverse(),a}let Cy=!1;function z6(){Cy||(Cy=!0,Nb(),k1=[],ml(k1,0,190080,7,D6,6,3,6))}function U6(t){z6(),t>8&&(t=8);let e=Et([1,16,174,1568,11377,57758,155012,189978,190080][t])+1,n;for(n=0;n<190080&&!(Os(k1,n)<=t&&--e==0);n++);let i=~~(n/384),s=(n>>4)%24,r=n&15,o=[],a=[],l=[],c=[];qT(r,c),jp(l,s,4);let u=4,f=[7,6,5,4,10,9,8,11,3,2,1,0];for(n=0;n<12;n++)i>=Mn[11-n][u]?(i-=Mn[11-n][u--],o[f[n]]=l[u],a[f[n]]=c[u]):o[f[n]]=a[f[n]]=-1;return[o,a]}const H6=0,V6=1,G6=2,W6=3,j6=4,Y6=5,q6=12,X6=13,Z6=14;function $T(t){t.cp=[0,1,2,3,4,5,6,7],t.co=[0,0,0,0,0,0,0,0],t.ep=[0,1,2,3,4,5,6,7,8,9,10,11],t.eo=[0,0,0,0,0,0,0,0,0,0,0,0]}function J6(t,e){var n,i;for(i=0,n=10;n>=0;--n)i^=t.eo[n]=e&1,e>>=1;t.eo[11]=i}function K6(t,e){var n,i;for(i=0,n=6;n>=0;--n)i+=t.co[n]=e%3,e=~~(e/3);t.co[7]=(15-i)%3}function A1(t,e,n){var i,s,r,o;for(i=0;i<8;++i)n.cp[i]=t.cp[e.cp[i]],r=t.co[e.cp[i]],o=e.co[i],s=r,s+=r<3?o:6-o,s%=3,r>=3!=o>=3&&(s+=3),n.co[i]=s}function Bb(){$T(this)}function ra(t,e,n,i){$T(this),xs(this.cp,t),K6(this,e),jp(this.ep,n,12),J6(this,i)}function L1(t,e,n){var i;for(i=0;i<12;++i)n.ep[i]=t.ep[e.ep[i]],n.eo[i]=e.eo[i]^t.eo[e.ep[i]]}let Py=!1;function $6(){if(!Py){Py=!0;var t,e;for(zi[0]=new ra(15120,0,119750400,0),zi[3]=new ra(21021,1494,323403417,0),zi[6]=new ra(8064,1236,29441808,550),zi[9]=new ra(9,0,5880,0),zi[12]=new ra(1230,412,2949660,0),zi[15]=new ra(224,137,328552,137),t=0;t<18;t+=3)for(e=0;e<2;++e)zi[t+e+1]=new Bb,L1(zi[t+e],zi[t],zi[t+e+1]),A1(zi[t+e],zi[t],zi[t+e+1])}}ra.prototype=Bb.prototype;var zi=[],Ry=[[8,9,20],[6,18,38],[0,36,47],[2,45,11],[29,26,15],[27,44,24],[33,53,42],[35,17,51]],Iy=[[5,10],[7,19],[3,37],[1,46],[32,16],[28,25],[30,43],[34,52],[23,12],[21,41],[50,39],[48,14]];function Q6(t){var e,n,i,s,r,o,a,l;for(i=[],l=[85,82,70,68,76,66],s=0;s<54;++s)i[s]=l[~~(s/9)];for(e=0;e<8;++e)for(r=t.cp[e],a=t.co[e],o=0;o<3;++o)i[Ry[e][(o+a)%3]]=l[~~(Ry[r][o]/9)];for(n=0;n<12;++n)for(r=t.ep[n],a=t.eo[n],o=0;o<2;++o)i[Iy[n][(o+a)%2]]=l[~~(Iy[r][o]/9)];return String.fromCharCode.apply(null,i)}new Ts;function lf(){return Oi(0xffffffffffff,0xffffffffffff,4294967295,4294967295)}function eN(){var t="",e,n,i,s;do{t=lf();var r=t.split(" ");r.length<3||(e=r[0][0],n=r[1][0],i=r[r.length-2][0],s=r[r.length-3][0])}while(e=="F"||e=="B"&&n=="F"||i=="R"||i=="L"&&s=="R");return"R' U' F "+t+"R' U' F"}function Jh(t){for(var e=0,n=0;n<t.length;n++)t[n]==-1&&e++;return e}function Dy(t,e,n){for(var i=0,s=0,r=0;r<t.length;r++)t[r]!=-1&&(i+=t[r]);i%=n;for(var r=0;r<t.length-1;r++)t[r]==-1&&(e--==1?t[r]=((n<<4)-i)%n:(t[r]=Et(n),i+=t[r])),s*=n,s+=t[r];return s}function Kh(t,e,n){for(var i=[0,1,2,3,4,5,6,7,8,9,10,11],s=0;s<t.length;s++)t[s]!=-1&&(i[t[s]]=-1);for(var s=0,r=0;s<i.length;s++)i[s]!=-1&&(i[r++]=i[s]);for(var o,s=0;s<t.length&&e>0;s++)if(t[s]==-1){var a=Et(e);t[s]=i[a];for(var r=a;r<11;r++)i[r]=i[r+1];e--==2&&(o=s)}if(Rc(ko(t,t.length),t.length)==1-n){var l=t[s-1];t[s-1]=t[o],t[o]=l}return ko(t,t.length)}function $h(t,e){if(typeof t!="number")return t;for(var n=[],i=0;i<e;i++){var s=t&15;n[i]=s==15?-1:s,t/=16}return n}var er=[[],[H6],[V6],[G6]],QT=[[],[W6,Z6],[j6,X6],[Y6,q6]],e4=["","x'","x2","x"],Oy=[[]];function Oi(t,e,n,i,s,r){$6(),s=s||Oy,r=r||Oy,t=$h(t,12),e=$h(e,12),n=$h(n,8),i=$h(i,8);var o="";do{var a=e.slice(),l=t.slice(),c=i.slice(),u=n.slice(),f=Dy(a,Jh(a),2),h=Dy(c,Jh(c),3),d,p,m=Jh(l),_=Jh(u);if(m==0&&_==0?(d=ko(l,12),p=ko(u,8)):m!=0&&_==0?(p=ko(u,8),d=Kh(l,m,Rc(p,8))):m==0&&_!=0?(d=ko(l,12),p=Kh(u,_,Rc(d,12))):(d=Kh(l,m,-1),p=Kh(u,_,Rc(d,12))),p+h+d+f!=0){for(var b=new ra(p,h,d,f),g=new Bb,x=li(r),y=li(s),v=0;v<x.length;v++){A1(zi[x[v]],b,g),L1(zi[x[v]],b,g);var w=g;g=b,b=w}for(var v=0;v<y.length;v++){A1(b,zi[y[v]],g),L1(b,zi[y[v]],g);var w=g;g=b,b=w}var S=Q6(b),T=new Ts;o=T.solution(S,21,1e9,50,2)}}while(o.length<=3);return o.replace(/ +/g," ")}function tN(){return Oi(0xffffffffffff,0xffffffffffff,1985229328,0)}function nN(){return Oi(0xba9876543210,0,4294967295,4294967295)}function iN(){return Oi(0xba987654ffff,65535,1985282047,65535)}var sN=[8192,4113,8210,4099,8195,4114,8194,4115,8211,4098,8208,4097,8209,4096,8193,4112,0,17,3,18,2,19,1,16,1024,1041,5120,9233,5137,9216,24,8,8200,4104,8216,4120,1048,5128,9224,5144,9240,1032],t4=[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,1,1,1,1,1],rN=["Easy-01","Easy-02","Easy-03","Easy-04","RE-05","RE-06","RE-07","RE-08","REFC-09","REFC-10","REFC-11","REFC-12","REFC-13","REFC-14","SPGO-15","SPGO-16","SPGO-17","SPGO-18","PMS-19","PMS-20","PMS-21","PMS-22","Weird-23","Weird-24","CPEU-25","CPEU-26","CPEU-27","CPEU-28","CPEU-29","CPEU-30","EPCU-31","EPCU-32","EPCU-33","EPCU-34","EPCU-35","EPCU-36","ECP-37","ECP-38","ECP-39","ECP-40","ECP-41","Solved-42"];function oN(t,e,n){var i=sN[du(n,t4)],s=Math.pow(16,i&15),r=15^i>>4&1,o=Math.pow(16,i>>8&15),a=15^i>>12&3;return Oi(0xba9f7654ffff-7*s,64424574975-r*s,1986002943-11*o,1048575-a*o)}function aN(){return Oi(0xffff7654ffff,0xffff0000ffff,4294967295,4294967295)}var lN=[[12816,8481],[12306,8481],[12576,8481],[12801,8481],[12306,4128],[12321,4128],[12801,4128],[12546,4128],[12816,4128],[12576,4128],[12546,4386],[12576,4386],[12306,4386],[12321,4386],[12816,4386],[12801,4386],[12576,8736],[12546,8736],[12816,8736],[12801,8736],[12321,8736],[12306,8736],[12816,8448],[12306,8448],[12801,8448],[12576,8448],[12546,8448],[12321,8448],[12321,4608],[12801,4608],[12306,4608],[12576,4608],[12546,4608],[12816,4608],[12546,4353],[12576,4353],[12306,4353],[12321,4353],[12816,4353],[12801,4353],[65535,0]],n4=[1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3],cN=["H-BBFF","H-FBFB","H-RFLF","H-RLFF","L-FBRL","L-LBFF","L-LFFB","L-LFFR","L-LRFF","L-RFBL","Pi-BFFB","Pi-FBFB","Pi-FRFL","Pi-FRLF","Pi-LFRF","Pi-RFFL","S-FBBF","S-FBFB","S-FLFR","S-FLRF","S-LFFR","S-LFRF","T-BBFF","T-FBFB","T-FFLR","T-FLFR","T-RFLF","T-RLFF","U-BBFF","U-BFFB","U-FFLR","U-FRLF","U-LFFR","U-LRFF","aS-FBBF","aS-FBFB","aS-FRFL","aS-FRLF","aS-LFRF","aS-RFFL","PLL"];function uN(t,e,n){var i=lN[du(n,n4)];return Oi(0xba987654ffff,0,i[0]+1985216512,i[1],er,er)}function fN(){return Oi(0xba9876543f1f,0,1985282047,65535,er)}function hN(){return Oi(0xba9f7654ffff,0,1986002943,1048575)}function dN(){var t=Et(4);return Oi(0xba98f6f4ffff,4042326015,1985229328,0,[QT[t]],er)+e4[t]}var pN=[0,4626,258,4386,546,33,18,273],i4=[6,12,24,24,24,24,24,24],mN=["O","H","L","Pi","S","T","U","aS"];function gN(t,e,n){for(var i=Et(4),s=[],r=0;r<er.length;r++)s.push(er[r].concat(QT[i]));return Oi(0xba98f6f4ffff,4042326015,1985282047,pN[du(n,i4)],s,er)+e4[i]}function _N(){return Oi(0xba9876543210,0,1985282047,65535)}function bN(){return Oi(0xba987654ffff,65535,1985229328,0)}function vN(){return Oi(0xba987654ffff,0,1985229328,65535,er)}var yN=[[4146,12816],[12546,12816],[12321,12816],[8961,12816],[12816,12321],[12816,12546],[12816,8961],[12306,12801],[8496,12321],[4896,12546],[12321,12546],[12546,12321],[12801,12801],[12576,12801],[4656,12306],[12306,12306],[531,12801],[8976,12801],[4656,12801],[12576,12306],[12801,12306]],s4=[1,4,4,2,4,4,2,4,4,4,4,4,4,4,1,1,4,4,4,4,4],rp=["H","Ua","Ub","Z","Aa","Ab","E","F","Ga","Gb","Gc","Gd","Ja","Jb","Na","Nb","Ra","Rb","T","V","Y"];function r4(t,e,n){var i=yN[du(n,s4)];return Oi(i[0]+0xba9876540000,0,i[1]+1985216512,0,er,er)}var wN=[[0,0],[4369,4626],[4369,4386],[4369,546],[4369,273],[17,8226],[17,4113],[17,8706],[17,273],[17,4368],[17,8736],[17,546],[17,4353],[257,8226],[257,273],[257,546],[257,4113],[4369,258],[4369,18],[4369,33],[4369,0],[0,4626],[0,4386],[0,18],[0,33],[0,258],[0,273],[0,546],[17,0],[17,528],[17,8448],[17,33],[17,4098],[257,33],[257,528],[17,4128],[17,258],[17,8208],[17,513],[257,4128],[257,258],[17,4608],[17,288],[17,18],[17,8193],[257,18],[257,288],[17,4641],[17,4386],[17,8466],[17,8721],[257,4641],[257,4386],[17,8481],[17,4626],[257,8481],[257,4626],[257,0]],o4=[1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,2,2,2],xN=["PLL","Point-1","Point-2","Point-3","Point-4","Square-5","Square-6","SLBS-7","SLBS-8","Fish-9","Fish-10","SLBS-11","SLBS-12","Knight-13","Knight-14","Knight-15","Knight-16","Point-17","Point-18","Point-19","CO-20","OCLL-21","OCLL-22","OCLL-23","OCLL-24","OCLL-25","OCLL-26","OCLL-27","CO-28","Awkward-29","Awkward-30","P-31","P-32","T-33","C-34","Fish-35","W-36","Fish-37","W-38","BLBS-39","BLBS-40","Awkward-41","Awkward-42","P-43","P-44","T-45","C-46","L-47","L-48","L-49","L-50","I-51","I-52","L-53","L-54","I-55","I-56","CO-57"];function MN(t,e,n){var i=wN[du(n,o4)];return Oi(0xba987654ffff,i[0],1985282047,i[1],er,er)}function SN(){return Oi(0xffff7f5fffff,0,4294967295,4294967295)}function EN(t,e){var n=U6(e);return Oi(n[0],n[1],4294967295,4294967295)}xi("333",lf)("333oh",lf)("333ft",lf)("333fm",eN)("edges",tN)("corners",nN)("ll",iN)("lsll2",oN,[rN,t4])("f2l",aN)("zbll",uN,[cN,n4])("zzll",fN)("zbls",hN)("lse",dN)("cmll",gN,[mN,i4])("cll",_N)("ell",bN)("pll",r4,[rp,s4])("oll",MN,[xN,o4])("2gll",vN)("easyc",EN)("eoline",SN);function Ut(t,e){let n,i;if(n=new Array(t),e!=null)for(i=0;i<t;i++)n[i]=new Array(e);return n}let fn,Uf={},TN={},a4=0,Fb=30,l4=21,kN=22,AN=23,c4=24,LN=25,CN=34,PN=26,zb=40;function RN(t){return new Uf[t]}function Hs(t,e,n,...i){let s=Uf[t];s&&!s.___clazz$?fn=s.prototype:(!s&&(s=Uf[t]=function(){}),fn=s.prototype=e<0?{}:RN(e),fn.castableTypeMap$=n);for(let r=0,o=i.length;r<o;r+=1)i[r].prototype=fn;s.___clazz$&&(fn.___clazz$=s.___clazz$,s.___clazz$=null)}function Na(t){let e={};for(let n=0,i=t.length;n<i;++n)e[t[n]]=1;return e}Hs(1,-1,TN);fn.value=null;function u4(){}function IN(t,e){let n,i;return n=t,i=f4(0,e),h4(n.___clazz$,n.castableTypeMap$,n.queryId$,i),i}function f4(t,e){let n=new Array(e);if(t==3)for(let i=0;i<e;++i)n[i]={h:0,m:0,l:0};else if(t>0)for(let i=0;i<e;++i)n[i]=[null,0,!1][t];return n}function Ub(t,e,n,i,s){let r;return r=f4(s,i),h4(t,e,n,r),r}function h4(t,e,n,i){return d4(),ON(i,C1,P1),i.___clazz$=t,i.castableTypeMap$=e,i.queryId$=n,i}function sm(t,e,n){return t[e]=n}Hs(73,1,{},u4);fn.queryId$=0;let Ny=!1;function d4(){Ny||(Ny=!0,C1=[],P1=[],DN(new u4,C1,P1))}function DN(t,e,n){let i=0,s;for(let r in t)(s=t[r])&&(e[i]=r,n[i]=s,++i)}function ON(t,e,n){d4();for(let i=0,s=e.length;i<s;++i)t[e[i]]=n[i]}let C1,P1;function NN(t,e){return t.castableTypeMap$&&!!t.castableTypeMap$[e]}function BN(t,e){return t!=null&&NN(t,e)}let By=!1;function FN(){By||(By=!0,hg=Ut(15582,36),dg=Ut(15582),yr=Ut(15582),Nc=Ut(48,48),gr=Ut(48,36),Oc=Ut(48),Gb=Ut(48))}function Hb(t){t.ct=Ut(24)}function Fy(t,e){let n,i;if(BN(e,l4)){for(n=e,i=0;i<24;++i)if(t.ct[i]!=n.ct[i])return!1;return!0}return!1}function rm(t){let e,n,i;for(n=0,i=8,e=23;e>=0;--e)t.ct[e]==1&&(n+=Mn[e][i--]);return n}function op(t){let e,n;if(Xc!=null)return Xc[rm(t)];for(n=0;n<48;++n){if(e=WN(rm(t)),e!=-1)return e*64+n;En(t,0),n%2==1&&En(t,1),n%8==7&&En(t,2),n%16==15&&En(t,3)}}function mr(t,e){let n;switch(n=e%3,e=~~(e/3),e){case 0:Fe(t.ct,0,1,2,3,n);break;case 1:Fe(t.ct,16,17,18,19,n);break;case 2:Fe(t.ct,8,9,10,11,n);break;case 3:Fe(t.ct,4,5,6,7,n);break;case 4:Fe(t.ct,20,21,22,23,n);break;case 5:Fe(t.ct,12,13,14,15,n);break;case 6:Fe(t.ct,0,1,2,3,n),Fe(t.ct,8,20,12,16,n),Fe(t.ct,9,21,13,17,n);break;case 7:Fe(t.ct,16,17,18,19,n),Fe(t.ct,1,15,5,9,n),Fe(t.ct,2,12,6,10,n);break;case 8:Fe(t.ct,8,9,10,11,n),Fe(t.ct,2,19,4,21,n),Fe(t.ct,3,16,5,22,n);break;case 9:Fe(t.ct,4,5,6,7,n),Fe(t.ct,10,18,14,22,n),Fe(t.ct,11,19,15,23,n);break;case 10:Fe(t.ct,20,21,22,23,n),Fe(t.ct,0,8,4,14,n),Fe(t.ct,3,11,7,13,n);break;case 11:Fe(t.ct,12,13,14,15,n),Fe(t.ct,1,20,7,18,n),Fe(t.ct,0,23,6,17,n)}}function En(t,e){switch(e){case 0:mr(t,19),mr(t,28);break;case 1:mr(t,21),mr(t,32);break;case 2:Fe(t.ct,0,3,1,2,1),Fe(t.ct,8,11,9,10,1),Fe(t.ct,4,7,5,6,1),Fe(t.ct,12,15,13,14,1),Fe(t.ct,16,19,21,22,1),Fe(t.ct,17,18,20,23,1);break;case 3:mr(t,18),mr(t,29),mr(t,24),mr(t,35)}}function zy(t,e){let n;for(n=0;n<e;++n)En(t,0),n%2==1&&En(t,1),n%8==7&&En(t,2),n%16==15&&En(t,3)}function Vb(t,e){let n,i;for(i=8,n=23;n>=0;--n)t.ct[n]=0,e>=Mn[n][i]&&(e-=Mn[n][i--],t.ct[n]=1)}function ap(t,e){let n;for(n=0;n<24;++n)t.ct[n]=e.ct[n]}function Hf(){let t;for(Hb(this),t=0;t<8;++t)this.ct[t]=1;for(t=8;t<24;++t)this.ct[t]=0}function lp(t,e){let n;for(Hb(this),n=0;n<24;++n)this.ct[n]=~~(t.ct[n]/2)==e?1:0}function cf(t){let e;for(Hb(this),e=0;e<24;++e)this.ct[e]=t[e]}function zN(){let t,e,n,i;for(t=new Hf,e=new Hf,n=0;n<15582;++n)for(Vb(e,dg[n]),i=0;i<36;++i)ap(t,e),mr(t,i),hg[n][i]=op(t)}function UN(){let t,e,n,i,s,r,o,a;for(_g(yr),yr[0]=0,e=0,n=1;n!=15582;)for(r=e>4,a=r?-1:e,t=r?e:-1,++e,i=0;i<15582;++i)if(yr[i]==a){for(o=0;o<27;++o)if(s=~~hg[i][o]>>>6,yr[s]==t)if(++n,r){yr[i]=e;break}else yr[s]=e}}function HN(t){let e,n,i,s;for(e=new cf(t.ct),s=0;s<48;++s){for(n=!0,i=0;i<24;++i)if(e.ct[i]!=~~(i/4)){n=!1;break}if(n)return s;En(e,0),s%2==1&&En(e,1),s%8==7&&En(e,2),s%16==15&&En(e,3)}return-1}function VN(){let t,e,n,i,s,r,o;for(t=new Hf,s=0;s<24;++s)t.ct[s]=s;for(e=new cf(t.ct),n=new cf(t.ct),i=new cf(t.ct),s=0;s<48;++s){for(r=0;r<48;++r){for(o=0;o<48;++o)Fy(t,e)&&(Nc[s][r]=o,o==0&&(Oc[s]=r)),En(e,0),o%2==1&&En(e,1),o%8==7&&En(e,2),o%16==15&&En(e,3);En(t,0),r%2==1&&En(t,1),r%8==7&&En(t,2),r%16==15&&En(t,3)}En(t,0),s%2==1&&En(t,1),s%8==7&&En(t,2),s%16==15&&En(t,3)}for(s=0;s<48;++s)for(ap(t,n),zy(t,Oc[s]),r=0;r<36;++r)for(ap(e,t),mr(e,r),zy(e,s),o=0;o<36;++o)if(ap(i,n),mr(i,o),Fy(i,e)){gr[s][r]=o;break}for(Vb(t,0),s=0;s<48;++s)Gb[Oc[s]]=rm(t),En(t,0),s%2==1&&En(t,1),s%8==7&&En(t,2),s%16==15&&En(t,3)}function GN(){let t,e,n,i,s,r;for(t=new Hf,r=Ut(22984),n=0;n<22984;n++)r[n]=0;for(e=0,n=0;n<735471;++n)if((r[~~n>>>5]&1<<(n&31))==0){for(Vb(t,n),s=0;s<48;++s)i=rm(t),r[~~i>>>5]|=1<<(i&31),Xc!=null&&(Xc[i]=e<<6|Oc[s]),En(t,0),s%2==1&&En(t,1),s%8==7&&En(t,2),s%16==15&&En(t,3);dg[e++]=n}}function WN(t){let e;return e=CB(dg,t),e>=0?e:-1}Hs(153,1,Na([l4]),Hf,lp,cf);let yr,hg,Gb,Xc=null,dg,Oc,gr,Nc,Uy=!1;function jN(){Uy||(Uy=!0,cm=Ut(70,28),lm=Ut(6435,28),_4=Ut(70,16),m4=Ut(6435,16),ls=Ut(450450),g4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,1,0,1,0,0,0])}function om(t){let e,n,i;for(n=0,i=8,e=14;e>=0;--e)t.ct[e]!=t.ct[15]&&(n+=Mn[e][i--]);return n}function am(t){let e,n,i;for(n=0,i=4,e=6;e>=0;--e)t.rl[e]!=t.rl[7]&&(n+=Mn[e][i--]);return n*2+t.parity}function bc(t,e){let n;switch(t.parity^=g4[e],n=e%3,e=~~(e/3),e){case 0:Fe(t.ct,0,1,2,3,n);break;case 1:Fe(t.rl,0,1,2,3,n);break;case 2:Fe(t.ct,8,9,10,11,n);break;case 3:Fe(t.ct,4,5,6,7,n);break;case 4:Fe(t.rl,4,5,6,7,n);break;case 5:Fe(t.ct,12,13,14,15,n);break;case 6:Fe(t.ct,0,1,2,3,n),Fe(t.rl,0,5,4,1,n),Fe(t.ct,8,9,12,13,n);break;case 7:Fe(t.rl,0,1,2,3,n),Fe(t.ct,1,15,5,9,n),Fe(t.ct,2,12,6,10,n);break;case 8:Fe(t.ct,8,9,10,11,n),Fe(t.rl,0,3,6,5,n),Fe(t.ct,3,2,5,4,n);break;case 9:Fe(t.ct,4,5,6,7,n),Fe(t.rl,3,2,7,6,n),Fe(t.ct,11,10,15,14,n);break;case 10:Fe(t.rl,4,5,6,7,n),Fe(t.ct,0,8,4,14,n),Fe(t.ct,3,11,7,13,n);break;case 11:Fe(t.ct,12,13,14,15,n),Fe(t.rl,1,4,7,2,n),Fe(t.ct,1,0,7,6,n)}}function Wl(t,e){switch(e){case 0:bc(t,19),bc(t,28);break;case 1:bc(t,21),bc(t,32);break;case 2:Fe(t.ct,0,3,1,2,1),Fe(t.ct,8,11,9,10,1),Fe(t.ct,4,7,5,6,1),Fe(t.ct,12,15,13,14,1),Fe(t.rl,0,3,5,6,1),Fe(t.rl,1,2,4,7,1)}}function p4(t,e,n){let i;for(i=0;i<16;++i)t.ct[i]=~~(e.ct[i]/2);for(i=0;i<8;++i)t.rl[i]=e.ct[i+16];t.parity=n}function Hy(t,e){let n,i;for(i=8,t.ct[15]=0,n=14;n>=0;--n)e>=Mn[n][i]?(e-=Mn[n][i--],t.ct[n]=1):t.ct[n]=0}function Vy(t,e){let n,i;for(t.parity=e&1,e>>>=1,i=4,t.rl[7]=0,n=6;n>=0;--n)e>=Mn[n][i]?(e-=Mn[n][i--],t.rl[n]=1):t.rl[n]=0}function Wb(){this.rl=Ut(8),this.ct=Ut(16)}function YN(){let t,e,n,i,s,r,o,a,l,c,u;for(t=new Wb,r=0;r<70;++r)for(l=0;l<28;++l)Vy(t,r),bc(t,nl[l]),cm[r][l]=am(t);for(r=0;r<70;++r)for(Vy(t,r),a=0;a<16;++a)_4[r][a]=am(t),Wl(t,0),a%2==1&&Wl(t,1),a%8==7&&Wl(t,2);for(r=0;r<6435;++r)for(Hy(t,r),a=0;a<16;++a)m4[r][a]=om(t)&65535,Wl(t,0),a%2==1&&Wl(t,1),a%8==7&&Wl(t,2);for(r=0;r<6435;++r)for(l=0;l<28;++l)Hy(t,r),bc(t,nl[l]),lm[r][l]=om(t)&65535;for(_g(ls),ls[0]=ls[18]=ls[28]=ls[46]=ls[54]=ls[56]=0,i=0,s=6;s!=450450;){let f=i>6,h=f?-1:i,d=f?i:-1;for(++i,r=0;r<450450;++r)if(ls[r]==h){for(e=~~(r/70),c=r%70,l=0;l<23;++l)if(n=lm[e][l],u=cm[c][l],o=n*70+u,ls[o]==d)if(++s,f){ls[r]=i;break}else ls[o]=i}}}Hs(154,1,{},Wb);fn.parity=0;let lm,ls,m4,g4,cm,_4,Gy=!1;function qN(){Gy||(Gy=!0,uf=Ut(29400,20),v4=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1],la=Ut(29400),qb=[0,9,14,23,27,28,41,42,46,55,60,69],Xb=Ut(70))}function jb(t){let e,n,i,s,r;for(i=0,r=4,n=6;n>=0;--n)t.ud[n]!=t.ud[7]&&(i+=Mn[n][r--]);for(i*=35,r=4,n=6;n>=0;--n)t.fb[n]!=t.fb[7]&&(i+=Mn[n][r--]);for(i*=12,e=t.fb[7]^t.ud[7],s=0,r=4,n=7;n>=0;--n)t.rl[n]!=e&&(s+=Mn[n][r--]);return t.parity+2*(i+Xb[s])}function XN(t,e){switch(t.parity^=v4[e],e){case 0:case 1:case 2:Fe(t.ud,0,1,2,3,e%3);break;case 3:Fe(t.rl,0,1,2,3,1);break;case 4:case 5:case 6:Fe(t.fb,0,1,2,3,(e-1)%3);break;case 7:case 8:case 9:Fe(t.ud,4,5,6,7,(e-1)%3);break;case 10:Fe(t.rl,4,5,6,7,1);break;case 11:case 12:case 13:Fe(t.fb,4,5,6,7,(e+1)%3);break;case 14:Fe(t.ud,0,1,2,3,1),Fe(t.rl,0,5,4,1,1),Fe(t.fb,0,5,4,1,1);break;case 15:Fe(t.rl,0,1,2,3,1),Fe(t.fb,1,4,7,2,1),Fe(t.ud,1,6,5,2,1);break;case 16:Fe(t.fb,0,1,2,3,1),Fe(t.ud,3,2,5,4,1),Fe(t.rl,0,3,6,5,1);break;case 17:Fe(t.ud,4,5,6,7,1),Fe(t.rl,3,2,7,6,1),Fe(t.fb,3,2,7,6,1);break;case 18:Fe(t.rl,4,5,6,7,1),Fe(t.fb,0,3,6,5,1),Fe(t.ud,0,3,4,7,1);break;case 19:Fe(t.fb,4,5,6,7,1),Fe(t.ud,0,7,6,1,1),Fe(t.rl,1,4,7,2,1)}}function b4(t,e,n){let i,s;for(s=+(e.ct[0]>e.ct[8])^+(e.ct[8]>e.ct[16])^+(e.ct[0]>e.ct[16])?1:0,i=0;i<8;++i)t.ud[i]=e.ct[i]&1^1,t.fb[i]=e.ct[i+8]&1^1,t.rl[i]=e.ct[i+16]&1^1^s;t.parity=s^n}function ZN(t,e){let n,i,s,r;for(t.parity=e&1,e>>>=1,s=qb[e%12],e=~~(e/12),r=4,n=7;n>=0;--n)t.rl[n]=0,s>=Mn[n][r]&&(s-=Mn[n][r--],t.rl[n]=1);for(i=e%35,e=~~(e/35),r=4,t.fb[7]=0,n=6;n>=0;--n)i>=Mn[n][r]?(i-=Mn[n][r--],t.fb[n]=1):t.fb[n]=0;for(r=4,t.ud[7]=0,n=6;n>=0;--n)e>=Mn[n][r]?(e-=Mn[n][r--],t.ud[n]=1):t.ud[n]=0}function Yb(){this.ud=Ut(8),this.rl=Ut(8),this.fb=Ut(8)}function JN(){let t,e,n,i,s;for(i=0;i<12;++i)Xb[qb[i]]=i;for(t=new Yb,i=0;i<29400;++i)for(s=0;s<20;++s)ZN(t,i),XN(t,s),uf[i][s]=jb(t)&65535;for(_g(la),la[0]=0,e=0,n=1;n!=29400;){for(i=0;i<29400;++i)if(la[i]==e)for(s=0;s<17;++s)la[uf[i][s]]==-1&&(la[uf[i][s]]=e+1,++n);++e}}Hs(155,1,{},Yb);fn.parity=0;let uf,v4,la,qb,Xb;function KN(t,e){let n;for(n=0;n<24;++n)t.ct[n]=e.ct[n]}function $N(t,e){let n;switch(n=e%3,e=~~(e/3),e){case 0:Fe(t.ct,0,1,2,3,n);break;case 1:Fe(t.ct,16,17,18,19,n);break;case 2:Fe(t.ct,8,9,10,11,n);break;case 3:Fe(t.ct,4,5,6,7,n);break;case 4:Fe(t.ct,20,21,22,23,n);break;case 5:Fe(t.ct,12,13,14,15,n);break;case 6:Fe(t.ct,0,1,2,3,n),Fe(t.ct,8,20,12,16,n),Fe(t.ct,9,21,13,17,n);break;case 7:Fe(t.ct,16,17,18,19,n),Fe(t.ct,1,15,5,9,n),Fe(t.ct,2,12,6,10,n);break;case 8:Fe(t.ct,8,9,10,11,n),Fe(t.ct,2,19,4,21,n),Fe(t.ct,3,16,5,22,n);break;case 9:Fe(t.ct,4,5,6,7,n),Fe(t.ct,10,18,14,22,n),Fe(t.ct,11,19,15,23,n);break;case 10:Fe(t.ct,20,21,22,23,n),Fe(t.ct,0,8,4,14,n),Fe(t.ct,3,11,7,13,n);break;case 11:Fe(t.ct,12,13,14,15,n),Fe(t.ct,1,20,7,18,n),Fe(t.ct,0,23,6,17,n)}}function Zb(){let t;for(this.ct=Ut(24),t=0;t<24;++t)this.ct[t]=~~(t/4)}function y4(t){let e,n,i;for(Zb.call(this),e=0;e<23;++e)i=e+Et(24-e),this.ct[i]!=this.ct[e]&&(n=this.ct[e],this.ct[e]=this.ct[i],this.ct[i]=n)}Hs(156,1,{},Zb,y4);let Wy=!1;function QN(){Wy||(Wy=!0,Xs=Ut(18),nB())}function w4(t){t.cp=[0,1,2,3,4,5,6,7],t.co=[0,0,0,0,0,0,0,0]}function x4(t,e){let n;for(n=0;n<8;++n)t.cp[n]=e.cp[n],t.co[n]=e.co[n]}function eB(t,e){!t.temps&&(t.temps=new pg),M4(t,Xs[e],t.temps),x4(t,t.temps)}function tB(t,e){let n,i;for(i=0,n=6;n>=0;--n)i+=t.co[n]=e%3,e=~~(e/3);t.co[7]=(15-i)%3}function M4(t,e,n){let i,s,r,o;for(i=0;i<8;++i)n.cp[i]=t.cp[e.cp[i]],r=t.co[e.cp[i]],o=e.co[i],s=r,s=s+(r<3?o:6-o),s=s%3,+(r>=3)^+(o>=3)&&(s=s+3),n.co[i]=s}function pg(){w4(this)}function oa(t,e){w4(this),xs(this.cp,t),tB(this,e)}function S4(t){oa.call(this,Et(40320),Et(2187))}function nB(){let t,e;for(Xs[0]=new oa(15120,0),Xs[3]=new oa(21021,1494),Xs[6]=new oa(8064,1236),Xs[9]=new oa(9,0),Xs[12]=new oa(1230,412),Xs[15]=new oa(224,137),t=0;t<18;t+=3)for(e=0;e<2;++e)Xs[t+e+1]=new pg,M4(Xs[t+e],Xs[t],Xs[t+e+1])}Hs(157,1,Na([kN]),pg,oa,S4);fn.temps=null;let Xs,jy=!1;function iB(){jy||(jy=!0,_r=Ut(1937880),mg=Ut(1538),hm=Ut(1538),pu=Ut(11880),L4=[0,1,6,3,4,5,2,7],Kb=Ut(160,12),$b=Ut(160,12),Jb=[1,1,1,3,12,60,360,2520,20160,181440,1814400,19958400,239500800],R1=[0,2,4,6,1,3,7,5,8,9,10,11])}function jl(t,e,n,i,s){let r;r=t.edgeo[s],t.edgeo[s]=t.edge[i],t.edge[i]=t.edgeo[n],t.edgeo[n]=t.edge[e],t.edge[e]=r}function Zc(t,e){let n,i,s,r,o;for(t.isStd||k4(t),i=0,o=1985229328,r=47768,n=0;n<e;++n)s=t.edge[n]<<2,i*=12-n,s>=32?(i+=r>>s-32&15,r-=4368<<s-32):(i+=o>>s&15,r-=4369,o-=286331152<<s);return i}function E4(t){let e,n,i,s;return e=Zc(t,4),i=pu[e],s=i&7,i>>=3,fm(t,s),n=Zc(t,10)%20160,i*20160+n}function um(t,e){switch(t.isStd=!1,e){case 0:on(t.edge,0,4,1,5),on(t.edgeo,0,4,1,5);break;case 1:ti(t.edge,0,4,1,5),ti(t.edgeo,0,4,1,5);break;case 2:on(t.edge,0,5,1,4),on(t.edgeo,0,5,1,4);break;case 3:ti(t.edge,5,10,6,11),ti(t.edgeo,5,10,6,11);break;case 4:on(t.edge,0,11,3,8),on(t.edgeo,0,11,3,8);break;case 5:ti(t.edge,0,11,3,8),ti(t.edgeo,0,11,3,8);break;case 6:on(t.edge,0,8,3,11),on(t.edgeo,0,8,3,11);break;case 7:on(t.edge,2,7,3,6),on(t.edgeo,2,7,3,6);break;case 8:ti(t.edge,2,7,3,6),ti(t.edgeo,2,7,3,6);break;case 9:on(t.edge,2,6,3,7),on(t.edgeo,2,6,3,7);break;case 10:ti(t.edge,4,8,7,9),ti(t.edgeo,4,8,7,9);break;case 11:on(t.edge,1,9,2,10),on(t.edgeo,1,9,2,10);break;case 12:ti(t.edge,1,9,2,10),ti(t.edgeo,1,9,2,10);break;case 13:on(t.edge,1,10,2,9),on(t.edgeo,1,10,2,9);break;case 14:ti(t.edge,0,4,1,5),ti(t.edgeo,0,4,1,5),on(t.edge,9,11),on(t.edgeo,8,10);break;case 15:ti(t.edge,5,10,6,11),ti(t.edgeo,5,10,6,11),on(t.edge,1,3),on(t.edgeo,0,2);break;case 16:ti(t.edge,0,11,3,8),ti(t.edgeo,0,11,3,8),on(t.edge,5,7),on(t.edgeo,4,6);break;case 17:ti(t.edge,2,7,3,6),ti(t.edgeo,2,7,3,6),on(t.edge,8,10),on(t.edgeo,9,11);break;case 18:ti(t.edge,4,8,7,9),ti(t.edgeo,4,8,7,9),on(t.edge,0,2),on(t.edgeo,1,3);break;case 19:ti(t.edge,1,9,2,10),ti(t.edgeo,1,9,2,10),on(t.edge,4,6),on(t.edgeo,5,7)}}function Bc(t,e){switch(t.isStd=!1,e){case 0:um(t,14),um(t,17);break;case 1:jl(t,11,5,10,6),jl(t,5,10,6,11),jl(t,1,2,3,0),jl(t,4,9,7,8),jl(t,8,4,9,7),jl(t,0,1,2,3);break;case 2:Ws(t,4,5),Ws(t,5,4),Ws(t,11,8),Ws(t,8,11),Ws(t,7,6),Ws(t,6,7),Ws(t,9,10),Ws(t,10,9),Ws(t,1,1),Ws(t,0,0),Ws(t,3,3),Ws(t,2,2)}}function fm(t,e){for(;e>=2;)e-=2,Bc(t,1),Bc(t,2);e!=0&&Bc(t,0)}function Ph(t,e){let n,i,s,r,o,a;for(o=1985229328,a=47768,s=0,n=0;n<11;++n)if(i=Jb[11-n],r=~~(e/i),e=e%i,s^=r,r<<=2,r>=32){r=r-32,t.edge[n]=a>>r&15;let l=(1<<r)-1;a=(a&l)+(a>>4&~l)}else{t.edge[n]=o>>r&15;let l=(1<<r)-1;o=(o&l)+(o>>>4&~l)+(a<<28),a=a>>4}for((s&1)==0?t.edge[11]=o:(t.edge[11]=t.edge[10],t.edge[10]=o),n=0;n<12;++n)t.edgeo[n]=n;t.isStd=!0}function Yy(t,e){let n;for(n=0;n<12;++n)t.edge[n]=e.edge[n],t.edgeo[n]=e.edgeo[n];t.isStd=e.isStd}function T4(t,e){let n,i,s,r;for(t.temp==null&&(t.temp=Ut(12)),n=0;n<12;++n)t.temp[n]=n,t.edge[n]=e.ep[R1[n]+12]%12;for(i=1,n=0;n<12;++n)for(;t.edge[n]!=n;)r=t.edge[n],t.edge[n]=t.edge[r],t.edge[r]=r,s=t.temp[n],t.temp[n]=t.temp[r],t.temp[r]=s,i^=1;for(n=0;n<12;++n)t.edge[n]=t.temp[e.ep[R1[n]]%12];return i}function k4(t){let e;for(t.temp==null&&(t.temp=Ut(12)),e=0;e<12;++e)t.temp[t.edgeo[e]]=e;for(e=0;e<12;++e)t.edge[e]=t.temp[t.edge[e]],t.edgeo[e]=e;t.isStd=!0}function ti(t,e,n,i,s){let r;r=t[e],t[e]=t[i],t[i]=r,r=t[n],t[n]=t[s],t[s]=r}function Ws(t,e,n){let i;i=t.edge[e],t.edge[e]=t.edgeo[n],t.edgeo[n]=i}function Ro(){this.edge=Ut(12),this.edgeo=Ut(12)}function sB(){let t,e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T;for(l=new Ro,u=new Ro,h=new Ro,_g(_r),a=0,Qh=1,s0(_r,0,0);Qh!=31006080&&(b=a>9,o=a%3,r=(a+1)%3,f=b?3:o,t=b?o:3,!(a>=9));){for(p=0;p<31006080;p+=16)if(T=_r[~~p>>4],!(!b&&T==-1)){for(d=p,c=p+16;d<c;++d,T>>=2)if((T&3)==f){for(v=~~(d/20160),e=mg[v],i=d%20160,Ph(l,e*20160+i),x=0;x<17;++x)if(n=Jc(l.edge,x<<3,4),w=pu[n],S=w&7,w>>=3,s=Jc(l.edge,x<<3|S,10)%20160,m=w*20160+s,Vf(_r,m)==t){if(s0(_r,b?d:m,r),++Qh,b)break;if(y=hm[w],y!=1)for(Yy(u,l),um(u,x),fm(u,S),g=1;(y=~~y>>1&65535)!=0;++g)(y&1)==1&&(Yy(h,u),fm(h,g),_=w*20160+Zc(h,10)%20160,Vf(_r,_)==t&&(s0(_r,_,r),++Qh))}}}++a}}function Vf(t,e){return t[e>>4]>>((e&15)<<1)&3}function Jc(t,e,n){let i,s,r,o,a,l,c;for(o=$b[e],r=Kb[e],s=0,c=1985229328,l=47768,i=0;i<n;++i)a=o[t[r[i]]]<<2,s*=12-i,a>=32?(s+=l>>a-32&15,l-=4368<<a-32):(s+=c>>a&15,l-=4369,c-=286331152<<a);return s}function A4(t){let e,n,i,s,r,o,a,l,c,u,f,h;if(a=new Ro,o=0,r=Vf(_r,t),r==3)return 10;for(;t!=0;)for(r==0?r=2:--r,u=~~(t/20160),e=mg[u],i=t%20160,Ph(a,e*20160+i),c=0;c<17;++c)if(n=Jc(a.edge,c<<3,4),f=pu[n],h=f&7,f>>=3,s=Jc(a.edge,c<<3|h,10)%20160,l=f*20160+s,Vf(_r,l)==r){++o,t=l;break}return o}function rB(t,e){let n;return n=Vf(_r,t),n==3?10:(1227133513<<n>>e&3)+e-1}function oB(){let t,e,n,i;for(t=new Ro,n=0;n<20;++n)for(i=0;i<8;++i){for(Ph(t,0),um(t,n),fm(t,i),e=0;e<12;++e)Kb[n<<3|i][e]=t.edge[e];for(k4(t),e=0;e<12;++e)$b[n<<3|i][e]=t.temp[e]}}function aB(){let t,e,n,i,s,r;for(e=new Ro,r=Ut(1485),n=0;n<1485;n++)r[n]=0;for(t=0,n=0;n<11880;++n)if((r[~~n>>>3]&1<<(n&7))==0){for(Ph(e,n*Jb[8]),s=0;s<8;++s)i=Zc(e,4),i==n&&(hm[t]=(hm[t]|1<<s)&65535),r[~~i>>3]=r[~~i>>3]|1<<(i&7),pu[i]=t<<3|L4[s],Bc(e,0),s%2==1&&(Bc(e,1),Bc(e,2));mg[t++]=n}}function s0(t,e,n){t[e>>4]^=(3^n)<<((e&15)<<1)}Hs(158,1,Na([AN]),Ro);fn.isStd=!0;fn.temp=null;let R1,Qh=0,_r,Jb,Kb,$b,pu,mg,L4,hm;function lB(t){let e,n,i;for(e=0,i=!1,n=0;n<12;++n)e|=1<<t.ep[n],i=i!=t.ep[n]>=12;return e&=~~e>>12,e==0&&!i}function cB(t,e){let n;for(n=0;n<24;++n)t.ep[n]=e.ep[n]}function uB(t,e){let n;switch(n=e%3,e=~~(e/3),e){case 0:Fe(t.ep,0,1,2,3,n),Fe(t.ep,12,13,14,15,n);break;case 1:Fe(t.ep,11,15,10,19,n),Fe(t.ep,23,3,22,7,n);break;case 2:Fe(t.ep,0,11,6,8,n),Fe(t.ep,12,23,18,20,n);break;case 3:Fe(t.ep,4,5,6,7,n),Fe(t.ep,16,17,18,19,n);break;case 4:Fe(t.ep,1,20,5,21,n),Fe(t.ep,13,8,17,9,n);break;case 5:Fe(t.ep,2,9,4,10,n),Fe(t.ep,14,21,16,22,n);break;case 6:Fe(t.ep,0,1,2,3,n),Fe(t.ep,12,13,14,15,n),Fe(t.ep,9,22,11,20,n);break;case 7:Fe(t.ep,11,15,10,19,n),Fe(t.ep,23,3,22,7,n),Fe(t.ep,2,16,6,12,n);break;case 8:Fe(t.ep,0,11,6,8,n),Fe(t.ep,12,23,18,20,n),Fe(t.ep,3,19,5,13,n);break;case 9:Fe(t.ep,4,5,6,7,n),Fe(t.ep,16,17,18,19,n),Fe(t.ep,8,23,10,21,n);break;case 10:Fe(t.ep,1,20,5,21,n),Fe(t.ep,13,8,17,9,n),Fe(t.ep,14,0,18,4,n);break;case 11:Fe(t.ep,2,9,4,10,n),Fe(t.ep,14,21,16,22,n),Fe(t.ep,7,15,1,17,n)}}function Qb(){let t;for(this.ep=Ut(24),t=0;t<24;++t)this.ep[t]=t}function C4(t){let e,n,i;for(Qb.call(this),e=0;e<23;++e)i=e+Et(24-e),i!=e&&(n=this.ep[e],this.ep[e]=this.ep[i],this.ep[i]=n)}Hs(159,1,{},Qb,C4);let qy=!1;function fB(){qy||(qy=!0,I1=[35,1,34,2,4,6,22,5,19])}function P4(t){t.moveBuffer=Ut(60)}function hB(t,e){return t.value-e.value}function Kc(t,e){let n;for(cB(t.edge,e.edge),KN(t.center,e.center),x4(t.corner,e.corner),t.value=e.value,t.add1=e.add1,t.length1=e.length1,t.length2=e.length2,t.length3=e.length3,t.sym=e.sym,n=0;n<60;++n)t.moveBuffer[n]=e.moveBuffer[n];t.moveLength=e.moveLength,t.edgeAvail=e.edgeAvail,t.centerAvail=e.centerAvail,t.cornerAvail=e.cornerAvail}function ca(t){for(;t.centerAvail<t.moveLength;)$N(t.center,t.moveBuffer[t.centerAvail++]);return t.center}function R4(t){for(;t.cornerAvail<t.moveLength;)eB(t.corner,t.moveBuffer[t.cornerAvail++]%18);return t.corner}function Gf(t){for(;t.edgeAvail<t.moveLength;)uB(t.edge,t.moveBuffer[t.edgeAvail++]);return t.edge}function dB(t){let e,n,i,s,r,o,a,l;for(n=new Array(t.moveLength-(t.add1?2:0)),s=0,i=0;i<t.length1;++i)n[s++]=t.moveBuffer[i];for(l=t.sym,i=t.length1+(t.add1?2:0);i<t.moveLength;++i)gr[l][t.moveBuffer[i]]>=27?(n[s++]=gr[l][t.moveBuffer[i]]-9,o=I1[gr[l][t.moveBuffer[i]]-27],l=Nc[l][o]):n[s++]=gr[l][t.moveBuffer[i]];for(e=Nc[Oc[l]][HN(ca(t))],a="",l=e,i=s-1;i>=0;--i)r=n[i],r=~~(r/3)*3+(2-r%3),gr[l][r]>=27?(a=a+D1[gr[l][r]-9]+" ",o=I1[gr[l][r]-27],l=Nc[l][o]):a=a+D1[gr[l][r]]+" ";return a}function Qa(t,e){t.moveBuffer[t.moveLength++]=e}function dm(){P4(this),this.edge=new Qb,this.center=new Zb,this.corner=new pg}function gg(t){dm.call(this),Kc(this,t)}function I4(t){P4(this),this.edge=new C4,this.center=new y4,this.corner=new S4}Hs(160,1,Na([c4,CN]),dm,gg,I4);fn.compareTo$=function(e){return hB(this,e)};fn.add1=!1;fn.center=null;fn.centerAvail=0;fn.corner=null;fn.cornerAvail=0;fn.edge=null;fn.edgeAvail=0;fn.length1=0;fn.length2=0;fn.length3=0;fn.moveLength=0;fn.sym=0;fn.value=0;let I1;function pB(t,e){return e.value-t.value}function pm(t,e){return pB(t,e)}function D4(){}Hs(161,1,{},D4);fn.compare=function(e,n){return pm(e,n)};let Xy=!1;function mB(){if(Xy)return;Xy=!0;let t,e;for(D1=["U  ","U2 ","U' ","R  ","R2 ","R' ","F  ","F2 ","F' ","D  ","D2 ","D' ","L  ","L2 ","L' ","B  ","B2 ","B' ","Uw ","Uw2","Uw'","Rw ","Rw2","Rw'","Fw ","Fw2","Fw'","Dw ","Dw2","Dw'","Lw ","Lw2","Lw'","Bw ","Bw2","Bw'"],nl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,19,21,22,23,25,28,30,31,32,34,36],Gu=[0,1,2,4,6,7,8,9,10,11,13,15,16,17,19,22,25,28,31,34,36],Zy=Ut(37),Jy=Ut(37),Yl=Ut(37,36),cp=Ut(29,28),up=Ut(21,20),r0=Ut(36),ff=Ut(28),Fc=Ut(20),t=0;t<29;++t)Zy[nl[t]]=t;for(t=0;t<21;++t)Jy[Gu[t]]=t;for(t=0;t<36;++t){for(e=0;e<36;++e)Yl[t][e]=~~(t/3)==~~(e/3)||~~(t/3)%3==~~(e/3)%3&&t>e;Yl[36][t]=!1}for(t=0;t<29;++t)for(e=0;e<28;++e)cp[t][e]=Yl[nl[t]][nl[e]];for(t=0;t<21;++t)for(e=0;e<20;++e)up[t][e]=Yl[Gu[t]][Gu[e]];for(t=0;t<36;++t)for(r0[t]=36,e=t;e<36;++e)if(!Yl[t][e]){r0[t]=e-1;break}for(t=0;t<28;++t)for(ff[t]=28,e=t;e<28;++e)if(!cp[t][e]){ff[t]=e-1;break}for(t=0;t<20;++t)for(Fc[t]=20,e=t;e<20;++e)if(!up[t][e]){Fc[t]=e-1;break}}let Yl,cp,up,nl,D1,Gu,r0,ff,Fc,Zy,Jy;function gB(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v;for(t.solution="",y=op(new lp(ca(t.c),0)),o=op(new lp(ca(t.c),1)),m=op(new lp(ca(t.c),2)),v=yr[~~y>>6],a=yr[~~o>>6],_=yr[~~m>>6],t.p1SolsCnt=0,t.arr2idx=0,EB(t.p1sols.heap),t.length1=(v<a?v:a)<_?v<a?v:a:_;t.length1<100&&!(_<=t.length1&&fp(t,~~m>>>6,m&63,t.length1,-1,0)||v<=t.length1&&fp(t,~~y>>>6,y&63,t.length1,-1,0)||a<=t.length1&&fp(t,~~o>>>6,o&63,t.length1,-1,0));++t.length1);d=NB(t.p1sols,Ub(FB,Na([LN,Fb,zb]),c4,0,0)),d.sort(function(w,S){return w.value-S.value}),e=9;do{e:for(f=d[0].value;f<100;++f)for(l=0;l<d.length&&!(d[l].value>f);++l)if(!(f-d[l].length1>e)&&(Kc(t.c1,d[l]),p4(t.ct2,ca(t.c1),mm(Gf(t.c1).ep)),b=om(t.ct2),g=am(t.ct2),t.length1=d[l].length1,t.length2=f-d[l].length1,O4(t,b,g,t.length2,28,0)))break e;++e}while(f==100);t.arr2.sort(function(w,S){return w.value-S.value}),c=0,n=13;do{e:for(h=t.arr2[0].value;h<100;++h)for(l=0;l<Math.min(t.arr2idx,100)&&!(t.arr2[l].value>h);++l)if(!(h-t.arr2[l].length1-t.arr2[l].length2>n)&&(r=T4(t.e12,Gf(t.arr2[l])),b4(t.ct3,ca(t.arr2[l]),r^mm(R4(t.arr2[l]).cp)),i=jb(t.ct3),s=Zc(t.e12,10),p=A4(E4(t.e12)),p<=h-t.arr2[l].length1-t.arr2[l].length2&&N4(t,s,i,p,h-t.arr2[l].length1-t.arr2[l].length2,20,0))){c=l;break e}++n}while(h==100);for(x=new gg(t.arr2[c]),t.length1=x.length1,t.length2=x.length2,u=h-t.length1-t.length2,l=0;l<u;++l)Qa(x,Gu[t.move3[l]]);t.solution=dB(x)}function _B(t,e){let n,i,s,r,o;for(Kc(t.c1,t.c),i=0;i<t.length1;++i)Qa(t.c1,t.move1[i]);switch(Gb[e]){case 0:Qa(t.c1,24),Qa(t.c1,35),t.move1[t.length1]=24,t.move1[t.length1+1]=35,t.add1=!0,e=19;break;case 12869:Qa(t.c1,18),Qa(t.c1,29),t.move1[t.length1]=18,t.move1[t.length1+1]=29,t.add1=!0,e=34;break;case 735470:t.add1=!1,e=0}return p4(t.ct2,ca(t.c1),mm(Gf(t.c1).ep)),r=om(t.ct2),o=am(t.ct2),n=ls[r*70+o],t.c1.value=n+t.length1,t.c1.length1=t.length1,t.c1.add1=t.add1,t.c1.sym=e,++t.p1SolsCnt,t.p1sols.heap.size<500?s=new gg(t.c1):(s=DB(t.p1sols),s.value>t.c1.value&&Kc(s,t.c1)),xB(t.p1sols,s),t.p1SolsCnt==1e4}function bB(t){let e,n,i,s;for(Kc(t.c2,t.c1),i=0;i<t.length2;++i)Qa(t.c2,t.move2[i]);return lB(Gf(t.c2))?(n=T4(t.e12,Gf(t.c2)),b4(t.ct3,ca(t.c2),n^mm(R4(t.c2).cp)),e=jb(t.ct3),Zc(t.e12,10),s=A4(E4(t.e12)),t.arr2[t.arr2idx]?Kc(t.arr2[t.arr2idx],t.c2):t.arr2[t.arr2idx]=new gg(t.c2),t.arr2[t.arr2idx].value=t.length1+t.length2+Math.max(s,la[e]),t.arr2[t.arr2idx].length2=t.length2,++t.arr2idx,t.arr2idx==t.arr2.length):!1}function vB(t,e){return yB(),t.c=new I4,gB(t),t.solution}function fp(t,e,n,i,s,r){let o,a,l,c,u,f;if(e==0)return i==0&&_B(t,n);for(o=0;o<27;o+=3)if(!(o==s||o==s-9||o==s-18))for(c=0;c<3;++c){if(l=o+c,a=hg[e][gr[n][l]],u=yr[~~a>>>6],u>=i){if(u>i)break;continue}if(f=Nc[n][a&63],a>>>=6,t.move1[r]=l,fp(t,a,f,i-1,o,r+1))return!0}return!1}function O4(t,e,n,i,s,r){let o,a,l,c;if(e==0&&ls[n]==0)return i==0&&bB(t);for(a=0;a<23;++a){if(cp[s][a]){a=ff[a];continue}if(o=lm[e][a],c=cm[n][a],l=ls[o*70+c],l>=i){l>i&&(a=ff[a]);continue}if(t.move2[r]=nl[a],O4(t,o,c,i-1,a,r+1))return!0}return!1}function N4(t,e,n,i,s,r,o){let a,l,c,u,f,h,d,p,m;if(s==0)return e==0&&n==0;for(Ph(t.tempe[o],e),f=0;f<17;++f){if(up[r][f]){f=Fc[f];continue}if(c=uf[n][f],h=la[c],h>=s){h>s&&f<14&&(f=Fc[f]);continue}if(u=Jc(t.tempe[o].edge,f<<3,10),a=~~(u/20160),p=pu[a],m=p&7,p>>=3,l=Jc(t.tempe[o].edge,f<<3|m,10)%20160,d=rB(p*20160+l,i),d>=s){d>s&&f<14&&(f=Fc[f]);continue}if(N4(t,u,c,d,s-1,f,o+1))return t.move3[o]=f,!0}return!1}function B4(){let t;for(this.p1sols=new G4(new D4),this.move1=Ut(15),this.move2=Ut(20),this.move3=Ut(20),this.c1=new dm,this.c2=new dm,this.ct2=new Wb,this.ct3=new Yb,this.e12=new Ro,this.tempe=Ut(20),this.arr2=Ut(100),t=0;t<20;++t)this.tempe[t]=new Ro}function yB(){Ky||(VN(),Xc=Ut(735471),GN(),zN(),Xc=null,UN(),YN(),JN(),oB(),aB(),sB(),Ky=!0)}Hs(163,1,Na([PN]),B4);fn.add1=!1;fn.arr2idx=0;fn.c=null;fn.length1=0;fn.length2=0;fn.p1SolsCnt=0;fn.solution="";let Ky=!1;function mm(t){let e,n,i,s;for(s=0,e=0,i=t.length;e<i;++e)for(n=e;n<i;++n)t[e]>t[n]&&(s^=1);return s}function Fe(t,e,n,i,s,r){let o;switch(r){case 0:o=t[s],t[s]=t[i],t[i]=t[n],t[n]=t[e],t[e]=o;return;case 1:o=t[e],t[e]=t[i],t[i]=o,o=t[n],t[n]=t[s],t[s]=o;return;case 2:o=t[e],t[e]=t[n],t[n]=t[i],t[i]=t[s],t[s]=o;return}}function F4(){}function z4(t,e,n,i){let s;return s=new F4,s.typeName=t+e,H4(n!=0?-n:0)&&V4(n!=0?-n:0,s),s.modifiers=4,s.superclass=ev,s.componentType=i,s}function U4(t,e,n,i){let s;return s=new F4,s.typeName=t+e,H4(n)&&V4(n,s),s.superclass=i,s}function wB(t){let e=Uf[t.seedId];return t=null,e}function H4(t){return typeof t=="number"&&t>0}function V4(t,e){let n;if(e.seedId=t,t==2)n=String.prototype;else if(t>0){let i=wB(e);if(i)n=i.prototype;else{i=Uf[t]=function(){},i.___clazz$=e;return}}else return;n.___clazz$=e}fn.val$outerIter=null;function xB(t,e){if(IB(t,e))return!0}function MB(t){t.array=Ub(W4,Na([Fb,zb]),a4,0,0)}function SB(t,e){return sm(t.array,t.size++,e),!0}function EB(t){t.array=Ub(W4,Na([Fb,zb]),a4,0,0),t.size=0}function ua(t,e){return t.array[e]}function TB(t,e){let n;return n=t.array[e],LB(t.array,e,1),--t.size,n}function zc(t,e,n){let i;return i=t.array[e],sm(t.array,e,n),i}function kB(t,e){let n;for(e.length<t.size&&(e=IN(e,t.size)),n=0;n<t.size;++n)sm(e,n,t.array[n]);return e.length>t.size&&sm(e,t.size,null),e}function AB(){MB(this),this.array.length=500}function LB(t,e,n){t.splice(e,n)}fn.size=0;function CB(t,e){let n,i,s,r;for(i=0,n=t.length-1;i<=n;)if(s=i+(~~(n-i)>>1),r=t[s],r<e)i=s+1;else if(r>e)n=s-1;else return s;return-i-1}function _g(t){PB(t,t.length)}function PB(t,e){let n;for(n=0;n<e;++n)t[n]=-1}function RB(t,e){let n,i,s,r,o,a;for(n=t.heap.size,s=ua(t.heap,e);e*2+1<n&&(i=(r=2*e+1,o=r+1,a=r,o<n&&pm(ua(t.heap,o),ua(t.heap,r))<0&&(a=o),a),!(pm(s,ua(t.heap,i))<0));)zc(t.heap,e,ua(t.heap,i)),e=i;zc(t.heap,e,s)}function IB(t,e){let n,i;for(i=t.heap.size,SB(t.heap,e);i>0;){if(n=i,i=~~((i-1)/2),pm(ua(t.heap,i),e)<=0)return zc(t.heap,n,e),!0;zc(t.heap,n,ua(t.heap,i))}return zc(t.heap,i,e),!0}function DB(t){let e;return t.heap.size==0?null:(e=ua(t.heap,0),OB(t),e)}function OB(t){let e;e=TB(t.heap,t.heap.size-1),0<t.heap.size&&(zc(t.heap,0,e),RB(t,0))}function NB(t,e){return kB(t.heap,e)}function G4(t){this.heap=new AB,this.cmp=t}Hs(239,1,{},G4);fn.cmp=null;fn.heap=null;let ev=U4("java.lang.","Object",1,null),W4=z4("[Ljava.lang.","Object;",356,ev),BB=U4("cs.threephase.","FullCube",160,ev),FB=z4("[Lcs.threephase.","FullCube;",381,BB),j4,$y=!1;function zB(){$y||($y=!0,mB(),FN(),jN(),qN(),iB(),QN(),fB(),j4=new B4)}function UB(){return zB(),(lf()+vB(j4)).replace(/\s+/g," ")}xi("444wca",UB);function HB(t,e){t.ul=e.ul,t.ur=e.ur,t.dl=e.dl,t.dr=e.dr,t.ml=e.ml}function Qy(t,e){let n;e<<=2,e>24?(e=48-e,n=t.ul,t.ul=(t.ul>>e|t.ur<<24-e)&16777215,t.ur=(t.ur>>e|n<<24-e)&16777215):e>0?(n=t.ul,t.ul=(t.ul<<e|t.ur>>24-e)&16777215,t.ur=(t.ur<<e|n>>24-e)&16777215):e==0?(n=t.ur,t.ur=t.dl,t.dl=n,t.ml=1-t.ml):e>=-24?(e=-e,n=t.dl,t.dl=(t.dl<<e|t.dr>>24-e)&16777215,t.dr=(t.dr<<e|n>>24-e)&16777215):e<-24&&(e=48+e,n=t.dl,t.dl=(t.dl>>e|t.dr<<24-e)&16777215,t.dr=(t.dr>>e|n<<24-e)&16777215)}function VB(t){let e,n,i,s,r;for(i=0,t.arr[0]=Vr(t,0),s=1;s<24;++s)Vr(t,s)!=t.arr[i]&&(t.arr[++i]=Vr(t,s));for(r=0,e=0;e<16;++e)for(n=e+1;n<16;++n)t.arr[e]>t.arr[n]&&(r^=1);return r}function GB(t){let e,n,i,s;return s=t.ur&1118481,s|=s>>3,s|=s>>6,s=s&15|s>>12&48,i=t.ul&1118481,i|=i>>3,i|=i>>6,i=i&15|i>>12&48,n=t.dr&1118481,n|=n>>3,n|=n>>6,n=n&15|n>>12&48,e=t.dl&1118481,e|=e>>3,e|=e>>6,e=e&15|e>>12&48,Wu(VB(t)<<24|i<<18|s<<12|e<<6|n)}function WB(t,e){let n,i;for(n=0;n<8;++n)t.prm[n]=Vr(t,n*3+1)>>1;for(e.cornperm=us(t.prm),e.topEdgeFirst=Vr(t,0)==Vr(t,1),n=e.topEdgeFirst?2:0,i=0;i<4;n+=3,++i)t.prm[i]=Vr(t,n)>>1;for(e.botEdgeFirst=Vr(t,12)==Vr(t,13),n=e.botEdgeFirst?14:12;i<8;n+=3,++i)t.prm[i]=Vr(t,n)>>1;e.edgeperm=us(t.prm),e.ml=t.ml}function Vr(t,e){let n;return e<6?n=t.ul>>(5-e<<2):e<12?n=t.ur>>(11-e<<2):e<18?n=t.dl>>(17-e<<2):n=t.dr>>(23-e<<2),n&15}function o0(t,e,n){e<6?(t.ul&=~(15<<(5-e<<2)),t.ul|=n<<(5-e<<2)):e<12?(t.ur&=~(15<<(11-e<<2)),t.ur|=n<<(11-e<<2)):e<18?(t.dl&=~(15<<(17-e<<2)),t.dl|=n<<(17-e<<2)):(t.dr&=~(15<<(23-e<<2)),t.dr|=n<<(23-e<<2))}function tv(){this.arr=[],this.prm=[]}function Y4(t){let e,n,i,s,r,o,a,l,c;for(t===void 0&&(t=Et(3678)),e=new tv,i=mu[t],r=19088743<<1|286331153,s=19088743<<1,a=o=8,n=0;n<24;n++)(i>>n&1)==0?(l=Et(o)<<2,o0(e,23-n,s>>l&15),c=(1<<l)-1,s=(s&c)+(s>>4&~c),--o):(l=Et(a)<<2,o0(e,23-n,r>>l&15),o0(e,22-n,r>>l&15),c=(1<<l)-1,r=(r&c)+(r>>4&~c),--a,++n);return e.ml=Et(2),e}function jB(){}let Mi=tv.prototype=jB.prototype;Mi.dl=10062778;Mi.dr=14536702;Mi.ml=0;Mi.ul=70195;Mi.ur=4544119;function YB(t){let e,n,i,s,r,o;for(HB(t.Search_d,t.Search_c),i=0;i<t.Search_length1;++i)Qy(t.Search_d,t.Search_move[i]);for(WB(t.Search_d,t.Search_sq),n=t.Search_sq.edgeperm,e=t.Search_sq.cornperm,r=t.Search_sq.ml,o=Math.max(fi[t.Search_sq.edgeperm<<1|r],fi[t.Search_sq.cornperm<<1|r]),i=o;i<t.Search_maxlen2;++i)if(dp(t,n,e,t.Search_sq.topEdgeFirst,t.Search_sq.botEdgeFirst,r,i,t.Search_length1,0)){for(s=0;s<i;++s)Qy(t.Search_d,t.Search_move[t.Search_length1+s]);return t.Search_sol_string=qB(t,i+t.Search_length1),!0}return!1}function qB(t,e){let n="",i=0,s=0;for(let r=e-1;r>=0;r--){let o=t.Search_move[r];if(o>0)o=12-o,i=o>6?o-12:o;else if(o<0)o=12+o,s=o>6?o-12:o;else{let a=" /";i==0&&s==0?n+=a:n+=" ("+i+","+s+")"+a,i=s=0}}return i==0&&s==0||(n+=" ("+i+","+s+") "),n}function hp(t,e,n,i,s,r){let o,a,l;if(n==0&&i<4)return i==0&&YB(t);if(r!=0&&(l=gm[e],a=Ri[l],a<i&&(t.Search_move[s]=0,hp(t,l,a,i-1,s+1,0))))return!0;if(l=e,r<=0){for(o=0;o+=Hc[l],l=o>>4,o&=15,!(o>=12||(a=Ri[l],a>i));)if(a<i&&(t.Search_move[s]=o,hp(t,l,a,i-1,s+1,1)))return!0}if(l=e,r<=1){for(o=0;o+=Uc[l],l=o>>4,o&=15,!(o>=6||(a=Ri[l],a>i));)if(a<i&&(t.Search_move[s]=-o,hp(t,l,a,i-1,s+1,2)))return!0}return!1}function dp(t,e,n,i,s,r,o,a,l){let c,u,f,h,d,p,m;if(o==0&&!i&&s||l!=0&&i==s&&(f=Wf[e],u=Wf[n],fi[f<<1|1-r]<o&&fi[u<<1|1-r]<o&&(t.Search_move[a]=0,dp(t,f,u,i,s,1-r,o-1,a+1,0))))return!0;if(l<=0)for(m=!i,f=m?sl[e]:e,u=m?n:sl[n],h=m?1:2,d=fi[f<<1|r],p=fi[u<<1|r];h<12&&d<=o&&d<=o;){if(d<o&&p<o&&(t.Search_move[a]=h,dp(t,f,u,m,s,r,o-1,a+1,1)))return!0;m=!m,m?(f=sl[f],d=fi[f<<1|r],h+=1):(u=sl[u],p=fi[u<<1|r],h+=2)}if(l<=1)for(c=!s,f=c?il[e]:e,u=c?n:il[n],h=c?1:2,d=fi[f<<1|r],p=fi[u<<1|r];h<(o>6?6:12)&&d<=o&&d<=o;){if(d<o&&p<o&&(t.Search_move[a]=-h,dp(t,f,u,i,c,r,o-1,a+1,2)))return!0;c=!c,c?(f=il[f],d=fi[f<<1|r],h+=1):(u=il[u],p=fi[u<<1|r],h+=2)}return!1}function q4(t,e){let n;for(t.Search_c=e,n=GB(e),t.Search_length1=Ri[n];t.Search_length1<100&&(t.Search_maxlen2=Math.min(32-t.Search_length1,17),!hp(t,n,Ri[n],t.Search_length1,0,-1));++t.Search_length1);return t.Search_sol_string}function X4(){this.Search_move=[],this.Search_d=new tv,this.Search_sq=new K4}function XB(){}Mi=X4.prototype=XB.prototype;Mi.Search_c=null;Mi.Search_length1=0;Mi.Search_maxlen2=0;Mi.Search_sol_string=null;let e2=!1;function Z4(){e2||(e2=!0,ju=[0,3,6,12,15,24,27,30,48,51,54,60,63],mu=[],Ri=[],Hc=[],Uc=[],gm=[],KB())}function ZB(t){let e,n;e=0,n=0;do(t.bottom&2048)==0?(e+=1,t.bottom=t.bottom<<1):(e+=2,t.bottom=t.bottom<<2^12291),n=1-n;while((ul(t.bottom&63)&1)!=0);return(ul(t.bottom)&2)==0&&(t.Shape_parity^=n),e}function pp(t){let e;return e=$4(mu,t.top<<12|t.bottom)<<1|t.Shape_parity,e}function mp(t,e){t.Shape_parity=e&1,t.top=mu[e>>1],t.bottom=t.top&4095,t.top>>=12}function JB(t){let e,n;e=0,n=0;do(t.top&2048)==0?(e+=1,t.top=t.top<<1):(e+=2,t.top=t.top<<2^12291),n=1-n;while((ul(t.top&63)&1)!=0);return(ul(t.top)&2)==0&&(t.Shape_parity^=n),e}function nv(){}function Wu(t){let e;return e=$4(mu,t&16777215)<<1|t>>24,e}function KB(){let t,e,n,i,s,r,o,a,l,c,u,f,h,d,p,m;for(t=0,o=0;o<28561;++o)r=ju[o%13],n=ju[~~(o/13)%13],f=ju[~~(~~(o/13)/13)%13],u=ju[~~(~~(~~(o/13)/13)/13)],h=u<<18|f<<12|n<<6|r,ul(h)==16&&(mu[t++]=h);for(c=new nv,o=0;o<7356;++o)mp(c,o),Hc[o]=JB(c),Hc[o]|=pp(c)<<4,mp(c,o),Uc[o]=ZB(c),Uc[o]|=pp(c)<<4,mp(c,o),m=c.top&63,d=ul(m),p=ul(c.bottom&4032),c.Shape_parity^=1&(d&p)>>1,c.top=c.top&4032|c.bottom>>6&63,c.bottom=c.bottom&63|m<<6,gm[o]=pp(c);for(o=0;o<7536;++o)Ri[o]=-1;for(Ri[Wu(14378715)]=0,Ri[Wu(31157686)]=0,Ri[Wu(23967451)]=0,Ri[Wu(7191990)]=0,i=4,s=0,e=-1;i!=s;)for(s=i,++e,o=0;o<7536;++o)if(Ri[o]==e){l=0,a=o;do a=Hc[a],l+=a&15,a>>=4,Ri[a]==-1&&(++i,Ri[a]=e+1);while(l!=12);l=0,a=o;do a=Uc[a],l+=a&15,a>>=4,Ri[a]==-1&&(++i,Ri[a]=e+1);while(l!=12);a=gm[o],Ri[a]==-1&&(++i,Ri[a]=e+1)}}function $B(){}Mi=nv.prototype=$B.prototype;Mi.bottom=0;Mi.Shape_parity=0;Mi.top=0;let Uc,mu,Ri,Hc,gm,ju,t2=!1;function J4(){t2||(t2=!0,fi=[],Wf=[],sl=[],il=[],QB())}function K4(){}function QB(){let t,e,n,i,s,r,o,a,l,c,u;for(u=[],s=0;s<40320;++s)xs(u,s),on(u,2,4)(u,3,5),Wf[s]=us(u),xs(u,s),on(u,0,3,2,1),sl[s]=us(u),xs(u,s),on(u,4,7,6,5),il[s]=us(u);for(s=0;s<80640;++s)fi[s]=-1;for(fi[0]=0,e=0,n=1;n<80640;){a=e>=11,i=a?-1:e,t=a?e:-1,++e;e:for(s=0;s<80640;++s)if(fi[s]==i){if(r=s>>1,c=s&1,o=Wf[r]<<1|1-c,fi[o]==t&&(++n,fi[a?s:o]=e,a))continue e;for(o=r,l=0;l<4;++l)if(o=sl[o],fi[o<<1|c]==t&&(++n,fi[a?s:o<<1|c]=e,a))continue e;for(l=0;l<4;++l)if(o=il[o],fi[o<<1|c]==t&&(++n,fi[a?s:o<<1|c]=e,a))continue e}}}function eF(){}Mi=K4.prototype=eF.prototype;Mi.botEdgeFirst=!1;Mi.cornperm=0;Mi.edgeperm=0;Mi.ml=0;Mi.topEdgeFirst=!1;let il,fi,sl,Wf;function ul(t){return t-=t>>1&1431655765,t=(t>>2&858993459)+(t&858993459),t=(t>>4)+t&252645135,t+=t>>8,t+=t>>16,t&63}function $4(t,e){let n,i,s,r;for(i=0,n=t.length-1;i<=n;)if(s=i+(n-i>>1),r=t[s],r<e)i=s+1;else if(r>e)n=s-1;else return s;return-i-1}let gp=[0,1,3,18,19,1004,1005,1006,1007,1008,1009,1011,1015,1016,1018,1154,1155,1156,1157,1158,1159,1161,1166,1168,424,425,426,427,428,429,431,436,95,218,341,482,528,632,1050,342,343,345,346,348,353,223,487,533,535,1055,219,225,483,489,639,1051,1057,486,1054,1062,6,21,34,46,59,71,144,157,182,305,7,22,35,47,60,72,145,158,183,306,8,23,36,48,61,73,146,159,184,307],n2=!1;function tF(){if(n2)return;n2=!0;let t=new nv;for(let e=0;e<gp.length;e++){let n=[gp[e]];for(let i=0;i<n.length;i++){let s=n[i];do s=Hc[s<<1]>>5,n.indexOf(s)==-1&&n.push(s);while(s!=n[i]);do s=Uc[s<<1]>>5,n.indexOf(s)==-1&&n.push(s);while(s!=n[i]);mp(t,s<<1);let r=t.top;t.top=t.bottom,t.bottom=r,s=pp(t)>>1,n.indexOf(s)==-1&&n.push(s)}gp[e]=n}}let nF=["Star-x8","Star-x71","Star-x62","Star-x44","Star-x53","Square-Scallop","Square-rPawn","Square-Shield","Square-Barrel","Square-rFist","Square-Mushroom","Square-lPawn","Square-Square","Square-lFist","Square-Kite","Kite-Scallop","Kite-rPawn","Kite-Shield","Kite-Barrel","Kite-rFist","Kite-Mushroom","Kite-lPawn","Kite-lFist","Kite-Kite","Barrel-Scallop","Barrel-rPawn","Barrel-Shield","Barrel-Barrel","Barrel-rFist","Barrel-Mushroom","Barrel-lPawn","Barrel-lFist","Scallop-Scallop","Scallop-rPawn","Scallop-Shield","Scallop-rFist","Scallop-Mushroom","Scallop-lPawn","Scallop-lFist","Shield-rPawn","Shield-Shield","Shield-rFist","Shield-Mushroom","Shield-lPawn","Shield-lFist","Mushroom-rPawn","Mushroom-rFist","Mushroom-Mushroom","Mushroom-lPawn","Mushroom-lFist","Pawn-rPawn-rPawn","Pawn-rPawn-lPawn","Pawn-rPawn-rFist","Pawn-lPawn-rFist","Pawn-lPawn-lPawn","Pawn-rPawn-lFist","Pawn-lPawn-lFist","Fist-rFist-rFist","Fist-lFist-rFist","Fist-lFist-lFist","Pair-x6","Pair-r42","Pair-x411","Pair-r51","Pair-l42","Pair-l51","Pair-x33","Pair-x312","Pair-x321","Pair-x222","L-x6","L-r42","L-x411","L-r51","L-l42","L-l51","L-x33","L-x312","L-x321","L-x222","Line-x6","Line-r42","Line-x411","Line-r51","Line-l42","Line-l51","Line-x33","Line-x312","Line-x321","Line-x222"],Q4=[16,16,16,10,16,24,16,24,16,24,16,16,4,24,16,48,32,48,32,48,32,32,48,16,48,32,48,16,48,32,32,48,36,48,72,72,48,48,72,48,36,72,48,48,72,32,48,16,32,48,16,32,48,48,16,48,48,36,72,36,72,96,96,72,96,72,72,72,72,24,48,64,64,48,64,48,48,48,48,16,24,32,32,24,32,24,24,24,24,8],ek=new X4;function iF(t,e,n){return Z4(),J4(),q4(ek,Y4())}function sF(t,e,n){Z4(),J4(),tF();let i=li(gp[du(n,Q4)]);return q4(ek,Y4(i))}xi("sqrs",iF);xi("sqrcsp",sF,[nF,Q4]);let rF=[[4,16,7],[1,11,22],[26,14,8],[29,19,23]],oF=[[3,6,12],[2,21,17],[27,9,18],[28,24,13]];function aF(t,e){let n=N1.set([],t%12),i=O1.set([],~~(t/12)),s=B1.set([],e%81),r=F1.set([],~~(e/81)),o=[];for(let a=0;a<6;a++)o[a*5]=i[a];If(rF,o,[0,1,2,3],s,5),If(oF,o,n,r,5);for(let a=0;a<30;a+=5)for(let l=1;l<5;l++)if(o[a]==o[a+l])return!1;return!0}let lF=[[0,3,1],[0,2,4],[1,5,2],[3,4,5]],tk=[[0,1,2],[0,3,1],[0,2,3],[1,3,2]],O1=new Xo("p",6,-1),N1=new Xo("p",4,-1),B1=new Xo("o",4,3),F1=new Xo("o",4,-3);function nk(t,e){let n=N1.set([],t%12),i=O1.set([],~~(t/12));return Ms(i,lF[e]),Ms(n,tk[e]),O1.get(i)*12+N1.get(n)}function ik(t,e){let n=B1.set([],t%81),i=F1.set([],~~(t/81));return n[e]++,Ms(i,tk[e],1,[0,2,1,3]),F1.get(i)*81+B1.get(n)}let i2=new Nl(4,2,[[0,nk,4320],[0,ik,2187]]),a0=new Nl(4,2,[[0,function(t,e){return~~(nk(t*12,e)/12)},360],[0,function(t,e){return ik(t,e)%81},81]]);function cF(t){let e=[],n=["L","R","B","U"];for(let i=0;i<t.length;i++){let s=t[i][0],r=1-t[i][1];s==2&&Ms(n,[0,3,1],r+1),e.push(n[s]+(r==1?"'":""))}return e.join(" ")}let uF=[0,1,2,0,2,1,1,2,0,2,1,0];function fF(t){let e,n,i=t=="skbso"?6:2,s=t=="skbo"?0:8;do e=Et(4320),n=Et(2187);while(e==0&&n==0||uF[e%12]!=(n+~~(n/3)+~~(n/9)+~~(n/27))%3||i2.search([e,n],0,i)!=null||t=="skbnb"&&!aF(e,n));return cF(i2.search([e,n],s).reverse())}function hF(t){let e,n,i=1,s=t=="ivyso"?6:0;do e=Et(360),n=Et(81);while(e==0&&n==0||a0.search([e,n],0,i)!=null);return a0.toStr(a0.search([e,n],s).reverse(),"RLDB","' ")}xi(["skbo","skbso","skbnb"],fF)(["ivyo","ivyso"],hF);let Cs=["","2","'"],dF=["","2","'","2'"],wr=[],zr=[];function ed(t,e,n,i){i==null&&(i=[""]);let s=0,r,o=[];for(let a=0;a<n;a++){do r=Et(t.length);while(s>>r&1);o.push(t[r]+li(i)),s&=~e[r],s|=1<<r}return o.join(" ")}function pF(t,e){let n=[["U","D"],["R","L","r"],["F","B","f"]],i=[],s,r=0,o,a,l="";for(s=-1,o=0;o<e;o++){let c=0;do{let u=Et(n.length),f=Et(n[u].length);if(u!=s||i[f]==0){if(u==s){i[f]=1;let h=Et(Cs.length);u==0&&f==0&&(r=(r+4+h)%4),u==1&&f==2?r==0||r==3?l+="l"+Cs[h]+" ":l+="r"+Cs[h]+" ":u==2&&f==2?r==0||r==1?l+="b"+Cs[h]+" ":l+="f"+Cs[h]+" ":l+=n[u][f]+Cs[h]+" "}else{for(a=0;a<n[u].length;a++)i[a]=0;s=u,i[f]=1;let h=Et(Cs.length);u==0&&f==0&&(r=(r+4+h)%4),u==1&&f==2?r==0||r==3?l+="l"+Cs[h]+" ":l+="r"+Cs[h]+" ":u==2&&f==2?r==0||r==1?l+="b"+Cs[h]+" ":l+="f"+Cs[h]+" ":l+=n[u][f]+Cs[h]+" "}c=1}}while(c==0)}return l}xi("444yj",pF);function mF(t,e){function n(m){let _=[],b,g,x,y=0;for(b=0;b<9;b++){for(x=0,g=0;g<_.length;g++)_[g]==r[s[m][b]]&&(x=1);x==0&&(_[_.length]=r[s[m][b]],r[s[m][b]]==0&&(y=1))}return _.length==5&&y==1}function i(m,_){for(let b=0;b<_;b++){let g=r[s[m][0]];r[s[m][0]]=r[s[m][6]],r[s[m][6]]=r[s[m][4]],r[s[m][4]]=r[s[m][2]],r[s[m][2]]=g,g=r[s[m][7]],r[s[m][7]]=r[s[m][5]],r[s[m][5]]=r[s[m][3]],r[s[m][3]]=r[s[m][1]],r[s[m][1]]=g}}let s=[[0,1,2,5,8,7,6,3,4],[6,7,8,13,20,19,18,11,12],[0,3,6,11,18,17,16,9,10],[8,5,2,15,22,21,20,13,14]],r=[1,1,2,3,3,2,4,4,0,5,6,7,8,9,10,10,5,6,7,8,9,11,11],o="UFLR",a="",l=[],c,u,f,h,d,p;for(;l.length<e;){for(c=[1,1,1,1],h=0;h<4;h++)c[h]==1&&!n(h)&&(c[h]=0);for(u=0;u==0;)d=Et(4),c[d]==1&&(p=Et(3)+1,i(d,p),u=1);l[l.length]=[d,p],l.length>=2&&l[l.length-1][0]==l[l.length-2][0]&&(l[l.length-2][1]=(l[l.length-2][1]+l[l.length-1][1])%4,l=l.slice(0,l.length-1)),l.length>=1&&l[l.length-1][1]==0&&(l=l.slice(0,l.length-1))}for(f=0;f<e;f++)a+=o[l[f][0]]+Cs[l[f][1]-1]+" ";return a}xi("bic",mF);function Fn(t){let e=[t+"=0",t+"+1",t+"+2",t+"+3",t+"+4",t+"+5",t+"+6",t+"-5",t+"-4",t+"-3",t+"-2",t+"-1"];return" "+li(e)+" "}function td(){return li(["U","d"])+li(["U","d"])}function js(){return"     "}function l0(t,e,n,i){let s=[[0,-1],[1,0],[-1,0],[0,1]],r=0,o=3,a,l=5,c=[];for(let f=0;f<e;f++){do a=Et(4);while(r+s[a][0]<0||r+s[a][0]>3||o+s[a][1]<0||o+s[a][1]>3||a+l==3);r+=s[a][0],o+=s[a][1],c.length>0&&c[c.length-1][0]==a?c[c.length-1][1]++:c.push([a,1]),l=a}let u="";for(let f=0;f<c.length;f++){let h=t?c[f][0]:3-c[f][0];if(h=(n?"\uFFEA\uFFE9\uFFEB\uFFEC":"ULRD").charAt(h),i)u+=h+(c[f][1]==1?"":c[f][1])+" ";else for(let d=0;d<c[f][1];d++)u+=h+" "}return u}function s2(t,e){let n="",i,s;for(i=0;i<e;i++){for(n+="  ",s=0;s<t;s++)n+=(s%2==0?"R":"D")+li(["++","--"])+" ";n+="U"+(n.endsWith("-- ")?"'\\n":"\\n")}return n}function gF(t,e){let n="",i,s;for(i=0;i<e;i++){for(n+=" ",s=0;s<t/2;s++)n+=li(["+","-"])+li(["+","-"])+" ";n+="U"+li(["'\\n","\\n"])}return n}function _F(t){let e="",n,i;for(n=0;n<Math.ceil(t/10);n++){for(e+="  ",i=0;i<10;i++)e+=(i%2==0?"Rr".charAt(Et(2)):"Dd".charAt(Et(2)))+li(["+ ","++","- ","--"])+" ";e+="y"+li(dF)+`
`}return e}function c0(t,e){wr=[];let n,i;sk(1,t,e);let s="";for(n=0;n<wr[0].length;n++)i=wr[0][n],i[0]==7?s+="/":s+=" ("+i[0]+","+i[1]+") ";return s}function bF(t){wr=[];let e;sk(2,0,t);let n=wr[0],i=wr[1],s="";for(n[0][0]==7&&(n=[[0,0]].concat(n)),i[0][0]==7&&(i=[[0,0]].concat(i)),e=0;e<t;e++)s+="("+n[2*e][0]+","+i[2*e][0]+","+i[2*e][1]+","+n[2*e][1]+") / ";return s}function sk(t,e,n){for(let i=0;i<t;i++){zr=[1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0],wr[i]=[];let s=0;for(;s<n;){let r=Et(12)-5,o=e==2?0:Et(12)-5,a=(r==0?0:1)+(o==0?0:1);(s+a<=n||e!=1)&&(a>0||s==0)&&r2(r,o)&&(e==1&&(s+=a),a>0&&(wr[i][wr[i].length]=[r,o]),(s<n||e!=1)&&(s++,wr[i][wr[i].length]=[7,0],r2(7,0)))}}}function r2(t,e){let n,i,s;if(t==7){for(n=0;n<6;n++)on(zr,n+6,n+12);return!0}else{if(zr[(17-t)%12]||zr[(11-t)%12]||zr[12+(17-e)%12]||zr[12+(11-e)%12])return!1;for(i=zr.slice(0,12),s=zr.slice(12,24),n=0;n<12;n++)zr[n]=i[(12+n-t)%12],zr[n+12]=s[(12+n-e)%12];return!0}}function vF(t){let e=[];for(let n=0;n<t;n++)e.push(Po([["R"],["L"]],["","'"],3+Et(3)));return e.join(" x ")}function o2(t,e){let n=0,i=[];for(let s=0;s<4;s++)i[s]=Et(3),i[s]>0?(i[s]="ulrb".charAt(s)+["! ","' "][i[s]-1],n++):i[s]="";return t.substr(0,t.length-e*n)+" "+i.join("")}function yF(t,e){let n="";switch(t){case"15p":return l0(!1,e);case"15pm":return l0(!0,e);case"15pat":return l0(!1,e,!0,!0);case"clkwca":let i=["0+","1+","2+","3+","4+","5+","6+","1-","2-","3-","4-","5-"];n="UR? DR? DL? UL? U? R? D? L? ALL? y2 U? R? D? L? ALL?????";for(let r=0;r<14;r++)n=n.replace("?",li(i));return n.replace("?",li([""," UR"])).replace("?",li([""," DR"])).replace("?",li([""," DL"])).replace("?",li([""," UL"]));case"clk":return"UU"+Fn("u")+"dU"+Fn("u")+"dd"+Fn("u")+"Ud"+Fn("u")+"dU"+Fn("u")+"Ud"+Fn("u")+"UU"+Fn("u")+"UU"+Fn("u")+"UU"+Fn("u")+"dd"+js()+td()+"\\ndd"+Fn("d")+"dU"+Fn("d")+"UU"+Fn("d")+"Ud"+Fn("d")+"UU"+js()+"UU"+js()+"Ud"+js()+"dU"+js()+"UU"+js()+"dd"+Fn("d")+td();case"clkc":n="";for(let r=0;r<4;r++)n+="("+(Et(12)-5)+", "+(Et(12)-5)+") / ";for(let r=0;r<6;r++)n+="("+(Et(12)-5)+") / ";for(let r=0;r<4;r++)n+=li(["d","U"]);return n;case"clke":return"UU"+Fn("u")+"dU"+Fn("u")+"dU"+Fn("u")+"UU"+Fn("u")+"UU"+Fn("u")+"UU"+Fn("u")+"Ud"+Fn("u")+"Ud"+Fn("u")+"dd"+Fn("u")+"dd"+js()+td()+"\\nUU"+js()+"UU"+js()+"dU"+Fn("d")+"dU"+js()+"dd"+Fn("d")+"Ud"+js()+"Ud"+Fn("d")+"UU"+js()+"UU"+Fn("d")+"dd"+Fn("d")+td();case"giga":return _F(e);case"mgmo":return ed(["F","B","U","D","L","DBR","DL","BR","DR","BL","R","DBL"],[1364,2728,1681,2402,2629,1418,2329,1574,1129,2198,421,602],e);case"mgmp":return s2(10,Math.ceil(e/10));case"mgmc":return gF(10,Math.ceil(e/10));case"heli":return ed(["UF","UR","UB","UL","FR","BR","BL","FL","DF","DR","DB","DL"],[154,53,106,197,771,1542,3084,2313,2704,1328,2656,1472],e);case"redi":return ed(["L","R","F","B","l","r","f","b"],[28,44,67,131,193,194,52,56],e,["","'"]);case"redim":return vF(e);case"pyrm":return n=Po([["U"],["L"],["R"],["B"]],["!","'"],e),o2(n,3).replace(/!/g,"");case"prcp":return s2(10,Math.ceil(e/10));case"mpyr":return n=ed(["U!","L!","R!","B!","Uw","Lw","Rw","Bw"],[224,208,176,112,238,221,187,119],e,["!","'"]),o2(n,4).replace(/!/g,"");case"r3":for(let r=0;r<e;r++)n+=(r==0?"":"\\n")+(r+1)+") ${333}";return p1(n);case"r3ni":for(let r=0;r<e;r++)n+=(r==0?"":"\\n")+(r+1)+") ${333ni}";return p1(n);case"sq1h":return c0(1,e);case"sq1t":return c0(0,e);case"sq2":let s=0;for(;s<e;){let r=Et(12)-5,o=Et(12)-5;(r!=0||o!=0)&&(s++,n+="("+r+","+o+") / ")}return n;case"ssq1t":return bF(e);case"bsq":return c0(2,e);case"-1":for(let r=0;r<e;r++)n+=String.fromCharCode(32+Et(224));return n+="Error: subscript out of range",n;case"333noob":return n=Po([["turn the top face","turn the bottom face"],["turn the right face","turn the left face"],["turn the front face","turn the back face"]]," clockwise by 90 degrees,| counterclockwise by 90 degrees,| by 180 degrees,".split("|"),e).replace(/t/,"T"),n.substr(0,n.length-2)+".";case"lol":return n=Po([["L"],["O"]],0,e),n.replace(/ /g,"")}}xi(["15p","15pm","15pat","clkwca","clk","clkc","clke","giga","mgmo","mgmp","mgmc","heli","redi","redim","pyrm","prcp","mpyr","r3","r3ni","sq1h","sq1t","sq2","ssq1t","bsq","-1","333noob","lol"],yF);function a2(t,e,n){const i=t.slice();return i[11]=e[n],i}function l2(t){let e,n,i;var s=t[11].icon;function r(o){return{}}return s&&(e=Jr(s,r())),{c(){e&&ue(e.$$.fragment),n=ts()},m(o,a){e&&le(e,o,a),R(o,n,a),i=!0},p(o,a){if(s!==(s=o[11].icon)){if(e){ot();const l=e;H(l.$$.fragment,1,0,()=>{ce(l,1)}),at()}s?(e=Jr(s,r()),ue(e.$$.fragment),I(e.$$.fragment,1),le(e,n.parentNode,n)):e=null}},i(o){i||(e&&I(e.$$.fragment,o),i=!0)},o(o){e&&H(e.$$.fragment,o),i=!1},d(o){o&&P(n),e&&ce(e,o)}}}function wF(t){let e,n=t[11].name+"",i,s,r,o=t[11].icon&&l2(t);return{c(){o&&o.c(),e=O(),i=ae(n),s=O()},m(a,l){o&&o.m(a,l),R(a,e,l),R(a,i,l),R(a,s,l),r=!0},p(a,l){a[11].icon?o?(o.p(a,l),l&2&&I(o,1)):(o=l2(a),o.c(),I(o,1),o.m(e.parentNode,e)):o&&(ot(),H(o,1,1,()=>{o=null}),at()),(!r||l&2)&&n!==(n=a[11].name+"")&&ke(i,n)},i(a){r||(I(o),r=!0)},o(a){H(o),r=!1},d(a){o&&o.d(a),a&&P(e),a&&P(i),a&&P(s)}}}function c2(t){let e,n;function i(){return t[9](t[11])}return e=new Ct({props:{ariaLabel:t[11].ariaLabel,class:`rounded-none w-full\r
        `+(t[11].index===t[2]?"bg-blue-400 text-black hover:bg-blue-500 hover:bg-opacity-100":""),$$slots:{default:[wF]},$$scope:{ctx:t}}}),e.$on("click",i),{c(){ue(e.$$.fragment)},m(s,r){le(e,s,r),n=!0},p(s,r){t=s;const o={};r&2&&(o.ariaLabel=t[11].ariaLabel),r&6&&(o.class=`rounded-none w-full\r
        `+(t[11].index===t[2]?"bg-blue-400 text-black hover:bg-blue-500 hover:bg-opacity-100":"")),r&1026&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(s){n||(I(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){ce(e,s)}}}function xF(t){let e,n,i,s,r,o;const a=t[8].default,l=Ho(a,t,t[10],null);let c=t[1],u=[];for(let h=0;h<c.length;h+=1)u[h]=c2(a2(t,c,h));const f=h=>H(u[h],1,1,()=>{u[h]=null});return{c(){e=C("main"),n=C("section"),l&&l.c(),i=O(),s=C("footer");for(let h=0;h<u.length;h+=1)u[h].c();M(n,"class","flex relative"),Si(n,"--len",t[1].length),M(s,"class","flex mt-auto border-t-2 border-t-gray-700"),M(e,"class",r=hs("w-full "+(t[0]||""))+" svelte-ue8wrd")},m(h,d){R(h,e,d),E(e,n),l&&l.m(n,null),E(e,i),E(e,s);for(let p=0;p<u.length;p+=1)u[p].m(s,null);o=!0},p(h,[d]){if(l&&l.p&&(!o||d&1024)&&Go(l,a,h,h[10],o?Vo(a,h[10],d,null):Wo(h[10]),null),(!o||d&2)&&Si(n,"--len",h[1].length),d&22){c=h[1];let p;for(p=0;p<c.length;p+=1){const m=a2(h,c,p);u[p]?(u[p].p(m,d),I(u[p],1)):(u[p]=c2(m),u[p].c(),I(u[p],1),u[p].m(s,null))}for(ot(),p=c.length;p<u.length;p+=1)f(p);at()}(!o||d&1&&r!==(r=hs("w-full "+(h[0]||""))+" svelte-ue8wrd"))&&M(e,"class",r)},i(h){if(!o){I(l,h);for(let d=0;d<c.length;d+=1)I(u[d]);o=!0}},o(h){H(l,h),u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)H(u[d]);o=!1},d(h){h&&P(e),l&&l.d(h),en(u,h)}}}const rk={};function MF(t,e,n){let i,{$$slots:s={},$$scope:r}=e;const o=nn(0);dt(t,o,p=>n(2,i=p));let a=[],{class:l=""}=e,{onChange:c=p=>{}}=e;e1(rk,{registerTab(p){a.push(p),a.forEach((m,_)=>m.index=_),n(1,a)},unregisterTab(p){let m=a.indexOf(p);a.splice(m,1),At(o,i=i===p.index?0:i,i),a.forEach((_,b)=>_.index=b),n(1,a)},selectedTab:o});function u(p){At(o,i=p.index,i),c(p.index)}function f(){let p=Math.max(0,i-1);u(a[p])}function h(){let p=Math.min(a.length-1,i+1);u(a[p])}const d=p=>u(p);return t.$$set=p=>{"class"in p&&n(0,l=p.class),"onChange"in p&&n(5,c=p.onChange),"$$scope"in p&&n(10,r=p.$$scope)},[l,a,i,o,u,c,f,h,s,d,r]}class ok extends xt{constructor(e){super(),wt(this,e,MF,xF,yt,{class:0,onChange:5,prevTab:6,nextTab:7})}get prevTab(){return this.$$.ctx[6]}get nextTab(){return this.$$.ctx[7]}}function SF(t){let e,n;const i=t[7].default,s=Ho(i,t,t[6],null);return{c(){e=C("section"),s&&s.c(),M(e,"class","absolute w-full h-full inset-0 flex svelte-i8ipqm"),Si(e,"--index",t[0].index),Si(e,"--selected-tab",t[1])},m(r,o){R(r,e,o),s&&s.m(e,null),n=!0},p(r,[o]){s&&s.p&&(!n||o&64)&&Go(s,i,r,r[6],n?Vo(i,r[6],o,null):Wo(r[6]),null),(!n||o&1)&&Si(e,"--index",r[0].index),(!n||o&2)&&Si(e,"--selected-tab",r[1])},i(r){n||(I(s,r),n=!0)},o(r){H(s,r),n=!1},d(r){r&&P(e),s&&s.d(r)}}}function EF(t,e,n){let i,{$$slots:s={},$$scope:r}=e,{name:o}=e,{icon:a=null}=e,{ariaLabel:l=""}=e;const c=Math.random().toString(),{registerTab:u,unregisterTab:f,selectedTab:h}=ka(rk);dt(t,h,p=>n(1,i=p));let d={name:"",id:"",index:0,icon:null,ariaLabel:l};return ji(()=>{n(0,d={name:o,id:c,index:0,icon:a}),u(d)}),Es(()=>{f(d)}),t.$$set=p=>{"name"in p&&n(3,o=p.name),"icon"in p&&n(4,a=p.icon),"ariaLabel"in p&&n(5,l=p.ariaLabel),"$$scope"in p&&n(6,r=p.$$scope)},[d,i,h,o,a,l,r,s]}class rl extends xt{constructor(e){super(),wt(this,e,EF,SF,yt,{name:3,icon:4,ariaLabel:5})}}var Kt=(t=>(t[t.CLEAN=0]="CLEAN",t[t.STOPPED=1]="STOPPED",t[t.PREVENTION=2]="PREVENTION",t[t.INSPECTION=3]="INSPECTION",t[t.RUNNING=4]="RUNNING",t))(Kt||{}),tr=(t=>(t[t.SEQUENTIAL=0]="SEQUENTIAL",t[t.GROUP=1]="GROUP",t))(tr||{}),ft=(t=>(t[t.NONE=0]="NONE",t[t.P2=1]="P2",t[t.DNF=2]="DNF",t[t.DNS=3]="DNS",t))(ft||{});const TF=["Keyboard","Manual","StackMat"],kF={CONTESTANT:1<<0,JUDGE:1<<1,SCRAMBLER:1<<2,ORGANIZER:1<<3,DELEGATE:1<<4,SPONSOR:1<<5,GUEST:1<<6},u2=["Competidor","Juez","Scrambler","Organizador","Delegado","Patrocinador","Invitado"];function AF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,15H23V3H19M15,3H6C5.17,3 4.46,3.5 4.16,4.22L1.14,11.27C1.05,11.5 1,11.74 1,12V14A2,2 0 0,0 3,16H9.31L8.36,20.57C8.34,20.67 8.33,20.77 8.33,20.88C8.33,21.3 8.5,21.67 8.77,21.94L9.83,23L16.41,16.41C16.78,16.05 17,15.55 17,15V5C17,3.89 16.1,3 15,3Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function LF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class CF extends xt{constructor(e){super(),wt(this,e,LF,AF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function PF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M12.36,6L12.76,8H18V14H14.64L14.24,12H7V6H12.36M14,4H5V21H7V14H12.6L13,16H20V6H14.4"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function RF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class IF extends xt{constructor(e){super(),wt(this,e,RF,PF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function DF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function OF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class NF extends xt{constructor(e){super(),wt(this,e,OF,DF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function BF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function FF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class zF extends xt{constructor(e){super(),wt(this,e,FF,BF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function UF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,4H18V2H16V4H8V2H6V4H5A2,2 0 0,0 3,6V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V6A2,2 0 0,0 19,4M19,20H5V10H19V20M5,8V6H19V8H5M7,12H17V14H7V12M7,16H14V18H7V16Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function HF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class VF extends xt{constructor(e){super(),wt(this,e,HF,UF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function GF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function WF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class jF extends xt{constructor(e){super(),wt(this,e,WF,GF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function YF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function qF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class iv extends xt{constructor(e){super(),wt(this,e,qF,YF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function XF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M12,6A6,6 0 0,1 18,12C18,14.22 16.79,16.16 15,17.2V19A1,1 0 0,1 14,20H10A1,1 0 0,1 9,19V17.2C7.21,16.16 6,14.22 6,12A6,6 0 0,1 12,6M14,21V22A1,1 0 0,1 13,23H11A1,1 0 0,1 10,22V21H14M20,11H23V13H20V11M1,11H4V13H1V11M13,1V4H11V1H13M4.92,3.5L7.05,5.64L5.63,7.05L3.5,4.93L4.92,3.5M16.95,5.63L19.07,3.5L20.5,4.93L18.37,7.05L16.95,5.63Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function ZF(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class JF extends xt{constructor(e){super(),wt(this,e,ZF,XF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function KF(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M21 10V9L15 3H5C3.89 3 3 3.89 3 5V19C3 20.11 3.9 21 5 21H11V19.13L19.39 10.74C19.83 10.3 20.39 10.06 21 10M14 4.5L19.5 10H14V4.5M22.85 14.19L21.87 15.17L19.83 13.13L20.81 12.15C21 11.95 21.33 11.95 21.53 12.15L22.85 13.47C23.05 13.67 23.05 14 22.85 14.19M19.13 13.83L21.17 15.87L15.04 22H13V19.96L19.13 13.83Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function $F(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class QF extends xt{constructor(e){super(),wt(this,e,$F,KF,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function e8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M12,21L15.6,16.2C14.6,15.45 13.35,15 12,15C10.65,15 9.4,15.45 8.4,16.2L12,21M12,3C7.95,3 4.21,4.34 1.2,6.6L3,9C5.5,7.12 8.62,6 12,6C15.38,6 18.5,7.12 21,9L22.8,6.6C19.79,4.34 16.05,3 12,3M12,9C9.3,9 6.81,9.89 4.8,11.4L6.6,13.8C8.1,12.67 9.97,12 12,12C14.03,12 15.9,12.67 17.4,13.8L19.2,11.4C17.19,9.89 14.7,9 12,9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function t8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class f2 extends xt{constructor(e){super(),wt(this,e,t8,e8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function n8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M2.28,3L1,4.27L2.47,5.74C2.04,6 1.61,6.29 1.2,6.6L3,9C3.53,8.6 4.08,8.25 4.66,7.93L6.89,10.16C6.15,10.5 5.44,10.91 4.8,11.4L6.6,13.8C7.38,13.22 8.26,12.77 9.2,12.47L11.75,15C10.5,15.07 9.34,15.5 8.4,16.2L12,21L14.46,17.73L17.74,21L19,19.72M12,3C9.85,3 7.8,3.38 5.9,4.07L8.29,6.47C9.5,6.16 10.72,6 12,6C15.38,6 18.5,7.11 21,9L22.8,6.6C19.79,4.34 16.06,3 12,3M12,9C11.62,9 11.25,9 10.88,9.05L14.07,12.25C15.29,12.53 16.43,13.07 17.4,13.8L19.2,11.4C17.2,9.89 14.7,9 12,9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function i8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class h2 extends xt{constructor(e){super(),wt(this,e,i8,n8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function ak(t){return t.slice(1).split("&").reduce((e,n)=>{let i=n.split("=").map(s=>decodeURIComponent(s));return e.set(i[0],i[1]),e},new Map)}function _m(t){let e=t.match(/\[.*\]$/);return e?[t.slice(0,e.index).trim(),e[0]]:[t,""]}function d2(t){let e,n,i=_m(t[0])[1]+"",s;return{c(){e=ae("\xA0 "),n=C("span"),s=ae(i),M(n,"class","flex ml-auto text-yellow-400")},m(r,o){R(r,e,o),R(r,n,o),E(n,s)},p(r,o){o&1&&i!==(i=_m(r[0])[1]+"")&&ke(s,i)},d(r){r&&P(e),r&&P(n)}}}function s8(t){let e,n,i,s=(t[3]?_m(t[0])[0]:t[0])+"",r,o,a,l,c,u,f;const h=t[18].default,d=Ho(h,t,t[17],null);let p=t[3]&&d2(t);return{c(){e=C("div"),d&&d.c(),n=O(),i=C("div"),r=ae(s),o=O(),p&&p.c(),M(i,"class","tooltip svelte-xzd8jm"),pt(i,"visible",t[5]),M(e,"style",a="--duration: "+t[1]+"ms;    --delay: "+t[2]+"ms;    --x: "+t[8]+";    --y: "+t[9]+";    --tx: "+t[10]+";    --ty: "+t[11]+";    --tr: "+t[12]+";"),M(e,"class",l=hs("wrapper "+t[4])+" svelte-xzd8jm")},m(m,_){R(m,e,_),d&&d.m(e,null),E(e,n),E(e,i),E(i,r),E(i,o),p&&p.m(i,null),t[20](i),t[21](e),c=!0,u||(f=[$e(window,"resize",t[15]),$e(e,"mouseenter",t[13]),$e(e,"mouseleave",t[14]),$e(e,"click",t[19])],u=!0)},p(m,[_]){d&&d.p&&(!c||_&131072)&&Go(d,h,m,m[17],c?Vo(h,m[17],_,null):Wo(m[17]),null),(!c||_&9)&&s!==(s=(m[3]?_m(m[0])[0]:m[0])+"")&&ke(r,s),m[3]?p?p.p(m,_):(p=d2(m),p.c(),p.m(i,null)):p&&(p.d(1),p=null),(!c||_&32)&&pt(i,"visible",m[5]),(!c||_&7942&&a!==(a="--duration: "+m[1]+"ms;    --delay: "+m[2]+"ms;    --x: "+m[8]+";    --y: "+m[9]+";    --tx: "+m[10]+";    --ty: "+m[11]+";    --tr: "+m[12]+";"))&&M(e,"style",a),(!c||_&16&&l!==(l=hs("wrapper "+m[4])+" svelte-xzd8jm"))&&M(e,"class",l)},i(m){c||(I(d,m),c=!0)},o(m){H(d,m),c=!1},d(m){m&&P(e),d&&d.d(m),p&&p.d(),t[20](null),t[21](null),u=!1,Vn(f)}}}function r8(t){return t.computedStyleMap().get("transform").constructor.name==="CSSTransformValue"}function o8(t,e,n){let{$$slots:i={},$$scope:s}=e,{text:r="tooltip"}=e,{position:o="right"}=e,{duration:a=200}=e,{delay:l=200}=e,{hasKeybinding:c=!1}=e,{class:u=""}=e,f=!1,h,d,p,m,_,b,g;function x(){v(),n(5,f=!0)}function y(){n(5,f=!1)}function v(){let k=h.getBoundingClientRect(),A=d.getBoundingClientRect(),L=k.x,D=k.y,B=h;do if(B=B==null?void 0:B.parentElement,r8(B)){let U=B==null?void 0:B.getBoundingClientRect();L-=(U==null?void 0:U.x)||0,D-=(U==null?void 0:U.y)||0;break}while(B!=null&&B.parentElement);o==="right"||o==="left"?(n(8,p=o==="left"?`calc(${L-A.width}px - 0.5rem)`:`calc(${L+k.width}px + 0.5rem)`),n(9,m=`${D+(k.height-A.height)/2}px`),n(10,_=o==="right"?"-.29rem":"calc(100% - .25rem)"),n(11,b="calc(50% - .25rem)"),n(12,g=o==="right"?"-45deg":"135deg")):(n(8,p=`${L+(k.width-A.width)/2}px`),n(9,m=o==="top"?`calc(${D-A.height}px - 0.5rem)`:`calc(${D+k.height}px + 0.5rem)`),n(10,_="calc(50% - .25rem)"),n(11,b=o==="top"?"calc(100% - .21rem)":"-.28rem"),n(12,g=o==="top"?"-135deg":"45deg"))}ji(()=>{v()});function w(k){_E.call(this,t,k)}function S(k){vt[k?"unshift":"push"](()=>{d=k,n(7,d)})}function T(k){vt[k?"unshift":"push"](()=>{h=k,n(6,h)})}return t.$$set=k=>{"text"in k&&n(0,r=k.text),"position"in k&&n(16,o=k.position),"duration"in k&&n(1,a=k.duration),"delay"in k&&n(2,l=k.delay),"hasKeybinding"in k&&n(3,c=k.hasKeybinding),"class"in k&&n(4,u=k.class),"$$scope"in k&&n(17,s=k.$$scope)},[r,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,o,s,i,w,S,T]}class $i extends xt{constructor(e){super(),wt(this,e,o8,s8,yt,{text:0,position:16,duration:1,delay:2,hasKeybinding:3,class:4})}}function p2(t){let e,n,i,s,r,o;const a=t[8].default,l=Ho(a,t,t[7],null);return{c(){e=C("div"),n=C("div"),l&&l.c(),M(n,"class",i="bg-gray-800 rounded-md show p-4 pt-3 "+(t[2]||"")+" svelte-hxp9wt"),M(e,"id","wrapper"),M(e,"class","fixed bg-black bg-opacity-80 top-0 left-0 w-full h-full flex items-center justify-center transition-all z-50 svelte-hxp9wt")},m(c,u){R(c,e,u),E(e,n),l&&l.m(n,null),s=!0,r||(o=$e(e,"mousedown",mE(pE(t[9]))),r=!0)},p(c,u){l&&l.p&&(!s||u&128)&&Go(l,a,c,c[7],s?Vo(a,c[7],u,null):Wo(c[7]),null),(!s||u&4&&i!==(i="bg-gray-800 rounded-md show p-4 pt-3 "+(c[2]||"")+" svelte-hxp9wt"))&&M(n,"class",i)},i(c){s||(I(l,c),s=!0)},o(c){H(l,c),s=!1},d(c){c&&P(e),l&&l.d(c),r=!1,o()}}}function a8(t){let e,n,i,s,r=t[0]&&p2(t);return{c(){r&&r.c(),e=ts()},m(o,a){r&&r.m(o,a),R(o,e,a),n=!0,i||(s=[$e(window,"keyup",t[4]),$e(window,"keydown",t[5])],i=!0)},p(o,[a]){o[0]?r?(r.p(o,a),a&1&&I(r,1)):(r=p2(o),r.c(),I(r,1),r.m(e.parentNode,e)):r&&(ot(),H(r,1,1,()=>{r=null}),at())},i(o){n||(I(r),n=!0)},o(o){H(r),n=!1},d(o){r&&r.d(o),o&&P(e),i=!1,Vn(s)}}}function l8(t,e,n){let{$$slots:i={},$$scope:s}=e,{show:r=!1}=e,{cancel:o=!0}=e,{onClose:a=()=>{}}=e,{class:l=""}=e;function c(d){!r||d.key==="Escape"&&o&&(d.stopPropagation(),f(null))}function u(d){!r||d.stopPropagation()}function f(d){return a.call(null,d||null),n(0,r=!1),r}const h=()=>o&&f(null);return t.$$set=d=>{"show"in d&&n(0,r=d.show),"cancel"in d&&n(1,o=d.cancel),"onClose"in d&&n(6,a=d.onClose),"class"in d&&n(2,l=d.class),"$$scope"in d&&n(7,s=d.$$scope)},[r,o,l,f,c,u,a,s,i,h]}class La extends xt{constructor(e){super(),wt(this,e,l8,a8,yt,{show:0,cancel:1,onClose:6,class:2,close:3})}get close(){return this.$$.ctx[3]}}function c8(t){let e,n,i,s,r,o,a,l;return{c(){e=C("div"),n=C("div"),i=O(),s=C("textarea"),M(n,"class","lesp bg-transparent text-transparent outline-none p-2 border-4 border-transparent svelte-1ux9168"),M(n,"contenteditable","false"),t[4]===void 0&&qr(()=>t[7].call(n)),M(s,"placeholder",t[2]),M(s,"class",r=(t[3]||"bg-gray-600 text-gray-300")+" text-gray-400 flex m-auto p-2 rounded-md border border-solid border-gray-400 focus:text-gray-300 outline-none transition-all duration-200 absolute inset-0 w-full h-full resize-none svelte-1ux9168"),M(e,"class",o="relative "+(t[1]||"")+" svelte-1ux9168")},m(c,u){R(c,e,u),E(e,n),t[4]!==void 0&&(n.innerHTML=t[4]),E(e,i),E(e,s),Ta(s,t[0]),a||(l=[$e(n,"input",t[7]),$e(s,"keyup",t[5]),$e(s,"keydown",t[6]),$e(s,"input",t[8])],a=!0)},p(c,[u]){u&16&&c[4]!==n.innerHTML&&(n.innerHTML=c[4]),u&4&&M(s,"placeholder",c[2]),u&8&&r!==(r=(c[3]||"bg-gray-600 text-gray-300")+" text-gray-400 flex m-auto p-2 rounded-md border border-solid border-gray-400 focus:text-gray-300 outline-none transition-all duration-200 absolute inset-0 w-full h-full resize-none svelte-1ux9168")&&M(s,"class",r),u&1&&Ta(s,c[0]),u&2&&o!==(o="relative "+(c[1]||"")+" svelte-1ux9168")&&M(e,"class",o)},i:qe,o:qe,d(c){c&&P(e),a=!1,Vn(l)}}}function u8(t,e,n){let{value:i=""}=e,{cClass:s=""}=e,{placeholder:r=""}=e,{class:o=""}=e,a="<br>",l=Oa();function c(d){l("keyup",d)}function u(d){l("keydown",d)}function f(){a=this.innerHTML,n(4,a),n(0,i)}function h(){i=this.value,n(0,i)}return t.$$set=d=>{"value"in d&&n(0,i=d.value),"cClass"in d&&n(1,s=d.cClass),"placeholder"in d&&n(2,r=d.placeholder),"class"in d&&n(3,o=d.class)},t.$$.update=()=>{t.$$.dirty&1&&n(4,a=i.replace(/\n/g,"<br>")+"<br>")},[i,s,r,o,a,c,u,f,h]}class Rh extends xt{constructor(e){super(),wt(this,e,u8,c8,yt,{value:0,cClass:1,placeholder:2,class:3})}}function m2(t){let e,n,i,s;return{c(){e=C("span"),n=ae(t[2]),M(e,"class","label ml-1 cursor-pointer")},m(r,o){R(r,e,o),E(e,n),i||(s=$e(e,"click",t[5]),i=!0)},p(r,o){o&4&&ke(n,r[2])},d(r){r&&P(e),i=!1,s()}}}function f8(t){let e,n,i,s,r,o,a,l=t[2]&&m2(t);return{c(){e=C("div"),n=C("div"),i=C("div"),r=O(),l&&l.c(),M(i,"class","mark svelte-1wgyrek"),M(n,"class",s="box "+t[4]+" svelte-1wgyrek"),pt(n,"checked",t[0]),pt(n,"undef",t[1]),M(e,"class","wrapper flex items-center svelte-1wgyrek"),pt(e,"disabled",t[3])},m(c,u){R(c,e,u),E(e,n),E(n,i),E(e,r),l&&l.m(e,null),o||(a=$e(n,"click",t[5]),o=!0)},p(c,[u]){u&16&&s!==(s="box "+c[4]+" svelte-1wgyrek")&&M(n,"class",s),u&17&&pt(n,"checked",c[0]),u&18&&pt(n,"undef",c[1]),c[2]?l?l.p(c,u):(l=m2(c),l.c(),l.m(e,null)):l&&(l.d(1),l=null),u&8&&pt(e,"disabled",c[3])},i:qe,o:qe,d(c){c&&P(e),l&&l.d(),o=!1,a()}}}function h8(t,e,n){let{checked:i=!1}=e,{undef:s=!1}=e,{label:r=""}=e,{disabled:o=!1}=e,{class:a=""}=e;const l=Oa();function c(){n(0,i=!i),i&&l("checked"),!i&&l("unchecked"),l("change",{value:i})}return ji(()=>{l("change",{value:i})}),t.$$set=u=>{"checked"in u&&n(0,i=u.checked),"undef"in u&&n(1,s=u.undef),"label"in u&&n(2,r=u.label),"disabled"in u&&n(3,o=u.disabled),"class"in u&&n(4,a=u.class)},[i,s,r,o,a,c]}class vc extends xt{constructor(e){super(),wt(this,e,h8,f8,yt,{checked:0,undef:1,label:2,disabled:3,class:4})}}function g2(t){let e,n,i,s;return{c(){e=C("input"),M(e,"class",n=hs(t[8]||"")+" svelte-h8jhw4"),e.disabled=t[4],M(e,"type","text"),M(e,"size",t[3]),M(e,"placeholder","")},m(r,o){R(r,e,o),t[16](e),Ta(e,t[1]),i||(s=[$e(e,"input",t[17]),$e(e,"keydown",t[12]),$e(e,"keyup",t[11]),$e(e,"input",t[13]),$e(e,"change",t[14])],i=!0)},p(r,o){o&256&&n!==(n=hs(r[8]||"")+" svelte-h8jhw4")&&M(e,"class",n),o&16&&(e.disabled=r[4]),o&8&&M(e,"size",r[3]),o&2&&e.value!==r[1]&&Ta(e,r[1])},d(r){r&&P(e),t[16](null),i=!1,Vn(s)}}}function _2(t){let e,n,i,s;return{c(){e=C("input"),M(e,"class",n=hs(t[8]||"")+" svelte-h8jhw4"),M(e,"min",t[5]),M(e,"max",t[6]),e.disabled=t[4],M(e,"step",t[7]),M(e,"type","number"),M(e,"placeholder","")},m(r,o){R(r,e,o),Ta(e,t[1]),i||(s=[$e(e,"keydown",t[12]),$e(e,"keyup",t[11]),$e(e,"input",t[13]),$e(e,"change",t[14]),$e(e,"input",t[18])],i=!0)},p(r,o){o&256&&n!==(n=hs(r[8]||"")+" svelte-h8jhw4")&&M(e,"class",n),o&32&&M(e,"min",r[5]),o&64&&M(e,"max",r[6]),o&16&&(e.disabled=r[4]),o&128&&M(e,"step",r[7]),o&2&&gE(e.value)!==r[1]&&Ta(e,r[1])},d(r){r&&P(e),i=!1,Vn(s)}}}function b2(t){let e,n,i,s;return{c(){e=C("input"),M(e,"class",n=hs(t[8]||"")+" svelte-h8jhw4"),e.disabled=t[4],M(e,"type","date"),M(e,"placeholder","")},m(r,o){R(r,e,o),Ta(e,t[1]),i||(s=[$e(e,"keydown",t[12]),$e(e,"keyup",t[11]),$e(e,"input",t[13]),$e(e,"change",t[14]),$e(e,"input",t[19])],i=!0)},p(r,o){o&256&&n!==(n=hs(r[8]||"")+" svelte-h8jhw4")&&M(e,"class",n),o&16&&(e.disabled=r[4]),o&2&&Ta(e,r[1])},d(r){r&&P(e),i=!1,Vn(s)}}}function d8(t){let e,n,i,s,r,o,a,l=t[0]==="text"&&g2(t),c=t[0]==="number"&&_2(t),u=t[0]==="date"&&b2(t);return{c(){e=C("div"),l&&l.c(),n=O(),c&&c.c(),i=O(),u&&u.c(),s=O(),r=C("span"),o=ae(t[2]),M(r,"class","placeholder svelte-h8jhw4"),M(e,"class",a="w-full h-10 px-2 py-2 rounded-md relative transition-all duration-200 border border-solid border-gray-400 wrapper focus-within:shadow focus-within:shadow-blue-200 pointer-events-none "+(t[9]||"bg-gray-600 text-gray-300")+" svelte-h8jhw4")},m(f,h){R(f,e,h),l&&l.m(e,null),E(e,n),c&&c.m(e,null),E(e,i),u&&u.m(e,null),E(e,s),E(e,r),E(r,o)},p(f,[h]){f[0]==="text"?l?l.p(f,h):(l=g2(f),l.c(),l.m(e,n)):l&&(l.d(1),l=null),f[0]==="number"?c?c.p(f,h):(c=_2(f),c.c(),c.m(e,i)):c&&(c.d(1),c=null),f[0]==="date"?u?u.p(f,h):(u=b2(f),u.c(),u.m(e,s)):u&&(u.d(1),u=null),h&4&&ke(o,f[2]),h&512&&a!==(a="w-full h-10 px-2 py-2 rounded-md relative transition-all duration-200 border border-solid border-gray-400 wrapper focus-within:shadow focus-within:shadow-blue-200 pointer-events-none "+(f[9]||"bg-gray-600 text-gray-300")+" svelte-h8jhw4")&&M(e,"class",a)},i:qe,o:qe,d(f){f&&P(e),l&&l.d(),c&&c.d(),u&&u.d()}}}function p8(t,e,n){const i=Oa();let{placeholder:s=""}=e,{value:r=""}=e,{type:o="text"}=e,{size:a=void 0}=e,{disabled:l=!1}=e,{focus:c=!1}=e,{min:u=void 0}=e,{max:f=void 0}=e,{step:h=1}=e,{inpClass:d=""}=e,{class:p=""}=e,m;function _(T){i("keyup",T),T.code==="Enter"&&i("UENTER",T),T.code==="Esc"&&i("UESCAPE",T)}function b(T){i("keydown",T),T.code==="Enter"&&i("DENTER",T),T.code==="Esc"&&i("DESCAPE",T)}function g(T){i("input",T)}function x(T){i("change",T)}function y(T){vt[T?"unshift":"push"](()=>{m=T,n(10,m)})}function v(){r=this.value,n(1,r)}function w(){r=gE(this.value),n(1,r)}function S(){r=this.value,n(1,r)}return t.$$set=T=>{"placeholder"in T&&n(2,s=T.placeholder),"value"in T&&n(1,r=T.value),"type"in T&&n(0,o=T.type),"size"in T&&n(3,a=T.size),"disabled"in T&&n(4,l=T.disabled),"focus"in T&&n(15,c=T.focus),"min"in T&&n(5,u=T.min),"max"in T&&n(6,f=T.max),"step"in T&&n(7,h=T.step),"inpClass"in T&&n(8,d=T.inpClass),"class"in T&&n(9,p=T.class)},t.$$.update=()=>{t.$$.dirty&1&&n(0,o=["text","number","date"].indexOf(o)===-1?"text":o),t.$$.dirty&33792&&(c?m&&Tf().then(()=>m.focus()):m&&Tf().then(()=>m.blur()))},[o,r,s,a,l,u,f,h,d,p,m,_,b,g,x,c,y,v,w,S]}class hi extends xt{constructor(e){super(),wt(this,e,p8,d8,yt,{placeholder:2,value:1,type:0,size:3,disabled:4,focus:15,min:5,max:6,step:7,inpClass:8,class:9})}}function m8(t){let e,n,i;return{c(){e=C("div"),e.innerHTML='<div class="mark svelte-gujlnz"></div>',M(e,"class","wrapper svelte-gujlnz"),pt(e,"checked",t[0])},m(s,r){R(s,e,r),n||(i=$e(e,"click",t[1]),n=!0)},p(s,[r]){r&1&&pt(e,"checked",s[0])},i:qe,o:qe,d(s){s&&P(e),n=!1,i()}}}function g8(t,e,n){let{checked:i=!1}=e;const s=Oa();function r(){n(0,i=!i),i&&s("checked"),!i&&s("unchecked"),s("change",{value:i})}return t.$$set=o=>{"checked"in o&&n(0,i=o.checked)},[i,r]}class _8 extends xt{constructor(e){super(),wt(this,e,g8,m8,yt,{checked:0})}}function Lt(t,e,n,i){if(t===1/0)return"DNF";if(isNaN(t))return e?"0.00":"0";let s=~~(t/10),r=s%100;s=~~(s/100);let o=s%60;s=~~(s/60);let a=s%60;s=~~(s/60);let l=s%60;s=~~(s/60);let c=[l,a].filter(p=>p!=0);c.push(o);let u=["s","m","h"][c.length-1],f=~~(i||0),h=c.map((p,m)=>m>0?["",'<span class="digit">'][f]+("00"+p).substr(-2,2)+["","</span>"][f]:["",'<span class="digit">'][f]+p+["","</span>"][f]).join(":");return(e||n&&u==="s"?h+`.${["",'<span class="digit">'][f]+("00"+r).substr(-2,2)+["","</span>"][f]}`:h)+(n?u:"")}function v2(t,e,n,i){return t.penalty===ft.DNS?"DNS":t.penalty===ft.DNF?"DNF":Lt(t.time,e,n,i)}function Qr(t){return t.penalty===ft.DNF||t.penalty===ft.DNS}const Ac=class{constructor(){Me(this,"notificationSub");this.notificationSub=nn([])}static getInstance(){return Ac._instance?Ac._instance:Ac._instance=new Ac}addNotification(e){this.notificationSub.update(n=>[...n,e])}removeNotification(e){this.notificationSub.update(n=>n.filter(i=>i.key!=e))}};let Xr=Ac;Me(Xr,"_instance");class y2{constructor(e){Me(this,"_type");Me(this,"_description");Me(this,"active");Me(this,"isRunning");Me(this,"time");Me(this,"ref");Me(this,"refPrevention");Me(this,"itv");Me(this,"isValid");Me(this,"context");Me(this,"_state");Me(this,"_ready");Me(this,"_session");Me(this,"_lastSolve");Me(this,"subs");this._type="Keyboard",this._description="Keyboard handler",this.active=!1,this.isRunning=!1,this.time=0,this.ref=0,this.refPrevention=0,this.itv=null,this.isValid=!0,this.context=e,this._state=Kt.CLEAN,this._ready=!1,this._session=null,this._lastSolve=null,this.subs=[]}get type(){return this._type}get description(){return this._description}init(){if(this.active)return;this.active=!0;const{state:e,ready:n,session:i,time:s,lastSolve:r,isRunning:o}=this.context;this.subs.push(e.subscribe(a=>{this._state=a})),this.subs.push(n.subscribe(a=>{this._ready=a})),this.subs.push(i.subscribe(a=>{this._session=a})),this.subs.push(r.subscribe(a=>{this._lastSolve=a})),this.subs.push(s.subscribe(a=>{this.time=a})),this.subs.push(o.subscribe(a=>{this.isRunning=a}))}keyUpHandler(e){var l,c;if(!this.active)return;const{code:n}=e,{state:i,ready:s,time:r,decimals:o,createNewSolve:a}=this.context;this.isValid=!0,n==="Space"&&(this._state===Kt.PREVENTION?this._ready?(a(),(l=this._session)!=null&&l.settings.hasInspection?(i.update(()=>Kt.INSPECTION),o.update(()=>!1),r.update(()=>0),s.update(()=>!1),this.ref=performance.now()+(((c=this._session)==null?void 0:c.settings.inspection)||15)*1e3,this.runTimer(-1,!0)):(i.update(()=>Kt.RUNNING),s.update(()=>!1),this.ref=performance.now(),o.update(()=>!0),this.stopTimer(),this._lastSolve.penalty===ft.P2&&(this.ref-=2e3),this.runTimer(1))):i.update(()=>Kt.CLEAN):this._state===Kt.INSPECTION&&(i.update(()=>Kt.RUNNING),this.ref=performance.now(),o.update(()=>!0),this.stopTimer(),this._lastSolve.penalty===ft.P2&&(this.ref-=2e3),this.runTimer(1)))}keyDownHandler(e){var c;if(!this.active)return;const{code:n}=e,{state:i,ready:s,time:r,reset:o,initScrambler:a,addSolve:l}=this.context;if(n==="Space"){if(!this.isValid&&this._state===Kt.RUNNING)return;this.isValid=!1,this._state===Kt.STOPPED||this._state===Kt.CLEAN?(i.update(()=>Kt.PREVENTION),r.update(()=>0),this.refPrevention=performance.now()):this._state===Kt.PREVENTION?performance.now()-this.refPrevention>500&&s.update(()=>!0):this._state===Kt.RUNNING&&(this.stopTimer(),r.update(()=>~~(performance.now()-this.ref)),l(),i.update(()=>Kt.STOPPED),s.update(()=>!1),this._lastSolve.time=this.time,a())}else["KeyR","Escape","KeyS"].indexOf(n)>-1?n==="KeyS"&&e.ctrlKey&&!this.isRunning||n==="Escape"&&this.isRunning&&((c=this._session)==null?void 0:c.settings.scrambleAfterCancel)?(o(),a()):o():this._state===Kt.RUNNING&&(this.stopTimer(),r.update(()=>~~(performance.now()-this.ref)),l(),i.update(()=>Kt.STOPPED),s.update(()=>!1),this._lastSolve.time=this.time,a())}runTimer(e,n){if(!this.active)return;const{state:i,time:s}=this.context;this.itv=setInterval(()=>{let r=e<0?this.ref-performance.now():performance.now()-this.ref;if(n&&(r=Math.ceil(r/1e3)*1e3),r<-2){this.stopTimer(),i.update(()=>Kt.STOPPED),this._lastSolve.penalty=ft.DNS;return}if(r<=0){s.update(()=>0),this.stopTimer(),this._lastSolve.penalty=ft.P2;return}s.update(()=>~~r)},47)}stopTimer(){if(!this.active)return;const{time:e}=this.context;this.time!=0&&e.update(()=>performance.now()-this.ref),clearInterval(this.itv)}disconnect(){!this.active||(this.active=!1,this.subs.forEach(e=>e()))}}const b8=""+new URL("audio-processor.ad929a7e.ts",import.meta.url).href;class jf{constructor(e){Me(this,"context");Me(this,"device");Me(this,"audio_context");Me(this,"audio_stream");Me(this,"source",null);Me(this,"node",null);Me(this,"lastState");Me(this,"_state");Me(this,"_lastSolve");Me(this,"_time",0);Me(this,"subs");this.context=e,this.device="",this.audio_context=new AudioContext,this.lastState=null,this._state=Kt.CLEAN,this._lastSolve=null,this.subs=[]}static updateInputDevices(){let e=[],n=new Promise(function(i,s){i(e)});return navigator.mediaDevices.enumerateDevices().then(function(i){for(let s=0;s<i.length;s++){let r=i[s];r.kind==="audioinput"&&e.push([r.deviceId,r.label||"microphone "+(e.length+1)])}return n})}static autoDetect(){return new Promise(async(e,n)=>{let i=await jf.updateInputDevices(),s=!1,r=a=>{a.on&&(o.forEach(l=>l.disconnect()),s=!0,e(a.device))},o=i.map(a=>{let l=new jf(null);return l.setCallback(r),l.init("",a[0],!0),l});setTimeout(()=>{o.forEach(a=>a.disconnect()),s||n()},2e4)})}init(e,n,i){if(this.context){const{state:r,lastSolve:o,time:a}=this.context;this.subs.push(r.subscribe(l=>this._state=l)),this.subs.push(o.subscribe(l=>this._lastSolve=l)),this.subs.push(a.subscribe(l=>this._time=l))}let s={echoCancellation:!1,noiseSuppression:!1};return n&&(this.device=n,s.deviceId={exact:n}),this.audio_stream==null?navigator.mediaDevices.getUserMedia({audio:s}).then(r=>{if(this.audio_context.state=="suspended"&&!i)return Promise.reject();this.success(r)},console.log):Promise.resolve()}setCallback(e){this.callback=e}async success(e){this.audio_stream=e,this.source=this.audio_context.createMediaStreamSource(e),await this.audio_context.audioWorklet.addModule(b8),this.node=new AudioWorkletNode(this.audio_context,"stackmat-processor",{parameterData:{sampleRate:this.audio_context.sampleRate,curTimer:0}}),this.node.port.onmessage=n=>{this.callback(n.data)},this.source.connect(this.node),this.node.connect(this.audio_context.destination)}disconnect(){var e,n;if(this.subs.forEach(i=>i()),this.audio_stream!=null)try{(e=this.source)==null||e.disconnect(this.node),(n=this.node)==null||n.disconnect(this.audio_context.destination),this.audio_context.close(),this.audio_stream=void 0}catch{}}callback(e){var c;const{state:n,time:i,ready:s,stackmatStatus:r,createNewSolve:o,addSolve:a,initScrambler:l}=this.context;if(r.update(()=>e.on),this.lastState&&this.lastState.time_milli>e.time_milli&&n.update(()=>Kt.CLEAN),e.on===!1){this._state!=Kt.CLEAN&&(n.update(()=>Kt.CLEAN),i.update(()=>0),l()),this.lastState=e;return}e.running?this._state!=Kt.RUNNING&&!((c=this.lastState)!=null&&c.running)&&(o(),n.update(()=>Kt.RUNNING)):this._state===Kt.RUNNING&&(n.update(()=>Kt.STOPPED),a(),s.update(()=>!1),this._lastSolve.time=this._time,l()),i.update(()=>e.time_milli),this.lastState=e}keyUpHandler(){}keyDownHandler(){}stopTimer(){}}class v8{init(){}disconnect(){}keyUpHandler(){}keyDownHandler(){}stopTimer(){}}function w2(t,e,n){const i=t.slice();return i[120]=e[n],i}function x2(t,e,n){const i=t.slice();return i[123]=e[n],i}function M2(t,e,n){const i=t.slice();return i[126]=e[n],i}function S2(t,e,n){const i=t.slice();return i[129]=e[n],i}function E2(t){let e;return{c(){e=C("span"),e.textContent=`${C8}`,M(e,"class","svelte-9uxc7s")},m(n,i){R(n,e,i)},p:qe,d(n){n&&P(e)}}}function y8(t){let e,n,i,s,r,o;var a=t[129].icon;function l(c){return{props:{width:"100%",height:"100%"}}}return a&&(n=Jr(a,l())),{c(){e=C("button"),n&&ue(n.$$.fragment),i=O(),M(e,"tabindex","0"),M(e,"class","my-3 mx-1 w-5 h-5 "+Yf+" svelte-9uxc7s")},m(c,u){R(c,e,u),n&&le(n,e,null),R(c,i,u),s=!0,r||(o=$e(e,"click",function(){Il(t[129].handler)&&t[129].handler.apply(this,arguments)}),r=!0)},p(c,u){if(t=c,a!==(a=t[129].icon)){if(n){ot();const f=n;H(f.$$.fragment,1,0,()=>{ce(f,1)}),at()}a?(n=Jr(a,l()),ue(n.$$.fragment),I(n.$$.fragment,1),le(n,e,null)):n=null}},i(c){s||(n&&I(n.$$.fragment,c),s=!0)},o(c){n&&H(n.$$.fragment,c),s=!1},d(c){c&&P(e),n&&ce(n),c&&P(i),r=!1,o()}}}function T2(t){let e,n;return e=new $i({props:{class:"cursor-pointer",position:"left",text:t[129].text,hasKeybinding:!0,$$slots:{default:[y8]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&262145&&(r.text=i[129].text),s[0]&262145|s[4]&256&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function k2(t){let e,n,i,s,r,o,a,l,c,u;s=new qo({props:{width:"1.2rem",height:"1.2rem"}});function f(d){t[69](d)}let h={cClass:"w-full h-full",class:"bg-gray-600 text-gray-300 p-4"};return t[12]!==void 0&&(h.value=t[12]),o=new Rh({props:h}),vt.push(()=>Vt(o,"value",f)),{c(){e=C("div"),n=C("div"),i=C("span"),ue(s.$$.fragment),r=O(),ue(o.$$.fragment),M(i,"class","ml-auto mr-2 cursor-pointer text-gray-700"),M(n,"class","relative w-full h-6 cursor-move flex items-center"),M(e,"id","notes"),M(e,"class","fixed z-10 w-56 h-56 bg-violet-400 rounded-md svelte-9uxc7s"),Si(e,"--left",t[10]+"px"),Si(e,"--top",t[11]+"px"),Si(e,"--width",lk+"px"),Si(e,"--height","calc("+ck+"px + 1.5rem)")},m(d,p){R(d,e,p),E(e,n),E(n,i),le(s,i,null),E(e,r),le(o,e,null),l=!0,c||(u=[$e(i,"click",t[68]),$e(n,"mousedown",t[59])],c=!0)},p(d,p){const m={};!a&&p[0]&4096&&(a=!0,m.value=d[12],Ht(()=>a=!1)),o.$set(m),(!l||p[0]&1024)&&Si(e,"--left",d[10]+"px"),(!l||p[0]&2048)&&Si(e,"--top",d[11]+"px")},i(d){l||(I(s.$$.fragment,d),I(o.$$.fragment,d),l=!0)},o(d){H(s.$$.fragment,d),H(o.$$.fragment,d),l=!1},d(d){d&&P(e),ce(s),ce(o),c=!1,Vn(u)}}}function w8(t){var c,u;let e,n=Lt(t[23],t[24],!1)+"",i,s,r,o,a,l=((u=(c=t[2])==null?void 0:c.settings)==null?void 0:u.input)==="StackMat"&&A2(t);return{c(){e=C("span"),i=ae(n),r=O(),l&&l.c(),o=ts(),M(e,"class","timer "+Yf+" svelte-9uxc7s"),e.hidden=s=t[22]===Kt.RUNNING&&!t[2].settings.showElapsedTime,pt(e,"prevention",t[22]===Kt.PREVENTION),pt(e,"ready",t[21])},m(f,h){R(f,e,h),E(e,i),R(f,r,h),l&&l.m(f,h),R(f,o,h),a=!0},p(f,h){var d,p;(!a||h[0]&25165824)&&n!==(n=Lt(f[23],f[24],!1)+"")&&ke(i,n),(!a||h[0]&4194308&&s!==(s=f[22]===Kt.RUNNING&&!f[2].settings.showElapsedTime))&&(e.hidden=s),(!a||h[0]&4194304)&&pt(e,"prevention",f[22]===Kt.PREVENTION),(!a||h[0]&2097152)&&pt(e,"ready",f[21]),((p=(d=f[2])==null?void 0:d.settings)==null?void 0:p.input)==="StackMat"?l?(l.p(f,h),h[0]&4&&I(l,1)):(l=A2(f),l.c(),I(l,1),l.m(o.parentNode,o)):l&&(ot(),H(l,1,1,()=>{l=null}),at())},i(f){a||(I(l),a=!0)},o(f){H(l),a=!1},d(f){f&&P(e),f&&P(r),l&&l.d(f),f&&P(o)}}}function x8(t){let e,n,i,s;function r(a){t[70](a)}let o={class:"w-full h-36 text-center "+(ew(t[4])?"":"border-red-400 border-2")+`\r
            focus-within:shadow-black`,inpClass:"text-center"};return t[4]!==void 0&&(o.value=t[4]),n=new hi({props:o}),vt.push(()=>Vt(n,"value",r)),n.$on("UENTER",t[62]),{c(){e=C("div"),ue(n.$$.fragment),M(e,"id","manual-inp"),M(e,"class","svelte-9uxc7s")},m(a,l){R(a,e,l),le(n,e,null),s=!0},p(a,l){const c={};l[0]&16&&(c.class="w-full h-36 text-center "+(ew(a[4])?"":"border-red-400 border-2")+`\r
            focus-within:shadow-black`),!i&&l[0]&16&&(i=!0,c.value=a[4],Ht(()=>i=!1)),n.$set(c)},i(a){s||(I(n.$$.fragment,a),s=!0)},o(a){H(n.$$.fragment,a),s=!1},d(a){a&&P(e),ce(n)}}}function A2(t){let e,n=t[1].TIMER.stackmatStatus+"",i,s,r,o,a,l;var c=t[25]?f2:h2;function u(f){return{}}return c&&(o=Jr(c,u())),{c(){e=C("span"),i=ae(n),s=ae(`:\r
          \r
          `),r=C("span"),o&&ue(o.$$.fragment),M(r,"class",a=t[25]?"text-green-600":"text-red-600"),M(e,"class","text-2xl flex gap-2 items-center")},m(f,h){R(f,e,h),E(e,i),E(e,s),E(e,r),o&&le(o,r,null),l=!0},p(f,h){if((!l||h[0]&2)&&n!==(n=f[1].TIMER.stackmatStatus+"")&&ke(i,n),c!==(c=f[25]?f2:h2)){if(o){ot();const d=o;H(d.$$.fragment,1,0,()=>{ce(d,1)}),at()}c?(o=Jr(c,u()),ue(o.$$.fragment),I(o.$$.fragment,1),le(o,r,null)):o=null}(!l||h[0]&33554432&&a!==(a=f[25]?"text-green-600":"text-red-600"))&&M(r,"class",a)},i(f){l||(o&&I(o.$$.fragment,f),l=!0)},o(f){o&&H(o.$$.fragment,f),l=!1},d(f){f&&P(e),o&&ce(o)}}}function L2(t){let e,n,i=t[5].slice(Number(t[0]),t[5].length),s=[];for(let o=0;o<i.length;o+=1)s[o]=C2(M2(t,i,o));const r=o=>H(s[o],1,1,()=>{s[o]=null});return{c(){e=C("div");for(let o=0;o<s.length;o+=1)s[o].c();M(e,"class","flex justify-center w-full"),pt(e,"show",t[22]===Kt.STOPPED)},m(o,a){R(o,e,a);for(let l=0;l<s.length;l+=1)s[l].m(e,null);n=!0},p(o,a){if(a[0]&41){i=o[5].slice(Number(o[0]),o[5].length);let l;for(l=0;l<i.length;l+=1){const c=M2(o,i,l);s[l]?(s[l].p(c,a),I(s[l],1)):(s[l]=C2(c),s[l].c(),I(s[l],1),s[l].m(e,null))}for(ot(),l=i.length;l<s.length;l+=1)r(l);at()}(!n||a[0]&4194304)&&pt(e,"show",o[22]===Kt.STOPPED)},i(o){if(!n){for(let a=0;a<i.length;a+=1)I(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)H(s[a]);n=!1},d(o){o&&P(e),en(s,o)}}}function M8(t){let e,n,i,s,r,o,a;var l=t[126].icon;function c(u){return{props:{width:"100%",height:"100%"}}}return l&&(n=Jr(l,c())),{c(){e=C("div"),n&&ue(n.$$.fragment),s=O(),M(e,"class",i="my-3 mx-1 w-5 h-5 "+(t[126].highlight(t[3][0]||{})?"text-red-500":""))},m(u,f){R(u,e,f),n&&le(n,e,null),R(u,s,f),r=!0,o||(a=$e(e,"click",function(){Il(t[126].handler)&&t[126].handler.apply(this,arguments)}),o=!0)},p(u,f){if(t=u,l!==(l=t[126].icon)){if(n){ot();const h=n;H(h.$$.fragment,1,0,()=>{ce(h,1)}),at()}l?(n=Jr(l,c()),ue(n.$$.fragment),I(n.$$.fragment,1),le(n,e,null)):n=null}(!r||f[0]&41&&i!==(i="my-3 mx-1 w-5 h-5 "+(t[126].highlight(t[3][0]||{})?"text-red-500":"")))&&M(e,"class",i)},i(u){r||(n&&I(n.$$.fragment,u),r=!0)},o(u){n&&H(n.$$.fragment,u),r=!1},d(u){u&&P(e),n&&ce(n),u&&P(s),o=!1,a()}}}function C2(t){let e,n;return e=new $i({props:{class:"cursor-pointer",position:"top",text:t[126].text,$$slots:{default:[M8]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&33&&(r.text=i[126].text),s[0]&41|s[4]&256&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function P2(t){let e,n,i,s,r=t[1].TIMER.cross+"",o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A=t[1].TIMER.best+"",L,D,B,U,N,$,W,j=t[1].TIMER.worst+"",J,se,ne,K,q,te,re,Oe=t[1].TIMER.average+"",Ee,ye,xe,Ae,De,de,me,We=t[1].TIMER.deviation+"",Ue,be,F,V,_e,oe,X,fe=t[1].TIMER.count+"",Le,Pe,Ye,Ke,Z=t[31].count.value+"",ve,Re,He,Ze,_t,ln,lt,gt,bn,Ot,Nn,Pn,cn,mn,jt,Gt,Bn,rn=t[30]&&R2(t);x=new JF({props:{width:"100%",height:"100%"}});let vn=!t[31].best.value&&I2(),z=t[31].best.value&&D2(t),Se=!t[31].worst.value&&O2(),Te=t[31].worst.value&&N2(t),Be=!t[31].avg.value&&B2(),Je=t[31].avg.value&&F2(t),ct=!t[31].dev.value&&z2(),ut=t[31].dev.value&&U2(t),Dt=!(t[31].Mo3.value>-1)&&H2(),kt=t[31].Mo3.value>-1&&V2(t),tn=!(t[31].Ao5.value>-1)&&G2(),Jt=t[31].Ao5.value>-1&&W2(t),zt=["Ao12","Ao50","Ao100","Ao200","Ao500","Ao1k","Ao2k"],Xt=[];for(let tt=0;tt<7;tt+=1)Xt[tt]=q2(x2(t,zt,tt));return{c(){e=C("div"),n=C("table"),i=C("tr"),s=C("td"),o=ae(r),a=O(),l=C("td"),c=ae(t[28]),u=O(),f=C("tr"),h=C("td"),h.textContent="XCross",d=O(),p=C("td"),m=ae(t[29]),_=O(),rn&&rn.c(),b=O(),g=C("div"),ue(x.$$.fragment),y=O(),v=C("div"),w=C("div"),S=C("table"),T=C("tr"),k=C("td"),L=ae(A),D=ae(":"),B=O(),vn&&vn.c(),U=O(),z&&z.c(),N=O(),$=C("tr"),W=C("td"),J=ae(j),se=ae(":"),ne=O(),Se&&Se.c(),K=O(),Te&&Te.c(),q=O(),te=C("tr"),re=C("td"),Ee=ae(Oe),ye=ae(":"),xe=O(),Be&&Be.c(),Ae=O(),Je&&Je.c(),De=O(),de=C("tr"),me=C("td"),Ue=ae(We),be=ae(":"),F=O(),ct&&ct.c(),V=O(),ut&&ut.c(),_e=O(),oe=C("tr"),X=C("td"),Le=ae(fe),Pe=ae(":"),Ye=O(),Ke=C("td"),ve=ae(Z),Re=O(),He=C("tr"),Ze=C("td"),Ze.textContent="Mo3:",_t=O(),Dt&&Dt.c(),ln=O(),kt&&kt.c(),lt=O(),gt=C("tr"),bn=C("td"),bn.textContent="Ao5:",Ot=O(),tn&&tn.c(),Nn=O(),Jt&&Jt.c(),Pn=O(),cn=C("div"),mn=C("table");for(let tt=0;tt<7;tt+=1)Xt[tt].c();M(l,"class","text-yellow-500"),M(p,"class","text-yellow-500"),M(n,"class","inline-block align-middle transition-all duration-300 svelte-9uxc7s"),pt(n,"nshow",!t[27]),M(g,"id","bulb"),M(g,"class","w-8 h-8 inline-block align-middle mx-0 my-2 cursor-pointer svelte-9uxc7s"),pt(g,"nshow",!t[27]),M(e,"id","hints"),M(e,"class","bg-white bg-opacity-10 w-max p-2 "+Yf+" rounded-md shadow-md absolute select-none left-0 top-1/4 transition-all duration-1000 svelte-9uxc7s"),pt(e,"isVisible",t[26]&&!t[20]),M(T,"class","svelte-9uxc7s"),pt(T,"better",t[31].best.better&&t[31].counter.value>0&&t[31].best.value>-1),M(te,"class","svelte-9uxc7s"),pt(te,"better",t[31].avg.better&&t[31].counter.value>0),M(He,"class","svelte-9uxc7s"),pt(He,"better",t[31].Mo3.better&&t[31].counter.value>0&&t[31].Mo3.value>-1),M(gt,"class","svelte-9uxc7s"),pt(gt,"better",t[31].Ao5.better&&t[31].counter.value>0&&t[31].Ao5.value>-1),M(S,"class","ml-3 svelte-9uxc7s"),M(w,"class","left absolute select-none bottom-0 left-0  svelte-9uxc7s"),M(mn,"class","mr-3 svelte-9uxc7s"),M(cn,"class","right absolute select-none bottom-0 right-0 svelte-9uxc7s"),M(v,"id","statistics"),M(v,"class",Yf+" pointer-events-none transition-all duration-300 svelte-9uxc7s"),pt(v,"isRunning",t[20])},m(tt,St){R(tt,e,St),E(e,n),E(n,i),E(i,s),E(s,o),E(i,a),E(i,l),E(l,c),E(n,u),E(n,f),E(f,h),E(f,d),E(f,p),E(p,m),E(n,_),rn&&rn.m(n,null),E(e,b),E(e,g),le(x,g,null),R(tt,y,St),R(tt,v,St),E(v,w),E(w,S),E(S,T),E(T,k),E(k,L),E(k,D),E(T,B),vn&&vn.m(T,null),E(T,U),z&&z.m(T,null),E(S,N),E(S,$),E($,W),E(W,J),E(W,se),E($,ne),Se&&Se.m($,null),E($,K),Te&&Te.m($,null),E(S,q),E(S,te),E(te,re),E(re,Ee),E(re,ye),E(te,xe),Be&&Be.m(te,null),E(te,Ae),Je&&Je.m(te,null),E(S,De),E(S,de),E(de,me),E(me,Ue),E(me,be),E(de,F),ct&&ct.m(de,null),E(de,V),ut&&ut.m(de,null),E(S,_e),E(S,oe),E(oe,X),E(X,Le),E(X,Pe),E(oe,Ye),E(oe,Ke),E(Ke,ve),E(S,Re),E(S,He),E(He,Ze),E(He,_t),Dt&&Dt.m(He,null),E(He,ln),kt&&kt.m(He,null),E(S,lt),E(S,gt),E(gt,bn),E(gt,Ot),tn&&tn.m(gt,null),E(gt,Nn),Jt&&Jt.m(gt,null),E(v,Pn),E(v,cn),E(cn,mn);for(let An=0;An<7;An+=1)Xt[An].m(mn,null);jt=!0,Gt||(Bn=$e(g,"click",t[71]),Gt=!0)},p(tt,St){if((!jt||St[0]&2)&&r!==(r=tt[1].TIMER.cross+"")&&ke(o,r),(!jt||St[0]&268435456)&&ke(c,tt[28]),(!jt||St[0]&536870912)&&ke(m,tt[29]),tt[30]?rn?rn.p(tt,St):(rn=R2(tt),rn.c(),rn.m(n,null)):rn&&(rn.d(1),rn=null),(!jt||St[0]&134217728)&&pt(n,"nshow",!tt[27]),(!jt||St[0]&134217728)&&pt(g,"nshow",!tt[27]),(!jt||St[0]&68157440)&&pt(e,"isVisible",tt[26]&&!tt[20]),(!jt||St[0]&2)&&A!==(A=tt[1].TIMER.best+"")&&ke(L,A),tt[31].best.value?vn&&(vn.d(1),vn=null):vn||(vn=I2(),vn.c(),vn.m(T,U)),tt[31].best.value?z?z.p(tt,St):(z=D2(tt),z.c(),z.m(T,null)):z&&(z.d(1),z=null),(!jt||St[1]&1)&&pt(T,"better",tt[31].best.better&&tt[31].counter.value>0&&tt[31].best.value>-1),(!jt||St[0]&2)&&j!==(j=tt[1].TIMER.worst+"")&&ke(J,j),tt[31].worst.value?Se&&(Se.d(1),Se=null):Se||(Se=O2(),Se.c(),Se.m($,K)),tt[31].worst.value?Te?Te.p(tt,St):(Te=N2(tt),Te.c(),Te.m($,null)):Te&&(Te.d(1),Te=null),(!jt||St[0]&2)&&Oe!==(Oe=tt[1].TIMER.average+"")&&ke(Ee,Oe),tt[31].avg.value?Be&&(Be.d(1),Be=null):Be||(Be=B2(),Be.c(),Be.m(te,Ae)),tt[31].avg.value?Je?Je.p(tt,St):(Je=F2(tt),Je.c(),Je.m(te,null)):Je&&(Je.d(1),Je=null),(!jt||St[1]&1)&&pt(te,"better",tt[31].avg.better&&tt[31].counter.value>0),(!jt||St[0]&2)&&We!==(We=tt[1].TIMER.deviation+"")&&ke(Ue,We),tt[31].dev.value?ct&&(ct.d(1),ct=null):ct||(ct=z2(),ct.c(),ct.m(de,V)),tt[31].dev.value?ut?ut.p(tt,St):(ut=U2(tt),ut.c(),ut.m(de,null)):ut&&(ut.d(1),ut=null),(!jt||St[0]&2)&&fe!==(fe=tt[1].TIMER.count+"")&&ke(Le,fe),(!jt||St[1]&1)&&Z!==(Z=tt[31].count.value+"")&&ke(ve,Z),tt[31].Mo3.value>-1?Dt&&(Dt.d(1),Dt=null):Dt||(Dt=H2(),Dt.c(),Dt.m(He,ln)),tt[31].Mo3.value>-1?kt?kt.p(tt,St):(kt=V2(tt),kt.c(),kt.m(He,null)):kt&&(kt.d(1),kt=null),(!jt||St[1]&1)&&pt(He,"better",tt[31].Mo3.better&&tt[31].counter.value>0&&tt[31].Mo3.value>-1),tt[31].Ao5.value>-1?tn&&(tn.d(1),tn=null):tn||(tn=G2(),tn.c(),tn.m(gt,Nn)),tt[31].Ao5.value>-1?Jt?Jt.p(tt,St):(Jt=W2(tt),Jt.c(),Jt.m(gt,null)):Jt&&(Jt.d(1),Jt=null),(!jt||St[1]&1)&&pt(gt,"better",tt[31].Ao5.better&&tt[31].counter.value>0&&tt[31].Ao5.value>-1),St[1]&1){zt=["Ao12","Ao50","Ao100","Ao200","Ao500","Ao1k","Ao2k"];let An;for(An=0;An<7;An+=1){const In=x2(tt,zt,An);Xt[An]?Xt[An].p(In,St):(Xt[An]=q2(In),Xt[An].c(),Xt[An].m(mn,null))}for(;An<7;An+=1)Xt[An].d(1)}(!jt||St[0]&1048576)&&pt(v,"isRunning",tt[20])},i(tt){jt||(I(x.$$.fragment,tt),jt=!0)},o(tt){H(x.$$.fragment,tt),jt=!1},d(tt){tt&&P(e),rn&&rn.d(),ce(x),tt&&P(y),tt&&P(v),vn&&vn.d(),z&&z.d(),Se&&Se.d(),Te&&Te.d(),Be&&Be.d(),Je&&Je.d(),ct&&ct.d(),ut&&ut.d(),Dt&&Dt.d(),kt&&kt.d(),tn&&tn.d(),Jt&&Jt.d(),en(Xt,tt),Gt=!1,Bn()}}}function R2(t){let e,n,i=t[1].TIMER.nextAo5+"",s,r,o,a,l=Lt(t[30][0],!1,!0)+"",c,u,f=Lt(t[30][1],!1,!0)+"",h,d;return{c(){e=C("tr"),n=C("td"),s=ae(i),r=O(),o=C("td"),a=ae("["),c=ae(l),u=ae(", "),h=ae(f),d=ae("]"),M(o,"class","text-yellow-500")},m(p,m){R(p,e,m),E(e,n),E(n,s),E(e,r),E(e,o),E(o,a),E(o,c),E(o,u),E(o,h),E(o,d)},p(p,m){m[0]&2&&i!==(i=p[1].TIMER.nextAo5+"")&&ke(s,i),m[0]&1073741824&&l!==(l=Lt(p[30][0],!1,!0)+"")&&ke(c,l),m[0]&1073741824&&f!==(f=Lt(p[30][1],!1,!0)+"")&&ke(h,f)},d(p){p&&P(e)}}}function I2(t){let e;return{c(){e=C("td"),e.textContent="N/A"},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function D2(t){let e,n=Lt(t[31].best.value,!1,!0)+"",i;return{c(){e=C("td"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[1]&1&&n!==(n=Lt(s[31].best.value,!1,!0)+"")&&ke(i,n)},d(s){s&&P(e)}}}function O2(t){let e;return{c(){e=C("td"),e.textContent="N/A"},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function N2(t){let e,n=Lt(t[31].worst.value,!1,!0)+"",i;return{c(){e=C("td"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[1]&1&&n!==(n=Lt(s[31].worst.value,!1,!0)+"")&&ke(i,n)},d(s){s&&P(e)}}}function B2(t){let e;return{c(){e=C("td"),e.textContent="N/A"},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function F2(t){let e,n=Lt(t[31].avg.value,!1,!0)+"",i;return{c(){e=C("td"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[1]&1&&n!==(n=Lt(s[31].avg.value,!1,!0)+"")&&ke(i,n)},d(s){s&&P(e)}}}function z2(t){let e;return{c(){e=C("td"),e.textContent="N/A"},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function U2(t){let e,n=Lt(t[31].dev.value,!1,!0)+"",i;return{c(){e=C("td"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[1]&1&&n!==(n=Lt(s[31].dev.value,!1,!0)+"")&&ke(i,n)},d(s){s&&P(e)}}}function H2(t){let e;return{c(){e=C("td"),e.textContent="N/A"},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function V2(t){let e,n=Lt(t[31].Mo3.value,!1,!0)+"",i;return{c(){e=C("td"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[1]&1&&n!==(n=Lt(s[31].Mo3.value,!1,!0)+"")&&ke(i,n)},d(s){s&&P(e)}}}function G2(t){let e;return{c(){e=C("td"),e.textContent="N/A"},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function W2(t){let e,n=Lt(t[31].Ao5.value,!1,!0)+"",i;return{c(){e=C("td"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[1]&1&&n!==(n=Lt(s[31].Ao5.value,!1,!0)+"")&&ke(i,n)},d(s){s&&P(e)}}}function j2(t){let e;return{c(){e=C("td"),e.textContent="N/A"},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function Y2(t){let e,n=Lt(t[31][t[123]].value,!1,!0)+"",i;return{c(){e=C("td"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[1]&1&&n!==(n=Lt(s[31][s[123]].value,!1,!0)+"")&&ke(i,n)},d(s){s&&P(e)}}}function q2(t){let e,n,i,s,r,o,a,l=!(t[31][t[123]].value>-1)&&j2(),c=t[31][t[123]].value>-1&&Y2(t);return{c(){e=C("tr"),n=C("td"),i=ae(t[123]),s=ae(":"),r=O(),l&&l.c(),o=O(),c&&c.c(),a=O(),M(e,"class","svelte-9uxc7s"),pt(e,"better",t[31][t[123]].better&&t[31].counter.value>0&&t[31][t[123]].value>-1)},m(u,f){R(u,e,f),E(e,n),E(n,i),E(n,s),E(e,r),l&&l.m(e,null),E(e,o),c&&c.m(e,null),E(e,a)},p(u,f){u[31][u[123]].value>-1?l&&(l.d(1),l=null):l||(l=j2(),l.c(),l.m(e,o)),u[31][u[123]].value>-1?c?c.p(u,f):(c=Y2(u),c.c(),c.m(e,a)):c&&(c.d(1),c=null),f[1]&1&&pt(e,"better",u[31][u[123]].better&&u[31].counter.value>0&&u[31][u[123]].value>-1)},d(u){u&&P(e),l&&l.d(),c&&c.d()}}}function X2(t){let e,n,i,s,r;return{c(){e=C("div"),n=C("img"),M(n,"class","bottom-2 transition-all duration-300 cursor-pointer w-full h-full object-contain"),wi(n.src,i=t[32])||M(n,"src",i),M(n,"alt",""),M(e,"id","preview-container"),M(e,"class","absolute bottom-2 flex items-center justify-center w-full transition-all duration-300 select-none bg-transparent h svelte-9uxc7s"),pt(e,"expanded",t[6]),pt(e,"isRunning",t[20])},m(o,a){R(o,e,a),E(e,n),s||(r=[$e(n,"dragstart",KL(t[65])),$e(e,"click",t[72])],s=!0)},p(o,a){a[1]&2&&!wi(n.src,i=o[32])&&M(n,"src",i),a[0]&64&&pt(e,"expanded",o[6]),a[0]&1048576&&pt(e,"isRunning",o[20])},d(o){o&&P(e),s=!1,Vn(r)}}}function Z2(t){let e,n,i,s,r,o,a,l;function c(f){t[73](f)}let u={class:"bg-gray-600 text-gray-200"};return t[16]!==void 0&&(u.value=t[16]),e=new Rh({props:u}),vt.push(()=>Vt(e,"value",c)),e.$on("keyup",t[57]),r=new Ct({props:{$$slots:{default:[S8]},$$scope:{ctx:t}}}),r.$on("click",t[74]),a=new Ct({props:{$$slots:{default:[E8]},$$scope:{ctx:t}}}),a.$on("click",t[75]),{c(){ue(e.$$.fragment),i=O(),s=C("div"),ue(r.$$.fragment),o=O(),ue(a.$$.fragment),M(s,"class","flex w-full justify-center my-2")},m(f,h){le(e,f,h),R(f,i,h),R(f,s,h),le(r,s,null),E(s,o),le(a,s,null),l=!0},p(f,h){const d={};!n&&h[0]&65536&&(n=!0,d.value=f[16],Ht(()=>n=!1)),e.$set(d);const p={};h[0]&2|h[4]&256&&(p.$$scope={dirty:h,ctx:f}),r.$set(p);const m={};h[0]&2|h[4]&256&&(m.$$scope={dirty:h,ctx:f}),a.$set(m)},i(f){l||(I(e.$$.fragment,f),I(r.$$.fragment,f),I(a.$$.fragment,f),l=!0)},o(f){H(e.$$.fragment,f),H(r.$$.fragment,f),H(a.$$.fragment,f),l=!1},d(f){ce(e,f),f&&P(i),f&&P(s),ce(r),ce(a)}}}function S8(t){let e=t[1].TIMER.cancel+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&2&&e!==(e=i[1].TIMER.cancel+"")&&ke(n,e)},d(i){i&&P(n)}}}function E8(t){let e=t[1].TIMER.save+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&2&&e!==(e=i[1].TIMER.save+"")&&ke(n,e)},d(i){i&&P(n)}}}function J2(t){let e,n,i=t[1].TIMER.scramble+"",s,r,o,a=t[1].TIMER.time+"",l,c,u=t[3],f=[];for(let h=0;h<u.length;h+=1)f[h]=K2(w2(t,u,h));return{c(){e=C("div"),n=C("h2"),s=ae(i),r=O(),o=C("h2"),l=ae(a),c=O();for(let h=0;h<f.length;h+=1)f[h].c();M(n,"class","col-span-3"),M(o,"class","col-span-1"),M(e,"class","grid grid-cols-4 w-full text-center")},m(h,d){R(h,e,d),E(e,n),E(n,s),E(e,r),E(e,o),E(o,l),E(e,c);for(let p=0;p<f.length;p+=1)f[p].m(e,null)},p(h,d){if(d[0]&2&&i!==(i=h[1].TIMER.scramble+"")&&ke(s,i),d[0]&2&&a!==(a=h[1].TIMER.time+"")&&ke(l,a),d[0]&8|d[1]&134217728){u=h[3];let p;for(p=0;p<u.length;p+=1){const m=w2(h,u,p);f[p]?f[p].p(m,d):(f[p]=K2(m),f[p].c(),f[p].m(e,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=u.length}},d(h){h&&P(e),en(f,h)}}}function K2(t){let e,n=t[120].scramble+"",i,s,r,o=Lt(t[120].time,!1,!0)+"",a,l,c;function u(){return t[76](t[120])}return{c(){e=C("button"),i=ae(n),s=O(),r=C("span"),a=ae(o),M(e,"tabindex","0"),M(e,"class","col-span-3 cursor-pointer hover:text-blue-400 my-2 text-left text-ellipsis overflow-hidden whitespace-nowrap "),M(r,"class","col-span-1 flex items-center justify-center")},m(f,h){R(f,e,h),E(e,i),R(f,s,h),R(f,r,h),E(r,a),l||(c=$e(e,"click",u),l=!0)},p(f,h){t=f,h[0]&8&&n!==(n=t[120].scramble+"")&&ke(i,n),h[0]&8&&o!==(o=Lt(t[120].time,!1,!0)+"")&&ke(a,o)},d(f){f&&P(e),f&&P(s),f&&P(r),l=!1,c()}}}function $2(t){let e,n=t[1].TIMER.inputMethod+"",i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A=t[1].TIMER.canHurtPerformance+"",L,D,B,U,N,$,W,j,J=t[1].TIMER.aoxCalculation+"",se,ne,K,q,te,re,Oe=[t[1].TIMER.sequential,t[1].TIMER.groupOfX][~~t[16].settings.calcAoX]+"",Ee,ye,xe,Ae,De,de,me;function We(Z){t[77](Z)}let Ue={items:TF,transform:R8};t[16].settings.input!==void 0&&(Ue.value=t[16].settings.input),r=new Wi({props:Ue}),vt.push(()=>Vt(r,"value",We));let be=t[16].settings.input==="StackMat"&&Q2(t);function F(Z){t[79](Z)}let V={class:"w-5 h-5",label:t[1].TIMER.inspection};t[16].settings.hasInspection!==void 0&&(V.checked=t[16].settings.hasInspection),u=new vc({props:V}),vt.push(()=>Vt(u,"checked",F));function _e(Z){t[80](Z)}let oe={type:"number",class:"mt-2 bg-gray-700 hidden-markers "+(t[16].settings.hasInspection?"text-gray-200":""),disabled:!t[16].settings.hasInspection,min:5,max:60,step:5};t[16].settings.inspection!==void 0&&(oe.value=t[16].settings.inspection),d=new hi({props:oe}),vt.push(()=>Vt(d,"value",_e));function X(Z){t[81](Z)}let fe={class:"w-5 h-5 my-2",label:t[1].TIMER.showTime};t[16].settings.showElapsedTime!==void 0&&(fe.checked=t[16].settings.showElapsedTime),b=new vc({props:fe}),vt.push(()=>Vt(b,"checked",X));function Le(Z){t[82](Z)}let Pe={class:"w-5 h-5 my-2",label:t[1].TIMER.genImage};t[16].settings.genImage!==void 0&&(Pe.checked=t[16].settings.genImage),v=new vc({props:Pe}),vt.push(()=>Vt(v,"checked",Le));function Ye(Z){t[83](Z)}let Ke={class:"w-5 h-5 my-2",label:t[1].TIMER.refreshScramble};return t[16].settings.scrambleAfterCancel!==void 0&&(Ke.checked=t[16].settings.scrambleAfterCancel),N=new vc({props:Ke}),vt.push(()=>Vt(N,"checked",Ye)),q=new _8({props:{checked:!!t[16].settings.calcAoX}}),q.$on("change",t[84]),Ae=new Ct({props:{flat:!0,$$slots:{default:[T8]},$$scope:{ctx:t}}}),Ae.$on("click",t[85]),de=new Ct({props:{flat:!0,$$slots:{default:[k8]},$$scope:{ctx:t}}}),de.$on("click",t[86]),{c(){e=C("section"),i=ae(n),s=ae(": "),ue(r.$$.fragment),a=O(),be&&be.c(),l=O(),c=C("section"),ue(u.$$.fragment),h=O(),ue(d.$$.fragment),m=O(),_=C("section"),ue(b.$$.fragment),x=O(),y=C("section"),ue(v.$$.fragment),S=O(),T=C("i"),k=ae("("),L=ae(A),D=ae(")"),B=O(),U=C("section"),ue(N.$$.fragment),W=O(),j=C("section"),se=ae(J),ne=ae(`:\r
          `),K=C("div"),ue(q.$$.fragment),te=O(),re=C("span"),Ee=ae(Oe),ye=O(),xe=C("section"),ue(Ae.$$.fragment),De=O(),ue(de.$$.fragment),M(e,"class","flex gap-4 items-center mb-4"),M(T,"class","text-sm"),M(re,"class","ml-3"),M(K,"class","flex gap-2 items-center"),M(j,"class","mt-4 flex gap-4"),M(xe,"class","flex mt-4")},m(Z,ve){R(Z,e,ve),E(e,i),E(e,s),le(r,e,null),R(Z,a,ve),be&&be.m(Z,ve),R(Z,l,ve),R(Z,c,ve),le(u,c,null),E(c,h),le(d,c,null),R(Z,m,ve),R(Z,_,ve),le(b,_,null),R(Z,x,ve),R(Z,y,ve),le(v,y,null),E(y,S),E(y,T),E(T,k),E(T,L),E(T,D),R(Z,B,ve),R(Z,U,ve),le(N,U,null),R(Z,W,ve),R(Z,j,ve),E(j,se),E(j,ne),E(j,K),le(q,K,null),E(K,te),E(K,re),E(re,Ee),R(Z,ye,ve),R(Z,xe,ve),le(Ae,xe,null),E(xe,De),le(de,xe,null),me=!0},p(Z,ve){(!me||ve[0]&2)&&n!==(n=Z[1].TIMER.inputMethod+"")&&ke(i,n);const Re={};!o&&ve[0]&65536&&(o=!0,Re.value=Z[16].settings.input,Ht(()=>o=!1)),r.$set(Re),Z[16].settings.input==="StackMat"?be?(be.p(Z,ve),ve[0]&65536&&I(be,1)):(be=Q2(Z),be.c(),I(be,1),be.m(l.parentNode,l)):be&&(ot(),H(be,1,1,()=>{be=null}),at());const He={};ve[0]&2&&(He.label=Z[1].TIMER.inspection),!f&&ve[0]&65536&&(f=!0,He.checked=Z[16].settings.hasInspection,Ht(()=>f=!1)),u.$set(He);const Ze={};ve[0]&65536&&(Ze.class="mt-2 bg-gray-700 hidden-markers "+(Z[16].settings.hasInspection?"text-gray-200":"")),ve[0]&65536&&(Ze.disabled=!Z[16].settings.hasInspection),!p&&ve[0]&65536&&(p=!0,Ze.value=Z[16].settings.inspection,Ht(()=>p=!1)),d.$set(Ze);const _t={};ve[0]&2&&(_t.label=Z[1].TIMER.showTime),!g&&ve[0]&65536&&(g=!0,_t.checked=Z[16].settings.showElapsedTime,Ht(()=>g=!1)),b.$set(_t);const ln={};ve[0]&2&&(ln.label=Z[1].TIMER.genImage),!w&&ve[0]&65536&&(w=!0,ln.checked=Z[16].settings.genImage,Ht(()=>w=!1)),v.$set(ln),(!me||ve[0]&2)&&A!==(A=Z[1].TIMER.canHurtPerformance+"")&&ke(L,A);const lt={};ve[0]&2&&(lt.label=Z[1].TIMER.refreshScramble),!$&&ve[0]&65536&&($=!0,lt.checked=Z[16].settings.scrambleAfterCancel,Ht(()=>$=!1)),N.$set(lt),(!me||ve[0]&2)&&J!==(J=Z[1].TIMER.aoxCalculation+"")&&ke(se,J);const gt={};ve[0]&65536&&(gt.checked=!!Z[16].settings.calcAoX),q.$set(gt),(!me||ve[0]&65538)&&Oe!==(Oe=[Z[1].TIMER.sequential,Z[1].TIMER.groupOfX][~~Z[16].settings.calcAoX]+"")&&ke(Ee,Oe);const bn={};ve[0]&2|ve[4]&256&&(bn.$$scope={dirty:ve,ctx:Z}),Ae.$set(bn);const Ot={};ve[0]&2|ve[4]&256&&(Ot.$$scope={dirty:ve,ctx:Z}),de.$set(Ot)},i(Z){me||(I(r.$$.fragment,Z),I(be),I(u.$$.fragment,Z),I(d.$$.fragment,Z),I(b.$$.fragment,Z),I(v.$$.fragment,Z),I(N.$$.fragment,Z),I(q.$$.fragment,Z),I(Ae.$$.fragment,Z),I(de.$$.fragment,Z),me=!0)},o(Z){H(r.$$.fragment,Z),H(be),H(u.$$.fragment,Z),H(d.$$.fragment,Z),H(b.$$.fragment,Z),H(v.$$.fragment,Z),H(N.$$.fragment,Z),H(q.$$.fragment,Z),H(Ae.$$.fragment,Z),H(de.$$.fragment,Z),me=!1},d(Z){Z&&P(e),ce(r),Z&&P(a),be&&be.d(Z),Z&&P(l),Z&&P(c),ce(u),ce(d),Z&&P(m),Z&&P(_),ce(b),Z&&P(x),Z&&P(y),ce(v),Z&&P(B),Z&&P(U),ce(N),Z&&P(W),Z&&P(j),ce(q),Z&&P(ye),Z&&P(xe),ce(Ae),ce(de)}}}function Q2(t){let e,n=t[1].TIMER.device+"",i,s,r,o,a;function l(u){t[78](u)}let c={class:"max-w-full",items:t[8],label:I8,transform:D8};return t[7]!==void 0&&(c.value=t[7]),r=new Wi({props:c}),vt.push(()=>Vt(r,"value",l)),{c(){e=C("section"),i=ae(n),s=ae(": "),ue(r.$$.fragment),M(e,"class","mb-4")},m(u,f){R(u,e,f),E(e,i),E(e,s),le(r,e,null),a=!0},p(u,f){(!a||f[0]&2)&&n!==(n=u[1].TIMER.device+"")&&ke(i,n);const h={};f[0]&256&&(h.items=u[8]),!o&&f[0]&128&&(o=!0,h.value=u[7],Ht(()=>o=!1)),r.$set(h)},i(u){a||(I(r.$$.fragment,u),a=!0)},o(u){H(r.$$.fragment,u),a=!1},d(u){u&&P(e),ce(r)}}}function T8(t){let e=t[1].TIMER.cancel+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&2&&e!==(e=i[1].TIMER.cancel+"")&&ke(n,e)},d(i){i&&P(n)}}}function k8(t){let e=t[1].TIMER.save+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&2&&e!==(e=i[1].TIMER.save+"")&&ke(n,e)},d(i){i&&P(n)}}}function A8(t){let e,n,i,s,r=t[15]==="edit-scramble"&&Z2(t),o=t[15]==="old-scrambles"&&J2(t),a=t[15]==="settings"&&$2(t);return{c(){e=C("div"),r&&r.c(),n=O(),o&&o.c(),i=O(),a&&a.c(),M(e,"class","max-w-lg max-h-[30rem] overflow-scroll")},m(l,c){R(l,e,c),r&&r.m(e,null),E(e,n),o&&o.m(e,null),E(e,i),a&&a.m(e,null),s=!0},p(l,c){l[15]==="edit-scramble"?r?(r.p(l,c),c[0]&32768&&I(r,1)):(r=Z2(l),r.c(),I(r,1),r.m(e,n)):r&&(ot(),H(r,1,1,()=>{r=null}),at()),l[15]==="old-scrambles"?o?o.p(l,c):(o=J2(l),o.c(),o.m(e,i)):o&&(o.d(1),o=null),l[15]==="settings"?a?(a.p(l,c),c[0]&32768&&I(a,1)):(a=$2(l),a.c(),I(a,1),a.m(e,null)):a&&(ot(),H(a,1,1,()=>{a=null}),at())},i(l){s||(I(r),I(a),s=!0)},o(l){H(r),H(a),s=!1},d(l){l&&P(e),r&&r.d(),o&&o.d(),a&&a.d()}}}function L8(t){var K,q;let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k=!t[19]&&E2(),A=t[18].filter(t[67]),L=[];for(let te=0;te<A.length;te+=1)L[te]=T2(S2(t,A,te));const D=te=>H(L[te],1,1,()=>{L[te]=null});let B=t[9]&&!t[0]&&k2(t);const U=[x8,w8],N=[];function $(te,re){var Oe,Ee;return((Ee=(Oe=te[2])==null?void 0:Oe.settings)==null?void 0:Ee.input)==="Manual"?0:1}u=$(t),f=N[u]=U[u](t);let W=t[22]===Kt.STOPPED&&L2(t),j=!t[0]&&P2(t),J=(((q=(K=t[2])==null?void 0:K.settings)==null?void 0:q.genImage)||t[0])&&X2(t);function se(te){t[88](te)}let ne={onClose:t[17],$$slots:{default:[A8]},$$scope:{ctx:t}};return t[14]!==void 0&&(ne.show=t[14]),y=new La({props:ne}),t[87](y),vt.push(()=>Vt(y,"show",se)),{c(){e=C("div"),n=C("div"),k&&k.c(),i=O(),s=C("span"),r=O(),o=C("div");for(let te=0;te<L.length;te+=1)L[te].c();a=O(),B&&B.c(),l=O(),c=C("div"),f.c(),h=O(),d=C("span"),p=ae("----"),_=O(),W&&W.c(),b=O(),j&&j.c(),g=O(),J&&J.c(),x=O(),ue(y.$$.fragment),M(s,"contenteditable","false"),M(s,"class","svelte-9uxc7s"),t[19]===void 0&&qr(()=>t[66].call(s)),pt(s,"isRunning",t[20]),pt(s,"battle",t[0]),M(o,"class","absolute top-1 right-12 flex flex-col svelte-9uxc7s"),pt(o,"isRunning",t[20]),M(n,"id","scramble"),M(n,"class","transition-all duration-300 svelte-9uxc7s"),M(d,"class","timer svelte-9uxc7s"),d.hidden=m=!(t[22]===Kt.RUNNING&&!t[2].settings.showElapsedTime),M(c,"id","timer"),M(c,"class","absolute top-1/3 text-9xl h-32 flex flex-col items-center justify-center svelte-9uxc7s"),M(e,"class","w-full h-full "+Yf+" svelte-9uxc7s")},m(te,re){R(te,e,re),E(e,n),k&&k.m(n,null),E(n,i),E(n,s),t[19]!==void 0&&(s.innerHTML=t[19]),E(n,r),E(n,o);for(let Oe=0;Oe<L.length;Oe+=1)L[Oe].m(o,null);E(e,a),B&&B.m(e,null),E(e,l),E(e,c),N[u].m(c,null),E(c,h),E(c,d),E(d,p),E(c,_),W&&W.m(c,null),E(e,b),j&&j.m(e,null),E(e,g),J&&J.m(e,null),E(e,x),le(y,e,null),w=!0,S||(T=[$e(window,"keyup",t[56]),$e(window,"keydown",t[55]),$e(window,"mousemove",t[60]),$e(window,"mouseup",t[61]),$e(s,"input",t[66])],S=!0)},p(te,re){var ye,xe;if(te[19]?k&&(k.d(1),k=null):k?k.p(te,re):(k=E2(),k.c(),k.m(n,i)),re[0]&524288&&te[19]!==s.innerHTML&&(s.innerHTML=te[19]),(!w||re[0]&1048576)&&pt(s,"isRunning",te[20]),(!w||re[0]&1)&&pt(s,"battle",te[0]),re[0]&262145){A=te[18].filter(te[67]);let Ae;for(Ae=0;Ae<A.length;Ae+=1){const De=S2(te,A,Ae);L[Ae]?(L[Ae].p(De,re),I(L[Ae],1)):(L[Ae]=T2(De),L[Ae].c(),I(L[Ae],1),L[Ae].m(o,null))}for(ot(),Ae=A.length;Ae<L.length;Ae+=1)D(Ae);at()}(!w||re[0]&1048576)&&pt(o,"isRunning",te[20]),te[9]&&!te[0]?B?(B.p(te,re),re[0]&513&&I(B,1)):(B=k2(te),B.c(),I(B,1),B.m(e,l)):B&&(ot(),H(B,1,1,()=>{B=null}),at());let Oe=u;u=$(te),u===Oe?N[u].p(te,re):(ot(),H(N[Oe],1,1,()=>{N[Oe]=null}),at(),f=N[u],f?f.p(te,re):(f=N[u]=U[u](te),f.c()),I(f,1),f.m(c,h)),(!w||re[0]&4194308&&m!==(m=!(te[22]===Kt.RUNNING&&!te[2].settings.showElapsedTime)))&&(d.hidden=m),te[22]===Kt.STOPPED?W?(W.p(te,re),re[0]&4194304&&I(W,1)):(W=L2(te),W.c(),I(W,1),W.m(c,null)):W&&(ot(),H(W,1,1,()=>{W=null}),at()),te[0]?j&&(ot(),H(j,1,1,()=>{j=null}),at()):j?(j.p(te,re),re[0]&1&&I(j,1)):(j=P2(te),j.c(),I(j,1),j.m(e,g)),((xe=(ye=te[2])==null?void 0:ye.settings)==null?void 0:xe.genImage)||te[0]?J?J.p(te,re):(J=X2(te),J.c(),J.m(e,x)):J&&(J.d(1),J=null);const Ee={};re[0]&131072&&(Ee.onClose=te[17]),re[0]&106890|re[4]&256&&(Ee.$$scope={dirty:re,ctx:te}),!v&&re[0]&16384&&(v=!0,Ee.show=te[14],Ht(()=>v=!1)),y.$set(Ee)},i(te){if(!w){for(let re=0;re<A.length;re+=1)I(L[re]);I(B),I(f),I(W),I(j),I(y.$$.fragment,te),w=!0}},o(te){L=L.filter(Boolean);for(let re=0;re<L.length;re+=1)H(L[re]);H(B),H(f),H(W),H(j),H(y.$$.fragment,te),w=!1},d(te){te&&P(e),k&&k.d(),en(L,te),B&&B.d(),N[u].d(),W&&W.d(),j&&j.d(),J&&J.d(),t[87](null),ce(y),S=!1,Vn(T)}}}const z1=/^\d{1,6}$/,U1=/^\s*dnf\s*$/i,Yf="text-gray-400";let lk=250,ck=250,C8="Scrambling...";function P8(t){let e=[];return e.push(t%100),t=~~(t/100),e.push(t%100),t=~~(t/100),e.push(t),e[2]*6e4+e[1]*1e3+e[0]*10}function ew(t){return z1.test(t)||U1.test(t)||t===""}const R8=t=>t,I8=t=>t[1],D8=t=>t[0];function O8(t,e,n){let i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,{context:k}=e,{battle:A=!1}=e,{enableKeyboard:L=!0}=e,D=Rr(Hi,ze=>Dr(ze));dt(t,D,ze=>n(1,i=ze));const{state:B,ready:U,tab:N,solves:$,allSolves:W,session:j,Ao5:J,stats:se,scramble:ne,group:K,mode:q,hintDialog:te,hint:re,cross:Oe,xcross:Ee,preview:ye,isRunning:xe,decimals:Ae,sortSolves:De,initScrambler:de,updateStatistics:me,selectedGroup:We,setConfigFromSolve:Ue}=k;dt(t,B,ze=>n(22,h=ze)),dt(t,U,ze=>n(21,f=ze)),dt(t,N,ze=>n(97,c=ze)),dt(t,$,ze=>n(3,r=ze)),dt(t,W,ze=>n(99,p=ze)),dt(t,j,ze=>n(2,s=ze)),dt(t,J,ze=>n(30,w=ze)),dt(t,se,ze=>n(31,S=ze)),dt(t,ne,ze=>n(19,a=ze)),dt(t,K,ze=>n(96,o=ze)),dt(t,q,ze=>n(100,m=ze)),dt(t,te,ze=>n(26,g=ze)),dt(t,re,ze=>n(27,x=ze)),dt(t,Oe,ze=>n(28,y=ze)),dt(t,Ee,ze=>n(29,v=ze)),dt(t,ye,ze=>n(32,T=ze)),dt(t,xe,ze=>n(20,l=ze)),dt(t,Ae,ze=>n(24,_=ze));const be=Oa(),F=Xr.getInstance();let V=nn(0);dt(t,V,ze=>n(23,d=ze));let _e="",oe=[{text:"Delete",icon:qo,highlight:()=>!1,handler:()=>{mn.removeSolves([r[0]]),vn()}},{text:"DNF",icon:CF,highlight:ze=>ze.penalty===ft.DNF,handler:()=>{At($,r[0].penalty=r[0].penalty===ft.DNF?ft.NONE:ft.DNF,r),A?be("update",r[0]):mn.updateSolve(r[0])}},{text:"+2",icon:IF,highlight:ze=>ze.penalty===ft.P2,handler:()=>{At($,r[0].penalty=r[0].penalty===ft.P2?ft.NONE:ft.P2,r),r[0].penalty===ft.P2?At($,r[0].time+=2e3,r):At($,r[0].time-=2e3,r),A?be("update",r[0]):mn.updateSolve(r[0])}}],X=0,fe=nn(null);dt(t,fe,ze=>n(98,u=ze));let Le=-1,Pe=!1,Ye=nn(!1);dt(t,Ye,ze=>n(25,b=ze));let Ke={isRunning:xe,lastSolve:fe,ready:U,session:j,state:B,time:V,stackmatStatus:Ye,decimals:Ae,addSolve:Gt,initScrambler:de,reset:vn,createNewSolve:rn},Z=new y2(Ke),ve="",Re=[],He=!1,Ze=document.body.clientWidth-lk-50,_t=(document.body.clientHeight-ck)/2,ln="",lt=null,gt=!1,bn="",Ot=null,Nn=()=>{},Pn=(ze,Cn,Dn)=>{n(15,bn=ze),n(16,Ot=Cn),n(17,Nn=Dn),n(14,gt=!0)},cn=[{text:"Reload scramble [Ctrl + S]",icon:NF,handler:()=>de()},{text:"Edit [Ctrl + E]",icon:zF,handler:()=>{Pn("edit-scramble",a,ze=>ze&&de(ze))}},{text:"Use old scramble [Ctrl + O]",icon:VF,handler:()=>{Pn("old-scrambles",null,()=>{})}},{text:"Copy scramble [Ctrl + C]",icon:jF,handler:()=>Se()},{text:"Notes [Ctrl + N]",icon:QF,handler:()=>n(9,He=!0)},{text:"Settings",icon:iv,handler:()=>{var Cn;let ze=(Cn=s==null?void 0:s.settings)==null?void 0:Cn.calcAoX;s.settings.input||At(j,s.settings.input="Keyboard",s),Pn("settings",s,Dn=>{Dn&&(tt(),mn.updateSession(s),ze!=s.settings.calcAoX&&me(!1))})}}];const mn=Ds.getInstance();function jt(){X=0,r.forEach(ze=>ze.selected=!1)}function Gt(ze,Cn){let Dn=u;Dn.date=Date.now(),Dn.time=ze||d,Dn.group=o,Dn.mode=m[1],Dn.len=m[2],Dn.prob=Le,Dn.session=s._id,Dn.penalty=Cn||ft.NONE,p.push(Dn),r.push(Dn),A?(Dn.group=-1,be("solve",u)):(mn.addSolve(Dn),De(),me(!0))}function Bn(ze){const{code:Cn}=ze;if(!!L)switch(c){case 0:{Z.keyDownHandler(ze);break}case 1:{Cn==="Escape"&&X&&jt();break}}}function rn(){At(fe,u={date:Date.now(),penalty:ft.NONE,scramble:a,time:d,comments:"",selected:!1,session:""},u)}function vn(){Z.stopTimer(),At(V,d=0,d),At(B,h=Kt.CLEAN,h),At(U,f=!1,f),At(fe,u=null,u)}function z(ze){if(c||!L)return;Z.keyUpHandler(ze);const{code:Cn}=ze;Cn!="Space"&&!l&&!A&&(Cn==="KeyE"&&ze.ctrlKey?(!gt||gt&&bn!="edit-scramble")&&Pn("edit-scramble",a,Dn=>Dn&&de(Dn)):Cn==="KeyO"&&ze.ctrlKey?Pn("old-scrambles",null,()=>{}):Cn==="KeyC"&&ze.ctrlKey?Se():Cn==="KeyN"&&ze.ctrlKey?n(9,He=!0):Cn==="KeyS"&&ze.ctrlKey&&de())}function Se(){navigator.clipboard.writeText(a).then(()=>{F.addNotification({key:crypto.randomUUID(),header:i.global.done,text:i.global.scrambleCopied,timeout:1e3})})}function Te(ze){let Cn=ze.detail;Cn.stopPropagation(),n(14,gt=Cn.code==="Escape"?lt.close():gt),Cn.code==="Enter"&&Cn.ctrlKey&&lt.close(Ot.trim())}function Be(ze){Ue(ze),de(ze.scramble),lt.close()}let Je=0,ct=0,ut=Ze,Dt=_t,kt=!1;function tn(ze){Je=ze.clientX,ct=ze.clientY,ut=Ze,Dt=_t,kt=!0}function Jt(ze){kt&&(n(10,Ze=ut+ze.clientX-Je),n(11,_t=Dt+ze.clientY-ct))}function zt(){kt=!1}function Xt(){if(!z1.test(_e)&&!U1.test(_e)){n(4,_e="");return}rn(),z1.test(_e)?Gt(P8(+_e)):U1.test(_e)&&Gt(0,ft.DNF),!A&&de(),n(4,_e="")}function tt(){var ze,Cn;Z.disconnect(),((ze=s==null?void 0:s.settings)==null?void 0:ze.input)==="Manual"?Z=new v8:((Cn=s==null?void 0:s.settings)==null?void 0:Cn.input)==="StackMat"?(Z=new jf(Ke),Z.init("",ve,!0)):(Z=new y2(Ke),Z.init()),console.log("Input init")}function St(){jf.updateInputDevices().then(ze=>{n(8,Re=ze)})}function An(){n(5,oe[0].text=i.TIMER.delete,oe),n(18,cn[0].text=`${i.TIMER.reloadScramble} [Ctrl + S]`,cn),n(18,cn[1].text=`${i.TIMER.edit} [Ctrl + E]`,cn),n(18,cn[2].text=`${i.TIMER.useOldScramble} [Ctrl + O]`,cn),n(18,cn[3].text=`${i.TIMER.copyScramble} [Ctrl + C]`,cn),n(18,cn[4].text=`${i.TIMER.notes} [Ctrl + N]`,cn),n(18,cn[5].text=`${i.TIMER.settings}`,cn)}ji(()=>{navigator.mediaDevices.addEventListener("devicechange",St),tt(),At(K,o=0,o),We(),me(!1),St()}),Es(()=>{Z.disconnect(),navigator.mediaDevices.addEventListener("devicechange",St)});function In(ze){_E.call(this,t,ze)}function ss(){a=this.innerHTML,ne.set(a)}const ei=(ze,Cn)=>A?Cn===3||Cn===5:!0,Ce=()=>n(9,He=!1);function st(ze){ln=ze,n(12,ln)}function it(ze){_e=ze,n(4,_e)}const Rt=()=>At(re,x=!x,x),Ln=()=>n(6,Pe=!Pe);function rs(ze){Ot=ze,n(16,Ot)}const ui=()=>lt.close(),ds=()=>lt.close(Ot.trim()),ks=ze=>Be(ze);function Li(ze){t.$$.not_equal(Ot.settings.input,ze)&&(Ot.settings.input=ze,n(16,Ot))}function ur(ze){ve=ze,n(7,ve)}function Ni(ze){t.$$.not_equal(Ot.settings.hasInspection,ze)&&(Ot.settings.hasInspection=ze,n(16,Ot))}function ps(ze){t.$$.not_equal(Ot.settings.inspection,ze)&&(Ot.settings.inspection=ze,n(16,Ot))}function ri(ze){t.$$.not_equal(Ot.settings.showElapsedTime,ze)&&(Ot.settings.showElapsedTime=ze,n(16,Ot))}function bi(ze){t.$$.not_equal(Ot.settings.genImage,ze)&&(Ot.settings.genImage=ze,n(16,Ot))}function Vs(ze){t.$$.not_equal(Ot.settings.scrambleAfterCancel,ze)&&(Ot.settings.scrambleAfterCancel=ze,n(16,Ot))}const vi=ze=>n(16,Ot.settings.calcAoX=~~ze.detail.value,Ot),uo=()=>lt.close(),wu=()=>lt.close(!0);function xu(ze){vt[ze?"unshift":"push"](()=>{lt=ze,n(13,lt)})}function Mu(ze){gt=ze,n(14,gt)}return t.$$set=ze=>{"context"in ze&&n(63,k=ze.context),"battle"in ze&&n(0,A=ze.battle),"enableKeyboard"in ze&&n(64,L=ze.enableKeyboard)},t.$$.update=()=>{t.$$.dirty[0]&8&&r.length===0&&vn(),t.$$.dirty[0]&4&&s&&tt(),t.$$.dirty[0]&2&&An()},[A,i,s,r,_e,oe,Pe,ve,Re,He,Ze,_t,ln,lt,gt,bn,Ot,Nn,cn,a,l,f,h,d,_,b,g,x,y,v,w,S,T,D,B,U,N,$,W,j,J,se,ne,K,q,te,re,Oe,Ee,ye,xe,Ae,V,fe,Ye,Bn,z,Te,Be,tn,Jt,zt,Xt,k,L,In,ss,ei,Ce,st,it,Rt,Ln,rs,ui,ds,ks,Li,ur,Ni,ps,ri,bi,Vs,vi,uo,wu,xu,Mu]}class uk extends xt{constructor(e){super(),wt(this,e,O8,L8,yt,{context:63,battle:0,enableKeyboard:64},null,[-1,-1,-1,-1,-1])}}function fk(t,e,n,i,s){return n===e?i:(t-e)*(s-i)/(n-e)+i}function nd(t,e,n,i,s){return fk(t,e,i,n,s)}function tw(t){return Math.cos(t)}function nw(t){return Math.sin(t)}function N8(t,e,n){return[t*tw(n)-e*nw(n),t*nw(n)+e*tw(n)]}function bm(t,e,n){return Math.min(n,Math.max(e,t))}class B8{constructor(e,n,i){Me(this,"data");Me(this,"len");Me(this,"_limit");Me(this,"offset");Me(this,"_page");Me(this,"_pages");Me(this,"width");Me(this,"labels");this.data=Array.isArray(e)?e:[],this.len=this.data.length,this._limit=Math.abs(~~(n||0))||10,this.offset=0,this._page=0,this._pages=0,this.width=i||5,this.labels=[],this.update()}get start(){return this.offset}get end(){return this.start+this._limit}get page(){return this._page}get pages(){return this._pages}get limit(){return this._limit}update(){this.len=this.data.length,this._pages=Math.ceil(this.len/this._limit),this._page=bm(this._page,1,this._pages),this.offset=(this._page-1)*this._limit;let e=Math.max(1,this._page-(this.width>>1)),n=Math.min(this._pages,e+this.width-1);this.labels.length=0;for(let i=e;i<=n;i+=1)this.labels.push(i)}setData(e){this.data=e,this.update()}setPage(e){this._page=e,this.update()}nextPage(){this.setPage(this._page+1)}prevPage(){this.setPage(this._page-1)}}function F8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9M10,16V19.08L13.08,16H20V4H4V16H10M11,6H13V9H16V11H13V14H11V11H8V9H11V6Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function z8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class U8 extends xt{constructor(e){super(),wt(this,e,z8,F8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function H8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function V8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class G8 extends xt{constructor(e){super(),wt(this,e,V8,H8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function W8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,19H5V8H19M16,1V3H8V1H6V3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3H18V1M17,12H12V17H17V12Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function j8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Y8 extends xt{constructor(e){super(),wt(this,e,j8,W8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function q8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3M7,5A2,2 0 0,0 5,7A2,2 0 0,0 7,9A2,2 0 0,0 9,7A2,2 0 0,0 7,5M17,15A2,2 0 0,0 15,17A2,2 0 0,0 17,19A2,2 0 0,0 19,17A2,2 0 0,0 17,15M17,5A2,2 0 0,0 15,7A2,2 0 0,0 17,9A2,2 0 0,0 19,7A2,2 0 0,0 17,5M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M7,15A2,2 0 0,0 5,17A2,2 0 0,0 7,19A2,2 0 0,0 9,17A2,2 0 0,0 7,15Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function X8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class Z8 extends xt{constructor(e){super(),wt(this,e,X8,q8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function J8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function K8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class sv extends xt{constructor(e){super(),wt(this,e,K8,J8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function $8(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M2,21L23,12L2,3V10L17,12L2,14V21Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function Q8(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class ez extends xt{constructor(e){super(),wt(this,e,Q8,$8,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function tz(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M15,16H19V18H15V16M15,8H22V10H15V8M15,12H21V14H15V12M11,10V18H5V10H11M13,8H3V18A2,2 0 0,0 5,20H11A2,2 0 0,0 13,18V8M14,5H11L10,4H6L5,5H2V7H14V5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function nz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class iz extends xt{constructor(e){super(),wt(this,e,nz,tz,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function sz(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function rz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class oz extends xt{constructor(e){super(),wt(this,e,rz,sz,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function az(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function lz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class cz extends xt{constructor(e){super(),wt(this,e,lz,az,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function uz(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M18.41,7.41L17,6L11,12L17,18L18.41,16.59L13.83,12L18.41,7.41M12.41,7.41L11,6L5,12L11,18L12.41,16.59L7.83,12L12.41,7.41Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function fz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class hz extends xt{constructor(e){super(),wt(this,e,fz,uz,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function dz(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M5.59,7.41L7,6L13,12L7,18L5.59,16.59L10.17,12L5.59,7.41M11.59,7.41L13,6L19,12L13,18L11.59,16.59L16.17,12L11.59,7.41Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function pz(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class mz extends xt{constructor(e){super(),wt(this,e,pz,dz,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function gz(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M21,12L14,5V9C7,10 4,15 3,20C5.5,16.5 9,14.9 14,14.9V19L21,12Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function _z(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class hk extends xt{constructor(e){super(),wt(this,e,_z,gz,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function dk(t,e,n){let i=[],s=e.length-1,r=[],o=t===3?0:Math.ceil(t*.05);for(let a=0,l=s;a<=l;a+=1)if(r.push(e[s-a]),r.length<t)i.push(null);else{let u=r.slice().sort((f,h)=>isFinite(f)&&isFinite(h)?f-h:isFinite(f)?-1:1).reduce((f,h,d)=>d>=o&&d<t-o?f+h:f,0);i.push(isFinite(u)?u/(t-o*2):null),n===tr.GROUP&&(r.length=0),n===tr.SEQUENTIAL&&r.shift()}return i}function qf(t,e,n){return dk(t,e.map(i=>Qr(i)?1/0:i.time),n)}function bz(t){const e=t.length;let n=0,i=0,s=0,r=0;for(let l=0;l<e;l+=1){let c=t[l][0],u=t[l][1];n+=c,i+=u,s+=c*c,r+=c*u}let o=(e*r-n*i)/(e*s-n**2),a=(i-o*n)/e;return{m:o,n:a}}function pk(t,e){const i=e*2;return t.length<=i?t:new Array(i).fill(0).map((s,r)=>t[Math.round(r*(t.length-1)/(i-1))])}function vz(t,e){return pk(t,e)}function yz(t,e){return pk(t.filter(n=>!Qr(n)),e)}function iw(t,e,n){const i=t.slice();return i[80]=e[n],i}function sw(t,e,n){const i=t.slice();return i[83]=e[n],i}function rw(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_;i=new hz({}),o=new oz({});let b=t[2].labels,g=[];for(let x=0;x<b.length;x+=1)g[x]=ow(sw(t,b,x));return u=new cz({}),d=new mz({}),{c(){e=C("ul"),n=C("li"),ue(i.$$.fragment),s=O(),r=C("li"),ue(o.$$.fragment),a=O();for(let x=0;x<g.length;x+=1)g[x].c();l=O(),c=C("li"),ue(u.$$.fragment),f=O(),h=C("li"),ue(d.$$.fragment),M(n,"class","paginator-item svelte-1avbz7b"),M(r,"class","paginator-item svelte-1avbz7b"),M(c,"class","paginator-item svelte-1avbz7b"),M(h,"class","paginator-item svelte-1avbz7b"),M(e,"class","w-max flex justify-center mx-auto gap-2 text-gray-400")},m(x,y){R(x,e,y),E(e,n),le(i,n,null),E(e,s),E(e,r),le(o,r,null),E(e,a);for(let v=0;v<g.length;v+=1)g[v].m(e,null);E(e,l),E(e,c),le(u,c,null),E(e,f),E(e,h),le(d,h,null),p=!0,m||(_=[$e(n,"click",t[38]),$e(r,"click",t[39]),$e(c,"click",t[41]),$e(h,"click",t[42])],m=!0)},p(x,y){if(y[0]&1073741828){b=x[2].labels;let v;for(v=0;v<b.length;v+=1){const w=sw(x,b,v);g[v]?g[v].p(w,y):(g[v]=ow(w),g[v].c(),g[v].m(e,l))}for(;v<g.length;v+=1)g[v].d(1);g.length=b.length}},i(x){p||(I(i.$$.fragment,x),I(o.$$.fragment,x),I(u.$$.fragment,x),I(d.$$.fragment,x),p=!0)},o(x){H(i.$$.fragment,x),H(o.$$.fragment,x),H(u.$$.fragment,x),H(d.$$.fragment,x),p=!1},d(x){x&&P(e),ce(i),ce(o),en(g,x),ce(u),ce(d),m=!1,Vn(_)}}}function ow(t){let e,n=t[83]+"",i,s,r;function o(){return t[40](t[83])}return{c(){e=C("li"),i=ae(n),M(e,"class","paginator-item svelte-1avbz7b"),pt(e,"selected",t[2].page===t[83])},m(a,l){R(a,e,l),E(e,i),s||(r=$e(e,"click",o),s=!0)},p(a,l){t=a,l[0]&4&&n!==(n=t[83]+"")&&ke(i,n),l[0]&4&&pt(e,"selected",t[2].page===t[83])},d(a){a&&P(e),s=!1,r()}}}function aw(t){let e;return{c(){e=C("span"),e.textContent="+2",M(e,"class","font-small svelte-1avbz7b")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function lw(t){let e,n;return e=new U8({props:{width:".8rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function cw(t){let e,n,i=rt(t[80].date).format("DD/MM")+"",s,r,o,a=(t[80].penalty===ft.DNF?"DNF":Lt(t[80].time,!0))+"",l,c,u,f,h,d,p,m,_=t[80].penalty===1&&aw(),b=t[80].comments&&lw();function g(){return t[43](t[80])}function x(...y){return t[44](t[80],...y)}return{c(){e=C("div"),n=C("div"),s=ae(i),r=O(),o=C("span"),l=ae(a),c=O(),u=C("div"),_&&_.c(),f=O(),b&&b.c(),h=O(),M(n,"class","font-small absolute top-0 left-2 svelte-1avbz7b"),M(o,"class","time font-bold"),M(u,"class","absolute right-1 top-0 h-full flex flex-col items-center justify-evenly"),M(e,"class","shadow-md w-24 h-12 rounded-md m-3 p-1 bg-white bg-opacity-10 relative flex items-center justify-center transition-all duration-200 select-none cursor-pointer hover:shadow-lg hover:bg-opacity-20  svelte-1avbz7b"),pt(e,"selected",t[80].selected)},m(y,v){R(y,e,v),E(e,n),E(n,s),E(e,r),E(e,o),E(o,l),E(e,c),E(e,u),_&&_.m(u,null),E(u,f),b&&b.m(u,null),E(e,h),d=!0,p||(m=[$e(e,"click",g),$e(e,"contextmenu",x)],p=!0)},p(y,v){t=y,(!d||v[0]&5)&&i!==(i=rt(t[80].date).format("DD/MM")+"")&&ke(s,i),(!d||v[0]&5)&&a!==(a=(t[80].penalty===ft.DNF?"DNF":Lt(t[80].time,!0))+"")&&ke(l,a),t[80].penalty===1?_||(_=aw(),_.c(),_.m(u,f)):_&&(_.d(1),_=null),t[80].comments?b?v[0]&5&&I(b,1):(b=lw(),b.c(),I(b,1),b.m(u,null)):b&&(ot(),H(b,1,1,()=>{b=null}),at()),(!d||v[0]&5)&&pt(e,"selected",t[80].selected)},i(y){d||(I(b),d=!0)},o(y){H(b),d=!1},d(y){y&&P(e),_&&_.d(),b&&b.d(),p=!1,Vn(m)}}}function uw(t){let e,n;return e=new $i({props:{position:"left",text:t[12].TIMER.deleteAll+" [D]",hasKeybinding:!0,$$slots:{default:[wz]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&4096&&(r.text=i[12].TIMER.deleteAll+" [D]"),s[2]&16777216&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function wz(t){let e,n,i,s,r;return n=new iz({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=C("span"),ue(n.$$.fragment),M(e,"class","cursor-pointer grid place-items-center")},m(o,a){R(o,e,a),le(n,e,null),i=!0,s||(r=$e(e,"click",t[22]),s=!0)},p:qe,i(o){i||(I(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&P(e),ce(n),s=!1,r()}}}function xz(t){let e,n,i,s,r;return n=new hk({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=C("span"),ue(n.$$.fragment),M(e,"class","cursor-pointer grid place-items-center")},m(o,a){R(o,e,a),le(n,e,null),i=!0,s||(r=$e(e,"click",t[46]),s=!0)},p:qe,i(o){i||(I(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&P(e),ce(n),s=!1,r()}}}function Mz(t){let e,n,i,s,r;return n=new hk({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=C("span"),ue(n.$$.fragment),M(e,"class","cursor-pointer grid place-items-center")},m(o,a){R(o,e,a),le(n,e,null),i=!0,s||(r=$e(e,"click",t[47]),s=!0)},p:qe,i(o){i||(I(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&P(e),ce(n),s=!1,r()}}}function Sz(t){let e=t[12].TIMER.selectAll+"",n,i,s;return{c(){n=ae(e),i=ae(" \xA0 "),s=C("span"),s.textContent="[A]",M(s,"class","flex ml-auto text-yellow-400")},m(r,o){R(r,n,o),R(r,i,o),R(r,s,o)},p(r,o){o[0]&4096&&e!==(e=r[12].TIMER.selectAll+"")&&ke(n,e)},d(r){r&&P(n),r&&P(i),r&&P(s)}}}function Ez(t){let e=t[12].TIMER.selectInterval+"",n,i,s;return{c(){n=ae(e),i=ae(" \xA0 "),s=C("span"),s.textContent="[T]",M(s,"class","flex ml-auto text-yellow-400")},m(r,o){R(r,n,o),R(r,i,o),R(r,s,o)},p(r,o){o[0]&4096&&e!==(e=r[12].TIMER.selectInterval+"")&&ke(n,e)},d(r){r&&P(n),r&&P(i),r&&P(s)}}}function Tz(t){let e=t[12].TIMER.invertSelection+"",n,i,s;return{c(){n=ae(e),i=ae(" \xA0 "),s=C("span"),s.textContent="[V]",M(s,"class","flex ml-auto text-yellow-400")},m(r,o){R(r,n,o),R(r,i,o),R(r,s,o)},p(r,o){o[0]&4096&&e!==(e=r[12].TIMER.invertSelection+"")&&ke(n,e)},d(r){r&&P(n),r&&P(i),r&&P(s)}}}function kz(t){let e=t[12].TIMER.cancel+"",n,i,s;return{c(){n=ae(e),i=ae(" \xA0 "),s=C("span"),s.textContent="[C / Esc]",M(s,"class","flex ml-auto text-yellow-400")},m(r,o){R(r,n,o),R(r,i,o),R(r,s,o)},p(r,o){o[0]&4096&&e!==(e=r[12].TIMER.cancel+"")&&ke(n,e)},d(r){r&&P(n),r&&P(i),r&&P(s)}}}function Az(t){let e=t[12].TIMER.delete+"",n,i,s;return{c(){n=ae(e),i=ae(" \xA0 "),s=C("span"),s.textContent="[D]",M(s,"class","flex ml-auto text-yellow-400")},m(r,o){R(r,n,o),R(r,i,o),R(r,s,o)},p(r,o){o[0]&4096&&e!==(e=r[12].TIMER.delete+"")&&ke(n,e)},d(r){r&&P(n),r&&P(i),r&&P(s)}}}function fw(t){let e;return{c(){e=C("span"),e.textContent="+2",M(e,"class","font-small text-red-500 svelte-1avbz7b")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function hw(t){let e;return{c(){e=C("span"),e.textContent="DNF",M(e,"class","font-small text-red-500 svelte-1avbz7b")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function Lz(t){let e,n,i=t[12].TIMER.delete+"",s,r;return e=new sv({}),{c(){ue(e.$$.fragment),n=O(),s=ae(i)},m(o,a){le(e,o,a),R(o,n,a),R(o,s,a),r=!0},p(o,a){(!r||a[0]&4096)&&i!==(i=o[12].TIMER.delete+"")&&ke(s,i)},i(o){r||(I(e.$$.fragment,o),r=!0)},o(o){H(e.$$.fragment,o),r=!1},d(o){ce(e,o),o&&P(n),o&&P(s)}}}function Cz(t){let e,n,i=t[12].TIMER.cancel+"",s,r;return e=new qo({}),{c(){ue(e.$$.fragment),n=O(),s=ae(i)},m(o,a){le(e,o,a),R(o,n,a),R(o,s,a),r=!0},p(o,a){(!r||a[0]&4096)&&i!==(i=o[12].TIMER.cancel+"")&&ke(s,i)},i(o){r||(I(e.$$.fragment,o),r=!0)},o(o){H(e.$$.fragment,o),r=!1},d(o){ce(e,o),o&&P(n),o&&P(s)}}}function Pz(t){let e,n,i=t[12].TIMER.save+"",s,r;return e=new ez({}),{c(){ue(e.$$.fragment),n=O(),s=ae(i)},m(o,a){le(e,o,a),R(o,n,a),R(o,s,a),r=!0},p(o,a){(!r||a[0]&4096)&&i!==(i=o[12].TIMER.save+"")&&ke(s,i)},i(o){r||(I(e.$$.fragment,o),r=!0)},o(o){H(e.$$.fragment,o),r=!1},d(o){ce(e,o),o&&P(n),o&&P(s)}}}function Rz(t){let e;return{c(){e=ae("+2")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function Iz(t){let e;return{c(){e=ae("DNF")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function Dz(t){let e=t[12].TIMER.noPenalty+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&4096&&e!==(e=i[12].TIMER.noPenalty+"")&&ke(n,e)},d(i){i&&P(n)}}}function Oz(t){let e,n,i=Lt(t[7].time,!1,!0)+"",s,r,o,a,l,c,u,f,h=rt(t[7].date).format("D MMM YYYY")+"",d,p,m,_,b=rt(t[7].date).format("HH:MM")+"",g,x,y,v,w,S,T,k,A,L,D,B,U,N,$,W,j,J,se,ne,K,q,te,re,Oe,Ee,ye,xe,Ae,De,de=t[7].penalty===ft.P2&&fw(),me=t[7].penalty===ft.DNF&&hw();c=new Y8({props:{width:"1.2rem",height:"1.2rem"}}),v=new Z8({}),D=new G8({});function We(be){t[54](be)}let Ue={placeholder:t[12].TIMER.comment};return t[7].comments!==void 0&&(Ue.value=t[7].comments),U=new Rh({props:Ue}),vt.push(()=>Vt(U,"value",We)),j=new Ct({props:{flat:!0,$$slots:{default:[Lz]},$$scope:{ctx:t}}}),j.$on("click",t[55]),se=new Ct({props:{flat:!0,$$slots:{default:[Cz]},$$scope:{ctx:t}}}),se.$on("click",t[56]),K=new Ct({props:{flat:!0,class:"mr-2",$$slots:{default:[Pz]},$$scope:{ctx:t}}}),K.$on("click",t[57]),te=new Ct({props:{flat:!0,class:t[7].penalty===ft.P2?"text-red-500":"",$$slots:{default:[Rz]},$$scope:{ctx:t}}}),te.$on("click",t[58]),Oe=new Ct({props:{flat:!0,class:t[7].penalty===ft.DNF?"text-red-500":"",$$slots:{default:[Iz]},$$scope:{ctx:t}}}),Oe.$on("click",t[59]),ye=new Ct({props:{flat:!0,class:t[7].penalty===ft.NONE?"text-green-500":"",$$slots:{default:[Dz]},$$scope:{ctx:t}}}),ye.$on("click",t[60]),{c(){e=C("div"),n=C("h2"),s=ae(i),r=O(),de&&de.c(),o=O(),me&&me.c(),a=O(),l=C("span"),ue(c.$$.fragment),u=O(),f=C("span"),d=ae(h),p=O(),m=C("br"),_=O(),g=ae(b),x=O(),y=C("div"),ue(v.$$.fragment),w=O(),S=C("span"),T=O(),k=C("img"),L=O(),ue(D.$$.fragment),B=O(),ue(U.$$.fragment),$=O(),W=C("div"),ue(j.$$.fragment),J=O(),ue(se.$$.fragment),ne=O(),ue(K.$$.fragment),q=O(),ue(te.$$.fragment),re=O(),ue(Oe.$$.fragment),Ee=O(),ue(ye.$$.fragment),M(n,"class","m-1 w-max"),M(f,"class","ml-2"),M(l,"class","flex items-center font-small svelte-1avbz7b"),M(e,"class","flex justify-between items-center text-gray-400 m-2"),M(S,"contenteditable","false"),M(S,"class","text-center"),t[7].scramble===void 0&&qr(()=>t[53].call(S)),wi(k.src,A=t[8])||M(k,"src",A),M(k,"class","preview col-start-1 col-end-3 mb-2 mx-auto"),M(k,"alt",""),M(y,"class","algorithm-container text-gray-400 m-2 svelte-1avbz7b"),M(W,"class","mt-2 flex")},m(be,F){R(be,e,F),E(e,n),E(n,s),E(n,r),de&&de.m(n,null),E(n,o),me&&me.m(n,null),E(e,a),E(e,l),le(c,l,null),E(l,u),E(l,f),E(f,d),E(f,p),E(f,m),E(f,_),E(f,g),R(be,x,F),R(be,y,F),le(v,y,null),E(y,w),E(y,S),t[7].scramble!==void 0&&(S.innerHTML=t[7].scramble),E(y,T),E(y,k),E(y,L),le(D,y,null),E(y,B),le(U,y,null),R(be,$,F),R(be,W,F),le(j,W,null),E(W,J),le(se,W,null),E(W,ne),le(K,W,null),E(W,q),le(te,W,null),E(W,re),le(Oe,W,null),E(W,Ee),le(ye,W,null),xe=!0,Ae||(De=$e(S,"input",t[53]),Ae=!0)},p(be,F){(!xe||F[0]&128)&&i!==(i=Lt(be[7].time,!1,!0)+"")&&ke(s,i),be[7].penalty===ft.P2?de||(de=fw(),de.c(),de.m(n,o)):de&&(de.d(1),de=null),be[7].penalty===ft.DNF?me||(me=hw(),me.c(),me.m(n,null)):me&&(me.d(1),me=null),(!xe||F[0]&128)&&h!==(h=rt(be[7].date).format("D MMM YYYY")+"")&&ke(d,h),(!xe||F[0]&128)&&b!==(b=rt(be[7].date).format("HH:MM")+"")&&ke(g,b),F[0]&128&&be[7].scramble!==S.innerHTML&&(S.innerHTML=be[7].scramble),(!xe||F[0]&256&&!wi(k.src,A=be[8]))&&M(k,"src",A);const V={};F[0]&4096&&(V.placeholder=be[12].TIMER.comment),!N&&F[0]&128&&(N=!0,V.value=be[7].comments,Ht(()=>N=!1)),U.$set(V);const _e={};F[0]&4096|F[2]&16777216&&(_e.$$scope={dirty:F,ctx:be}),j.$set(_e);const oe={};F[0]&4096|F[2]&16777216&&(oe.$$scope={dirty:F,ctx:be}),se.$set(oe);const X={};F[0]&4096|F[2]&16777216&&(X.$$scope={dirty:F,ctx:be}),K.$set(X);const fe={};F[0]&128&&(fe.class=be[7].penalty===ft.P2?"text-red-500":""),F[2]&16777216&&(fe.$$scope={dirty:F,ctx:be}),te.$set(fe);const Le={};F[0]&128&&(Le.class=be[7].penalty===ft.DNF?"text-red-500":""),F[2]&16777216&&(Le.$$scope={dirty:F,ctx:be}),Oe.$set(Le);const Pe={};F[0]&128&&(Pe.class=be[7].penalty===ft.NONE?"text-green-500":""),F[0]&4096|F[2]&16777216&&(Pe.$$scope={dirty:F,ctx:be}),ye.$set(Pe)},i(be){xe||(I(c.$$.fragment,be),I(v.$$.fragment,be),I(D.$$.fragment,be),I(U.$$.fragment,be),I(j.$$.fragment,be),I(se.$$.fragment,be),I(K.$$.fragment,be),I(te.$$.fragment,be),I(Oe.$$.fragment,be),I(ye.$$.fragment,be),xe=!0)},o(be){H(c.$$.fragment,be),H(v.$$.fragment,be),H(D.$$.fragment,be),H(U.$$.fragment,be),H(j.$$.fragment,be),H(se.$$.fragment,be),H(K.$$.fragment,be),H(te.$$.fragment,be),H(Oe.$$.fragment,be),H(ye.$$.fragment,be),xe=!1},d(be){be&&P(e),de&&de.d(),me&&me.d(),ce(c),be&&P(x),be&&P(y),ce(v),ce(D),ce(U),be&&P($),be&&P(W),ce(j),ce(se),ce(K),ce(te),ce(Oe),ce(ye),Ae=!1,De()}}}function Nz(t){let e=t[12].TIMER.cancel+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&4096&&e!==(e=i[12].TIMER.cancel+"")&&ke(n,e)},d(i){i&&P(n)}}}function Bz(t){let e=t[12].TIMER.delete+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&4096&&e!==(e=i[12].TIMER.delete+"")&&ke(n,e)},d(i){i&&P(n)}}}function Fz(t){let e,n=t[12].TIMER.removeAllSolves+"",i,s,r,o,a,l,c;return o=new Ct({props:{$$slots:{default:[Nz]},$$scope:{ctx:t}}}),o.$on("click",t[63]),l=new Ct({props:{class:"bg-red-800 hover:bg-red-700 text-gray-400",$$slots:{default:[Bz]},$$scope:{ctx:t}}}),l.$on("click",t[64]),{c(){e=C("h1"),i=ae(n),s=O(),r=C("div"),ue(o.$$.fragment),a=O(),ue(l.$$.fragment),M(e,"class","text-gray-400 mb-4 text-lg"),M(r,"class","flex justify-evenly")},m(u,f){R(u,e,f),E(e,i),R(u,s,f),R(u,r,f),le(o,r,null),E(r,a),le(l,r,null),c=!0},p(u,f){(!c||f[0]&4096)&&n!==(n=u[12].TIMER.removeAllSolves+"")&&ke(i,n);const h={};f[0]&4096|f[2]&16777216&&(h.$$scope={dirty:f,ctx:u}),o.$set(h);const d={};f[0]&4096|f[2]&16777216&&(d.$$scope={dirty:f,ctx:u}),l.$set(d)},i(u){c||(I(o.$$.fragment,u),I(l.$$.fragment,u),c=!0)},o(u){H(o.$$.fragment,u),H(l.$$.fragment,u),c=!1},d(u){u&&P(e),u&&P(s),u&&P(r),ce(o),ce(l)}}}function zz(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A,L,D,B,U=t[12].TIMER.edit+"",N,$,W,j=t[12].TIMER.select+"",J,se,ne,K=t[12].TIMER.copyScramble+"",q,te,re,Oe=t[12].TIMER.delete+"",Ee,ye,xe,Ae,De=t[2].pages>1&&rw(t),de=t[0].slice(t[2].start,t[2].end),me=[];for(let oe=0;oe<de.length;oe+=1)me[oe]=cw(iw(t,de,oe));const We=oe=>H(me[oe],1,1,()=>{me[oe]=null});let Ue=t[0].length>0&&uw(t);a=new $i({props:{position:"left",text:t[12].TIMER.shareAo5,$$slots:{default:[xz]},$$scope:{ctx:t}}}),c=new $i({props:{position:"left",text:t[12].TIMER.shareAo12,$$slots:{default:[Mz]},$$scope:{ctx:t}}}),h=new Ct({props:{tabindex:t[1]?0:-1,flat:!0,$$slots:{default:[Sz]},$$scope:{ctx:t}}}),h.$on("click",t[48]),p=new Ct({props:{tabindex:t[1]?0:-1,flat:!0,$$slots:{default:[Ez]},$$scope:{ctx:t}}}),p.$on("click",t[49]),_=new Ct({props:{tabindex:t[1]?0:-1,flat:!0,$$slots:{default:[Tz]},$$scope:{ctx:t}}}),_.$on("click",t[50]),g=new Ct({props:{tabindex:t[1]?0:-1,flat:!0,$$slots:{default:[kz]},$$scope:{ctx:t}}}),g.$on("click",t[51]),y=new Ct({props:{tabindex:t[1]?0:-1,flat:!0,$$slots:{default:[Az]},$$scope:{ctx:t}}}),y.$on("click",t[52]);function be(oe){t[62](oe)}let F={onClose:t[18],class:"max-w-xl",$$slots:{default:[Oz]},$$scope:{ctx:t}};t[5]!==void 0&&(F.show=t[5]),w=new La({props:F}),t[61](w),vt.push(()=>Vt(w,"show",be));function V(oe){t[66](oe)}let _e={onClose:t[33],$$slots:{default:[Fz]},$$scope:{ctx:t}};return t[6]!==void 0&&(_e.show=t[6]),k=new La({props:_e}),t[65](k),vt.push(()=>Vt(k,"show",V)),{c(){e=C("main"),De&&De.c(),n=O(),i=C("div");for(let oe=0;oe<me.length;oe+=1)me[oe].c();s=O(),r=C("div"),Ue&&Ue.c(),o=O(),ue(a.$$.fragment),l=O(),ue(c.$$.fragment),u=O(),f=C("div"),ue(h.$$.fragment),d=O(),ue(p.$$.fragment),m=O(),ue(_.$$.fragment),b=O(),ue(g.$$.fragment),x=O(),ue(y.$$.fragment),v=O(),ue(w.$$.fragment),T=O(),ue(k.$$.fragment),L=O(),D=C("ul"),B=C("li"),N=ae(U),$=O(),W=C("li"),J=ae(j),se=O(),ne=C("li"),q=ae(K),te=O(),re=C("li"),Ee=ae(Oe),M(i,"id","grid"),M(i,"class","text-gray-400 ml-8 mr-12 grid h-max-[100%] overflow-scroll svelte-1avbz7b"),M(r,"class","absolute top-3 right-2 text-gray-400 my-3 mx-1 flex flex-col gap-2"),M(f,"class","fixed rounded-md p-2 top-0 opacity-0 pointer-events-none transition-all duration-300 bg-gray-700 shadow-md flex w-max max-w-full actions z-20 svelte-1avbz7b"),pt(f,"isVisible",t[1]),M(B,"class","svelte-1avbz7b"),M(W,"class","svelte-1avbz7b"),M(ne,"class","svelte-1avbz7b"),M(re,"class","svelte-1avbz7b"),M(D,"class","context-menu svelte-1avbz7b"),pt(D,"active",t[9]),M(e,"class","w-full h-full")},m(oe,X){R(oe,e,X),De&&De.m(e,null),E(e,n),E(e,i);for(let fe=0;fe<me.length;fe+=1)me[fe].m(i,null);t[45](i),E(e,s),E(e,r),Ue&&Ue.m(r,null),E(r,o),le(a,r,null),E(r,l),le(c,r,null),E(e,u),E(e,f),le(h,f,null),E(f,d),le(p,f,null),E(f,m),le(_,f,null),E(f,b),le(g,f,null),E(f,x),le(y,f,null),E(e,v),le(w,e,null),E(e,T),le(k,e,null),E(e,L),E(e,D),E(D,B),E(B,N),E(D,$),E(D,W),E(W,J),E(D,se),E(D,ne),E(ne,q),E(D,te),E(D,re),E(re,Ee),t[71](D),ye=!0,xe||(Ae=[$e(window,"keyup",t[29]),$e(window,"click",t[37]),$e(B,"click",t[67]),$e(W,"click",t[68]),$e(ne,"click",t[69]),$e(re,"click",t[70]),$e(D,"click",t[72])],xe=!0)},p(oe,X){if(oe[2].pages>1?De?(De.p(oe,X),X[0]&4&&I(De,1)):(De=rw(oe),De.c(),I(De,1),De.m(e,n)):De&&(ot(),H(De,1,1,()=>{De=null}),at()),X[0]&1048581|X[1]&8){de=oe[0].slice(oe[2].start,oe[2].end);let Ze;for(Ze=0;Ze<de.length;Ze+=1){const _t=iw(oe,de,Ze);me[Ze]?(me[Ze].p(_t,X),I(me[Ze],1)):(me[Ze]=cw(_t),me[Ze].c(),I(me[Ze],1),me[Ze].m(i,null))}for(ot(),Ze=de.length;Ze<me.length;Ze+=1)We(Ze);at()}oe[0].length>0?Ue?(Ue.p(oe,X),X[0]&1&&I(Ue,1)):(Ue=uw(oe),Ue.c(),I(Ue,1),Ue.m(r,o)):Ue&&(ot(),H(Ue,1,1,()=>{Ue=null}),at());const fe={};X[0]&4096&&(fe.text=oe[12].TIMER.shareAo5),X[2]&16777216&&(fe.$$scope={dirty:X,ctx:oe}),a.$set(fe);const Le={};X[0]&4096&&(Le.text=oe[12].TIMER.shareAo12),X[2]&16777216&&(Le.$$scope={dirty:X,ctx:oe}),c.$set(Le);const Pe={};X[0]&2&&(Pe.tabindex=oe[1]?0:-1),X[0]&4096|X[2]&16777216&&(Pe.$$scope={dirty:X,ctx:oe}),h.$set(Pe);const Ye={};X[0]&2&&(Ye.tabindex=oe[1]?0:-1),X[0]&4096|X[2]&16777216&&(Ye.$$scope={dirty:X,ctx:oe}),p.$set(Ye);const Ke={};X[0]&2&&(Ke.tabindex=oe[1]?0:-1),X[0]&4096|X[2]&16777216&&(Ke.$$scope={dirty:X,ctx:oe}),_.$set(Ke);const Z={};X[0]&2&&(Z.tabindex=oe[1]?0:-1),X[0]&4096|X[2]&16777216&&(Z.$$scope={dirty:X,ctx:oe}),g.$set(Z);const ve={};X[0]&2&&(ve.tabindex=oe[1]?0:-1),X[0]&4096|X[2]&16777216&&(ve.$$scope={dirty:X,ctx:oe}),y.$set(ve),(!ye||X[0]&2)&&pt(f,"isVisible",oe[1]);const Re={};X[0]&4488|X[2]&16777216&&(Re.$$scope={dirty:X,ctx:oe}),!S&&X[0]&32&&(S=!0,Re.show=oe[5],Ht(()=>S=!1)),w.$set(Re);const He={};X[0]&4112|X[2]&16777216&&(He.$$scope={dirty:X,ctx:oe}),!A&&X[0]&64&&(A=!0,He.show=oe[6],Ht(()=>A=!1)),k.$set(He),(!ye||X[0]&4096)&&U!==(U=oe[12].TIMER.edit+"")&&ke(N,U),(!ye||X[0]&4096)&&j!==(j=oe[12].TIMER.select+"")&&ke(J,j),(!ye||X[0]&4096)&&K!==(K=oe[12].TIMER.copyScramble+"")&&ke(q,K),(!ye||X[0]&4096)&&Oe!==(Oe=oe[12].TIMER.delete+"")&&ke(Ee,Oe),(!ye||X[0]&512)&&pt(D,"active",oe[9])},i(oe){if(!ye){I(De);for(let X=0;X<de.length;X+=1)I(me[X]);I(Ue),I(a.$$.fragment,oe),I(c.$$.fragment,oe),I(h.$$.fragment,oe),I(p.$$.fragment,oe),I(_.$$.fragment,oe),I(g.$$.fragment,oe),I(y.$$.fragment,oe),I(w.$$.fragment,oe),I(k.$$.fragment,oe),ye=!0}},o(oe){H(De),me=me.filter(Boolean);for(let X=0;X<me.length;X+=1)H(me[X]);H(Ue),H(a.$$.fragment,oe),H(c.$$.fragment,oe),H(h.$$.fragment,oe),H(p.$$.fragment,oe),H(_.$$.fragment,oe),H(g.$$.fragment,oe),H(y.$$.fragment,oe),H(w.$$.fragment,oe),H(k.$$.fragment,oe),ye=!1},d(oe){oe&&P(e),De&&De.d(),en(me,oe),t[45](null),Ue&&Ue.d(),ce(a),ce(c),ce(h),ce(p),ce(_),ce(g),ce(y),t[61](null),ce(w),t[65](null),ce(k),t[71](null),xe=!1,Vn(Ae)}}}function Uz(t,e,n){let i,s,r,o,a=Rr(Hi,z=>Dr(z));dt(t,a,z=>n(12,o=z));const l=Ds.getInstance(),c=Xr.getInstance();let{context:u}=e,{solves:f,tab:h,selected:d,selectSolve:p}=u;dt(t,f,z=>n(0,i=z)),dt(t,h,z=>n(36,s=z)),dt(t,d,z=>n(1,r=z));let m=new B8([],100),_=0,b,g,x=!1,y=!1,v,w,S=Eb,T,k=!1,A,L;function D(z){z&&(w.comments=(z.comments||"").trim(),w.penalty=z.penalty,l.updateSolve(z)),n(5,x=!1)}function B(z){w=z,n(7,v={...z});let Se=v.mode,Te=jc.has(Se)?Se:"333";T=Ns.fromSequence(v.scramble,{...jc.get(Te),rounded:!0,headless:!0}),Ol([T],200).then(Be=>{let Je=Be.subscribe(ct=>{ct!=="__initial__"&&(ct!=null?n(8,S=ct):Je())})}),n(5,x=!0)}function U(z){performance.now()-_<200||r?p(z):setTimeout(()=>performance.now()-_>=200&&B(z),200),_=performance.now()}function N(z,Se){z===ft.P2?v.penalty!=ft.P2&&n(7,v.time+=2e3,v):v.penalty===ft.P2&&n(7,v.time-=2e3,v),n(7,v.penalty=z,v),Se&&l.updateSolve(v)}function $(){n(6,y=!0)}function W(){At(d,r=i.length,r);for(let z=0,Se=r;z<Se;z+=1)At(f,i[z].selected=!0,i)}function j(){At(d,r=i.length-r,r);for(let z=0,Se=i.length;z<Se;z+=1)At(f,i[z].selected=!i[z].selected,i)}function J(){let z,Se,Te=i.length;for(z=0;z<Te&&!i[z].selected;z+=1);for(Se=Te-1;Se>=0&&!i[Se].selected;Se-=1);for(let Be=z;Be<=Se;Be+=1)i[Be].selected||(At(f,i[Be].selected=!0,i),At(d,r+=1,r))}function se(){At(d,r=0,r);for(let z=0,Se=i.length;z<Se;z+=1)At(f,i[z].selected=!1,i)}function ne(z){l.removeSolves(z)}function K(){ne(i.filter(z=>z.selected)),At(d,r=0,r)}function q(z){if(s==1)switch(z.code){case"KeyC":case"Escape":se(),n(9,k=!1);break;case"KeyA":W();break;case"KeyT":J();break;case"KeyV":j();break;case"KeyD":r?K():$();break;case"Enter":y&&g.close(!0)}}function te(z){m.setData(i),n(2,m)}function re(z){z===-1&&m.nextPage(),z===-2&&m.prevPage(),z!=-1&&z!=-2&&m.setPage(z),n(2,m)}function Oe(z){navigator.clipboard.writeText(z.replaceAll("<br>",`
`)).then(()=>{c.addNotification({key:crypto.randomUUID(),header:o.global.done,text:o.global.copiedToClipboard,timeout:1e3})})}function Ee(z){let Se=i.slice(0,z).reverse(),Te=qf(z,Se,tr.SEQUENTIAL),Be=(ct,ut)=>Qr(ct)?ut:Qr(ut)||ct.time<ut.time?ct:ut,Je=Se.reduce((ct,ut)=>[Be(ct[0],ut)===ut?ut:ct[0],Be(ct[1],ut)===ut?ct[1]:ut],[Se[0],Se[0]]);Te.length===z&&Oe(`Ao${z}: ${Lt(Te[z-1],!0)} = ${Se.map(ct=>ct===Je[0]||ct===Je[1]?"("+v2(ct,!0)+")":v2(ct,!0)).join(", ")}`)}function ye(z){z&&ne(i)}function xe(z,Se){z.stopPropagation(),n(10,A.style.left=z.clientX+"px",A),n(10,A.style.top=z.clientY+"px",A),n(7,v=Se),n(9,k=!0)}function Ae(){if(r===1){for(let z=0,Se=i.length;z<Se;z+=1)if(i[z].selected){let Te=Math.ceil((z+1)/m.limit);m.setPage(Te),Tf().then(()=>{L.children[z-m.start].scrollIntoView({block:"center",inline:"center"})});break}}}const De=()=>n(9,k=!1),de=()=>re(1),me=()=>re(-2),We=z=>re(z),Ue=()=>re(-1),be=()=>re(1/0),F=z=>U(z),V=(z,Se)=>xe(Se,z);function _e(z){vt[z?"unshift":"push"](()=>{L=z,n(11,L)})}const oe=()=>Ee(5),X=()=>Ee(12),fe=()=>W(),Le=()=>J(),Pe=()=>j(),Ye=()=>se(),Ke=()=>K();function Z(){v.scramble=this.innerHTML,n(7,v)}function ve(z){t.$$.not_equal(v.comments,z)&&(v.comments=z,n(7,v))}const Re=()=>{ne([v]),b.close()},He=()=>b.close(),Ze=()=>b.close(v),_t=()=>N(ft.P2),ln=()=>N(ft.DNF),lt=()=>N(ft.NONE);function gt(z){vt[z?"unshift":"push"](()=>{b=z,n(3,b)})}function bn(z){x=z,n(5,x)}const Ot=()=>g.close(),Nn=()=>g.close(!0);function Pn(z){vt[z?"unshift":"push"](()=>{g=z,n(4,g)})}function cn(z){y=z,n(6,y)}const mn=()=>B(v),jt=()=>p(v),Gt=()=>Oe(v.scramble),Bn=()=>ne([v]);function rn(z){vt[z?"unshift":"push"](()=>{A=z,n(10,A)})}const vn=()=>n(9,k=!1);return t.$$set=z=>{"context"in z&&n(35,u=z.context)},t.$$.update=()=>{t.$$.dirty[0]&1&&te(),t.$$.dirty[0]&2&&Ae(),t.$$.dirty[0]&1|t.$$.dirty[1]&32&&s!=1&&i.forEach(z=>z.selected&&p(z))},[i,r,m,b,g,x,y,v,S,k,A,L,o,a,f,h,d,p,D,B,U,N,$,W,j,J,se,ne,K,q,re,Oe,Ee,ye,xe,u,s,De,de,me,We,Ue,be,F,V,_e,oe,X,fe,Le,Pe,Ye,Ke,Z,ve,Re,He,Ze,_t,ln,lt,gt,bn,Ot,Nn,Pn,cn,mn,jt,Gt,Bn,rn,vn]}class Hz extends xt{constructor(e){super(),wt(this,e,Uz,zz,yt,{context:35},null,[-1,-1,-1])}}/*!
 * Chart.js v4.0.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */function ho(){}const Vz=(()=>{let t=0;return()=>t++})();function Sn(t){return t===null||typeof t>"u"}function Yn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function _n(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function di(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ps(t,e){return di(t)?t:e}function Yt(t,e){return typeof t>"u"?e:t}const Gz=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,mk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Zt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pn(t,e,n,i){let s,r,o;if(Yn(t))if(r=t.length,i)for(s=r-1;s>=0;s--)e.call(n,t[s],s);else for(s=0;s<r;s++)e.call(n,t[s],s);else if(_n(t))for(o=Object.keys(t),r=o.length,s=0;s<r;s++)e.call(n,t[o[s]],o[s])}function vm(t,e){let n,i,s,r;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(s=t[n],r=e[n],s.datasetIndex!==r.datasetIndex||s.index!==r.index)return!1;return!0}function ym(t){if(Yn(t))return t.map(ym);if(_n(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let s=0;for(;s<i;++s)e[n[s]]=ym(t[n[s]]);return e}return t}function gk(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Wz(t,e,n,i){if(!gk(t))return;const s=e[t],r=n[t];_n(s)&&_n(r)?Xf(s,r,i):e[t]=ym(r)}function Xf(t,e,n){const i=Yn(e)?e:[e],s=i.length;if(!_n(t))return t;n=n||{};const r=n.merger||Wz;let o;for(let a=0;a<s;++a){if(o=i[a],!_n(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)r(l[c],t,o,n)}return t}function hf(t,e){return Xf(t,e,{merger:jz})}function jz(t,e,n){if(!gk(t))return;const i=e[t],s=n[t];_n(i)&&_n(s)?hf(i,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ym(s))}const dw={"":t=>t,x:t=>t.x,y:t=>t.y};function Yz(t){const e=t.split("."),n=[];let i="";for(const s of e)i+=s,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function qz(t){const e=Yz(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Ca(t,e){return(dw[e]||(dw[e]=qz(e)))(t)}function rv(t){return t.charAt(0).toUpperCase()+t.slice(1)}const sr=t=>typeof t<"u",Pa=t=>typeof t=="function",pw=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Xz(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const si=Math.PI,qn=2*si,Zz=qn+si,wm=Number.POSITIVE_INFINITY,Jz=si/180,pi=si/2,Ua=si/4,mw=si*2/3,_a=Math.log10,nr=Math.sign;function df(t,e,n){return Math.abs(t-e)<n}function gw(t){const e=Math.round(t);t=df(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(_a(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function Kz(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((s,r)=>s-r).pop(),e}function $c(t){return!isNaN(parseFloat(t))&&isFinite(t)}function $z(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function _k(t,e,n){let i,s,r;for(i=0,s=t.length;i<s;i++)r=t[i][n],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function Sr(t){return t*(si/180)}function ov(t){return t*(180/si)}function _w(t){if(!di(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function bk(t,e){const n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i);let r=Math.atan2(i,n);return r<-.5*si&&(r+=qn),{angle:r,distance:s}}function H1(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Qz(t,e){return(t-e+Zz)%qn-si}function Rs(t){return(t%qn+qn)%qn}function Zf(t,e,n,i){const s=Rs(t),r=Rs(e),o=Rs(n),a=Rs(r-s),l=Rs(o-s),c=Rs(s-r),u=Rs(s-o);return s===r||s===o||i&&r===o||a>l&&c<u}function Di(t,e,n){return Math.max(e,Math.min(n,t))}function e7(t){return Di(t,-32768,32767)}function Ao(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function av(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,s=0,r;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const Lo=(t,e,n,i)=>av(t,n,i?s=>{const r=t[s][e];return r<n||r===n&&t[s+1][e]===n}:s=>t[s][e]<n),t7=(t,e,n)=>av(t,n,i=>t[i][e]>=n);function n7(t,e,n){let i=0,s=t.length;for(;i<s&&t[i]<e;)i++;for(;s>i&&t[s-1]>n;)s--;return i>0||s<t.length?t.slice(i,s):t}const vk=["push","pop","shift","splice","unshift"];function i7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),vk.forEach(n=>{const i="_onData"+rv(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...r){const o=s.apply(this,r);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...r)}),o}})})}function bw(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,s=i.indexOf(e);s!==-1&&i.splice(s,1),!(i.length>0)&&(vk.forEach(r=>{delete t[r]}),delete t._chartjs)}function yk(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const wk=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function xk(t,e){let n=!1;return function(...i){n||(n=!0,wk.call(window,()=>{n=!1,t.apply(e,i)}))}}function s7(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const lv=t=>t==="start"?"left":t==="end"?"right":"center",qi=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,r7=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function Mk(t,e,n){const i=e.length;let s=0,r=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:u,minDefined:f,maxDefined:h}=o.getUserBounds();f&&(s=Di(Math.min(Lo(a,o.axis,c).lo,n?i:Lo(e,l,o.getPixelForValue(c)).lo),0,i-1)),h?r=Di(Math.max(Lo(a,o.axis,u,!0).hi+1,n?0:Lo(e,l,o.getPixelForValue(u),!0).hi+1),s,i)-s:r=i-s}return{start:s,count:r}}function Sk(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=s,!0;const r=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,s),r}const id=t=>t===0||t===1,vw=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*qn/n)),yw=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*qn/n)+1,_p={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pi)+1,easeOutSine:t=>Math.sin(t*pi),easeInOutSine:t=>-.5*(Math.cos(si*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>id(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>id(t)?t:vw(t,.075,.3),easeOutElastic:t=>id(t)?t:yw(t,.075,.3),easeInOutElastic(t){return id(t)?t:t<.5?.5*vw(t*2,.1125,.45):.5+.5*yw(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_p.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_p.easeInBounce(t*2)*.5:_p.easeOutBounce(t*2-1)*.5+.5};var ww=_p;/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function Ih(t){return t+.5|0}const ba=(t,e,n)=>Math.max(Math.min(t,n),e);function Yu(t){return ba(Ih(t*2.55),0,255)}function Ma(t){return ba(Ih(t*255),0,255)}function Mo(t){return ba(Ih(t/2.55)/100,0,1)}function xw(t){return ba(Ih(t*100),0,100)}const Ys={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},V1=[..."0123456789ABCDEF"],o7=t=>V1[t&15],a7=t=>V1[(t&240)>>4]+V1[t&15],sd=t=>(t&240)>>4===(t&15),l7=t=>sd(t.r)&&sd(t.g)&&sd(t.b)&&sd(t.a);function c7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Ys[t[1]]*17,g:255&Ys[t[2]]*17,b:255&Ys[t[3]]*17,a:e===5?Ys[t[4]]*17:255}:(e===7||e===9)&&(n={r:Ys[t[1]]<<4|Ys[t[2]],g:Ys[t[3]]<<4|Ys[t[4]],b:Ys[t[5]]<<4|Ys[t[6]],a:e===9?Ys[t[7]]<<4|Ys[t[8]]:255})),n}const u7=(t,e)=>t<255?e(t):"";function f7(t){var e=l7(t)?o7:a7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+u7(t.a,e):void 0}const h7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ek(t,e,n){const i=e*Math.min(n,1-n),s=(r,o=(r+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function d7(t,e,n){const i=(s,r=(s+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function p7(t,e,n){const i=Ek(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)i[s]*=1-e-n,i[s]+=e;return i}function m7(t,e,n,i,s){return t===s?(e-n)/i+(e<n?6:0):e===s?(n-t)/i+2:(t-e)/i+4}function cv(t){const n=t.r/255,i=t.g/255,s=t.b/255,r=Math.max(n,i,s),o=Math.min(n,i,s),a=(r+o)/2;let l,c,u;return r!==o&&(u=r-o,c=a>.5?u/(2-r-o):u/(r+o),l=m7(n,i,s,u,r),l=l*60+.5),[l|0,c||0,a]}function uv(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Ma)}function fv(t,e,n){return uv(Ek,t,e,n)}function g7(t,e,n){return uv(p7,t,e,n)}function _7(t,e,n){return uv(d7,t,e,n)}function Tk(t){return(t%360+360)%360}function b7(t){const e=h7.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Yu(+e[5]):Ma(+e[5]));const s=Tk(+e[2]),r=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=g7(s,r,o):e[1]==="hsv"?i=_7(s,r,o):i=fv(s,r,o),{r:i[0],g:i[1],b:i[2],a:n}}function v7(t,e){var n=cv(t);n[0]=Tk(n[0]+e),n=fv(n),t.r=n[0],t.g=n[1],t.b=n[2]}function y7(t){if(!t)return;const e=cv(t),n=e[0],i=xw(e[1]),s=xw(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${s}%, ${Mo(t.a)})`:`hsl(${n}, ${i}%, ${s}%)`}const Mw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Sw={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function w7(){const t={},e=Object.keys(Sw),n=Object.keys(Mw);let i,s,r,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],s=0;s<n.length;s++)r=n[s],a=a.replace(r,Mw[r]);r=parseInt(Sw[o],16),t[a]=[r>>16&255,r>>8&255,r&255]}return t}let rd;function x7(t){rd||(rd=w7(),rd.transparent=[0,0,0,0]);const e=rd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const M7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function S7(t){const e=M7.exec(t);let n=255,i,s,r;if(!!e){if(e[7]!==i){const o=+e[7];n=e[8]?Yu(o):ba(o*255,0,255)}return i=+e[1],s=+e[3],r=+e[5],i=255&(e[2]?Yu(i):ba(i,0,255)),s=255&(e[4]?Yu(s):ba(s,0,255)),r=255&(e[6]?Yu(r):ba(r,0,255)),{r:i,g:s,b:r,a:n}}}function E7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Mo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const u0=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ql=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function T7(t,e,n){const i=ql(Mo(t.r)),s=ql(Mo(t.g)),r=ql(Mo(t.b));return{r:Ma(u0(i+n*(ql(Mo(e.r))-i))),g:Ma(u0(s+n*(ql(Mo(e.g))-s))),b:Ma(u0(r+n*(ql(Mo(e.b))-r))),a:t.a+n*(e.a-t.a)}}function od(t,e,n){if(t){let i=cv(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=fv(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function kk(t,e){return t&&Object.assign(e||{},t)}function Ew(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ma(t[3]))):(e=kk(t,{r:0,g:0,b:0,a:1}),e.a=Ma(e.a)),e}function k7(t){return t.charAt(0)==="r"?S7(t):b7(t)}class xm{constructor(e){if(e instanceof xm)return e;const n=typeof e;let i;n==="object"?i=Ew(e):n==="string"&&(i=c7(e)||x7(e)||k7(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=kk(this._rgb);return e&&(e.a=Mo(e.a)),e}set rgb(e){this._rgb=Ew(e)}rgbString(){return this._valid?E7(this._rgb):void 0}hexString(){return this._valid?f7(this._rgb):void 0}hslString(){return this._valid?y7(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,s=e.rgb;let r;const o=n===r?.5:n,a=2*o-1,l=i.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;r=1-c,i.r=255&c*i.r+r*s.r+.5,i.g=255&c*i.g+r*s.g+.5,i.b=255&c*i.b+r*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=T7(this._rgb,e._rgb,n)),this}clone(){return new xm(this.rgb)}alpha(e){return this._rgb.a=Ma(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ih(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return od(this._rgb,2,e),this}darken(e){return od(this._rgb,2,-e),this}saturate(e){return od(this._rgb,1,e),this}desaturate(e){return od(this._rgb,1,-e),this}rotate(e){return v7(this._rgb,e),this}}function Ak(t){return new xm(t)}function Lk(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Tw(t){return Lk(t)?t:Ak(t)}function f0(t){return Lk(t)?t:Ak(t).saturate(.5).darken(.1).hexString()}const A7=["x","y","borderWidth","radius","tension"],L7=["color","borderColor","backgroundColor"];function C7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:L7},numbers:{type:"number",properties:A7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function P7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const kw=new Map;function R7(t,e){e=e||{};const n=t+JSON.stringify(e);let i=kw.get(n);return i||(i=new Intl.NumberFormat(t,e),kw.set(n,i)),i}function Dh(t,e,n){return R7(e,n).format(t)}const Ck={values(t){return Yn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let s,r=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),r=I7(t,n)}const o=_a(Math.abs(r)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Dh(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(_a(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?Ck.numeric.call(this,t,e,n):""}};function I7(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var bg={formatters:Ck};function D7(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const wl=Object.create(null),G1=Object.create(null);function pf(t,e){if(!e)return t;const n=e.split(".");for(let i=0,s=n.length;i<s;++i){const r=n[i];t=t[r]||(t[r]=Object.create(null))}return t}function h0(t,e,n){return typeof e=="string"?Xf(pf(t,e),n):Xf(pf(t,""),e)}class O7{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,s)=>f0(s.backgroundColor),this.hoverBorderColor=(i,s)=>f0(s.borderColor),this.hoverColor=(i,s)=>f0(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return h0(this,e,n)}get(e){return pf(this,e)}describe(e,n){return h0(G1,e,n)}override(e,n){return h0(wl,e,n)}route(e,n,i,s){const r=pf(this,e),o=pf(this,i),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return _n(l)?Object.assign({},c,l):Yt(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var gi=new O7({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[C7,P7,D7]);function N7(t){return!t||Sn(t.size)||Sn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Mm(t,e,n,i,s){let r=e[s];return r||(r=e[s]=t.measureText(s).width,n.push(s)),r>i&&(i=r),i}function B7(t,e,n,i){i=i||{};let s=i.data=i.data||{},r=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(s=i.data={},r=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,u,f,h;for(l=0;l<a;l++)if(f=n[l],f!=null&&Yn(f)!==!0)o=Mm(t,s,r,o,f);else if(Yn(f))for(c=0,u=f.length;c<u;c++)h=f[c],h!=null&&!Yn(h)&&(o=Mm(t,s,r,o,h));t.restore();const d=r.length/2;if(d>n.length){for(l=0;l<d;l++)delete s[r[l]];r.splice(0,d)}return o}function Ha(t,e,n){const i=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*i)/i+s}function Aw(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function W1(t,e,n,i){Pk(t,e,n,i,null)}function Pk(t,e,n,i,s){let r,o,a,l,c,u,f,h;const d=e.pointStyle,p=e.rotation,m=e.radius;let _=(p||0)*Jz;if(d&&typeof d=="object"&&(r=d.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(_),t.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),d){default:s?t.ellipse(n,i,s/2,m,0,0,qn):t.arc(n,i,m,0,qn),t.closePath();break;case"triangle":u=s?s/2:m,t.moveTo(n+Math.sin(_)*u,i-Math.cos(_)*m),_+=mw,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*m),_+=mw,t.lineTo(n+Math.sin(_)*u,i-Math.cos(_)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,o=Math.cos(_+Ua)*l,f=Math.cos(_+Ua)*(s?s/2-c:l),a=Math.sin(_+Ua)*l,h=Math.sin(_+Ua)*(s?s/2-c:l),t.arc(n-f,i-a,c,_-si,_-pi),t.arc(n+h,i-o,c,_-pi,_),t.arc(n+f,i+a,c,_,_+pi),t.arc(n-h,i+o,c,_+pi,_+si),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=s?s/2:l,t.rect(n-u,i-l,2*u,2*l);break}_+=Ua;case"rectRot":f=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,h=Math.sin(_)*(s?s/2:m),t.moveTo(n-f,i-a),t.lineTo(n+h,i-o),t.lineTo(n+f,i+a),t.lineTo(n-h,i+o),t.closePath();break;case"crossRot":_+=Ua;case"cross":f=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,h=Math.sin(_)*(s?s/2:m),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"star":f=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,h=Math.sin(_)*(s?s/2:m),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o),_+=Ua,f=Math.cos(_)*(s?s/2:m),o=Math.cos(_)*m,a=Math.sin(_)*m,h=Math.sin(_)*(s?s/2:m),t.moveTo(n-f,i-a),t.lineTo(n+f,i+a),t.moveTo(n+h,i-o),t.lineTo(n-h,i+o);break;case"line":o=s?s/2:Math.cos(_)*m,a=Math.sin(_)*m,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(_)*(s?s/2:m),i+Math.sin(_)*m);break}t.fill(),e.borderWidth>0&&t.stroke()}}function Jf(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function vg(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function yg(t){t.restore()}function F7(t,e,n,i,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else s==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function z7(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function xl(t,e,n,i,s,r={}){const o=Yn(e)?e:[e],a=r.strokeWidth>0&&r.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,U7(t,r),l=0;l<o.length;++l)c=o[l],r.backdrop&&V7(t,r.backdrop),a&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),Sn(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,n,i,r.maxWidth)),t.fillText(c,n,i,r.maxWidth),H7(t,n,i,c,r),i+=s.lineHeight;t.restore()}function U7(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Sn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function H7(t,e,n,i,s){if(s.strikethrough||s.underline){const r=t.measureText(i),o=e-r.actualBoundingBoxLeft,a=e+r.actualBoundingBoxRight,l=n-r.actualBoundingBoxAscent,c=n+r.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function V7(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Kf(t,e){const{x:n,y:i,w:s,h:r,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-pi,si,!0),t.lineTo(n,i+r-o.bottomLeft),t.arc(n+o.bottomLeft,i+r-o.bottomLeft,o.bottomLeft,si,pi,!0),t.lineTo(n+s-o.bottomRight,i+r),t.arc(n+s-o.bottomRight,i+r-o.bottomRight,o.bottomRight,pi,0,!0),t.lineTo(n+s,i+o.topRight),t.arc(n+s-o.topRight,i+o.topRight,o.topRight,0,-pi,!0),t.lineTo(n+o.topLeft,i)}const G7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,W7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function j7(t,e){const n=(""+t).match(G7);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Y7=t=>+t||0;function hv(t,e){const n={},i=_n(e),s=i?Object.keys(e):e,r=_n(t)?i?o=>Yt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=Y7(r(o));return n}function Rk(t){return hv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function fl(t){return hv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Qi(t){const e=Rk(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ki(t,e){t=t||{},e=e||gi.font;let n=Yt(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Yt(t.style,e.style);i&&!(""+i).match(W7)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const s={family:Yt(t.family,e.family),lineHeight:j7(Yt(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Yt(t.weight,e.weight),string:""};return s.string=N7(s),s}function qu(t,e,n,i){let s=!0,r,o,a;for(r=0,o=t.length;r<o;++r)if(a=t[r],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),s=!1),n!==void 0&&Yn(a)&&(a=a[n%a.length],s=!1),a!==void 0))return i&&!s&&(i.cacheable=!1),a}function q7(t,e,n){const{min:i,max:s}=t,r=mk(e,(s-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(r)),max:o(s,r)}}function Ba(t,e){return Object.assign(Object.create(t),e)}function dv(t,e=[""],n=t,i,s=()=>t[0]){sr(i)||(i=Nk("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:s,override:o=>dv([o,...t],e,n,i)};return new Proxy(r,{deleteProperty(o,a){return delete o[a],delete o._keys,delete t[0][a],!0},get(o,a){return Dk(o,a,()=>tU(a,e,t,o))},getOwnPropertyDescriptor(o,a){return Reflect.getOwnPropertyDescriptor(o._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,a){return Cw(o).includes(a)},ownKeys(o){return Cw(o)},set(o,a,l){const c=o._storage||(o._storage=s());return o[a]=c[a]=l,delete o._keys,!0}})}function Qc(t,e,n,i){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Ik(t,i),setContext:r=>Qc(t,r,n,i),override:r=>Qc(t.override(r),e,n,i)};return new Proxy(s,{deleteProperty(r,o){return delete r[o],delete t[o],!0},get(r,o,a){return Dk(r,o,()=>Z7(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(r,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(r,o,a){return t[o]=a,delete r[o],!0}})}function Ik(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:i,isScriptable:Pa(n)?n:()=>n,isIndexable:Pa(i)?i:()=>i}}const X7=(t,e)=>t?t+rv(e):e,pv=(t,e)=>_n(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Dk(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function Z7(t,e,n){const{_proxy:i,_context:s,_subProxy:r,_descriptors:o}=t;let a=i[e];return Pa(a)&&o.isScriptable(e)&&(a=J7(e,a,t,n)),Yn(a)&&a.length&&(a=K7(e,a,t,o.isIndexable)),pv(e,a)&&(a=Qc(a,s,r&&r[e],o)),a}function J7(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(r,o||i),a.delete(t),pv(t,e)&&(e=mv(s._scopes,s,t,e)),e}function K7(t,e,n,i){const{_proxy:s,_context:r,_subProxy:o,_descriptors:a}=n;if(sr(r.index)&&i(t))e=e[r.index%e.length];else if(_n(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=mv(c,s,t,u);e.push(Qc(f,r,o&&o[t],a))}}return e}function Ok(t,e,n){return Pa(t)?t(e,n):t}const $7=(t,e)=>t===!0?e:typeof t=="string"?Ca(e,t):void 0;function Q7(t,e,n,i,s){for(const r of e){const o=$7(n,r);if(o){t.add(o);const a=Ok(o._fallback,n,s);if(sr(a)&&a!==n&&a!==i)return a}else if(o===!1&&sr(i)&&n!==i)return null}return!1}function mv(t,e,n,i){const s=e._rootScopes,r=Ok(e._fallback,n,i),o=[...t,...s],a=new Set;a.add(i);let l=Lw(a,o,n,r||n,i);return l===null||sr(r)&&r!==n&&(l=Lw(a,o,r,l,i),l===null)?!1:dv(Array.from(a),[""],s,r,()=>eU(e,n,i))}function Lw(t,e,n,i,s){for(;n;)n=Q7(t,e,n,i,s);return n}function eU(t,e,n){const i=t._getTarget();e in i||(i[e]={});const s=i[e];return Yn(s)&&_n(n)?n:s||{}}function tU(t,e,n,i){let s;for(const r of e)if(s=Nk(X7(r,t),n),sr(s))return pv(t,s)?mv(n,i,t,s):s}function Nk(t,e){for(const n of e){if(!n)continue;const i=n[t];if(sr(i))return i}}function Cw(t){let e=t._keys;return e||(e=t._keys=nU(t._scopes)),e}function nU(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(i);return Array.from(e)}function Bk(t,e,n,i){const{iScale:s}=t,{key:r="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],o[a]={r:s.parse(Ca(u,r),c)};return o}const iU=Number.EPSILON||1e-14,eu=(t,e)=>e<t.length&&!t[e].skip&&t[e],Fk=t=>t==="x"?"y":"x";function sU(t,e,n,i){const s=t.skip?e:t,r=e,o=n.skip?e:n,a=H1(r,s),l=H1(o,r);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=i*c,h=i*u;return{previous:{x:r.x-f*(o.x-s.x),y:r.y-f*(o.y-s.y)},next:{x:r.x+h*(o.x-s.x),y:r.y+h*(o.y-s.y)}}}function rU(t,e,n){const i=t.length;let s,r,o,a,l,c=eu(t,0);for(let u=0;u<i-1;++u)if(l=c,c=eu(t,u+1),!(!l||!c)){if(df(e[u],0,iU)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],r=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=r*o*e[u])}}function oU(t,e,n="x"){const i=Fk(n),s=t.length;let r,o,a,l=eu(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=eu(t,c+1),!a)continue;const u=a[n],f=a[i];o&&(r=(u-o[n])/3,a[`cp1${n}`]=u-r,a[`cp1${i}`]=f-r*e[c]),l&&(r=(l[n]-u)/3,a[`cp2${n}`]=u+r,a[`cp2${i}`]=f+r*e[c])}}function aU(t,e="x"){const n=Fk(e),i=t.length,s=Array(i).fill(0),r=Array(i);let o,a,l,c=eu(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=eu(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}r[o]=a?c?nr(s[o-1])!==nr(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}rU(t,s,r),oU(t,r,e)}function ad(t,e,n){return Math.max(Math.min(t,n),e)}function lU(t,e){let n,i,s,r,o,a=Jf(t[0],e);for(n=0,i=t.length;n<i;++n)o=r,r=a,a=n<i-1&&Jf(t[n+1],e),r&&(s=t[n],o&&(s.cp1x=ad(s.cp1x,e.left,e.right),s.cp1y=ad(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=ad(s.cp2x,e.left,e.right),s.cp2y=ad(s.cp2y,e.top,e.bottom)))}function cU(t,e,n,i,s){let r,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")aU(t,s);else{let c=i?t[t.length-1]:t[0];for(r=0,o=t.length;r<o;++r)a=t[r],l=sU(c,a,t[Math.min(r+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&lU(t,n)}function zk(){return typeof window<"u"&&typeof document<"u"}function gv(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Sm(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const wg=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function uU(t,e){return wg(t).getPropertyValue(e)}const fU=["top","right","bottom","left"];function hl(t,e,n){const i={};n=n?"-"+n:"";for(let s=0;s<4;s++){const r=fU[s];i[r]=parseFloat(t[e+"-"+r+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const hU=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function dU(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:s,offsetY:r}=i;let o=!1,a,l;if(hU(s,r,t.target))a=s,l=r;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Xa(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,s=wg(n),r=s.boxSizing==="border-box",o=hl(s,"padding"),a=hl(s,"border","width"),{x:l,y:c,box:u}=dU(t,n),f=o.left+(u&&a.left),h=o.top+(u&&a.top);let{width:d,height:p}=e;return r&&(d-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-f)/d*n.width/i),y:Math.round((c-h)/p*n.height/i)}}function pU(t,e,n){let i,s;if(e===void 0||n===void 0){const r=gv(t);if(!r)e=t.clientWidth,n=t.clientHeight;else{const o=r.getBoundingClientRect(),a=wg(r),l=hl(a,"border","width"),c=hl(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Sm(a.maxWidth,r,"clientWidth"),s=Sm(a.maxHeight,r,"clientHeight")}}return{width:e,height:n,maxWidth:i||wm,maxHeight:s||wm}}const ld=t=>Math.round(t*10)/10;function mU(t,e,n,i){const s=wg(t),r=hl(s,"margin"),o=Sm(s.maxWidth,t,"clientWidth")||wm,a=Sm(s.maxHeight,t,"clientHeight")||wm,l=pU(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const h=hl(s,"border","width"),d=hl(s,"padding");c-=d.width+h.width,u-=d.height+h.height}return c=Math.max(0,c-r.width),u=Math.max(0,i?Math.floor(c/i):u-r.height),c=ld(Math.min(c,o,l.maxWidth)),u=ld(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ld(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=ld(Math.floor(u*i))),{width:c,height:u}}function Pw(t,e,n){const i=e||1,s=Math.floor(t.height*i),r=Math.floor(t.width*i);t.height=s/i,t.width=r/i;const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==s||o.width!==r?(t.currentDevicePixelRatio=i,o.height=s,o.width=r,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const gU=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function Rw(t,e){const n=uU(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Za(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function _U(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function bU(t,e,n,i){const s={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},o=Za(t,s,n),a=Za(s,r,n),l=Za(r,e,n),c=Za(o,a,n),u=Za(a,l,n);return Za(c,u,n)}const vU=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},yU=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Vc(t,e,n){return t?vU(e,n):yU()}function Uk(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Hk(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Vk(t){return t==="angle"?{between:Zf,compare:Qz,normalize:Rs}:{between:Ao,compare:(e,n)=>e-n,normalize:e=>e}}function Iw({start:t,end:e,count:n,loop:i,style:s}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:s}}function wU(t,e,n){const{property:i,start:s,end:r}=n,{between:o,normalize:a}=Vk(i),l=e.length;let{start:c,end:u,loop:f}=t,h,d;if(f){for(c+=l,u+=l,h=0,d=l;h<d&&o(a(e[c%l][i]),s,r);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function Gk(t,e,n){if(!n)return[t];const{property:i,start:s,end:r}=n,o=e.length,{compare:a,between:l,normalize:c}=Vk(i),{start:u,end:f,loop:h,style:d}=wU(t,e,n),p=[];let m=!1,_=null,b,g,x;const y=()=>l(s,x,b)&&a(s,x)!==0,v=()=>a(r,b)===0||l(r,x,b),w=()=>m||y(),S=()=>!m||v();for(let T=u,k=u;T<=f;++T)g=e[T%o],!g.skip&&(b=c(g[i]),b!==x&&(m=l(b,s,r),_===null&&w()&&(_=a(b,s)===0?T:k),_!==null&&S()&&(p.push(Iw({start:_,end:T,loop:h,count:o,style:d})),_=null),k=T,x=b));return _!==null&&p.push(Iw({start:_,end:f,loop:h,count:o,style:d})),p}function Wk(t,e){const n=[],i=t.segments;for(let s=0;s<i.length;s++){const r=Gk(i[s],t.points,e);r.length&&n.push(...r)}return n}function xU(t,e,n,i){let s=0,r=e-1;if(n&&!i)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(r+=s);r>s&&t[r%e].skip;)r--;return r%=e,{start:s,end:r}}function MU(t,e,n,i){const s=t.length,r=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(i=!1,r.push({start:e%s,end:(l-1)%s,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&r.push({start:e%s,end:o%s,loop:i}),r}function SU(t,e){const n=t.points,i=t.options.spanGaps,s=n.length;if(!s)return[];const r=!!t._loop,{start:o,end:a}=xU(n,s,r,i);if(i===!0)return Dw(t,[{start:o,end:a,loop:r}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return Dw(t,MU(n,o,l,c),n,e)}function Dw(t,e,n,i){return!i||!i.setContext||!n?e:EU(t,e,n,i)}function EU(t,e,n,i){const s=t._chart.getContext(),r=Ow(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=r,f=e[0].start,h=f;function d(p,m,_,b){const g=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=g;for(;n[m%l].skip;)m+=g;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:_,style:b}),u=b,f=m%l)}}for(const p of e){f=a?f:p.start;let m=n[f%l],_;for(h=f+1;h<=p.end;h++){const b=n[h%l];_=Ow(i.setContext(Ba(s,{type:"segment",p0:m,p1:b,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),TU(_,u)&&d(f,h-1,p.loop,u),m=b,u=_}f<h-1&&d(f,h-1,p.loop,u)}return c}function Ow(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function TU(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}/*!
 * Chart.js v4.0.1
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class kU{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,s){const r=n.listeners[s],o=n.duration;r.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wk.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,s)=>{if(!i.running||!i.items.length)return;const r=i.items;let o=r.length-1,a=!1,l;for(;o>=0;--o)l=r[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(s.draw(),this._notify(s,i,e,"progress")),r.length||(i.running=!1,this._notify(s,i,e,"complete"),i.initial=!1),n+=r.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,s)=>Math.max(i,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var vo=new kU;const Nw="transparent",AU={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=Tw(t||Nw),s=i.valid&&Tw(e||Nw);return s&&s.valid?s.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class LU{constructor(e,n,i,s){const r=n[i];s=qu([e.to,s,r,e.from]);const o=qu([e.from,r,s]);this._active=!0,this._fn=e.fn||AU[e.type||typeof o],this._easing=ww[e.easing]||ww.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const s=this._target[this._prop],r=i-this._start,o=this._duration-r;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=qu([e.to,n,s,e.from]),this._from=qu([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,s=this._prop,r=this._from,o=this._loop,a=this._to;let l;if(this._active=r!==a&&(o||n<i),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=r;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(r,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][n]()}}class jk{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!_n(e))return;const n=Object.keys(gi.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const r=e[s];if(!_n(r))return;const o={};for(const a of n)o[a]=r[a];(Yn(r.properties)&&r.properties||[s]).forEach(a=>{(a===s||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,s=PU(e,i);if(!s)return[];const r=this._createAnimations(s,i);return i.$shared&&CU(e.options.$animations,i).then(()=>{e.options=i},()=>{}),r}_createAnimations(e,n){const i=this._properties,s=[],r=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let f=r[c];const h=i.get(c);if(f)if(h&&f.active()){f.update(h,u,a);continue}else f.cancel();if(!h||!h.duration){e[c]=u;continue}r[c]=f=new LU(h,e,c,u),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return vo.add(this._chart,i),!0}}function CU(t,e){const n=[],i=Object.keys(e);for(let s=0;s<i.length;s++){const r=t[i[s]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function PU(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Bw(t,e){const n=t&&t.options||{},i=n.reverse,s=n.min===void 0?e:0,r=n.max===void 0?e:0;return{start:i?r:s,end:i?s:r}}function RU(t,e,n){if(n===!1)return!1;const i=Bw(t,n),s=Bw(e,n);return{top:s.end,right:i.end,bottom:s.start,left:i.start}}function IU(t){let e,n,i,s;return _n(t)?(e=t.top,n=t.right,i=t.bottom,s=t.left):e=n=i=s=t,{top:e,right:n,bottom:i,left:s,disabled:t===!1}}function Yk(t,e){const n=[],i=t._getSortedDatasetMetas(e);let s,r;for(s=0,r=i.length;s<r;++s)n.push(i[s].index);return n}function Fw(t,e,n,i={}){const s=t.keys,r=i.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(i.all)continue;break}c=t.values[l],di(c)&&(r||e===0||nr(e)===nr(c))&&(e+=c)}return e}}function DU(t){const e=Object.keys(t),n=new Array(e.length);let i,s,r;for(i=0,s=e.length;i<s;++i)r=e[i],n[i]={x:r,y:t[r]};return n}function zw(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function OU(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function NU(t){const{min:e,max:n,minDefined:i,maxDefined:s}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function BU(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Uw(t,e,n,i){for(const s of e.getMatchingVisibleMetas(i).reverse()){const r=t[s.index];if(n&&r>0||!n&&r<0)return s.index}return null}function Hw(t,e){const{chart:n,_cachedMeta:i}=t,s=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=i,l=r.axis,c=o.axis,u=OU(r,o,i),f=e.length;let h;for(let d=0;d<f;++d){const p=e[d],{[l]:m,[c]:_}=p,b=p._stacks||(p._stacks={});h=b[c]=BU(s,u,m),h[a]=_,h._top=Uw(h,o,!0,i.type),h._bottom=Uw(h,o,!1,i.type)}}function d0(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function FU(t,e){return Ba(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function zU(t,e,n){return Ba(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Au(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(!!i){e=e||t._parsed;for(const s of e){const r=s._stacks;if(!r||r[i]===void 0||r[i][n]===void 0)return;delete r[i][n]}}}const p0=t=>t==="reset"||t==="none",Vw=(t,e)=>e?t:Object.assign({},t),UU=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Yk(n,!0),values:null};class Er{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=zw(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Au(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),s=(f,h,d,p)=>f==="x"?h:f==="r"?p:d,r=n.xAxisID=Yt(i.xAxisID,d0(e,"x")),o=n.yAxisID=Yt(i.yAxisID,d0(e,"y")),a=n.rAxisID=Yt(i.rAxisID,d0(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,r,o,a),u=n.vAxisID=s(l,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&bw(this._data,this),e._stacked&&Au(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(_n(n))this._data=DU(n);else if(i!==n){if(i){bw(i,this);const s=this._cachedMeta;Au(s),s._parsed=[]}n&&Object.isExtensible(n)&&i7(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const r=n._stacked;n._stacked=zw(n.vScale,n),n.stack!==i.stack&&(s=!0,Au(n),n.stack=i.stack),this._resyncElements(e),(s||r!==n._stacked)&&Hw(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:s}=this,{iScale:r,_stacked:o}=i,a=r.axis;let l=e===0&&n===s.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,f,h;if(this._parsing===!1)i._parsed=s,i._sorted=!0,h=s;else{Yn(s[e])?h=this.parseArrayData(i,s,e,n):_n(s[e])?h=this.parseObjectData(i,s,e,n):h=this.parsePrimitiveData(i,s,e,n);const d=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=f=h[u],l&&(d()&&(l=!1),c=f);i._sorted=l}o&&Hw(this,h)}parsePrimitiveData(e,n,i,s){const{iScale:r,vScale:o}=e,a=r.axis,l=o.axis,c=r.getLabels(),u=r===o,f=new Array(s);let h,d,p;for(h=0,d=s;h<d;++h)p=h+i,f[h]={[a]:u||r.parse(c[p],p),[l]:o.parse(n[p],p)};return f}parseArrayData(e,n,i,s){const{xScale:r,yScale:o}=e,a=new Array(s);let l,c,u,f;for(l=0,c=s;l<c;++l)u=l+i,f=n[u],a[l]={x:r.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,i,s){const{xScale:r,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,f,h,d;for(u=0,f=s;u<f;++u)h=u+i,d=n[h],c[u]={x:r.parse(Ca(d,a),h),y:o.parse(Ca(d,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const s=this.chart,r=this._cachedMeta,o=n[e.axis],a={keys:Yk(s,!0),values:n._stacks[e.axis]};return Fw(a,o,r.index,{mode:i})}updateRangeFromParsed(e,n,i,s){const r=i[n.axis];let o=r===null?NaN:r;const a=s&&i._stacks[n.axis];s&&a&&(s.values=a,o=Fw(s,r,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,s=i._parsed,r=i._sorted&&e===i.iScale,o=s.length,a=this._getOtherScale(e),l=UU(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=NU(a);let h,d;function p(){d=s[h];const m=d[a.axis];return!di(d[e.axis])||u>m||f<m}for(h=0;h<o&&!(!p()&&(this.updateRangeFromParsed(c,e,d,l),r));++h);if(r){for(h=o-1;h>=0;--h)if(!p()){this.updateRangeFromParsed(c,e,d,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let s,r,o;for(s=0,r=n.length;s<r;++s)o=n[s][e.axis],di(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,s=n.vScale,r=this.getParsed(e);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:s?""+s.getLabelForValue(r[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=IU(Yt(this.options.clip,RU(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,s=i.data||[],r=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,r,a,l),u=a;u<a+l;++u){const f=s[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,r))}for(u=0;u<o.length;++u)o[u].draw(e,r)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const s=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];r=o.$context||(o.$context=zU(this.getContext(),e,o)),r.parsed=this.getParsed(e),r.raw=s.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=FU(this.chart.getContext(),this.index)),r.dataset=s,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=i,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const s=n==="active",r=this._cachedDataOpts,o=e+"-"+n,a=r[o],l=this.enableOptionSharing&&sr(i);if(a)return Vw(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),u),d=Object.keys(gi.elements[e]),p=()=>this.getContext(i,s),m=c.resolveNamedOptions(h,d,p,f);return m.$shared&&(m.$shared=l,r[o]=Object.freeze(Vw(m,l))),m}_resolveAnimations(e,n,i){const s=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),h=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(h,this.getContext(e,i,n))}const c=new jk(s,l&&l.animations);return l&&l._cacheable&&(r[o]=Object.freeze(c)),c}getSharedOptions(e){if(!!e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||p0(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),s=this._sharedOptions,r=this.getSharedOptions(i),o=this.includeOptions(n,r)||r!==s;return this.updateSharedOptions(r,n,i),{sharedOptions:r,includeOptions:o}}updateElement(e,n,i,s){p0(s)?Object.assign(e,i):this._resolveAnimations(n,s).update(e,i)}updateSharedOptions(e,n,i){e&&!p0(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,s){e.active=s;const r=this.getStyle(n,s);this._resolveAnimations(n,i,s).update(e,{options:!s&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=i.length,r=n.length,o=Math.min(r,s);o&&this.parse(0,o),r>s?this._insertElements(s,r-s,e):r<s&&this._removeElements(r,s-r)}_insertElements(e,n,i=!0){const s=this._cachedMeta,r=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(r),a=e;a<o;++a)r[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),i&&this.updateElements(r,e,n,"reset")}updateElements(e,n,i,s){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(e,n);i._stacked&&Au(i,s)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,s]=e;this[n](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Me(Er,"defaults",{}),Me(Er,"datasetElementType",null),Me(Er,"dataElementType",null);function HU(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let s=0,r=n.length;s<r;s++)i=i.concat(n[s].controller.getAllParsedValues(t));t._cache.$bar=yk(i.sort((s,r)=>s-r))}return t._cache.$bar}function VU(t){const e=t.iScale,n=HU(e,t.type);let i=e._length,s,r,o,a;const l=()=>{o===32767||o===-32768||(sr(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(s=0,r=n.length;s<r;++s)o=e.getPixelForValue(n[s]),l();for(a=void 0,s=0,r=e.ticks.length;s<r;++s)o=e.getPixelForTick(s),l();return i}function GU(t,e,n,i){const s=n.barThickness;let r,o;return Sn(s)?(r=e.min*n.categoryPercentage,o=n.barPercentage):(r=s*i,o=1),{chunk:r/i,ratio:o,start:e.pixels[t]-r/2}}function WU(t,e,n,i){const s=e.pixels,r=s[t];let o=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null;const l=n.categoryPercentage;o===null&&(o=r-(a===null?e.end-e.start:a-r)),a===null&&(a=r+r-o);const c=r-(r-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function jU(t,e,n,i){const s=n.parse(t[0],i),r=n.parse(t[1],i),o=Math.min(s,r),a=Math.max(s,r);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:r,min:o,max:a}}function qk(t,e,n,i){return Yn(t)?jU(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Gw(t,e,n,i){const s=t.iScale,r=t.vScale,o=s.getLabels(),a=s===r,l=[];let c,u,f,h;for(c=n,u=n+i;c<u;++c)h=e[c],f={},f[s.axis]=a||s.parse(o[c],c),l.push(qk(h,f,r,c));return l}function m0(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function YU(t,e,n){return t!==0?nr(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function qU(t){let e,n,i,s,r;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(s="end",r="start"):(s="start",r="end"),{start:n,end:i,reverse:e,top:s,bottom:r}}function XU(t,e,n,i){let s=e.borderSkipped;const r={};if(!s){t.borderSkipped=r;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=qU(t);s==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?s=c:(n._bottom||0)===i?s=u:(r[Ww(u,o,a,l)]=!0,s=c)),r[Ww(s,o,a,l)]=!0,t.borderSkipped=r}function Ww(t,e,n,i){return i?(t=ZU(t,e,n),t=jw(t,n,e)):t=jw(t,e,n),t}function ZU(t,e,n){return t===e?n:t===n?e:t}function jw(t,e,n){return t==="start"?e:t==="end"?n:t}function JU(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class bp extends Er{parsePrimitiveData(e,n,i,s){return Gw(e,n,i,s)}parseArrayData(e,n,i,s){return Gw(e,n,i,s)}parseObjectData(e,n,i,s){const{iScale:r,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=r.axis==="x"?a:l,u=o.axis==="x"?a:l,f=[];let h,d,p,m;for(h=i,d=i+s;h<d;++h)m=n[h],p={},p[r.axis]=r.parse(Ca(m,c),h),f.push(qk(Ca(m,u),p,o,h));return f}updateRangeFromParsed(e,n,i,s){super.updateRangeFromParsed(e,n,i,s);const r=i._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:s}=n,r=this.getParsed(e),o=r._custom,a=m0(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(r[s.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,s){const r=s==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:h}=this._getSharedOptions(n,s);for(let d=n;d<n+i;d++){const p=this.getParsed(d),m=r||Sn(p[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(d),_=this._calculateBarIndexPixels(d,u),b=(p._stacks||{})[a.axis],g={horizontal:c,base:m.base,enableBorderRadius:!b||m0(p._custom)||o===b._top||o===b._bottom,x:c?m.head:_.center,y:c?_.center:m.head,height:c?_.size:Math.abs(m.size),width:c?Math.abs(m.size):_.size};h&&(g.options=f||this.resolveDataElementOptions(d,e[d].active?"active":s));const x=g.options||e[d].options;XU(g,x,b,o),JU(g,x,u.ratio),this.updateElement(e[d],d,g,s)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),r=i.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),u=c&&c[l.vScale.axis];if(Sn(u)||isNaN(u))return!0};for(const l of s)if(!(n!==void 0&&a(l))&&((r===!1||o.indexOf(l.stack)===-1||r===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const s=this._getStacks(e,i),r=n!==void 0?s.indexOf(n):-1;return r===-1?s.length-1:r}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,s=[];let r,o;for(r=0,o=n.data.length;r<o;++r)s.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));const a=e.barThickness;return{min:a||VU(n),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i},options:{base:s,minBarLength:r}}=this,o=s||0,a=this.getParsed(e),l=a._custom,c=m0(l);let u=a[n.axis],f=0,h=i?this.applyStack(n,a,i):u,d,p;h!==u&&(f=h-u,h=u),c&&(u=l.barStart,h=l.barEnd-l.barStart,u!==0&&nr(u)!==nr(l.barEnd)&&(f=0),f+=u);const m=!Sn(s)&&!c?s:f;let _=n.getPixelForValue(m);if(this.chart.getDataVisibility(e)?d=n.getPixelForValue(f+h):d=_,p=d-_,Math.abs(p)<r){p=YU(p,n,o)*r,u===o&&(_-=p/2);const b=n.getPixelForDecimal(0),g=n.getPixelForDecimal(1),x=Math.min(b,g),y=Math.max(b,g);_=Math.max(Math.min(_,y),x),d=_+p}if(_===n.getPixelForValue(o)){const b=nr(p)*n.getLineWidthForValue(o)/2;_+=b,p-=b}return{size:p,base:_,head:d,center:d+p/2}}_calculateBarIndexPixels(e,n){const i=n.scale,s=this.options,r=s.skipNull,o=Yt(s.maxBarThickness,1/0);let a,l;if(n.grouped){const c=r?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?WU(e,n,s,c):GU(e,n,s,c),f=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);a=u.start+u.chunk*f+u.chunk/2,l=Math.min(o,u.chunk*u.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,s=i.length;let r=0;for(;r<s;++r)this.getParsed(r)[n.axis]!==null&&i[r].draw(this._ctx)}}Me(bp,"id","bar"),Me(bp,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Me(bp,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class vp extends Er{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,i,s){const r=super.parsePrimitiveData(e,n,i,s);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+i).radius;return r}parseArrayData(e,n,i,s){const r=super.parseArrayData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=Yt(a[2],this.resolveDataElementOptions(o+i).radius)}return r}parseObjectData(e,n,i,s){const r=super.parseObjectData(e,n,i,s);for(let o=0;o<r.length;o++){const a=n[i+o];r[o]._custom=Yt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+i).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let i=e.length-1;i>=0;--i)n=Math.max(n,e[i].size(this.resolveDataElementOptions(i))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y),c=o._custom;return{label:i[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,s),u=o.axis,f=a.axis;for(let h=n;h<n+i;h++){const d=e[h],p=!r&&this.getParsed(h),m={},_=m[u]=r?o.getPixelForDecimal(.5):o.getPixelForValue(p[u]),b=m[f]=r?a.getBasePixel():a.getPixelForValue(p[f]);m.skip=isNaN(_)||isNaN(b),c&&(m.options=l||this.resolveDataElementOptions(h,d.active?"active":s),r&&(m.options.radius=0)),this.updateElement(d,h,m,s)}}resolveDataElementOptions(e,n){const i=this.getParsed(e);let s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const r=s.radius;return n!=="active"&&(s.radius=0),s.radius+=Yt(i&&i._custom,r),s}}Me(vp,"id","bubble"),Me(vp,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Me(vp,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function KU(t,e,n){let i=1,s=1,r=0,o=0;if(e<qn){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),h=Math.sin(l),d=(x,y,v)=>Zf(x,a,l,!0)?1:Math.max(y,y*n,v,v*n),p=(x,y,v)=>Zf(x,a,l,!0)?-1:Math.min(y,y*n,v,v*n),m=d(0,c,f),_=d(pi,u,h),b=p(si,c,f),g=p(si+pi,u,h);i=(m-b)/2,s=(_-g)/2,r=-(m+b)/2,o=-(_+g)/2}return{ratioX:i,ratioY:s,offsetX:r,offsetY:o}}class yc extends Er{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let r=l=>+i[l];if(_n(i[e])){const{key:l="value"}=this._parsing;r=c=>+Ca(i[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=r(o)}}_getRotation(){return Sr(this.options.rotation-90)}_getCircumference(){return Sr(this.options.circumference)}_getRotationExtents(){let e=qn,n=-qn;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,r=s._getRotation(),o=s._getCircumference();e=Math.min(e,r),n=Math.max(n,r+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:i}=n,s=this._cachedMeta,r=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),l=Math.min(Gz(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:d,offsetX:p,offsetY:m}=KU(f,u,l),_=(i.width-o)/h,b=(i.height-o)/d,g=Math.max(Math.min(_,b)/2,0),x=mk(this.options.radius,g),y=Math.max(x*l,0),v=(x-y)/this._getVisibleDatasetWeightTotal();this.offsetX=p*x,this.offsetY=m*x,s.total=this.calculateTotal(),this.outerRadius=x-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){const i=this.options,s=this._cachedMeta,r=this._getCircumference();return n&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*r/qn)}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,h=r&&c.animateScale,d=h?0:this.innerRadius,p=h?0:this.outerRadius,{sharedOptions:m,includeOptions:_}=this._getSharedOptions(n,s);let b=this._getRotation(),g;for(g=0;g<n;++g)b+=this._circumference(g,r);for(g=n;g<n+i;++g){const x=this._circumference(g,r),y=e[g],v={x:u+this.offsetX,y:f+this.offsetY,startAngle:b,endAngle:b+x,circumference:x,outerRadius:p,innerRadius:d};_&&(v.options=m||this.resolveDataElementOptions(g,y.active?"active":s)),b+=x,this.updateElement(y,g,v,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let i=0,s;for(s=0;s<n.length;s++){const r=e._parsed[s];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?qn*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Dh(n._parsed[e],i.options.locale);return{label:s[e]||"",value:r}}getMaxBorderWidth(e){let n=0;const i=this.chart;let s,r,o,a,l;if(!e){for(s=0,r=i.data.datasets.length;s<r;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,r=e.length;s<r;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let i=0,s=e.length;i<s;++i){const r=this.resolveDataElementOptions(i);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(n+=this._getRingWeight(i));return n}_getRingWeight(e){return Math.max(Yt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Me(yc,"id","doughnut"),Me(yc,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Me(yc,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"}),Me(yc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}}});class yp extends Er{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:s=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=Mk(n,s,o);this._drawStart=a,this._drawCount=l,Sk(n)&&(a=0,l=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,s),h=o.axis,d=a.axis,{spanGaps:p,segment:m}=this.options,_=$c(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||r||s==="none",g=n+i,x=e.length;let y=n>0&&this.getParsed(n-1);for(let v=0;v<x;++v){const w=e[v],S=b?w:{};if(v<n||v>=g){S.skip=!0;continue}const T=this.getParsed(v),k=Sn(T[d]),A=S[h]=o.getPixelForValue(T[h],v),L=S[d]=r||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[d],v);S.skip=isNaN(A)||isNaN(L)||k,S.stop=v>0&&Math.abs(T[h]-y[h])>_,m&&(S.parsed=T,S.raw=c.data[v]),f&&(S.options=u||this.resolveDataElementOptions(v,w.active?"active":s)),b||this.updateElement(w,v,S,s),y=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return i;const r=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,r,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Me(yp,"id","line"),Me(yp,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Me(yp,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class wp extends Er{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,i=this.chart,s=i.data.labels||[],r=Dh(n._parsed[e].r,i.options.locale);return{label:s[e]||"",value:r}}parseObjectData(e,n,i,s){return Bk.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{const r=this.getParsed(s).r;!isNaN(r)&&this.chart.getDataVisibility(s)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,i=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(s/2,0),o=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),a=(r-o)/e.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,i,s){const r=s==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,u=c.xCenter,f=c.yCenter,h=c.getIndexAngle(0)-.5*si;let d=h,p;const m=360/this.countVisibleElements();for(p=0;p<n;++p)d+=this._computeAngle(p,s,m);for(p=n;p<n+i;p++){const _=e[p];let b=d,g=d+this._computeAngle(p,s,m),x=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;d=g,r&&(l.animateScale&&(x=0),l.animateRotate&&(b=g=h));const y={x:u,y:f,innerRadius:0,outerRadius:x,startAngle:b,endAngle:g,options:this.resolveDataElementOptions(p,_.active?"active":s)};this.updateElement(_,p,y,s)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,i){return this.chart.getDataVisibility(e)?Sr(this.resolveDataElementOptions(e,n).angle||i):0}}Me(wp,"id","polarArea"),Me(wp,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Me(wp,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i,color:s}}=e.legend.options;return n.labels.map((r,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class j1 extends yc{}Me(j1,"id","pie"),Me(j1,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class xp extends Er{getLabelAndValue(e){const n=this._cachedMeta.vScale,i=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(i[n.axis])}}parseObjectData(e,n,i,s){return Bk.bind(this)(e,n,i,s)}update(e){const n=this._cachedMeta,i=n.dataset,s=n.data||[],r=n.iScale.getLabels();if(i.points=s,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===s.length,options:o};this.updateElement(i,void 0,a,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,i,s){const r=this._cachedMeta.rScale,o=s==="reset";for(let a=n;a<n+i;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":s),u=r.getPointPositionForValue(a,this.getParsed(a).r),f=o?r.xCenter:u.x,h=o?r.yCenter:u.y,d={x:f,y:h,angle:u.angle,skip:isNaN(f)||isNaN(h),options:c};this.updateElement(l,a,d,s)}}}Me(xp,"id","radar"),Me(xp,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Me(xp,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Mp extends Er{getLabelAndValue(e){const n=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:r}=n,o=this.getParsed(e),a=s.getLabelForValue(o.x),l=r.getLabelForValue(o.y);return{label:i[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:i=[]}=n,s=this.chart._animationsDisabled;let{start:r,count:o}=Mk(n,i,s);if(this._drawStart=r,this._drawCount=o,Sk(n)&&(r=0,o=i.length),this.options.showLine){const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=i;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!s,options:c},e)}this.updateElements(i,r,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,i,s){const r=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),f=this.getSharedOptions(u),h=this.includeOptions(s,f),d=o.axis,p=a.axis,{spanGaps:m,segment:_}=this.options,b=$c(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||s==="none";let x=n>0&&this.getParsed(n-1);for(let y=n;y<n+i;++y){const v=e[y],w=this.getParsed(y),S=g?v:{},T=Sn(w[p]),k=S[d]=o.getPixelForValue(w[d],y),A=S[p]=r||T?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,w,l):w[p],y);S.skip=isNaN(k)||isNaN(A)||T,S.stop=y>0&&Math.abs(w[d]-x[d])>b,_&&(S.parsed=w,S.raw=c.data[y]),h&&(S.options=f||this.resolveDataElementOptions(y,v.active?"active":s)),g||this.updateElement(v,y,S,s),x=w}this.updateSharedOptions(f,s,u)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!n.length)return s;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,r,o)/2}}Me(Mp,"id","scatter"),Me(Mp,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Me(Mp,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var $U=Object.freeze({__proto__:null,BarController:bp,BubbleController:vp,DoughnutController:yc,LineController:yp,PolarAreaController:wp,PieController:j1,RadarController:xp,ScatterController:Mp});function Va(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class _v{static override(e){Object.assign(_v.prototype,e)}constructor(e){this.options=e||{}}init(){}formats(){return Va()}parse(){return Va()}format(){return Va()}add(){return Va()}diff(){return Va()}startOf(){return Va()}endOf(){return Va()}}var QU={_date:_v};function eH(t,e,n,i){const{controller:s,data:r,_sorted:o}=t,a=s._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&r.length){const l=a._reversePixels?t7:Lo;if(i){if(s._sharedOptions){const c=r[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){const f=l(r,e,n-u),h=l(r,e,n+u);return{lo:f.lo,hi:h.hi}}}}else return l(r,e,n)}return{lo:0,hi:r.length-1}}function Oh(t,e,n,i,s){const r=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=r.length;a<l;++a){const{index:c,data:u}=r[a],{lo:f,hi:h}=eH(r[a],e,o,s);for(let d=f;d<=h;++d){const p=u[d];p.skip||i(p,c,d)}}}function tH(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,s){const r=e?Math.abs(i.x-s.x):0,o=n?Math.abs(i.y-s.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function g0(t,e,n,i,s){const r=[];return!s&&!t.isPointInArea(e)||Oh(t,n,e,function(a,l,c){!s&&!Jf(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&r.push({element:a,datasetIndex:l,index:c})},!0),r}function nH(t,e,n,i){let s=[];function r(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:f}=bk(o,{x:e.x,y:e.y});Zf(f,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return Oh(t,n,e,r),s}function iH(t,e,n,i,s,r){let o=[];const a=tH(n);let l=Number.POSITIVE_INFINITY;function c(u,f,h){const d=u.inRange(e.x,e.y,s);if(i&&!d)return;const p=u.getCenterPoint(s);if(!(!!r||t.isPointInArea(p))&&!d)return;const _=a(e,p);_<l?(o=[{element:u,datasetIndex:f,index:h}],l=_):_===l&&o.push({element:u,datasetIndex:f,index:h})}return Oh(t,n,e,c),o}function _0(t,e,n,i,s,r){return!r&&!t.isPointInArea(e)?[]:n==="r"&&!i?nH(t,e,n,s):iH(t,e,n,i,s,r)}function Yw(t,e,n,i,s){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Oh(t,n,e,(l,c,u)=>{l[o](e[n],s)&&(r.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),i&&!a?[]:r}var sH={evaluateInteractionItems:Oh,modes:{index(t,e,n,i){const s=Xa(e,t),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?g0(t,s,r,i,o):_0(t,s,r,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const s=Xa(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?g0(t,s,r,i,o):_0(t,s,r,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const s=Xa(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return g0(t,s,r,i,o)},nearest(t,e,n,i){const s=Xa(e,t),r=n.axis||"xy",o=n.includeInvisible||!1;return _0(t,s,r,n.intersect,i,o)},x(t,e,n,i){const s=Xa(e,t);return Yw(t,s,"x",n.intersect,i)},y(t,e,n,i){const s=Xa(e,t);return Yw(t,s,"y",n.intersect,i)}}};const Xk=["left","top","right","bottom"];function Lu(t,e){return t.filter(n=>n.pos===e)}function qw(t,e){return t.filter(n=>Xk.indexOf(n.pos)===-1&&n.box.axis===e)}function Cu(t,e){return t.sort((n,i)=>{const s=e?i:n,r=e?n:i;return s.weight===r.weight?s.index-r.index:s.weight-r.weight})}function rH(t){const e=[];let n,i,s,r,o,a;for(n=0,i=(t||[]).length;n<i;++n)s=t[n],{position:r,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:r,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&r+o,stackWeight:a});return e}function oH(t){const e={};for(const n of t){const{stack:i,pos:s,stackWeight:r}=n;if(!i||!Xk.includes(s))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}function aH(t,e){const n=oH(t),{vBoxMaxWidth:i,hBoxMaxHeight:s}=e;let r,o,a;for(r=0,o=t.length;r<o;++r){a=t[r];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=s):(a.width=i,a.height=u?u*s:l&&e.availableHeight)}return n}function lH(t){const e=rH(t),n=Cu(e.filter(c=>c.box.fullSize),!0),i=Cu(Lu(e,"left"),!0),s=Cu(Lu(e,"right")),r=Cu(Lu(e,"top"),!0),o=Cu(Lu(e,"bottom")),a=qw(e,"x"),l=qw(e,"y");return{fullSize:n,leftAndTop:i.concat(r),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:Lu(e,"chartArea"),vertical:i.concat(s).concat(l),horizontal:r.concat(o).concat(a)}}function Xw(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Zk(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function cH(t,e,n,i){const{pos:s,box:r}=n,o=t.maxPadding;if(!_n(s)){n.size&&(t[s]-=n.size);const f=i[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?r.height:r.width),n.size=f.size/f.count,t[s]+=n.size}r.getPadding&&Zk(o,r.getPadding());const a=Math.max(0,e.outerWidth-Xw(o,t,"left","right")),l=Math.max(0,e.outerHeight-Xw(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function uH(t){const e=t.maxPadding;function n(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function fH(t,e){const n=e.maxPadding;function i(s){const r={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{r[o]=Math.max(e[o],n[o])}),r}return i(t?["left","right"]:["top","bottom"])}function Xu(t,e,n,i){const s=[];let r,o,a,l,c,u;for(r=0,o=t.length,c=0;r<o;++r){a=t[r],l=a.box,l.update(a.width||e.w,a.height||e.h,fH(a.horizontal,e));const{same:f,other:h}=cH(e,n,a,i);c|=f&&s.length,u=u||h,l.fullSize||s.push(a)}return c&&Xu(s,e,n,i)||u}function cd(t,e,n,i,s){t.top=n,t.left=e,t.right=e+i,t.bottom=n+s,t.width=i,t.height=s}function Zw(t,e,n,i){const s=n.padding;let{x:r,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,h=c.size||l.height;sr(c.start)&&(o=c.start),l.fullSize?cd(l,s.left,o,n.outerWidth-s.right-s.left,h):cd(l,e.left+c.placed,o,f,h),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,h=c.size||l.width;sr(c.start)&&(r=c.start),l.fullSize?cd(l,r,s.top,h,n.outerHeight-s.bottom-s.top):cd(l,r,e.top+c.placed,h,f),c.start=r,c.placed+=f,r=l.right}}e.x=r,e.y=o}var Zi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const s=Qi(t.options.layout.padding),r=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=lH(t.boxes),l=a.vertical,c=a.horizontal;pn(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});const u=l.reduce((m,_)=>_.box.options&&_.box.options.display===!1?m:m+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},s);Zk(h,Qi(i));const d=Object.assign({maxPadding:h,w:r,h:o,x:s.left,y:s.top},s),p=aH(l.concat(c),f);Xu(a.fullSize,d,f,p),Xu(l,d,f,p),Xu(c,d,f,p)&&Xu(l,d,f,p),uH(d),Zw(a.leftAndTop,d,f,p),d.x+=d.w,d.y+=d.h,Zw(a.rightAndBottom,d,f,p),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},pn(a.chartArea,m=>{const _=m.box;Object.assign(_,t.chartArea),_.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})})}};class Jk{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,s){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):i)}}isAttached(e){return!0}updateConfig(e){}}class hH extends Jk{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Sp="$chartjs",dH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Jw=t=>t===null||t==="";function pH(t,e){const n=t.style,i=t.getAttribute("height"),s=t.getAttribute("width");if(t[Sp]={initial:{height:i,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Jw(s)){const r=Rw(t,"width");r!==void 0&&(t.width=r)}if(Jw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const r=Rw(t,"height");r!==void 0&&(t.height=r)}return t}const Kk=gU?{passive:!0}:!1;function mH(t,e,n){t.addEventListener(e,n,Kk)}function gH(t,e,n){t.canvas.removeEventListener(e,n,Kk)}function _H(t,e){const n=dH[t.type]||t.type,{x:i,y:s}=Xa(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:s!==void 0?s:null}}function Em(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function bH(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Em(a.addedNodes,i),o=o&&!Em(a.removedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function vH(t,e,n){const i=t.canvas,s=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Em(a.removedNodes,i),o=o&&!Em(a.addedNodes,i);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const $f=new Map;let Kw=0;function $k(){const t=window.devicePixelRatio;t!==Kw&&(Kw=t,$f.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function yH(t,e){$f.size||window.addEventListener("resize",$k),$f.set(t,e)}function wH(t){$f.delete(t),$f.size||window.removeEventListener("resize",$k)}function xH(t,e,n){const i=t.canvas,s=i&&gv(i);if(!s)return;const r=xk((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||r(c,u)});return o.observe(s),yH(t,r),o}function b0(t,e,n){n&&n.disconnect(),e==="resize"&&wH(t)}function MH(t,e,n){const i=t.canvas,s=xk(r=>{t.ctx!==null&&n(_H(r,t))},t);return mH(i,e,s),s}class SH extends Jk{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(pH(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Sp])return!1;const i=n[Sp].initial;["height","width"].forEach(r=>{const o=i[r];Sn(o)?n.removeAttribute(r):n.setAttribute(r,o)});const s=i.style||{};return Object.keys(s).forEach(r=>{n.style[r]=s[r]}),n.width=n.width,delete n[Sp],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:bH,detach:vH,resize:xH}[n]||MH;s[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),s=i[n];if(!s)return;({attach:b0,detach:b0,resize:b0}[n]||gH)(e,n,s),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,s){return mU(e,n,i,s)}isAttached(e){const n=gv(e);return!!(n&&n.isConnected)}}function EH(t){return!zk()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?hH:SH}class Pr{constructor(){Me(this,"active",!1)}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return $c(this.x)&&$c(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const s={};return e.forEach(r=>{s[r]=i[r]&&i[r].active()?i[r]._to:this[r]}),s}}Me(Pr,"defaults",{}),Me(Pr,"defaultRoutes");function TH(t,e){const n=t.options.ticks,i=kH(t),s=Math.min(n.maxTicksLimit||i,i),r=n.major.enabled?LH(e):[],o=r.length,a=r[0],l=r[o-1],c=[];if(o>s)return CH(e,c,r,o/s),c;const u=AH(r,e,s);if(o>0){let f,h;const d=o>1?Math.round((l-a)/(o-1)):null;for(ud(e,c,u,Sn(d)?0:a-d,a),f=0,h=o-1;f<h;f++)ud(e,c,u,r[f],r[f+1]);return ud(e,c,u,l,Sn(d)?e.length:l+d),c}return ud(e,c,u),c}function kH(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(i,s))}function AH(t,e,n){const i=PH(t),s=e.length/n;if(!i)return Math.max(s,1);const r=Kz(i);for(let o=0,a=r.length-1;o<a;o++){const l=r[o];if(l>s)return l}return Math.max(s,1)}function LH(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function CH(t,e,n,i){let s=0,r=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===r&&(e.push(t[o]),s++,r=n[s*i])}function ud(t,e,n,i,s){const r=Yt(i,0),o=Math.min(Yt(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-i,n=l/Math.floor(l/n)),u=r;u<0;)a++,u=Math.round(r+a*n);for(c=Math.max(r,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(r+a*n))}function PH(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const RH=t=>t==="left"?"right":t==="right"?"left":t,$w=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n;function Qw(t,e){const n=[],i=t.length/e,s=t.length;let r=0;for(;r<s;r+=i)n.push(t[Math.floor(r)]);return n}function IH(t,e,n){const i=t.ticks.length,s=Math.min(e,i-1),r=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(i===1?c=Math.max(l-r,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<r-a||l>o+a)))return l}function DH(t,e){pn(t,n=>{const i=n.gc,s=i.length/2;let r;if(s>e){for(r=0;r<s;++r)delete n.data[i[r]];i.splice(0,s)}})}function Pu(t){return t.drawTicks?t.tickLength:0}function ex(t,e){if(!t.display)return 0;const n=ki(t.font,e),i=Qi(t.padding);return(Yn(t.text)?t.text.length:1)*n.lineHeight+i.height}function OH(t,e){return Ba(t,{scale:e,type:"scale"})}function NH(t,e,n){return Ba(t,{tick:n,index:e,type:"tick"})}function BH(t,e,n){let i=lv(t);return(n&&e!=="right"||!n&&e==="right")&&(i=RH(i)),i}function FH(t,e,n,i){const{top:s,left:r,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,h,d,p;const m=o-s,_=a-r;if(t.isHorizontal()){if(d=qi(i,r,a),_n(n)){const b=Object.keys(n)[0],g=n[b];p=u[b].getPixelForValue(g)+m-e}else n==="center"?p=(c.bottom+c.top)/2+m-e:p=$w(t,n,e);h=a-r}else{if(_n(n)){const b=Object.keys(n)[0],g=n[b];d=u[b].getPixelForValue(g)-_+e}else n==="center"?d=(c.left+c.right)/2-_+e:d=$w(t,n,e);p=qi(i,o,s),f=n==="left"?-pi:pi}return{titleX:d,titleY:p,maxWidth:h,rotation:f}}class Bl extends Pr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:s}=this;return e=Ps(e,Number.POSITIVE_INFINITY),n=Ps(n,Number.NEGATIVE_INFINITY),i=Ps(i,Number.POSITIVE_INFINITY),s=Ps(s,Number.NEGATIVE_INFINITY),{min:Ps(e,i),max:Ps(n,s),minDefined:di(e),maxDefined:di(n)}}getMinMax(e){let{min:n,max:i,minDefined:s,maxDefined:r}=this.getUserBounds(),o;if(s&&r)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),r||(i=Math.max(i,o.max));return n=r&&n>i?i:n,i=s&&n>i?n:i,{min:Ps(n,Ps(i,n)),max:Ps(i,Ps(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Zt(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:s,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=q7(this,r,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Qw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=TH(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Zt(this.options.afterUpdate,[this])}beforeSetDimensions(){Zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Zt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Zt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,s,r;for(i=0,s=e.length;i<s;i++)r=e[i],r.label=Zt(n.callback,[r.value,i,e],this)}afterTickToLabelConversion(){Zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=this.ticks.length,s=n.minRotation||0,r=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=r||i<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),f=u.widest.width,h=u.highest.height,d=Di(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/i:d/(i-1),f+6>a&&(a=d/(i-(e.offset?.5:1)),l=this.maxHeight-Pu(e.grid)-n.padding-ex(e.title,this.chart.options.font),c=Math.sqrt(f*f+h*h),o=ov(Math.min(Math.asin(Di((u.highest.height+6)/a,-1,1)),Math.asin(Di(l/c,-1,1))-Math.asin(Di(h/c,-1,1)))),o=Math.max(s,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Zt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:s,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=ex(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=Pu(r)+l):(e.height=this.maxHeight,e.width=Pu(r)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:h}=this._getLabelSizes(),d=i.padding*2,p=Sr(this.labelRotation),m=Math.cos(p),_=Math.sin(p);if(a){const b=i.mirror?0:_*f.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+b+d)}else{const b=i.mirror?0:m*f.width+_*h.height;e.width=Math.min(this.maxWidth,e.width+b+d)}this._calculatePadding(c,u,_,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,s){const{ticks:{align:r,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,d=0;l?c?(h=s*e.width,d=i*n.height):(h=i*e.height,d=s*n.width):r==="start"?d=n.width:r==="end"?h=e.width:r!=="inner"&&(h=e.width/2,d=n.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((d-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;r==="start"?(u=0,f=e.height):r==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Zt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Sn(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=Qw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,n){const{ctx:i,_longestTextCache:s}=this,r=[],o=[];let a=0,l=0,c,u,f,h,d,p,m,_,b,g,x;for(c=0;c<n;++c){if(h=e[c].label,d=this._resolveTickFontOptions(c),i.font=p=d.string,m=s[p]=s[p]||{data:{},gc:[]},_=d.lineHeight,b=g=0,!Sn(h)&&!Yn(h))b=Mm(i,m.data,m.gc,b,h),g=_;else if(Yn(h))for(u=0,f=h.length;u<f;++u)x=h[u],!Sn(x)&&!Yn(x)&&(b=Mm(i,m.data,m.gc,b,x),g+=_);r.push(b),o.push(g),a=Math.max(b,a),l=Math.max(g,l)}DH(s,n);const y=r.indexOf(a),v=o.indexOf(l),w=S=>({width:r[S]||0,height:o[S]||0});return{first:w(0),last:w(n-1),widest:w(y),highest:w(v),widths:r,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return e7(this._alignToPixels?Ha(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=NH(this.getContext(),e,i))}return this.$context||(this.$context=OH(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Sr(this.labelRotation),i=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=e.autoSkipPadding||0,a=r?r.widest.width+o:0,l=r?r.highest.height+o:0;return this.isHorizontal()?l*i>a*s?a/i:l/s:l*s<a*i?l/i:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,s=this.options,{grid:r,position:o,border:a}=s,l=r.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),h=Pu(r),d=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,_=m/2,b=function($){return Ha(i,$,m)};let g,x,y,v,w,S,T,k,A,L,D,B;if(o==="top")g=b(this.bottom),S=this.bottom-h,k=g-_,L=b(e.top)+_,B=e.bottom;else if(o==="bottom")g=b(this.top),L=e.top,B=b(e.bottom)-_,S=g+_,k=this.top+h;else if(o==="left")g=b(this.right),w=this.right-h,T=g-_,A=b(e.left)+_,D=e.right;else if(o==="right")g=b(this.left),A=e.left,D=b(e.right)-_,w=g+_,T=this.left+h;else if(n==="x"){if(o==="center")g=b((e.top+e.bottom)/2+.5);else if(_n(o)){const $=Object.keys(o)[0],W=o[$];g=b(this.chart.scales[$].getPixelForValue(W))}L=e.top,B=e.bottom,S=g+_,k=S+h}else if(n==="y"){if(o==="center")g=b((e.left+e.right)/2);else if(_n(o)){const $=Object.keys(o)[0],W=o[$];g=b(this.chart.scales[$].getPixelForValue(W))}w=g-_,T=w-h,A=e.left,D=e.right}const U=Yt(s.ticks.maxTicksLimit,f),N=Math.max(1,Math.ceil(f/U));for(x=0;x<f;x+=N){const $=this.getContext(x),W=r.setContext($),j=a.setContext($),J=W.lineWidth,se=W.color,ne=j.dash||[],K=j.dashOffset,q=W.tickWidth,te=W.tickColor,re=W.tickBorderDash||[],Oe=W.tickBorderDashOffset;y=IH(this,x,l),y!==void 0&&(v=Ha(i,y,J),c?w=T=A=D=v:S=k=L=B=v,d.push({tx1:w,ty1:S,tx2:T,ty2:k,x1:A,y1:L,x2:D,y2:B,width:J,color:se,borderDash:ne,borderDashOffset:K,tickWidth:q,tickColor:te,tickBorderDash:re,tickBorderDashOffset:Oe}))}return this._ticksLength=f,this._borderValue=g,d}_computeLabelItems(e){const n=this.axis,i=this.options,{position:s,ticks:r}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=r,h=Pu(i.grid),d=h+u,p=f?-u:d,m=-Sr(this.labelRotation),_=[];let b,g,x,y,v,w,S,T,k,A,L,D,B="middle";if(s==="top")w=this.bottom-p,S=this._getXAxisLabelAlignment();else if(s==="bottom")w=this.top+p,S=this._getXAxisLabelAlignment();else if(s==="left"){const N=this._getYAxisLabelAlignment(h);S=N.textAlign,v=N.x}else if(s==="right"){const N=this._getYAxisLabelAlignment(h);S=N.textAlign,v=N.x}else if(n==="x"){if(s==="center")w=(e.top+e.bottom)/2+d;else if(_n(s)){const N=Object.keys(s)[0],$=s[N];w=this.chart.scales[N].getPixelForValue($)+d}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")v=(e.left+e.right)/2-d;else if(_n(s)){const N=Object.keys(s)[0],$=s[N];v=this.chart.scales[N].getPixelForValue($)}S=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?B="top":l==="end"&&(B="bottom"));const U=this._getLabelSizes();for(b=0,g=a.length;b<g;++b){x=a[b],y=x.label;const N=r.setContext(this.getContext(b));T=this.getPixelForTick(b)+r.labelOffset,k=this._resolveTickFontOptions(b),A=k.lineHeight,L=Yn(y)?y.length:1;const $=L/2,W=N.color,j=N.textStrokeColor,J=N.textStrokeWidth;let se=S;o?(v=T,S==="inner"&&(b===g-1?se=this.options.reverse?"left":"right":b===0?se=this.options.reverse?"right":"left":se="center"),s==="top"?c==="near"||m!==0?D=-L*A+A/2:c==="center"?D=-U.highest.height/2-$*A+A:D=-U.highest.height+A/2:c==="near"||m!==0?D=A/2:c==="center"?D=U.highest.height/2-$*A:D=U.highest.height-L*A,f&&(D*=-1),m!==0&&!N.showLabelBackdrop&&(v+=A/2*Math.sin(m))):(w=T,D=(1-L)*A/2);let ne;if(N.showLabelBackdrop){const K=Qi(N.backdropPadding),q=U.heights[b],te=U.widths[b];let re=D-K.top,Oe=0-K.left;switch(B){case"middle":re-=q/2;break;case"bottom":re-=q;break}switch(S){case"center":Oe-=te/2;break;case"right":Oe-=te;break}ne={left:Oe,top:re,width:te+K.width,height:q+K.height,color:N.backdropColor}}_.push({rotation:m,label:y,font:k,color:W,strokeColor:j,strokeWidth:J,textOffset:D,textAlign:se,textBaseline:B,translation:[v,w],backdrop:ne})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Sr(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:s,padding:r}}=this.options,o=this._getLabelSizes(),a=e+r,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+r,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+r,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:s,width:r,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,s,r,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(r=>r.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(r=0,o=s.length;r<o;++r){const l=s[r];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:s}}=this,r=i.setContext(this.getContext()),o=i.display?r.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,h;this.isHorizontal()?(c=Ha(e,this.left,o)-o/2,u=Ha(e,this.right,a)+a/2,f=h=l):(f=Ha(e,this.top,o)-o/2,h=Ha(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,s=this._computeLabelArea();s&&vg(i,s);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=r.length;o<a;++o){const l=r[o],c=l.font,u=l.label;let f=l.textOffset;xl(i,u,0,f,c,l)}s&&yg(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:s}}=this;if(!i.display)return;const r=ki(i.font),o=Qi(i.padding),a=i.align;let l=r.lineHeight/2;n==="bottom"||n==="center"||_n(n)?(l+=o.bottom,Yn(i.text)&&(l+=r.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:h}=FH(this,l,n,a);xl(e,i.text,0,0,r,{color:i.color,maxWidth:f,rotation:h,textAlign:BH(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Yt(e.grid&&e.grid.z,-1),s=Yt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Bl.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[i]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ki(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class fd{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;HH(n)&&(i=this.register(n));const s=this.items,r=e.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in s||(s[r]=e,zH(e,o,i),this.override&&gi.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,s=this.scope;i in n&&delete n[i],s&&i in gi[s]&&(delete gi[s][i],this.override&&delete wl[i])}}function zH(t,e,n){const i=Xf(Object.create(null),[n?gi.get(n):{},gi.get(e),t.defaults]);gi.set(e,i),t.defaultRoutes&&UH(e,t.defaultRoutes),t.descriptors&&gi.describe(e,t.descriptors)}function UH(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),s=i.pop(),r=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");gi.route(r,s,l,a)})}function HH(t){return"id"in t&&"defaults"in t}class VH{constructor(){this.controllers=new fd(Er,"datasets",!0),this.elements=new fd(Pr,"elements"),this.plugins=new fd(Object,"plugins"),this.scales=new fd(Bl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(s=>{const r=i||this._getRegistryForType(s);i||r.isForType(s)||r===this.plugins&&s.id?this._exec(e,r,s):pn(s,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const s=rv(e);Zt(i["before"+s],[],i),n[e](i),Zt(i["after"+s],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return s}}var Hr=new VH;class GH{constructor(){this._init=[]}notify(e,n,i,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(r,e,n,i);return n==="afterDestroy"&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,s){s=s||{};for(const r of e){const o=r.plugin,a=o[i],l=[n,s,r.options];if(Zt(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){Sn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,s=Yt(i.options&&i.options.plugins,{}),r=WH(i);return s===!1&&!n?[]:YH(e,r,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,s=(r,o)=>r.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,i),e,"stop"),this._notify(s(i,n),e,"start")}}function WH(t){const e={},n=[],i=Object.keys(Hr.plugins.items);for(let r=0;r<i.length;r++)n.push(Hr.getPlugin(i[r]));const s=t.plugins||[];for(let r=0;r<s.length;r++){const o=s[r];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function jH(t,e){return!e&&t===!1?null:t===!0?{}:t}function YH(t,{plugins:e,localIds:n},i,s){const r=[],o=t.getContext();for(const a of e){const l=a.id,c=jH(i[l],s);c!==null&&r.push({plugin:a,options:qH(t.config,{plugin:a,local:n[l]},c,o)})}return r}function qH(t,{plugin:e,local:n},i,s){const r=t.pluginScopeKeys(e),o=t.getOptionScopes(i,r);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Y1(t,e){const n=gi.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function XH(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function ZH(t,e){return t===e?"_index_":"_value_"}function JH(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Tm(t,e){if(t==="x"||t==="y"||t==="r"||(t=e.axis||JH(e.position)||t.length>1&&Tm(t[0].toLowerCase(),e),t))return t;throw new Error(`Cannot determine type of '${name}' axis. Please provide 'axis' or 'position' option.`)}function KH(t,e){const n=wl[t.type]||{scales:{}},i=e.scales||{},s=Y1(t.type,e),r=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!_n(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Tm(o,a),c=ZH(l,s),u=n.scales||{};r[o]=hf(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Y1(a,e),u=(wl[a]||{}).scales||{};Object.keys(u).forEach(f=>{const h=XH(f,l),d=o[h+"AxisID"]||h;r[d]=r[d]||Object.create(null),hf(r[d],[{axis:h},i[d],u[f]])})}),Object.keys(r).forEach(o=>{const a=r[o];hf(a,[gi.scales[a.type],gi.scale])}),r}function Qk(t){const e=t.options||(t.options={});e.plugins=Yt(e.plugins,{}),e.scales=KH(t,e)}function eA(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function $H(t){return t=t||{},t.data=eA(t.data),Qk(t),t}const tx=new Map,tA=new Set;function hd(t,e){let n=tx.get(t);return n||(n=e(),tx.set(t,n),tA.add(n)),n}const Ru=(t,e,n)=>{const i=Ca(e,n);i!==void 0&&t.add(i)};class QH{constructor(e){this._config=$H(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=eA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Qk(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return hd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return hd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return hd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return hd(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let s=i.get(e);return(!s||n)&&(s=new Map,i.set(e,s)),s}getOptionScopes(e,n,i){const{options:s,type:r}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>Ru(l,e,f))),u.forEach(f=>Ru(l,s,f)),u.forEach(f=>Ru(l,wl[r]||{},f)),u.forEach(f=>Ru(l,gi,f)),u.forEach(f=>Ru(l,G1,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),tA.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,wl[n]||{},gi.datasets[n]||{},{type:n},gi,G1]}resolveNamedOptions(e,n,i,s=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=nx(this._resolverCache,e,s);let l=o;if(t9(o,n)){r.$shared=!1,i=Pa(i)?i():i;const c=this.createResolver(e,i,a);l=Qc(o,i,c)}for(const c of n)r[c]=l[c];return r}createResolver(e,n,i=[""],s){const{resolver:r}=nx(this._resolverCache,e,i);return _n(n)?Qc(r,n,void 0,s):r}}function nx(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const s=n.join();let r=i.get(s);return r||(r={resolver:dv(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(s,r)),r}const e9=t=>_n(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||Pa(t[n]),!1);function t9(t,e){const{isScriptable:n,isIndexable:i}=Ik(t);for(const s of e){const r=n(s),o=i(s),a=(o||r)&&t[s];if(r&&(Pa(a)||e9(a))||o&&Yn(a))return!0}return!1}var n9="4.0.1";const i9=["top","bottom","left","right","chartArea"];function ix(t,e){return t==="top"||t==="bottom"||i9.indexOf(t)===-1&&e==="x"}function sx(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function rx(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Zt(n&&n.onComplete,[t],e)}function s9(t){const e=t.chart,n=e.options.animation;Zt(n&&n.onProgress,[t],e)}function nA(t){return zk()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Ep={},ox=t=>{const e=nA(t);return Object.values(Ep).filter(n=>n.canvas===e).pop()};function r9(t,e,n){const i=Object.keys(t);for(const s of i){const r=+s;if(r>=e){const o=t[s];delete t[s],(n>0||r>e)&&(t[r+n]=o)}}}function o9(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function a9(t){const{xScale:e,yScale:n}=t;if(e&&n)return{left:e.left,right:e.right,top:n.top,bottom:n.bottom}}class aa{static register(...e){Hr.add(...e),ax()}static unregister(...e){Hr.remove(...e),ax()}constructor(e,n){const i=this.config=new QH(n),s=nA(e),r=ox(s);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||EH(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Vz(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new GH,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=s7(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Ep[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}vo.listen(this,"complete",rx),vo.listen(this,"progress",s9),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:s,_aspectRatio:r}=this;return Sn(e)?n&&r?r:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Pw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Aw(this.canvas,this.ctx),this}stop(){return vo.stop(this),this}resize(e,n){vo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,s=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,r),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Pw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Zt(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pn(n,(i,s)=>{i.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,s=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],l=Tm(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),pn(r,o=>{const a=o.options,l=a.id,c=Tm(l,a),u=Yt(a.type,o.dtype);(a.position===void 0||ix(a.position,c)!==ix(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in i&&i[l].type===u)f=i[l];else{const h=Hr.getScale(u);f=new h({id:l,type:u,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(a,e)}),pn(s,(o,a)=>{o||delete i[a]}),pn(i,o=>{Zi.configure(this,o,o.options),Zi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((s,r)=>s.index-r.index),i>n){for(let s=n;s<i;++s)this._destroyDatasetMeta(s);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(sx("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,s)=>{n.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=n.length;i<s;i++){const r=n[i];let o=this.getDatasetMeta(i);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=r.indexAxis||Y1(a,this.options),o.order=r.order||0,o.index=i,o.label=""+r.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Hr.getController(a),{datasetElementType:c,dataElementType:u}=gi.datasets[a];Object.assign(l,{dataElementType:Hr.getElement(u),datasetElementType:c&&Hr.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),h=!s&&r.indexOf(f)===-1;f.buildOrUpdateElements(h),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||pn(r,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sx("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pn(this.scales,e=>{Zi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!pw(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:r}of n){const o=i==="_removeElements"?-r:r;r9(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=r=>new Set(e.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),s=i(0);for(let r=1;r<n;r++)if(!pw(s,i(r)))return;return Array.from(s).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Zi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],pn(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,r)=>{s._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Pa(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),s={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(vo.has(this)?this.attached&&!vo.running(this)&&vo.start(this):(this.draw(),rx({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:s}=this._resizeBeforeDraw;this._resize(i,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let s,r;for(s=0,r=n.length;s<r;++s){const o=n[s];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,s=!i.disabled,r=a9(e)||this.chartArea,o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(s&&vg(n,{left:i.left===!1?0:r.left-i.left,right:i.right===!1?this.width:r.right+i.right,top:i.top===!1?0:r.top-i.top,bottom:i.bottom===!1?this.height:r.bottom+i.bottom}),e.controller.draw(),s&&yg(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Jf(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,s){const r=sH.modes[n];return typeof r=="function"?r(this,e,i,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let s=i.filter(r=>r&&r._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Ba(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const s=i?"show":"hide",r=this.getDatasetMeta(e),o=r.controller._resolveAnimations(void 0,s);sr(n)?(r.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(r,{visible:i}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),vo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Aw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Ep[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(r,o)=>{n.addEventListener(this,r,o),e[r]=o},s=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};pn(this.options.events,r=>i(r,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},r=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",r),i("detach",o)};o=()=>{this.attached=!1,s("resize",r),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const s=i?"set":"remove";let r,o,a,l;for(n==="dataset"&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!vm(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const s=this.options.hover,r=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=r(n,e),a=i?e:r(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;const r=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(r||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:s=[],options:r}=this,o=n,a=this._getActiveElements(e,s,i,o),l=Xz(e),c=o9(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Zt(r.onHover,[e,a,this],this),l&&Zt(r.onClick,[e,a,this],this));const u=!vm(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,s){if(e.type==="mouseout")return[];if(!i)return n;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,s)}}Me(aa,"defaults",gi),Me(aa,"instances",Ep),Me(aa,"overrides",wl),Me(aa,"registry",Hr),Me(aa,"version",n9),Me(aa,"getChart",ox);function ax(){return pn(aa.instances,t=>t._plugins.invalidate())}var Ja=aa;function l9(t,e,n){const{startAngle:i,pixelMargin:s,x:r,y:o,outerRadius:a,innerRadius:l}=e;let c=s/a;t.beginPath(),t.arc(r,o,a,i-c,n+c),l>s?(c=s/l,t.arc(r,o,l,n+c,i-c,!0)):t.arc(r,o,s,n+pi,i-pi),t.closePath(),t.clip()}function c9(t){return hv(t,["outerStart","outerEnd","innerStart","innerEnd"])}function u9(t,e,n,i){const s=c9(t.options.borderRadius),r=(n-e)/2,o=Math.min(r,i*e/2),a=l=>{const c=(n-Math.min(r,l))*i/2;return Di(l,0,Math.min(r,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:Di(s.innerStart,0,o),innerEnd:Di(s.innerEnd,0,o)}}function Xl(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function km(t,e,n,i,s,r){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,f=Math.max(e.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0;let d=0;const p=s-l;if(i){const N=u>0?u-i:0,$=f>0?f-i:0,W=(N+$)/2,j=W!==0?p*W/(W+i):p;d=(p-j)/2}const m=Math.max(.001,p*f-n/si)/f,_=(p-m)/2,b=l+_+d,g=s-_-d,{outerStart:x,outerEnd:y,innerStart:v,innerEnd:w}=u9(e,h,f,g-b),S=f-x,T=f-y,k=b+x/S,A=g-y/T,L=h+v,D=h+w,B=b+v/L,U=g-w/D;if(t.beginPath(),r){const N=(k+A)/2;if(t.arc(o,a,f,k,N),t.arc(o,a,f,N,A),y>0){const J=Xl(T,A,o,a);t.arc(J.x,J.y,y,A,g+pi)}const $=Xl(D,g,o,a);if(t.lineTo($.x,$.y),w>0){const J=Xl(D,U,o,a);t.arc(J.x,J.y,w,g+pi,U+Math.PI)}const W=(g-w/h+(b+v/h))/2;if(t.arc(o,a,h,g-w/h,W,!0),t.arc(o,a,h,W,b+v/h,!0),v>0){const J=Xl(L,B,o,a);t.arc(J.x,J.y,v,B+Math.PI,b-pi)}const j=Xl(S,b,o,a);if(t.lineTo(j.x,j.y),x>0){const J=Xl(S,k,o,a);t.arc(J.x,J.y,x,b-pi,k)}}else{t.moveTo(o,a);const N=Math.cos(k)*f+o,$=Math.sin(k)*f+a;t.lineTo(N,$);const W=Math.cos(A)*f+o,j=Math.sin(A)*f+a;t.lineTo(W,j)}t.closePath()}function f9(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a}=e;let l=e.endAngle;if(r){km(t,e,n,i,l,s);for(let c=0;c<r;++c)t.fill();isNaN(a)||(l=o+(a%qn||qn))}return km(t,e,n,i,l,s),t.fill(),l}function h9(t,e,n,i,s){const{fullCircles:r,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u}=l,f=l.borderAlign==="inner";if(!c)return;f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let h=e.endAngle;if(r){km(t,e,n,i,h,s);for(let d=0;d<r;++d)t.stroke();isNaN(a)||(h=o+(a%qn||qn))}f&&l9(t,e,h),r||(km(t,e,n,i,h,s),t.stroke())}class Tp extends Pr{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.getProps(["x","y"],i),{angle:r,distance:o}=bk(s,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=this.options.spacing/2,p=Yt(f,l-a)>=qn||Zf(r,a,l),m=Ao(o,c+h,u+h);return p&&m}getCenterPoint(e){const{x:n,y:i,startAngle:s,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,u=(s+r)/2,f=(o+a+c+l)/2;return{x:n+Math.cos(u)*f,y:i+Math.sin(u)*f}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,s=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>qn?Math.floor(i/qn):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*s,Math.sin(a)*s);const l=1-Math.sin(Math.min(si,i||0)),c=s*l;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,f9(e,this,c,r,o),h9(e,this,c,r,o),e.restore()}}Me(Tp,"id","arc"),Me(Tp,"defaults",{borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Me(Tp,"defaultRoutes",{backgroundColor:"backgroundColor"});function iA(t,e,n=e){t.lineCap=Yt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Yt(n.borderDash,e.borderDash)),t.lineDashOffset=Yt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Yt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Yt(n.borderWidth,e.borderWidth),t.strokeStyle=Yt(n.borderColor,e.borderColor)}function d9(t,e,n){t.lineTo(n.x,n.y)}function p9(t){return t.stepped?F7:t.tension||t.cubicInterpolationMode==="monotone"?z7:d9}function sA(t,e,n={}){const i=t.length,{start:s=0,end:r=i-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(r,a),u=s<o&&r<o||s>a&&r>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function m9(t,e,n,i){const{points:s,options:r}=e,{count:o,start:a,loop:l,ilen:c}=sA(s,n,i),u=p9(r);let{move:f=!0,reverse:h}=i||{},d,p,m;for(d=0;d<=c;++d)p=s[(a+(h?c-d:d))%o],!p.skip&&(f?(t.moveTo(p.x,p.y),f=!1):u(t,m,p,h,r.stepped),m=p);return l&&(p=s[(a+(h?c:0))%o],u(t,m,p,h,r.stepped)),!!l}function g9(t,e,n,i){const s=e.points,{count:r,start:o,ilen:a}=sA(s,n,i),{move:l=!0,reverse:c}=i||{};let u=0,f=0,h,d,p,m,_,b;const g=y=>(o+(c?a-y:y))%r,x=()=>{m!==_&&(t.lineTo(u,_),t.lineTo(u,m),t.lineTo(u,b))};for(l&&(d=s[g(0)],t.moveTo(d.x,d.y)),h=0;h<=a;++h){if(d=s[g(h)],d.skip)continue;const y=d.x,v=d.y,w=y|0;w===p?(v<m?m=v:v>_&&(_=v),u=(f*u+y)/++f):(x(),t.lineTo(y,v),p=w,f=0,m=_=v),b=v}x()}function q1(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?g9:m9}function _9(t){return t.stepped?_U:t.tension||t.cubicInterpolationMode==="monotone"?bU:Za}function b9(t,e,n,i){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,i)&&s.closePath()),iA(t,e.options),t.stroke(s)}function v9(t,e,n,i){const{segments:s,options:r}=e,o=q1(e);for(const a of s)iA(t,r,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const y9=typeof Path2D=="function";function w9(t,e,n,i){y9&&!e.options.segment?b9(t,e,n,i):v9(t,e,n,i)}class va extends Pr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;cU(this._points,i,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=SU(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,s=e[n],r=this.points,o=Wk(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=_9(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:h}=o[c],d=r[f],p=r[h];if(d===p){a.push(d);continue}const m=Math.abs((s-d[n])/(p[n]-d[n])),_=l(d,p,m,i.stepped);_[n]=e[n],a.push(_)}return a.length===1?a[0]:a}pathSegment(e,n,i){return q1(this)(e,this,n,i)}path(e,n,i){const s=this.segments,r=q1(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of s)o&=r(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,s){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),w9(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Me(va,"id","line"),Me(va,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Me(va,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Me(va,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function lx(t,e,n,i){const s=t.options,{[n]:r}=t.getProps([n],i);return Math.abs(e-r)<s.radius+s.hitRadius}class kp extends Pr{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,i){const s=this.options,{x:r,y:o}=this.getProps(["x","y"],i);return Math.pow(e-r,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return lx(this,e,"x",n)}inYRange(e,n){return lx(this,e,"y",n)}getCenterPoint(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const i=n&&e.borderWidth||0;return(n+i)*2}draw(e,n){const i=this.options;this.skip||i.radius<.1||!Jf(this,n,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,W1(e,i,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}Me(kp,"id","point"),Me(kp,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Me(kp,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function rA(t,e){const{x:n,y:i,base:s,width:r,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,f;return t.horizontal?(f=o/2,a=Math.min(n,s),l=Math.max(n,s),c=i-f,u=i+f):(f=r/2,a=n-f,l=n+f,c=Math.min(i,s),u=Math.max(i,s)),{left:a,top:c,right:l,bottom:u}}function ya(t,e,n,i){return t?0:Di(e,n,i)}function x9(t,e,n){const i=t.options.borderWidth,s=t.borderSkipped,r=Rk(i);return{t:ya(s.top,r.top,0,n),r:ya(s.right,r.right,0,e),b:ya(s.bottom,r.bottom,0,n),l:ya(s.left,r.left,0,e)}}function M9(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,r=fl(s),o=Math.min(e,n),a=t.borderSkipped,l=i||_n(s);return{topLeft:ya(!l||a.top||a.left,r.topLeft,0,o),topRight:ya(!l||a.top||a.right,r.topRight,0,o),bottomLeft:ya(!l||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:ya(!l||a.bottom||a.right,r.bottomRight,0,o)}}function S9(t){const e=rA(t),n=e.right-e.left,i=e.bottom-e.top,s=x9(t,n/2,i/2),r=M9(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:r},inner:{x:e.left+s.l,y:e.top+s.t,w:n-s.l-s.r,h:i-s.t-s.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,r.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(s.b,s.r))}}}}function v0(t,e,n,i){const s=e===null,r=n===null,a=t&&!(s&&r)&&rA(t,i);return a&&(s||Ao(e,a.left,a.right))&&(r||Ao(n,a.top,a.bottom))}function E9(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function T9(t,e){t.rect(e.x,e.y,e.w,e.h)}function y0(t,e,n={}){const i=t.x!==n.x?-e:0,s=t.y!==n.y?-e:0,r=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-s;return{x:t.x+i,y:t.y+s,w:t.w+r,h:t.h+o,radius:t.radius}}class Ap extends Pr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:s}}=this,{inner:r,outer:o}=S9(this),a=E9(o.radius)?Kf:T9;e.save(),(o.w!==r.w||o.h!==r.h)&&(e.beginPath(),a(e,y0(o,n,r)),e.clip(),a(e,y0(r,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,y0(r,n)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,n,i){return v0(this,e,n,i)}inXRange(e,n){return v0(this,e,null,n)}inYRange(e,n){return v0(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:s,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(n+s)/2:n,y:r?i:(i+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Me(Ap,"id","bar"),Me(Ap,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Me(Ap,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var k9=Object.freeze({__proto__:null,ArcElement:Tp,LineElement:va,PointElement:kp,BarElement:Ap});const X1=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],cx=X1.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function oA(t){return X1[t%X1.length]}function aA(t){return cx[t%cx.length]}function A9(){return(t,e)=>{t.borderColor=oA(e),t.backgroundColor=aA(e)}}function L9(){let t=0;return e=>{e.backgroundColor=e.data.map(()=>oA(t++))}}function C9(){let t=0;return e=>{e.backgroundColor=e.data.map(()=>aA(t++))}}function P9(t){return t==="doughnut"||t==="pie"?L9():t==="polarArea"?C9():A9()}function ux(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var R9={id:"colors",defaults:{enabled:!0},beforeLayout(t,e,n){if(!n.enabled)return;const{type:i,options:{elements:s},data:{datasets:r}}=t.config;if(ux(r)||s&&ux(s))return;const o=P9(i);r.forEach(o)}};function I9(t,e,n,i,s){const r=s.samples||i;if(r>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(r-2);let l=0;const c=e+n-1;let u=e,f,h,d,p,m;for(o[l++]=t[u],f=0;f<r-2;f++){let _=0,b=0,g;const x=Math.floor((f+1)*a)+1+e,y=Math.min(Math.floor((f+2)*a)+1,n)+e,v=y-x;for(g=x;g<y;g++)_+=t[g].x,b+=t[g].y;_/=v,b/=v;const w=Math.floor(f*a)+1+e,S=Math.min(Math.floor((f+1)*a)+1,n)+e,{x:T,y:k}=t[u];for(d=p=-1,g=w;g<S;g++)p=.5*Math.abs((T-_)*(t[g].y-k)-(T-t[g].x)*(b-k)),p>d&&(d=p,h=t[g],m=g);o[l++]=h,u=m}return o[l++]=t[c],o}function D9(t,e,n,i){let s=0,r=0,o,a,l,c,u,f,h,d,p,m;const _=[],b=e+n-1,g=t[e].x,y=t[b].x-g;for(o=e;o<e+n;++o){a=t[o],l=(a.x-g)/y*i,c=a.y;const v=l|0;if(v===u)c<p?(p=c,f=o):c>m&&(m=c,h=o),s=(r*s+a.x)/++r;else{const w=o-1;if(!Sn(f)&&!Sn(h)){const S=Math.min(f,h),T=Math.max(f,h);S!==d&&S!==w&&_.push({...t[S],x:s}),T!==d&&T!==w&&_.push({...t[T],x:s})}o>0&&w!==d&&_.push(t[w]),_.push(a),u=v,r=0,p=m=c,f=h=d=o}}return _}function lA(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function fx(t){t.data.datasets.forEach(e=>{lA(e)})}function O9(t,e){const n=e.length;let i=0,s;const{iScale:r}=t,{min:o,max:a,minDefined:l,maxDefined:c}=r.getUserBounds();return l&&(i=Di(Lo(e,r.axis,o).lo,0,n-1)),c?s=Di(Lo(e,r.axis,a).hi+1,i,n)-i:s=n-i,{start:i,count:s}}var N9={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){fx(t);return}const i=t.width;t.data.datasets.forEach((s,r)=>{const{_data:o,indexAxis:a}=s,l=t.getDatasetMeta(r),c=o||s.data;if(qu([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:f,count:h}=O9(l,c);const d=n.threshold||4*i;if(h<=d){lA(s);return}Sn(o)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(n.algorithm){case"lttb":p=I9(c,f,h,i,n);break;case"min-max":p=D9(c,f,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}s._decimated=p})},destroy(t){fx(t)}};function B9(t,e,n){const i=t.segments,s=t.points,r=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=bv(l,c,s);const u=Z1(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const f=Wk(e,u);for(const h of f){const d=Z1(n,r[h.start],r[h.end],h.loop),p=Gk(a,s,d);for(const m of p)o.push({source:m,target:h,start:{[n]:hx(u,d,"start",Math.max)},end:{[n]:hx(u,d,"end",Math.min)}})}}return o}function Z1(t,e,n,i){if(i)return;let s=e[t],r=n[t];return t==="angle"&&(s=Rs(s),r=Rs(r)),{property:t,start:s,end:r}}function F9(t,e){const{x:n=null,y:i=null}=t||{},s=e.points,r=[];return e.segments.forEach(({start:o,end:a})=>{a=bv(o,a,s);const l=s[o],c=s[a];i!==null?(r.push({x:l.x,y:i}),r.push({x:c.x,y:i})):n!==null&&(r.push({x:n,y:l.y}),r.push({x:n,y:c.y}))}),r}function bv(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function hx(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function cA(t,e){let n=[],i=!1;return Yn(t)?(i=!0,n=t):n=F9(t,e),n.length?new va({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function dx(t){return t&&t.fill!==!1}function z9(t,e,n){let s=t[e].fill;const r=[e];let o;if(!n)return s;for(;s!==!1&&r.indexOf(s)===-1;){if(!di(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;r.push(s),s=o.fill}return!1}function U9(t,e,n){const i=W9(t);if(_n(i))return isNaN(i.value)?!1:i;let s=parseFloat(i);return di(s)&&Math.floor(s)===s?H9(i[0],e,s,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function H9(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function V9(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:_n(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function G9(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:_n(t)?i=t.value:i=e.getBaseValue(),i}function W9(t){const e=t.options,n=e.fill;let i=Yt(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function j9(t){const{scale:e,index:n,line:i}=t,s=[],r=i.segments,o=i.points,a=Y9(e,n);a.push(cA({x:null,y:e.bottom},i));for(let l=0;l<r.length;l++){const c=r[l];for(let u=c.start;u<=c.end;u++)q9(s,o[u],a)}return new va({points:s,options:{}})}function Y9(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let s=0;s<i.length;s++){const r=i[s];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}function q9(t,e,n){const i=[];for(let s=0;s<n.length;s++){const r=n[s],{first:o,last:a,point:l}=X9(r,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function X9(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const s=i[n],r=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<r.length;c++){const u=r[c],f=o[u.start][n],h=o[u.end][n];if(Ao(s,f,h)){a=s===f,l=s===h;break}}return{first:a,last:l,point:i}}class uA{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:s,y:r,radius:o}=this;return n=n||{start:0,end:qn},e.arc(s,r,o,n.end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:s}=this,r=e.angle;return{x:n+Math.cos(r)*s,y:i+Math.sin(r)*s,angle:r}}}function Z9(t){const{chart:e,fill:n,line:i}=t;if(di(n))return J9(e,n);if(n==="stack")return j9(t);if(n==="shape")return!0;const s=K9(t);return s instanceof uA?s:cA(s,i)}function J9(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function K9(t){return(t.scale||{}).getPointPositionForValue?Q9(t):$9(t)}function $9(t){const{scale:e={},fill:n}=t,i=V9(n,e);if(di(i)){const s=e.isHorizontal();return{x:s?i:null,y:s?null:i}}return null}function Q9(t){const{scale:e,fill:n}=t,i=e.options,s=e.getLabels().length,r=i.reverse?e.max:e.min,o=G9(n,e,r),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,r);return new uA({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function w0(t,e,n){const i=Z9(e),{line:s,scale:r,axis:o}=e,a=s.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:f=c}=l||{};i&&s.points.length&&(vg(t,n),eV(t,{line:s,target:i,above:u,below:f,area:n,scale:r,axis:o}),yg(t))}function eV(t,e){const{line:n,target:i,above:s,below:r,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&r!==s&&(px(t,i,o.top),mx(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore(),t.save(),px(t,i,o.bottom)),mx(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore()}function px(t,e,n){const{segments:i,points:s}=e;let r=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,u=s[l],f=s[bv(l,c,s)];r?(t.moveTo(u.x,u.y),r=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function mx(t,e){const{line:n,target:i,property:s,color:r,scale:o}=e,a=B9(n,i,s);for(const{source:l,target:c,start:u,end:f}of a){const{style:{backgroundColor:h=r}={}}=l,d=i!==!0;t.save(),t.fillStyle=h,tV(t,o,d&&Z1(s,u,f)),t.beginPath();const p=!!n.pathSegment(t,l);let m;if(d){p?t.closePath():gx(t,i,f,s);const _=!!i.pathSegment(t,c,{move:p,reverse:!0});m=p&&_,m||gx(t,i,u,s)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function tV(t,e,n){const{top:i,bottom:s}=e.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(t.beginPath(),t.rect(o,i,a-o,s-i),t.clip())}function gx(t,e,n,i){const s=e.interpolate(n,i);s&&t.lineTo(s.x,s.y)}var nV={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,s=[];let r,o,a,l;for(o=0;o<i;++o)r=t.getDatasetMeta(o),a=r.dataset,l=null,a&&a.options&&a instanceof va&&(l={visible:t.isDatasetVisible(o),index:o,fill:U9(a,o,i),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=l,s.push(l);for(o=0;o<i;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=z9(s,o,n.propagate))},beforeDraw(t,e,n){const i=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;!a||(a.line.updateControlPoints(r,a.axis),i&&a.fill&&w0(t.ctx,a,r))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const i=t.getSortedVisibleDatasetMetas();for(let s=i.length-1;s>=0;--s){const r=i[s].$filler;dx(r)&&w0(t.ctx,r,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!dx(i)||n.drawTime!=="beforeDatasetDraw"||w0(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _x=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},iV=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class bx extends Pr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Zt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,s)=>e.sort(i,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,s=ki(i.font),r=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=_x(i,r);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,r,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,s){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let f=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-u;return this.legendItems.forEach((p,m)=>{const _=i+n/2+r.measureText(p.text).width;(m===0||c[c.length-1]+_+2*a>o)&&(f+=u,c[c.length-(m>0?0:1)]=0,d+=u,h++),l[m]={left:0,top:d,row:h,width:_,height:s},c[c.length-1]+=_+a}),f}_fitCols(e,n,i,s){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,h=0,d=0,p=0,m=0;return this.legendItems.forEach((_,b)=>{const{itemWidth:g,itemHeight:x}=sV(i,n,r,_,s);b>0&&d+x+2*a>u&&(f+=h+a,c.push({width:h,height:d}),p+=h+a,m++,h=d=0),l[b]={left:p,top:d,col:m,width:g,height:x},h=Math.max(h,g),d+=x+a}),f+=h,c.push({width:h,height:d}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:s},rtl:r}}=this,o=Vc(r,this.left,this.width);if(this.isHorizontal()){let a=0,l=qi(i,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=qi(i,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=qi(i,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=qi(i,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;vg(e,this),this._draw(),yg(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:s}=this,{align:r,labels:o}=e,a=gi.color,l=Vc(e.rtl,this.left,this.width),c=ki(o.font),{padding:u}=o,f=c.size,h=f/2;let d;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:m,itemHeight:_}=_x(o,f),b=function(w,S,T){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;s.save();const k=Yt(T.lineWidth,1);if(s.fillStyle=Yt(T.fillStyle,a),s.lineCap=Yt(T.lineCap,"butt"),s.lineDashOffset=Yt(T.lineDashOffset,0),s.lineJoin=Yt(T.lineJoin,"miter"),s.lineWidth=k,s.strokeStyle=Yt(T.strokeStyle,a),s.setLineDash(Yt(T.lineDash,[])),o.usePointStyle){const A={radius:m*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:k},L=l.xPlus(w,p/2),D=S+h;Pk(s,A,L,D,o.pointStyleWidth&&p)}else{const A=S+Math.max((f-m)/2,0),L=l.leftForLtr(w,p),D=fl(T.borderRadius);s.beginPath(),Object.values(D).some(B=>B!==0)?Kf(s,{x:L,y:A,w:p,h:m,radius:D}):s.rect(L,A,p,m),s.fill(),k!==0&&s.stroke()}s.restore()},g=function(w,S,T){xl(s,T.text,w,S+_/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},x=this.isHorizontal(),y=this._computeTitleHeight();x?d={x:qi(r,this.left+u,this.right-i[0]),y:this.top+u+y,line:0}:d={x:this.left+u,y:qi(r,this.top+y+u,this.bottom-n[0].height),line:0},Uk(this.ctx,e.textDirection);const v=_+u;this.legendItems.forEach((w,S)=>{s.strokeStyle=w.fontColor,s.fillStyle=w.fontColor;const T=s.measureText(w.text).width,k=l.textAlign(w.textAlign||(w.textAlign=o.textAlign)),A=p+h+T;let L=d.x,D=d.y;l.setWidth(this.width),x?S>0&&L+A+u>this.right&&(D=d.y+=v,d.line++,L=d.x=qi(r,this.left+u,this.right-i[d.line])):S>0&&D+v>this.bottom&&(L=d.x=L+n[d.line].width+u,d.line++,D=d.y=qi(r,this.top+y+u,this.bottom-n[d.line].height));const B=l.x(L);if(b(B,D,w),L=r7(k,L+p+h,x?L+A:this.right,e.rtl),g(l.x(L),D,w),x)d.x+=A+u;else if(typeof w.text!="string"){const U=c.lineHeight;d.y+=fA(w,U)}else d.y+=v}),Hk(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=ki(n.font),s=Qi(n.padding);if(!n.display)return;const r=Vc(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=s.top+l;let u,f=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,f=qi(e.align,f,this.right-h);else{const p=this.columnSizes.reduce((m,_)=>Math.max(m,_.height),0);u=c+qi(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const d=qi(a,f,f+h);o.textAlign=r.textAlign(lv(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,xl(o,n.text,d,u,i)}_computeTitleHeight(){const e=this.options.title,n=ki(e.font),i=Qi(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,s,r;if(Ao(e,this.left,this.right)&&Ao(n,this.top,this.bottom)){for(r=this.legendHitBoxes,i=0;i<r.length;++i)if(s=r[i],Ao(e,s.left,s.left+s.width)&&Ao(n,s.top,s.top+s.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!aV(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,r=iV(s,i);s&&!r&&Zt(n.onLeave,[e,s,this],this),this._hoveredItem=i,i&&!r&&Zt(n.onHover,[e,i,this],this)}else i&&Zt(n.onClick,[e,i,this],this)}}function sV(t,e,n,i,s){const r=rV(i,t,e,n),o=oV(s,i,e.lineHeight);return{itemWidth:r,itemHeight:o}}function rV(t,e,n,i){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((r,o)=>r.length>o.length?r:o)),e+n.size/2+i.measureText(s).width}function oV(t,e,n){let i=t;return typeof e.text!="string"&&(i=fA(e,n)),i}function fA(t,e){const n=t.text?t.text.length+.5:0;return e*n}function aV(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var lV={id:"legend",_element:bx,start(t,e,n){const i=t.legend=new bx({ctx:t.ctx,options:n,chart:t});Zi.configure(t,i,n),Zi.addBox(t,i)},stop(t){Zi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Zi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,s=n.chart;s.isDatasetVisible(i)?(s.hide(i),e.hidden=!0):(s.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:s,color:r,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Qi(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:r,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class vv extends Pr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Yn(i.text)?i.text.length:1;this._padding=Qi(i.padding);const r=s*ki(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:s,right:r,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=qi(a,i,r),f=n+e,c=r-i):(o.position==="left"?(u=i+e,f=qi(a,s,n),l=si*-.5):(u=r-e,f=qi(a,n,s),l=si*.5),c=s-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=ki(n.font),r=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(r);xl(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:lv(n.align),textBaseline:"middle",translation:[o,a]})}}function cV(t,e){const n=new vv({ctx:t.ctx,options:e,chart:t});Zi.configure(t,n,e),Zi.addBox(t,n),t.titleBlock=n}var uV={id:"title",_element:vv,start(t,e,n){cV(t,n)},stop(t){const e=t.titleBlock;Zi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Zi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const dd=new WeakMap;var fV={id:"subtitle",start(t,e,n){const i=new vv({ctx:t.ctx,options:n,chart:t});Zi.configure(t,i,n),Zi.addBox(t,i),dd.set(t,i)},stop(t){Zi.removeBox(t,dd.get(t)),dd.delete(t)},beforeUpdate(t,e,n){const i=dd.get(t);Zi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zu={average(t){if(!t.length)return!1;let e,n,i=0,s=0,r=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,s+=a.y,++r}}return{x:i/r,y:s/r}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,s=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=t.length;r<o;++r){const l=t[r].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=H1(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Ur(t,e){return e&&(Yn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function yo(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function hV(t,e){const{element:n,datasetIndex:i,index:s}=e,r=t.getDatasetMeta(i).controller,{label:o,value:a}=r.getLabelAndValue(s);return{chart:t,label:o,parsed:r.getParsed(s),raw:t.data.datasets[i].data[s],formattedValue:a,dataset:r.getDataset(),dataIndex:s,datasetIndex:i,element:n}}function vx(t,e){const n=t.chart.ctx,{body:i,footer:s,title:r}=t,{boxWidth:o,boxHeight:a}=e,l=ki(e.bodyFont),c=ki(e.titleFont),u=ki(e.footerFont),f=r.length,h=s.length,d=i.length,p=Qi(e.padding);let m=p.height,_=0,b=i.reduce((y,v)=>y+v.before.length+v.lines.length+v.after.length,0);if(b+=t.beforeBody.length+t.afterBody.length,f&&(m+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),b){const y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=d*y+(b-d)*l.lineHeight+(b-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let g=0;const x=function(y){_=Math.max(_,n.measureText(y).width+g)};return n.save(),n.font=c.string,pn(t.title,x),n.font=l.string,pn(t.beforeBody.concat(t.afterBody),x),g=e.displayColors?o+2+e.boxPadding:0,pn(i,y=>{pn(y.before,x),pn(y.lines,x),pn(y.after,x)}),g=0,n.font=u.string,pn(t.footer,x),n.restore(),_+=p.width,{width:_,height:m}}function dV(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function pV(t,e,n,i){const{x:s,width:r}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&s+r+o>e.width||t==="right"&&s-r-o<0)return!0}function mV(t,e,n,i){const{x:s,width:r}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=s<=(a+l)/2?"left":"right":s<=r/2?c="left":s>=o-r/2&&(c="right"),pV(c,t,e,n)&&(c="center"),c}function yx(t,e,n){const i=n.yAlign||e.yAlign||dV(t,n);return{xAlign:n.xAlign||e.xAlign||mV(t,e,n,i),yAlign:i}}function gV(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function _V(t,e,n){let{y:i,height:s}=t;return e==="top"?i+=n:e==="bottom"?i-=s+n:i-=s/2,i}function wx(t,e,n,i){const{caretSize:s,caretPadding:r,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+r,{topLeft:u,topRight:f,bottomLeft:h,bottomRight:d}=fl(o);let p=gV(e,a);const m=_V(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+s:a==="right"&&(p+=Math.max(f,d)+s),{x:Di(p,0,i.width-e.width),y:Di(m,0,i.height-e.height)}}function pd(t,e,n){const i=Qi(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function xx(t){return Ur([],yo(t))}function bV(t,e,n){return Ba(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Mx(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const hA={beforeTitle:ho,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:ho,beforeBody:ho,beforeLabel:ho,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Sn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:ho,afterBody:ho,beforeFooter:ho,footer:ho,afterFooter:ho};function ms(t,e,n,i){const s=t[e].call(n,i);return typeof s>"u"?hA[e].call(n,i):s}class J1 extends Pr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&n.options.animation&&i.animations,r=new jk(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=bV(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,s=ms(i,"beforeTitle",this,e),r=ms(i,"title",this,e),o=ms(i,"afterTitle",this,e);let a=[];return a=Ur(a,yo(s)),a=Ur(a,yo(r)),a=Ur(a,yo(o)),a}getBeforeBody(e,n){return xx(ms(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,s=[];return pn(e,r=>{const o={before:[],lines:[],after:[]},a=Mx(i,r);Ur(o.before,yo(ms(a,"beforeLabel",this,r))),Ur(o.lines,ms(a,"label",this,r)),Ur(o.after,yo(ms(a,"afterLabel",this,r))),s.push(o)}),s}getAfterBody(e,n){return xx(ms(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,s=ms(i,"beforeFooter",this,e),r=ms(i,"footer",this,e),o=ms(i,"afterFooter",this,e);let a=[];return a=Ur(a,yo(s)),a=Ur(a,yo(r)),a=Ur(a,yo(o)),a}_createItems(e){const n=this._active,i=this.chart.data,s=[],r=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(hV(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,h)=>e.filter(u,f,h,i))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,i))),pn(a,u=>{const f=Mx(e.callbacks,u);s.push(ms(f,"labelColor",this,u)),r.push(ms(f,"labelPointStyle",this,u)),o.push(ms(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),s=this._active;let r,o=[];if(!s.length)this.opacity!==0&&(r={opacity:0});else{const a=Zu[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=vx(this,i),c=Object.assign({},a,l),u=yx(this.chart,i,c),f=wx(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,s){const r=this.getCaretPosition(e,i,s);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,i){const{xAlign:s,yAlign:r}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=fl(a),{x:h,y:d}=e,{width:p,height:m}=n;let _,b,g,x,y,v;return r==="center"?(y=d+m/2,s==="left"?(_=h,b=_-o,x=y+o,v=y-o):(_=h+p,b=_+o,x=y-o,v=y+o),g=_):(s==="left"?b=h+Math.max(l,u)+o:s==="right"?b=h+p-Math.max(c,f)-o:b=this.caretX,r==="top"?(x=d,y=x-o,_=b-o,g=b+o):(x=d+m,y=x+o,_=b+o,g=b-o),v=x),{x1:_,x2:b,x3:g,y1:x,y2:y,y3:v}}drawTitle(e,n,i){const s=this.title,r=s.length;let o,a,l;if(r){const c=Vc(i.rtl,this.x,this.width);for(e.x=pd(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=ki(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<r;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===r&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,s,r){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c,boxPadding:u}=r,f=ki(r.bodyFont),h=pd(this,"left",r),d=s.x(h),p=l<f.lineHeight?(f.lineHeight-l)/2:0,m=n.y+p;if(r.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},b=s.leftForLtr(d,c)+c/2,g=m+l/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,W1(e,_,b,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,W1(e,_,b,g)}else{e.lineWidth=_n(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(d,c-u),b=s.leftForLtr(s.xPlus(d,1),c-u-2),g=fl(o.borderRadius);Object.values(g).some(x=>x!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Kf(e,{x:_,y:m,w:c,h:l,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Kf(e,{x:b,y:m+1,w:c-2,h:l-2,radius:g}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(_,m,c,l),e.strokeRect(_,m,c,l),e.fillStyle=o.backgroundColor,e.fillRect(b,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:s}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,f=ki(i.bodyFont);let h=f.lineHeight,d=0;const p=Vc(i.rtl,this.x,this.width),m=function(T){n.fillText(T,p.x(e.x+d),e.y+h/2),e.y+=h+r},_=p.textAlign(o);let b,g,x,y,v,w,S;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=pd(this,_,i),n.fillStyle=i.bodyColor,pn(this.beforeBody,m),d=a&&_!=="right"?o==="center"?c/2+u:c+2+u:0,y=0,w=s.length;y<w;++y){for(b=s[y],g=this.labelTextColors[y],n.fillStyle=g,pn(b.before,m),x=b.lines,a&&x.length&&(this._drawColorBox(n,e,y,p,i),h=Math.max(f.lineHeight,l)),v=0,S=x.length;v<S;++v)m(x[v]),h=f.lineHeight;pn(b.after,m)}d=0,h=f.lineHeight,pn(this.afterBody,m),e.y-=r}drawFooter(e,n,i){const s=this.footer,r=s.length;let o,a;if(r){const l=Vc(i.rtl,this.x,this.width);for(e.x=pd(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=ki(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,s){const{xAlign:r,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:f,topRight:h,bottomLeft:d,bottomRight:p}=fl(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,i,s),n.lineTo(a+c-h,l),n.quadraticCurveTo(a+c,l,a+c,l+h),o==="center"&&r==="right"&&this.drawCaret(e,n,i,s),n.lineTo(a+c,l+u-p),n.quadraticCurveTo(a+c,l+u,a+c-p,l+u),o==="bottom"&&this.drawCaret(e,n,i,s),n.lineTo(a+d,l+u),n.quadraticCurveTo(a,l+u,a,l+u-d),o==="center"&&r==="left"&&this.drawCaret(e,n,i,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,s=i&&i.x,r=i&&i.y;if(s||r){const o=Zu[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=vx(this,e),l=Object.assign({},o,this._size),c=yx(n,e,l),u=wx(e,l,c,n);(s._to!==u.x||r._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Qi(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(r,e,s,n),Uk(e,n.textDirection),r.y+=o.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),Hk(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),r=!vm(i,s),o=this._positionChanged(s,n);(r||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,r=this._active||[],o=this._getActiveElements(e,r,n,i),a=this._positionChanged(o,e),l=n||!vm(o,r)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,s){const r=this.options;if(e.type==="mouseout")return[];if(!s)return n;const o=this.chart.getElementsAtEventForMode(e,r.mode,r,i);return r.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:s,options:r}=this,o=Zu[r.position].call(this,e,n);return o!==!1&&(i!==o.x||s!==o.y)}}Me(J1,"positioners",Zu);var vV={id:"tooltip",_element:J1,positioners:Zu,afterInit(t,e,n){n&&(t.tooltip=new J1({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},yV=Object.freeze({__proto__:null,Colors:R9,Decimation:N9,Filler:nV,Legend:lV,SubTitle:fV,Title:uV,Tooltip:vV});const wV=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function xV(t,e,n,i){const s=t.indexOf(e);if(s===-1)return wV(t,e,n,i);const r=t.lastIndexOf(e);return s!==r?n:s}const MV=(t,e)=>t===null?null:Di(Math.round(t),0,e);function Sx(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class K1 extends Bl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:s,label:r}of n)i[s]===r&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Sn(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:xV(i,e,Yt(n,e),this._addedLabels),MV(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,s=[];let r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Sx.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Me(K1,"id","category"),Me(K1,"defaults",{ticks:{callback:Sx}});function SV(t,e){const n=[],{bounds:s,step:r,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:h}=t,d=r||1,p=u-1,{min:m,max:_}=e,b=!Sn(o),g=!Sn(a),x=!Sn(c),y=(_-m)/(f+1);let v=gw((_-m)/p/d)*d,w,S,T,k;if(v<1e-14&&!b&&!g)return[{value:m},{value:_}];k=Math.ceil(_/v)-Math.floor(m/v),k>p&&(v=gw(k*v/p/d)*d),Sn(l)||(w=Math.pow(10,l),v=Math.ceil(v*w)/w),s==="ticks"?(S=Math.floor(m/v)*v,T=Math.ceil(_/v)*v):(S=m,T=_),b&&g&&r&&$z((a-o)/r,v/1e3)?(k=Math.round(Math.min((a-o)/v,u)),v=(a-o)/k,S=o,T=a):x?(S=b?o:S,T=g?a:T,k=c-1,v=(T-S)/k):(k=(T-S)/v,df(k,Math.round(k),v/1e3)?k=Math.round(k):k=Math.ceil(k));const A=Math.max(_w(v),_w(S));w=Math.pow(10,Sn(l)?A:l),S=Math.round(S*w)/w,T=Math.round(T*w)/w;let L=0;for(b&&(h&&S!==o?(n.push({value:o}),S<o&&L++,df(Math.round((S+L*v)*w)/w,o,Ex(o,y,t))&&L++):S<o&&L++);L<k;++L)n.push({value:Math.round((S+L*v)*w)/w});return g&&h&&T!==a?n.length&&df(n[n.length-1].value,a,Ex(a,y,t))?n[n.length-1].value=a:n.push({value:a}):(!g||T===a)&&n.push({value:T}),n}function Ex(t,e,{horizontal:n,minRotation:i}){const s=Sr(i),r=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/r,o)}class Am extends Bl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Sn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:s,max:r}=this;const o=l=>s=n?s:l,a=l=>r=i?r:l;if(e){const l=nr(s),c=nr(r);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===r){let l=r===0?1:Math.abs(r*.05);a(r+l),e||o(s-l)}this.min=s,this.max=r}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,s;return i?(s=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=SV(s,r);return e.bounds==="ticks"&&_k(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const s=(i-n)/Math.max(e.length-1,1)/2;n-=s,i+=s}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Dh(e,this.chart.options.locale,this.options.ticks.format)}}class $1 extends Am{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=di(e)?e:0,this.max=di(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Sr(this.options.ticks.minRotation),s=(e?Math.sin(i):Math.cos(i))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Me($1,"id","linear"),Me($1,"defaults",{ticks:{callback:bg.formatters.numeric}});const Qf=t=>Math.floor(_a(t)),Ga=(t,e)=>Math.pow(10,Qf(t)+e);function Tx(t){return t/Math.pow(10,Qf(t))===1}function kx(t,e,n){const i=Math.pow(10,n),s=Math.floor(t/i);return Math.ceil(e/i)-s}function EV(t,e){const n=e-t;let i=Qf(n);for(;kx(t,e,i)>10;)i++;for(;kx(t,e,i)<10;)i--;return Math.min(i,Qf(t))}function TV(t,{min:e,max:n}){e=Ps(t.min,e);const i=[],s=Qf(e);let r=EV(e,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),l=s>r?Math.pow(10,s):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10;let f=Math.floor((c-u)/Math.pow(10,r)),h=Ps(t.min,Math.round((l+u+f*Math.pow(10,r))*o)/o);for(;h<n;)i.push({value:h,major:Tx(h),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(r++,f=2,o=r>=0?1:o),h=Math.round((l+u+f*Math.pow(10,r))*o)/o;const d=Ps(t.max,h);return i.push({value:d,major:Tx(d),significand:f}),i}class Q1 extends Bl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Am.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return di(i)&&i>0?i:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=di(e)?Math.max(0,e):null,this.max=di(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!di(this._userMin)&&(this.min=e===Ga(this.min,0)?Ga(this.min,-1):Ga(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,s=this.max;const r=a=>i=e?i:a,o=a=>s=n?s:a;i===s&&(i<=0?(r(1),o(10)):(r(Ga(i,-1)),o(Ga(s,1)))),i<=0&&r(Ga(s,-1)),s<=0&&o(Ga(i,1)),this.min=i,this.max=s}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},i=TV(n,this);return e.bounds==="ticks"&&_k(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Dh(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=_a(e),this._valueRange=_a(this.max)-_a(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(_a(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Me(Q1,"id","logarithmic"),Me(Q1,"defaults",{ticks:{callback:bg.formatters.logarithmic,major:{enabled:!0}}});function e_(t){const e=t.ticks;if(e.display&&t.display){const n=Qi(e.backdropPadding);return Yt(e.font&&e.font.size,gi.font.size)+n.height}return 0}function kV(t,e,n){return n=Yn(n)?n:[n],{w:B7(t,e.string,n),h:n.length*e.lineHeight}}function Ax(t,e,n,i,s){return t===i||t===s?{start:e-n/2,end:e+n/2}:t<i||t>s?{start:e-n,end:e}:{start:e,end:e+n}}function AV(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],s=[],r=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?si/r:0;for(let l=0;l<r;l++){const c=o.setContext(t.getPointLabelContext(l));s[l]=c.padding;const u=t.getPointPosition(l,t.drawingArea+s[l],a),f=ki(c.font),h=kV(t.ctx,f,t._pointLabels[l]);i[l]=h;const d=Rs(t.getIndexAngle(l)+a),p=Math.round(ov(d)),m=Ax(p,u.x,h.w,0,180),_=Ax(p,u.y,h.h,90,270);LV(n,e,d,m,_)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=CV(t,i,s)}function LV(t,e,n,i,s){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/r,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/r,t.r=Math.max(t.r,e.r+a)),s.start<e.t?(l=(e.t-s.start)/o,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function CV(t,e,n){const i=[],s=t._pointLabels.length,r=t.options,o=e_(r)/2,a=t.drawingArea,l=r.pointLabels.centerPointLabels?si/s:0;for(let c=0;c<s;c++){const u=t.getPointPosition(c,a+o+n[c],l),f=Math.round(ov(Rs(u.angle+pi))),h=e[c],d=IV(u.y,h.h,f),p=PV(f),m=RV(u.x,h.w,p);i.push({x:u.x,y:d,textAlign:p,left:m,top:d,right:m+h.w,bottom:d+h.h})}return i}function PV(t){return t===0||t===180?"center":t<180?"left":"right"}function RV(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function IV(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function DV(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let s=e-1;s>=0;s--){const r=i.setContext(t.getPointLabelContext(s)),o=ki(r.font),{x:a,y:l,textAlign:c,left:u,top:f,right:h,bottom:d}=t._pointLabelItems[s],{backdropColor:p}=r;if(!Sn(p)){const m=fl(r.borderRadius),_=Qi(r.backdropPadding);n.fillStyle=p;const b=u-_.left,g=f-_.top,x=h-u+_.width,y=d-f+_.height;Object.values(m).some(v=>v!==0)?(n.beginPath(),Kf(n,{x:b,y:g,w:x,h:y,radius:m}),n.fill()):n.fillRect(b,g,x,y)}xl(n,t._pointLabels[s],a,l+o.lineHeight/2,o,{color:r.color,textAlign:c,textBaseline:"middle"})}}function dA(t,e,n,i){const{ctx:s}=t;if(n)s.arc(t.xCenter,t.yCenter,e,0,qn);else{let r=t.getPointPosition(0,e);s.moveTo(r.x,r.y);for(let o=1;o<i;o++)r=t.getPointPosition(o,e),s.lineTo(r.x,r.y)}}function OV(t,e,n,i,s){const r=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=l,r.setLineDash(s.dash),r.lineDashOffset=s.dashOffset,r.beginPath(),dA(t,n,o,i),r.closePath(),r.stroke(),r.restore())}function NV(t,e,n){return Ba(t,{label:n,index:e,type:"pointLabel"})}class Ju extends Am{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Qi(e_(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=di(e)&&!isNaN(e)?e:0,this.max=di(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/e_(this.options))}generateTickLabels(e){Am.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const s=Zt(this.options.pointLabels.callback,[n,i],this);return s||s===0?s:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?AV(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,s){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,s))}getIndexAngle(e){const n=qn/(this._pointLabels.length||1),i=this.options.startAngle||0;return Rs(e*n+Sr(i))}getDistanceFromCenterForValue(e){if(Sn(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Sn(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return NV(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const s=this.getIndexAngle(e)-pi+i;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:s,bottom:r}=this._pointLabelItems[e];return{left:n,top:i,right:s,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),dA(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:s,border:r}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&DV(this,o),s.display&&this.ticks.forEach((u,f)=>{if(f!==0){l=this.getDistanceFromCenterForValue(u.value);const h=this.getContext(f),d=s.setContext(h),p=r.setContext(h);OV(this,d,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){const u=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:h}=u;!h||!f||(e.lineWidth=h,e.strokeStyle=f,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let r,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=i.setContext(this.getContext(l)),u=ki(c.font);if(r=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const f=Qi(c.backdropPadding);e.fillRect(-o/2-f.left,-r-u.size/2-f.top,o+f.width,u.size+f.height)}xl(e,a.label,0,-r,u,{color:c.color})}),e.restore()}drawTitle(){}}Me(Ju,"id","radialLinear"),Me(Ju,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:bg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Me(Ju,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Me(Ju,"descriptors",{angleLines:{_fallback:"grid"}});const xg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vs=Object.keys(xg);function BV(t,e){return t-e}function Lx(t,e){if(Sn(e))return null;const n=t._adapter,{parser:i,round:s,isoWeekday:r}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),di(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(s&&(o=s==="week"&&($c(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,s)),+o)}function Cx(t,e,n,i){const s=vs.length;for(let r=vs.indexOf(t);r<s-1;++r){const o=xg[vs[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return vs[r]}return vs[s-1]}function FV(t,e,n,i,s){for(let r=vs.length-1;r>=vs.indexOf(n);r--){const o=vs[r];if(xg[o].common&&t._adapter.diff(s,i,o)>=e-1)return o}return vs[n?vs.indexOf(n):0]}function zV(t){for(let e=vs.indexOf(t)+1,n=vs.length;e<n;++e)if(xg[vs[e]].common)return vs[e]}function Px(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:s}=av(n,e),r=n[i]>=e?n[i]:n[s];t[r]=!0}}function UV(t,e,n,i){const s=t._adapter,r=+s.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=r;a<=o;a=+s.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Rx(t,e,n){const i=[],s={},r=e.length;let o,a;for(o=0;o<r;++o)a=e[o],s[a]=o,i.push({value:a,major:!1});return r===0||!n?i:UV(t,i,s,n)}class eh extends Bl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),s=this._adapter=new QU._date(e.adapters.date);s.init(n),hf(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Lx(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:s,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(r=Math.max(r,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=di(s)&&!isNaN(s)?s:+n.startOf(Date.now(),i),r=di(r)&&!isNaN(r)?r:+n.endOf(Date.now(),i)+1,this.min=Math.min(s,r-1),this.max=Math.max(s+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const r=this.min,o=this.max,a=n7(s,r,o);return this._unit=n.unit||(i.autoSkip?Cx(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):FV(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:zV(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Rx(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,s,r;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?i=r:i=(r-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Di(n,0,o),i=Di(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,s=this.options,r=s.time,o=r.unit||Cx(r.minUnit,n,i,this._getLabelCapacity(n)),a=Yt(s.ticks.stepSize,1),l=o==="week"?r.isoWeekday:!1,c=$c(l)||l===!0,u={};let f=n,h,d;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const p=s.ticks.source==="data"&&this.getDataTimestamps();for(h=f,d=0;h<i;h=+e.add(h,a,o),d++)Px(u,h,p);return(h===i||s.bounds==="ticks"||d===1)&&Px(u,h,p),Object.keys(u).sort((m,_)=>m-_).map(m=>+m)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}_tickFormatFunction(e,n,i,s){const r=this.options,o=r.ticks.callback;if(o)return Zt(o,[e,n,i],this);const a=r.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],h=i[n],d=c&&f&&h&&h.major;return this._adapter.format(e,s||(d?f:u))}generateTickLabels(e){let n,i,s;for(n=0,i=e.length;n<i;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,s=Sr(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*r+a*o,h:i*o+a*r}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,s=i[n.unit]||i.millisecond,r=this._tickFormatFunction(e,0,Rx(this,[e],this._majorUnit),s),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,i=s.length;n<i;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const s=this.getLabels();for(n=0,i=s.length;n<i;++n)e.push(Lx(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return yk(e.sort(BV))}}Me(eh,"id","time"),Me(eh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function md(t,e,n){let i=0,s=t.length-1,r,o,a,l;n?(e>=t[i].pos&&e<=t[s].pos&&({lo:i,hi:s}=Lo(t,"pos",e)),{pos:r,time:a}=t[i],{pos:o,time:l}=t[s]):(e>=t[i].time&&e<=t[s].time&&({lo:i,hi:s}=Lo(t,"time",e)),{time:r,pos:a}=t[i],{time:o,pos:l}=t[s]);const c=o-r;return c?a+(l-a)*(e-r)/c:a}class t_ extends eh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=md(n,this.min),this._tableRange=md(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,s=[],r=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&r.push({time:c,pos:o/(a-1)});return r}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(md(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return md(this._table,i*this._tableRange+this._minPos,!0)}}Me(t_,"id","timeseries"),Me(t_,"defaults",eh.defaults);var HV=t_,VV=Object.freeze({__proto__:null,CategoryScale:K1,LinearScale:$1,LogarithmicScale:Q1,RadialLinearScale:Ju,TimeScale:eh,TimeSeriesScale:HV});const GV=[$U,k9,yV,VV];Ja.register(...GV);var pA={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,i,s){var r=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function f(Y,Q,he){return setTimeout(x(Y,he),Q)}function h(Y,Q,he){return Array.isArray(Y)?(d(Y,he[Q],he),!0):!1}function d(Y,Q,he){var Ie;if(!!Y)if(Y.forEach)Y.forEach(Q,he);else if(Y.length!==s)for(Ie=0;Ie<Y.length;)Q.call(he,Y[Ie],Ie,Y),Ie++;else for(Ie in Y)Y.hasOwnProperty(Ie)&&Q.call(he,Y[Ie],Ie,Y)}function p(Y,Q,he){var Ie="DEPRECATED METHOD: "+Q+`
`+he+` AT 
`;return function(){var Qe=new Error("get-stack-trace"),bt=Qe&&Qe.stack?Qe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",hn=e.console&&(e.console.warn||e.console.log);return hn&&hn.call(e.console,Ie,bt),Y.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(Q){if(Q===s||Q===null)throw new TypeError("Cannot convert undefined or null to object");for(var he=Object(Q),Ie=1;Ie<arguments.length;Ie++){var Qe=arguments[Ie];if(Qe!==s&&Qe!==null)for(var bt in Qe)Qe.hasOwnProperty(bt)&&(he[bt]=Qe[bt])}return he}:m=Object.assign;var _=p(function(Q,he,Ie){for(var Qe=Object.keys(he),bt=0;bt<Qe.length;)(!Ie||Ie&&Q[Qe[bt]]===s)&&(Q[Qe[bt]]=he[Qe[bt]]),bt++;return Q},"extend","Use `assign`."),b=p(function(Q,he){return _(Q,he,!0)},"merge","Use `assign`.");function g(Y,Q,he){var Ie=Q.prototype,Qe;Qe=Y.prototype=Object.create(Ie),Qe.constructor=Y,Qe._super=Ie,he&&m(Qe,he)}function x(Y,Q){return function(){return Y.apply(Q,arguments)}}function y(Y,Q){return typeof Y==a?Y.apply(Q&&Q[0]||s,Q):Y}function v(Y,Q){return Y===s?Q:Y}function w(Y,Q,he){d(A(Q),function(Ie){Y.addEventListener(Ie,he,!1)})}function S(Y,Q,he){d(A(Q),function(Ie){Y.removeEventListener(Ie,he,!1)})}function T(Y,Q){for(;Y;){if(Y==Q)return!0;Y=Y.parentNode}return!1}function k(Y,Q){return Y.indexOf(Q)>-1}function A(Y){return Y.trim().split(/\s+/g)}function L(Y,Q,he){if(Y.indexOf&&!he)return Y.indexOf(Q);for(var Ie=0;Ie<Y.length;){if(he&&Y[Ie][he]==Q||!he&&Y[Ie]===Q)return Ie;Ie++}return-1}function D(Y){return Array.prototype.slice.call(Y,0)}function B(Y,Q,he){for(var Ie=[],Qe=[],bt=0;bt<Y.length;){var hn=Q?Y[bt][Q]:Y[bt];L(Qe,hn)<0&&Ie.push(Y[bt]),Qe[bt]=hn,bt++}return he&&(Q?Ie=Ie.sort(function(Bi,os){return Bi[Q]>os[Q]}):Ie=Ie.sort()),Ie}function U(Y,Q){for(var he,Ie,Qe=Q[0].toUpperCase()+Q.slice(1),bt=0;bt<r.length;){if(he=r[bt],Ie=he?he+Qe:Q,Ie in Y)return Ie;bt++}return s}var N=1;function $(){return N++}function W(Y){var Q=Y.ownerDocument||Y;return Q.defaultView||Q.parentWindow||e}var j=/mobile|tablet|ip(ad|hone|od)|android/i,J="ontouchstart"in e,se=U(e,"PointerEvent")!==s,ne=J&&j.test(navigator.userAgent),K="touch",q="pen",te="mouse",re="kinect",Oe=25,Ee=1,ye=2,xe=4,Ae=8,De=1,de=2,me=4,We=8,Ue=16,be=de|me,F=We|Ue,V=be|F,_e=["x","y"],oe=["clientX","clientY"];function X(Y,Q){var he=this;this.manager=Y,this.callback=Q,this.element=Y.element,this.target=Y.options.inputTarget,this.domHandler=function(Ie){y(Y.options.enable,[Y])&&he.handler(Ie)},this.init()}X.prototype={handler:function(){},init:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(W(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(W(this.element),this.evWin,this.domHandler)}};function fe(Y){var Q,he=Y.options.inputClass;return he?Q=he:se?Q=Gt:ne?Q=Je:J?Q=kt:Q=Nn,new Q(Y,Le)}function Le(Y,Q,he){var Ie=he.pointers.length,Qe=he.changedPointers.length,bt=Q&Ee&&Ie-Qe===0,hn=Q&(xe|Ae)&&Ie-Qe===0;he.isFirst=!!bt,he.isFinal=!!hn,bt&&(Y.session={}),he.eventType=Q,Pe(Y,he),Y.emit("hammer.input",he),Y.recognize(he),Y.session.prevInput=he}function Pe(Y,Q){var he=Y.session,Ie=Q.pointers,Qe=Ie.length;he.firstInput||(he.firstInput=Z(Q)),Qe>1&&!he.firstMultiple?he.firstMultiple=Z(Q):Qe===1&&(he.firstMultiple=!1);var bt=he.firstInput,hn=he.firstMultiple,Ci=hn?hn.center:bt.center,Bi=Q.center=ve(Ie);Q.timeStamp=u(),Q.deltaTime=Q.timeStamp-bt.timeStamp,Q.angle=_t(Ci,Bi),Q.distance=Ze(Ci,Bi),Ye(he,Q),Q.offsetDirection=He(Q.deltaX,Q.deltaY);var os=Re(Q.deltaTime,Q.deltaX,Q.deltaY);Q.overallVelocityX=os.x,Q.overallVelocityY=os.y,Q.overallVelocity=c(os.x)>c(os.y)?os.x:os.y,Q.scale=hn?lt(hn.pointers,Ie):1,Q.rotation=hn?ln(hn.pointers,Ie):0,Q.maxPointers=he.prevInput?Q.pointers.length>he.prevInput.maxPointers?Q.pointers.length:he.prevInput.maxPointers:Q.pointers.length,Ke(he,Q);var Nr=Y.element;T(Q.srcEvent.target,Nr)&&(Nr=Q.srcEvent.target),Q.target=Nr}function Ye(Y,Q){var he=Q.center,Ie=Y.offsetDelta||{},Qe=Y.prevDelta||{},bt=Y.prevInput||{};(Q.eventType===Ee||bt.eventType===xe)&&(Qe=Y.prevDelta={x:bt.deltaX||0,y:bt.deltaY||0},Ie=Y.offsetDelta={x:he.x,y:he.y}),Q.deltaX=Qe.x+(he.x-Ie.x),Q.deltaY=Qe.y+(he.y-Ie.y)}function Ke(Y,Q){var he=Y.lastInterval||Q,Ie=Q.timeStamp-he.timeStamp,Qe,bt,hn,Ci;if(Q.eventType!=Ae&&(Ie>Oe||he.velocity===s)){var Bi=Q.deltaX-he.deltaX,os=Q.deltaY-he.deltaY,Nr=Re(Ie,Bi,os);bt=Nr.x,hn=Nr.y,Qe=c(Nr.x)>c(Nr.y)?Nr.x:Nr.y,Ci=He(Bi,os),Y.lastInterval=Q}else Qe=he.velocity,bt=he.velocityX,hn=he.velocityY,Ci=he.direction;Q.velocity=Qe,Q.velocityX=bt,Q.velocityY=hn,Q.direction=Ci}function Z(Y){for(var Q=[],he=0;he<Y.pointers.length;)Q[he]={clientX:l(Y.pointers[he].clientX),clientY:l(Y.pointers[he].clientY)},he++;return{timeStamp:u(),pointers:Q,center:ve(Q),deltaX:Y.deltaX,deltaY:Y.deltaY}}function ve(Y){var Q=Y.length;if(Q===1)return{x:l(Y[0].clientX),y:l(Y[0].clientY)};for(var he=0,Ie=0,Qe=0;Qe<Q;)he+=Y[Qe].clientX,Ie+=Y[Qe].clientY,Qe++;return{x:l(he/Q),y:l(Ie/Q)}}function Re(Y,Q,he){return{x:Q/Y||0,y:he/Y||0}}function He(Y,Q){return Y===Q?De:c(Y)>=c(Q)?Y<0?de:me:Q<0?We:Ue}function Ze(Y,Q,he){he||(he=_e);var Ie=Q[he[0]]-Y[he[0]],Qe=Q[he[1]]-Y[he[1]];return Math.sqrt(Ie*Ie+Qe*Qe)}function _t(Y,Q,he){he||(he=_e);var Ie=Q[he[0]]-Y[he[0]],Qe=Q[he[1]]-Y[he[1]];return Math.atan2(Qe,Ie)*180/Math.PI}function ln(Y,Q){return _t(Q[1],Q[0],oe)+_t(Y[1],Y[0],oe)}function lt(Y,Q){return Ze(Q[0],Q[1],oe)/Ze(Y[0],Y[1],oe)}var gt={mousedown:Ee,mousemove:ye,mouseup:xe},bn="mousedown",Ot="mousemove mouseup";function Nn(){this.evEl=bn,this.evWin=Ot,this.pressed=!1,X.apply(this,arguments)}g(Nn,X,{handler:function(Q){var he=gt[Q.type];he&Ee&&Q.button===0&&(this.pressed=!0),he&ye&&Q.which!==1&&(he=xe),this.pressed&&(he&xe&&(this.pressed=!1),this.callback(this.manager,he,{pointers:[Q],changedPointers:[Q],pointerType:te,srcEvent:Q}))}});var Pn={pointerdown:Ee,pointermove:ye,pointerup:xe,pointercancel:Ae,pointerout:Ae},cn={2:K,3:q,4:te,5:re},mn="pointerdown",jt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(mn="MSPointerDown",jt="MSPointerMove MSPointerUp MSPointerCancel");function Gt(){this.evEl=mn,this.evWin=jt,X.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}g(Gt,X,{handler:function(Q){var he=this.store,Ie=!1,Qe=Q.type.toLowerCase().replace("ms",""),bt=Pn[Qe],hn=cn[Q.pointerType]||Q.pointerType,Ci=hn==K,Bi=L(he,Q.pointerId,"pointerId");bt&Ee&&(Q.button===0||Ci)?Bi<0&&(he.push(Q),Bi=he.length-1):bt&(xe|Ae)&&(Ie=!0),!(Bi<0)&&(he[Bi]=Q,this.callback(this.manager,bt,{pointers:he,changedPointers:[Q],pointerType:hn,srcEvent:Q}),Ie&&he.splice(Bi,1))}});var Bn={touchstart:Ee,touchmove:ye,touchend:xe,touchcancel:Ae},rn="touchstart",vn="touchstart touchmove touchend touchcancel";function z(){this.evTarget=rn,this.evWin=vn,this.started=!1,X.apply(this,arguments)}g(z,X,{handler:function(Q){var he=Bn[Q.type];if(he===Ee&&(this.started=!0),!!this.started){var Ie=Se.call(this,Q,he);he&(xe|Ae)&&Ie[0].length-Ie[1].length===0&&(this.started=!1),this.callback(this.manager,he,{pointers:Ie[0],changedPointers:Ie[1],pointerType:K,srcEvent:Q})}}});function Se(Y,Q){var he=D(Y.touches),Ie=D(Y.changedTouches);return Q&(xe|Ae)&&(he=B(he.concat(Ie),"identifier",!0)),[he,Ie]}var Te={touchstart:Ee,touchmove:ye,touchend:xe,touchcancel:Ae},Be="touchstart touchmove touchend touchcancel";function Je(){this.evTarget=Be,this.targetIds={},X.apply(this,arguments)}g(Je,X,{handler:function(Q){var he=Te[Q.type],Ie=ct.call(this,Q,he);!Ie||this.callback(this.manager,he,{pointers:Ie[0],changedPointers:Ie[1],pointerType:K,srcEvent:Q})}});function ct(Y,Q){var he=D(Y.touches),Ie=this.targetIds;if(Q&(Ee|ye)&&he.length===1)return Ie[he[0].identifier]=!0,[he,he];var Qe,bt,hn=D(Y.changedTouches),Ci=[],Bi=this.target;if(bt=he.filter(function(os){return T(os.target,Bi)}),Q===Ee)for(Qe=0;Qe<bt.length;)Ie[bt[Qe].identifier]=!0,Qe++;for(Qe=0;Qe<hn.length;)Ie[hn[Qe].identifier]&&Ci.push(hn[Qe]),Q&(xe|Ae)&&delete Ie[hn[Qe].identifier],Qe++;if(!!Ci.length)return[B(bt.concat(Ci),"identifier",!0),Ci]}var ut=2500,Dt=25;function kt(){X.apply(this,arguments);var Y=x(this.handler,this);this.touch=new Je(this.manager,Y),this.mouse=new Nn(this.manager,Y),this.primaryTouch=null,this.lastTouches=[]}g(kt,X,{handler:function(Q,he,Ie){var Qe=Ie.pointerType==K,bt=Ie.pointerType==te;if(!(bt&&Ie.sourceCapabilities&&Ie.sourceCapabilities.firesTouchEvents)){if(Qe)tn.call(this,he,Ie);else if(bt&&zt.call(this,Ie))return;this.callback(Q,he,Ie)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function tn(Y,Q){Y&Ee?(this.primaryTouch=Q.changedPointers[0].identifier,Jt.call(this,Q)):Y&(xe|Ae)&&Jt.call(this,Q)}function Jt(Y){var Q=Y.changedPointers[0];if(Q.identifier===this.primaryTouch){var he={x:Q.clientX,y:Q.clientY};this.lastTouches.push(he);var Ie=this.lastTouches,Qe=function(){var bt=Ie.indexOf(he);bt>-1&&Ie.splice(bt,1)};setTimeout(Qe,ut)}}function zt(Y){for(var Q=Y.srcEvent.clientX,he=Y.srcEvent.clientY,Ie=0;Ie<this.lastTouches.length;Ie++){var Qe=this.lastTouches[Ie],bt=Math.abs(Q-Qe.x),hn=Math.abs(he-Qe.y);if(bt<=Dt&&hn<=Dt)return!0}return!1}var Xt=U(o.style,"touchAction"),tt=Xt!==s,St="compute",An="auto",In="manipulation",ss="none",ei="pan-x",Ce="pan-y",st=Ln();function it(Y,Q){this.manager=Y,this.set(Q)}it.prototype={set:function(Y){Y==St&&(Y=this.compute()),tt&&this.manager.element.style&&st[Y]&&(this.manager.element.style[Xt]=Y),this.actions=Y.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Y=[];return d(this.manager.recognizers,function(Q){y(Q.options.enable,[Q])&&(Y=Y.concat(Q.getTouchAction()))}),Rt(Y.join(" "))},preventDefaults:function(Y){var Q=Y.srcEvent,he=Y.offsetDirection;if(this.manager.session.prevented){Q.preventDefault();return}var Ie=this.actions,Qe=k(Ie,ss)&&!st[ss],bt=k(Ie,Ce)&&!st[Ce],hn=k(Ie,ei)&&!st[ei];if(Qe){var Ci=Y.pointers.length===1,Bi=Y.distance<2,os=Y.deltaTime<250;if(Ci&&Bi&&os)return}if(!(hn&&bt)&&(Qe||bt&&he&be||hn&&he&F))return this.preventSrc(Q)},preventSrc:function(Y){this.manager.session.prevented=!0,Y.preventDefault()}};function Rt(Y){if(k(Y,ss))return ss;var Q=k(Y,ei),he=k(Y,Ce);return Q&&he?ss:Q||he?Q?ei:Ce:k(Y,In)?In:An}function Ln(){if(!tt)return!1;var Y={},Q=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(he){Y[he]=Q?e.CSS.supports("touch-action",he):!0}),Y}var rs=1,ui=2,ds=4,ks=8,Li=ks,ur=16,Ni=32;function ps(Y){this.options=m({},this.defaults,Y||{}),this.id=$(),this.manager=null,this.options.enable=v(this.options.enable,!0),this.state=rs,this.simultaneous={},this.requireFail=[]}ps.prototype={defaults:{},set:function(Y){return m(this.options,Y),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Y){if(h(Y,"recognizeWith",this))return this;var Q=this.simultaneous;return Y=Vs(Y,this),Q[Y.id]||(Q[Y.id]=Y,Y.recognizeWith(this)),this},dropRecognizeWith:function(Y){return h(Y,"dropRecognizeWith",this)?this:(Y=Vs(Y,this),delete this.simultaneous[Y.id],this)},requireFailure:function(Y){if(h(Y,"requireFailure",this))return this;var Q=this.requireFail;return Y=Vs(Y,this),L(Q,Y)===-1&&(Q.push(Y),Y.requireFailure(this)),this},dropRequireFailure:function(Y){if(h(Y,"dropRequireFailure",this))return this;Y=Vs(Y,this);var Q=L(this.requireFail,Y);return Q>-1&&this.requireFail.splice(Q,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Y){return!!this.simultaneous[Y.id]},emit:function(Y){var Q=this,he=this.state;function Ie(Qe){Q.manager.emit(Qe,Y)}he<ks&&Ie(Q.options.event+ri(he)),Ie(Q.options.event),Y.additionalEvent&&Ie(Y.additionalEvent),he>=ks&&Ie(Q.options.event+ri(he))},tryEmit:function(Y){if(this.canEmit())return this.emit(Y);this.state=Ni},canEmit:function(){for(var Y=0;Y<this.requireFail.length;){if(!(this.requireFail[Y].state&(Ni|rs)))return!1;Y++}return!0},recognize:function(Y){var Q=m({},Y);if(!y(this.options.enable,[this,Q])){this.reset(),this.state=Ni;return}this.state&(Li|ur|Ni)&&(this.state=rs),this.state=this.process(Q),this.state&(ui|ds|ks|ur)&&this.tryEmit(Q)},process:function(Y){},getTouchAction:function(){},reset:function(){}};function ri(Y){return Y&ur?"cancel":Y&ks?"end":Y&ds?"move":Y&ui?"start":""}function bi(Y){return Y==Ue?"down":Y==We?"up":Y==de?"left":Y==me?"right":""}function Vs(Y,Q){var he=Q.manager;return he?he.get(Y):Y}function vi(){ps.apply(this,arguments)}g(vi,ps,{defaults:{pointers:1},attrTest:function(Y){var Q=this.options.pointers;return Q===0||Y.pointers.length===Q},process:function(Y){var Q=this.state,he=Y.eventType,Ie=Q&(ui|ds),Qe=this.attrTest(Y);return Ie&&(he&Ae||!Qe)?Q|ur:Ie||Qe?he&xe?Q|ks:Q&ui?Q|ds:ui:Ni}});function uo(){vi.apply(this,arguments),this.pX=null,this.pY=null}g(uo,vi,{defaults:{event:"pan",threshold:10,pointers:1,direction:V},getTouchAction:function(){var Y=this.options.direction,Q=[];return Y&be&&Q.push(Ce),Y&F&&Q.push(ei),Q},directionTest:function(Y){var Q=this.options,he=!0,Ie=Y.distance,Qe=Y.direction,bt=Y.deltaX,hn=Y.deltaY;return Qe&Q.direction||(Q.direction&be?(Qe=bt===0?De:bt<0?de:me,he=bt!=this.pX,Ie=Math.abs(Y.deltaX)):(Qe=hn===0?De:hn<0?We:Ue,he=hn!=this.pY,Ie=Math.abs(Y.deltaY))),Y.direction=Qe,he&&Ie>Q.threshold&&Qe&Q.direction},attrTest:function(Y){return vi.prototype.attrTest.call(this,Y)&&(this.state&ui||!(this.state&ui)&&this.directionTest(Y))},emit:function(Y){this.pX=Y.deltaX,this.pY=Y.deltaY;var Q=bi(Y.direction);Q&&(Y.additionalEvent=this.options.event+Q),this._super.emit.call(this,Y)}});function wu(){vi.apply(this,arguments)}g(wu,vi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ss]},attrTest:function(Y){return this._super.attrTest.call(this,Y)&&(Math.abs(Y.scale-1)>this.options.threshold||this.state&ui)},emit:function(Y){if(Y.scale!==1){var Q=Y.scale<1?"in":"out";Y.additionalEvent=this.options.event+Q}this._super.emit.call(this,Y)}});function xu(){ps.apply(this,arguments),this._timer=null,this._input=null}g(xu,ps,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[An]},process:function(Y){var Q=this.options,he=Y.pointers.length===Q.pointers,Ie=Y.distance<Q.threshold,Qe=Y.deltaTime>Q.time;if(this._input=Y,!Ie||!he||Y.eventType&(xe|Ae)&&!Qe)this.reset();else if(Y.eventType&Ee)this.reset(),this._timer=f(function(){this.state=Li,this.tryEmit()},Q.time,this);else if(Y.eventType&xe)return Li;return Ni},reset:function(){clearTimeout(this._timer)},emit:function(Y){this.state===Li&&(Y&&Y.eventType&xe?this.manager.emit(this.options.event+"up",Y):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Mu(){vi.apply(this,arguments)}g(Mu,vi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ss]},attrTest:function(Y){return this._super.attrTest.call(this,Y)&&(Math.abs(Y.rotation)>this.options.threshold||this.state&ui)}});function ze(){vi.apply(this,arguments)}g(ze,vi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:be|F,pointers:1},getTouchAction:function(){return uo.prototype.getTouchAction.call(this)},attrTest:function(Y){var Q=this.options.direction,he;return Q&(be|F)?he=Y.overallVelocity:Q&be?he=Y.overallVelocityX:Q&F&&(he=Y.overallVelocityY),this._super.attrTest.call(this,Y)&&Q&Y.offsetDirection&&Y.distance>this.options.threshold&&Y.maxPointers==this.options.pointers&&c(he)>this.options.velocity&&Y.eventType&xe},emit:function(Y){var Q=bi(Y.offsetDirection);Q&&this.manager.emit(this.options.event+Q,Y),this.manager.emit(this.options.event,Y)}});function Cn(){ps.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}g(Cn,ps,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[In]},process:function(Y){var Q=this.options,he=Y.pointers.length===Q.pointers,Ie=Y.distance<Q.threshold,Qe=Y.deltaTime<Q.time;if(this.reset(),Y.eventType&Ee&&this.count===0)return this.failTimeout();if(Ie&&Qe&&he){if(Y.eventType!=xe)return this.failTimeout();var bt=this.pTime?Y.timeStamp-this.pTime<Q.interval:!0,hn=!this.pCenter||Ze(this.pCenter,Y.center)<Q.posThreshold;this.pTime=Y.timeStamp,this.pCenter=Y.center,!hn||!bt?this.count=1:this.count+=1,this._input=Y;var Ci=this.count%Q.taps;if(Ci===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Li,this.tryEmit()},Q.interval,this),ui):Li}return Ni},failTimeout:function(){return this._timer=f(function(){this.state=Ni},this.options.interval,this),Ni},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Li&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Dn(Y,Q){return Q=Q||{},Q.recognizers=v(Q.recognizers,Dn.defaults.preset),new Ng(Y,Q)}Dn.VERSION="2.0.7",Dn.defaults={domEvents:!1,touchAction:St,enable:!0,inputTarget:null,inputClass:null,preset:[[Mu,{enable:!1}],[wu,{enable:!1},["rotate"]],[ze,{direction:be}],[uo,{direction:be},["swipe"]],[Cn],[Cn,{event:"doubletap",taps:2},["tap"]],[xu]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var WL=1,Nv=2;function Ng(Y,Q){this.options=m({},Dn.defaults,Q||{}),this.options.inputTarget=this.options.inputTarget||Y,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Y,this.input=fe(this),this.touchAction=new it(this,this.options.touchAction),Bv(this,!0),d(this.options.recognizers,function(he){var Ie=this.add(new he[0](he[1]));he[2]&&Ie.recognizeWith(he[2]),he[3]&&Ie.requireFailure(he[3])},this)}Ng.prototype={set:function(Y){return m(this.options,Y),Y.touchAction&&this.touchAction.update(),Y.inputTarget&&(this.input.destroy(),this.input.target=Y.inputTarget,this.input.init()),this},stop:function(Y){this.session.stopped=Y?Nv:WL},recognize:function(Y){var Q=this.session;if(!Q.stopped){this.touchAction.preventDefaults(Y);var he,Ie=this.recognizers,Qe=Q.curRecognizer;(!Qe||Qe&&Qe.state&Li)&&(Qe=Q.curRecognizer=null);for(var bt=0;bt<Ie.length;)he=Ie[bt],Q.stopped!==Nv&&(!Qe||he==Qe||he.canRecognizeWith(Qe))?he.recognize(Y):he.reset(),!Qe&&he.state&(ui|ds|ks)&&(Qe=Q.curRecognizer=he),bt++}},get:function(Y){if(Y instanceof ps)return Y;for(var Q=this.recognizers,he=0;he<Q.length;he++)if(Q[he].options.event==Y)return Q[he];return null},add:function(Y){if(h(Y,"add",this))return this;var Q=this.get(Y.options.event);return Q&&this.remove(Q),this.recognizers.push(Y),Y.manager=this,this.touchAction.update(),Y},remove:function(Y){if(h(Y,"remove",this))return this;if(Y=this.get(Y),Y){var Q=this.recognizers,he=L(Q,Y);he!==-1&&(Q.splice(he,1),this.touchAction.update())}return this},on:function(Y,Q){if(Y!==s&&Q!==s){var he=this.handlers;return d(A(Y),function(Ie){he[Ie]=he[Ie]||[],he[Ie].push(Q)}),this}},off:function(Y,Q){if(Y!==s){var he=this.handlers;return d(A(Y),function(Ie){Q?he[Ie]&&he[Ie].splice(L(he[Ie],Q),1):delete he[Ie]}),this}},emit:function(Y,Q){this.options.domEvents&&jL(Y,Q);var he=this.handlers[Y]&&this.handlers[Y].slice();if(!(!he||!he.length)){Q.type=Y,Q.preventDefault=function(){Q.srcEvent.preventDefault()};for(var Ie=0;Ie<he.length;)he[Ie](Q),Ie++}},destroy:function(){this.element&&Bv(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Bv(Y,Q){var he=Y.element;if(!!he.style){var Ie;d(Y.options.cssProps,function(Qe,bt){Ie=U(he.style,bt),Q?(Y.oldCssProps[Ie]=he.style[Ie],he.style[Ie]=Qe):he.style[Ie]=Y.oldCssProps[Ie]||""}),Q||(Y.oldCssProps={})}}function jL(Y,Q){var he=n.createEvent("Event");he.initEvent(Y,!0,!0),he.gesture=Q,Q.target.dispatchEvent(he)}m(Dn,{INPUT_START:Ee,INPUT_MOVE:ye,INPUT_END:xe,INPUT_CANCEL:Ae,STATE_POSSIBLE:rs,STATE_BEGAN:ui,STATE_CHANGED:ds,STATE_ENDED:ks,STATE_RECOGNIZED:Li,STATE_CANCELLED:ur,STATE_FAILED:Ni,DIRECTION_NONE:De,DIRECTION_LEFT:de,DIRECTION_RIGHT:me,DIRECTION_UP:We,DIRECTION_DOWN:Ue,DIRECTION_HORIZONTAL:be,DIRECTION_VERTICAL:F,DIRECTION_ALL:V,Manager:Ng,Input:X,TouchAction:it,TouchInput:Je,MouseInput:Nn,PointerEventInput:Gt,TouchMouseInput:kt,SingleTouchInput:z,Recognizer:ps,AttrRecognizer:vi,Tap:Cn,Pan:uo,Swipe:ze,Pinch:wu,Rotate:Mu,Press:xu,on:w,off:S,each:d,merge:b,extend:_,assign:m,inherit:g,bindFn:x,prefixed:U});var YL=typeof e<"u"?e:typeof self<"u"?self:{};YL.Hammer=Dn,typeof s=="function"&&s.amd?s(function(){return Dn}):t.exports?t.exports=Dn:e[i]=Dn})(window,document,"Hammer")})(pA);const mf=pA.exports;/*!
* chartjs-plugin-zoom v2.0.0
* undefined
 * (c) 2016-2022 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const th=t=>t&&t.enabled&&t.modifierKey,mA=(t,e)=>t&&e[t+"Key"],yv=(t,e)=>t&&!e[t+"Key"];function Ra(t,e,n){return t===void 0?!0:typeof t=="string"?t.indexOf(e)!==-1:typeof t=="function"?t({chart:n}).indexOf(e)!==-1:!1}function x0(t,e){return typeof t=="function"&&(t=t({chart:e})),typeof t=="string"?{x:t.indexOf("x")!==-1,y:t.indexOf("y")!==-1}:{x:!1,y:!1}}function WV(t,e){let n;return function(){return clearTimeout(n),n=setTimeout(t,e),e}}function jV({x:t,y:e},n){const i=n.scales,s=Object.keys(i);for(let r=0;r<s.length;r++){const o=i[s[r]];if(e>=o.top&&e<=o.bottom&&t>=o.left&&t<=o.right)return o}return null}function gA(t,e,n){const{mode:i="xy",scaleMode:s,overScaleMode:r}=t||{},o=jV(e,n),a=x0(i,n),l=x0(s,n);if(r){const u=x0(r,n);for(const f of["x","y"])u[f]&&(l[f]=a[f],a[f]=!1)}if(o&&l[o.axis])return[o];const c=[];return pn(n.scales,function(u){a[u.axis]&&c.push(u)}),c}const n_=new WeakMap;function _i(t){let e=n_.get(t);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},n_.set(t,e)),e}function YV(t){n_.delete(t)}function _A(t,e,n){const i=t.max-t.min,s=i*(e-1),r=t.isHorizontal()?n.x:n.y,o=Math.max(0,Math.min(1,(t.getValueForPixel(r)-t.min)/i||0)),a=1-o;return{min:s*o,max:s*a}}function Ix(t,e,n,i,s){let r=n[i];if(r==="original"){const o=t.originalScaleLimits[e.id][i];r=Yt(o.options,o.scale)}return Yt(r,s)}function qV(t,e,n){const i=t.getValueForPixel(e),s=t.getValueForPixel(n);return{min:Math.min(i,s),max:Math.max(i,s)}}function gu(t,{min:e,max:n},i,s=!1){const r=_i(t.chart),{id:o,axis:a,options:l}=t,c=i&&(i[o]||i[a])||{},{minRange:u=0}=c,f=Ix(r,t,c,"min",-1/0),h=Ix(r,t,c,"max",1/0),d=Math.max(e,f),p=Math.min(n,h),m=s?Math.max(p-d,u):t.max-t.min;if(p-d!==m)if(f>p-m)e=d,n=d+m;else if(h<d+m)n=p,e=p-m;else{const _=(m-p+d)/2;e=d-_,n=p+_}else e=d,n=p;return l.min=e,l.max=n,r.updatedScaleLimits[t.id]={min:e,max:n},t.parse(e)!==t.min||t.parse(n)!==t.max}function XV(t,e,n,i){const s=_A(t,e,n),r={min:t.min+s.min,max:t.max-s.max};return gu(t,r,i,!0)}function ZV(t,e,n,i){gu(t,qV(t,e,n),i,!0)}const Dx=t=>t===0||isNaN(t)?0:t<0?Math.min(Math.round(t),-1):Math.max(Math.round(t),1);function JV(t){const n=t.getLabels().length-1;t.min>0&&(t.min-=1),t.max<n&&(t.max+=1)}function KV(t,e,n,i){const s=_A(t,e,n);t.min===t.max&&e<1&&JV(t);const r={min:t.min+Dx(s.min),max:t.max-Dx(s.max)};return gu(t,r,i,!0)}function $V(t){return t.isHorizontal()?t.width:t.height}function QV(t,e,n){const s=t.getLabels().length-1;let{min:r,max:o}=t;const a=Math.max(o-r,1),l=Math.round($V(t)/Math.max(a,10)),c=Math.round(Math.abs(e/l));let u;return e<-l?(o=Math.min(o+c,s),r=a===1?o:o-a,u=o===s):e>l&&(r=Math.max(0,r-c),o=a===1?r:r+a,u=r===0),gu(t,{min:r,max:o},n)||u}const eG={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function bA(t,e,n,i=!1){const{min:s,max:r,options:o}=t,a=o.time&&o.time.round,l=eG[a]||0,c=t.getValueForPixel(t.getPixelForValue(s+l)-e),u=t.getValueForPixel(t.getPixelForValue(r+l)-e),{min:f=-1/0,max:h=1/0}=i&&n&&n[t.axis]||{};return isNaN(c)||isNaN(u)||c<f||u>h?!0:gu(t,{min:c,max:u},n,i)}function Ox(t,e,n){return bA(t,e,n,!0)}const i_={category:KV,default:XV},s_={default:ZV},r_={category:QV,default:bA,logarithmic:Ox,timeseries:Ox};function tG(t,e,n){const{id:i,options:{min:s,max:r}}=t;if(!e[i]||!n[i])return!0;const o=n[i];return o.min!==s||o.max!==r}function Nx(t,e){pn(t,(n,i)=>{e[i]||delete t[i]})}function Nh(t,e){const{scales:n}=t,{originalScaleLimits:i,updatedScaleLimits:s}=e;return pn(n,function(r){tG(r,i,s)&&(i[r.id]={min:{scale:r.min,options:r.options.min},max:{scale:r.max,options:r.options.max}})}),Nx(i,n),Nx(s,n),i}function Bx(t,e,n,i){const s=i_[t.type]||i_.default;Zt(s,[t,e,n,i])}function Fx(t,e,n,i,s){const r=s_[t.type]||s_.default;Zt(r,[t,e,n,i,s])}function nG(t){const e=t.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function wv(t,e,n="none"){const{x:i=1,y:s=1,focalPoint:r=nG(t)}=typeof e=="number"?{x:e,y:e}:e,o=_i(t),{options:{limits:a,zoom:l}}=o;Nh(t,o);const c=i!==1,u=s!==1,f=gA(l,r,t);pn(f||t.scales,function(h){h.isHorizontal()&&c?Bx(h,i,r,a):!h.isHorizontal()&&u&&Bx(h,s,r,a)}),t.update(n),Zt(l.onZoom,[{chart:t}])}function vA(t,e,n,i="none"){const s=_i(t),{options:{limits:r,zoom:o}}=s,{mode:a="xy"}=o;Nh(t,s);const l=Ra(a,"x",t),c=Ra(a,"y",t);pn(t.scales,function(u){u.isHorizontal()&&l?Fx(u,e.x,n.x,r):!u.isHorizontal()&&c&&Fx(u,e.y,n.y,r)}),t.update(i),Zt(o.onZoom,[{chart:t}])}function iG(t,e,n,i="none"){Nh(t,_i(t));const s=t.scales[e];gu(s,n,void 0,!0),t.update(i)}function sG(t,e="default"){const n=_i(t),i=Nh(t,n);pn(t.scales,function(s){const r=s.options;i[s.id]?(r.min=i[s.id].min.options,r.max=i[s.id].max.options):(delete r.min,delete r.max)}),t.update(e),Zt(n.options.zoom.onZoomComplete,[{chart:t}])}function rG(t,e){const n=t.originalScaleLimits[e];if(!n)return;const{min:i,max:s}=n;return Yt(s.options,s.scale)-Yt(i.options,i.scale)}function oG(t){const e=_i(t);let n=1,i=1;return pn(t.scales,function(s){const r=rG(e,s.id);if(r){const o=Math.round(r/(s.max-s.min)*100)/100;n=Math.min(n,o),i=Math.max(i,o)}}),n<1?n:i}function zx(t,e,n,i){const{panDelta:s}=i,r=s[t.id]||0;nr(r)===nr(e)&&(e+=r);const o=r_[t.type]||r_.default;Zt(o,[t,e,n])?s[t.id]=0:s[t.id]=e}function yA(t,e,n,i="none"){const{x:s=0,y:r=0}=typeof e=="number"?{x:e,y:e}:e,o=_i(t),{options:{pan:a,limits:l}}=o,{onPan:c}=a||{};Nh(t,o);const u=s!==0,f=r!==0;pn(n||t.scales,function(h){h.isHorizontal()&&u?zx(h,s,l,o):!h.isHorizontal()&&f&&zx(h,r,l,o)}),t.update(i),Zt(c,[{chart:t}])}function wA(t){const e=_i(t),n={};for(const i of Object.keys(t.scales)){const{min:s,max:r}=e.originalScaleLimits[i]||{min:{},max:{}};n[i]={min:s.scale,max:r.scale}}return n}function aG(t){const e=wA(t);for(const n of Object.keys(t.scales)){const{min:i,max:s}=e[n];if(i!==void 0&&t.scales[n].min!==i||s!==void 0&&t.scales[n].max!==s)return!0}return!1}function bs(t,e){const{handlers:n}=_i(t),i=n[e];i&&i.target&&(i.target.removeEventListener(e,i),delete n[e])}function gf(t,e,n,i){const{handlers:s,options:r}=_i(t),o=s[n];o&&o.target===e||(bs(t,n),s[n]=a=>i(t,a,r),s[n].target=e,e.addEventListener(n,s[n]))}function lG(t,e){const n=_i(t);n.dragStart&&(n.dragging=!0,n.dragEnd=e,t.update("none"))}function cG(t,e){const n=_i(t);!n.dragStart||e.key!=="Escape"||(bs(t,"keydown"),n.dragging=!1,n.dragStart=n.dragEnd=null,t.update("none"))}function xA(t,e,n){const{onZoomStart:i,onZoomRejected:s}=n;if(i){const{left:r,top:o}=e.target.getBoundingClientRect(),a={x:e.clientX-r,y:e.clientY-o};if(Zt(i,[{chart:t,event:e,point:a}])===!1)return Zt(s,[{chart:t,event:e}]),!1}}function uG(t,e){const n=_i(t),{pan:i,zoom:s={}}=n.options;if(e.button!==0||mA(th(i),e)||yv(th(s.drag),e))return Zt(s.onZoomRejected,[{chart:t,event:e}]);xA(t,e,s)!==!1&&(n.dragStart=e,gf(t,t.canvas,"mousemove",lG),gf(t,window.document,"keydown",cG))}function MA(t,e,n,i){const{left:s,top:r}=n.target.getBoundingClientRect(),o=Ra(e,"x",t),a=Ra(e,"y",t);let{top:l,left:c,right:u,bottom:f,width:h,height:d}=t.chartArea;o&&(c=Math.min(n.clientX,i.clientX)-s,u=Math.max(n.clientX,i.clientX)-s),a&&(l=Math.min(n.clientY,i.clientY)-r,f=Math.max(n.clientY,i.clientY)-r);const p=u-c,m=f-l;return{left:c,top:l,right:u,bottom:f,width:p,height:m,zoomX:o&&p?1+(h-p)/h:1,zoomY:a&&m?1+(d-m)/d:1}}function fG(t,e){const n=_i(t);if(!n.dragStart)return;bs(t,"mousemove");const{mode:i,onZoomComplete:s,drag:{threshold:r=0}}=n.options.zoom,o=MA(t,i,n.dragStart,e),a=Ra(i,"x",t)?o.width:0,l=Ra(i,"y",t)?o.height:0,c=Math.sqrt(a*a+l*l);if(n.dragStart=n.dragEnd=null,c<=r){n.dragging=!1,t.update("none");return}vA(t,{x:o.left,y:o.top},{x:o.right,y:o.bottom},"zoom"),setTimeout(()=>n.dragging=!1,500),Zt(s,[{chart:t}])}function hG(t,e,n){if(yv(th(n.wheel),e)){Zt(n.onZoomRejected,[{chart:t,event:e}]);return}if(xA(t,e,n)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function dG(t,e){const{handlers:{onZoomComplete:n},options:{zoom:i}}=_i(t);if(!hG(t,e,i))return;const s=e.target.getBoundingClientRect(),r=1+(e.deltaY>=0?-i.wheel.speed:i.wheel.speed),o={x:r,y:r,focalPoint:{x:e.clientX-s.left,y:e.clientY-s.top}};wv(t,o),n&&n()}function pG(t,e,n,i){n&&(_i(t).handlers[e]=WV(()=>Zt(n,[{chart:t}]),i))}function mG(t,e){const n=t.canvas,{wheel:i,drag:s,onZoomComplete:r}=e.zoom;i.enabled?(gf(t,n,"wheel",dG),pG(t,"onZoomComplete",r,250)):bs(t,"wheel"),s.enabled?(gf(t,n,"mousedown",uG),gf(t,n.ownerDocument,"mouseup",fG)):(bs(t,"mousedown"),bs(t,"mousemove"),bs(t,"mouseup"),bs(t,"keydown"))}function gG(t){bs(t,"mousedown"),bs(t,"mousemove"),bs(t,"mouseup"),bs(t,"wheel"),bs(t,"click"),bs(t,"keydown")}function _G(t,e){return function(n,i){const{pan:s,zoom:r={}}=e.options;if(!s||!s.enabled)return!1;const o=i&&i.srcEvent;return o&&!e.panning&&i.pointerType==="mouse"&&(yv(th(s),o)||mA(th(r.drag),o))?(Zt(s.onPanRejected,[{chart:t,event:i}]),!1):!0}}function bG(t,e){const n=Math.abs(t.clientX-e.clientX),i=Math.abs(t.clientY-e.clientY),s=n/i;let r,o;return s>.3&&s<1.7?r=o=!0:n>i?r=!0:o=!0,{x:r,y:o}}function SA(t,e,n){if(e.scale){const{center:i,pointers:s}=n,r=1/e.scale*n.scale,o=n.target.getBoundingClientRect(),a=bG(s[0],s[1]),l=e.options.zoom.mode,c={x:a.x&&Ra(l,"x",t)?r:1,y:a.y&&Ra(l,"y",t)?r:1,focalPoint:{x:i.x-o.left,y:i.y-o.top}};wv(t,c),e.scale=n.scale}}function vG(t,e){e.options.zoom.pinch.enabled&&(e.scale=1)}function yG(t,e,n){e.scale&&(SA(t,e,n),e.scale=null,Zt(e.options.zoom.onZoomComplete,[{chart:t}]))}function EA(t,e,n){const i=e.delta;i&&(e.panning=!0,yA(t,{x:n.deltaX-i.x,y:n.deltaY-i.y},e.panScales),e.delta={x:n.deltaX,y:n.deltaY})}function wG(t,e,n){const{enabled:i,onPanStart:s,onPanRejected:r}=e.options.pan;if(!i)return;const o=n.target.getBoundingClientRect(),a={x:n.center.x-o.left,y:n.center.y-o.top};if(Zt(s,[{chart:t,event:n,point:a}])===!1)return Zt(r,[{chart:t,event:n}]);e.panScales=gA(e.options.pan,a,t),e.delta={x:0,y:0},clearTimeout(e.panEndTimeout),EA(t,e,n)}function xG(t,e){e.delta=null,e.panning&&(e.panEndTimeout=setTimeout(()=>e.panning=!1,500),Zt(e.options.pan.onPanComplete,[{chart:t}]))}const o_=new WeakMap;function MG(t,e){const n=_i(t),i=t.canvas,{pan:s,zoom:r}=e,o=new mf.Manager(i);r&&r.pinch.enabled&&(o.add(new mf.Pinch),o.on("pinchstart",()=>vG(t,n)),o.on("pinch",a=>SA(t,n,a)),o.on("pinchend",a=>yG(t,n,a))),s&&s.enabled&&(o.add(new mf.Pan({threshold:s.threshold,enable:_G(t,n)})),o.on("panstart",a=>wG(t,n,a)),o.on("panmove",a=>EA(t,n,a)),o.on("panend",()=>xG(t,n))),o_.set(t,o)}function SG(t){const e=o_.get(t);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),o_.delete(t))}var EG="2.0.0";function gd(t,e,n){const i=n.zoom.drag,{dragStart:s,dragEnd:r}=_i(t);if(i.drawTime!==e||!r)return;const{left:o,top:a,width:l,height:c}=MA(t,n.zoom.mode,s,r),u=t.ctx;u.save(),u.beginPath(),u.fillStyle=i.backgroundColor||"rgba(225,225,225,0.3)",u.fillRect(o,a,l,c),i.borderWidth>0&&(u.lineWidth=i.borderWidth,u.strokeStyle=i.borderColor||"rgba(225,225,225)",u.strokeRect(o,a,l,c)),u.restore()}var TG={id:"zoom",version:EG,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(t,e,n){const i=_i(t);i.options=n,Object.prototype.hasOwnProperty.call(n.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(n.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(n.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),mf&&MG(t,n),t.pan=(s,r,o)=>yA(t,s,r,o),t.zoom=(s,r)=>wv(t,s,r),t.zoomRect=(s,r,o)=>vA(t,s,r,o),t.zoomScale=(s,r,o)=>iG(t,s,r,o),t.resetZoom=s=>sG(t,s),t.getZoomLevel=()=>oG(t),t.getInitialScaleBounds=()=>wA(t),t.isZoomedOrPanned=()=>aG(t)},beforeEvent(t){const e=_i(t);if(e.panning||e.dragging)return!1},beforeUpdate:function(t,e,n){const i=_i(t);i.options=n,mG(t,n)},beforeDatasetsDraw(t,e,n){gd(t,"beforeDatasetsDraw",n)},afterDatasetsDraw(t,e,n){gd(t,"afterDatasetsDraw",n)},beforeDraw(t,e,n){gd(t,"beforeDraw",n)},afterDraw(t,e,n){gd(t,"afterDraw",n)},stop:function(t){gG(t),mf&&SG(t),YV(t)},panFunctions:r_,zoomFunctions:i_,zoomRectFunctions:s_};function kG(t){let e,n,i,s,r,o,a,l,c,u,f,h;return{c(){e=C("div"),n=C("div"),i=C("span"),s=ae(t[0]),r=O(),o=C("span"),a=ae(t[1]),l=O(),c=C("div"),u=C("div"),M(i,"class","text-left"),M(o,"class","ml-auto flex"),M(n,"class","flex justify-between"),M(u,"class",f="h-full progress "+(t[3]||"")+" rounded-full shadow-md transition-all duration-200"),Si(u,"width",t[4]+"%"),M(c,"class",h="meter w-full h-3 "+(t[2]||"")+" rounded-full transition-all duration-200"),M(e,"class","grid w-full gap-2")},m(d,p){R(d,e,p),E(e,n),E(n,i),E(i,s),E(n,r),E(n,o),E(o,a),E(e,l),E(e,c),E(c,u)},p(d,[p]){p&1&&ke(s,d[0]),p&2&&ke(a,d[1]),p&8&&f!==(f="h-full progress "+(d[3]||"")+" rounded-full shadow-md transition-all duration-200")&&M(u,"class",f),p&16&&Si(u,"width",d[4]+"%"),p&4&&h!==(h="meter w-full h-3 "+(d[2]||"")+" rounded-full transition-all duration-200")&&M(c,"class",h)},i:qe,o:qe,d(d){d&&P(e)}}}function AG(t,e,n){let{title:i="Title"}=e,{label:s="Label"}=e,{bgColor:r="bg-gray-600"}=e,{pColor:o="bg-blue-400"}=e,{value:a=0}=e,{total:l=0}=e,c=0;return t.$$set=u=>{"title"in u&&n(0,i=u.title),"label"in u&&n(1,s=u.label),"bgColor"in u&&n(2,r=u.bgColor),"pColor"in u&&n(3,o=u.pColor),"value"in u&&n(5,a=u.value),"total"in u&&n(6,l=u.total)},t.$$.update=()=>{t.$$.dirty&96&&n(4,c=l===0?0:a*100/l)},[i,s,r,o,c,a,l]}class Zl extends xt{constructor(e){super(),wt(this,e,AG,kG,yt,{title:0,label:1,bgColor:2,pColor:3,value:5,total:6})}}function Ux(t,e,n){const i=t.slice();return i[32]=e[n],i}function Hx(t){let e,n;function i(){return t[21](t[32])}return e=new Ct({props:{class:"h-6 bg-green-700 text-gray-300",$$slots:{default:[LG]},$$scope:{ctx:t}}}),e.$on("click",i),{c(){ue(e.$$.fragment)},m(s,r){le(e,s,r),n=!0},p(s,r){t=s;const o={};r[0]&2|r[1]&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(s){n||(I(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){ce(e,s)}}}function LG(t){let e=t[1].TIMER.go+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&2&&e!==(e=i[1].TIMER.go+"")&&ke(n,e)},d(i){i&&P(n)}}}function Vx(t){let e,n=t[32].title+"",i,s,r,o=(t[2][t[32].key].id?Lt(t[2][t[32].key][/^(best|worst)$/.test(t[32].key)?"value":"best"]||0,!0,!0):":(")+"",a,l,c,u,f,h=t[2][t[32].key].id&&Hx(t);return{c(){e=C("span"),i=ae(n),s=O(),r=C("span"),a=ae(o),l=O(),c=C("span"),h&&h.c(),u=O()},m(d,p){R(d,e,p),E(e,i),R(d,s,p),R(d,r,p),E(r,a),R(d,l,p),R(d,c,p),h&&h.m(c,null),E(c,u),f=!0},p(d,p){(!f||p[0]&2)&&n!==(n=d[32].title+"")&&ke(i,n),(!f||p[0]&6)&&o!==(o=(d[2][d[32].key].id?Lt(d[2][d[32].key][/^(best|worst)$/.test(d[32].key)?"value":"best"]||0,!0,!0):":(")+"")&&ke(a,o),d[2][d[32].key].id?h?(h.p(d,p),p[0]&6&&I(h,1)):(h=Hx(d),h.c(),I(h,1),h.m(c,u)):h&&(ot(),H(h,1,1,()=>{h=null}),at())},i(d){f||(I(h),f=!0)},o(d){H(h),f=!1},d(d){d&&P(e),d&&P(s),d&&P(r),d&&P(l),d&&P(c),h&&h.d()}}}function CG(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y=t[1].TIMER.bestMarks+"",v,w,S,T,k,A,L,D,B,U,N,$,W,j,J;o=new Zl({props:{title:t[1].TIMER.best,pColor:"bg-green-400",label:Lt(t[2].best.value,!0,!0),value:t[2].best.value,total:t[2].worst.value}}),l=new Zl({props:{title:t[1].TIMER.worst,pColor:"bg-orange-400",label:Lt(t[2].worst.value,!0,!0),value:t[2].worst.value,total:t[2].worst.value}}),u=new Zl({props:{title:t[1].TIMER.average,label:Lt(t[2].avg.value,!0,!0),value:t[2].avg.value,total:t[2].worst.value}}),h=new Zl({props:{title:t[1].TIMER.deviation,label:Lt(t[2].dev.value,!0,!0),value:t[2].dev.value,total:t[2].worst.value}}),p=new Zl({props:{title:t[1].TIMER.totalTime,bgColor:"hidden",label:Lt(t[2].time.value,!0,!0)}}),_=new Zl({props:{title:t[1].TIMER.count,label:t[2].count.value.toString(),value:t[2].count.value,total:t[2].count.value}});let se=t[1].TIMER.bestList,ne=[];for(let q=0;q<se.length;q+=1)ne[q]=Vx(Ux(t,se,q));const K=q=>H(ne[q],1,1,()=>{ne[q]=null});return{c(){e=C("main"),n=C("div"),i=C("canvas"),s=O(),r=C("div"),ue(o.$$.fragment),a=O(),ue(l.$$.fragment),c=O(),ue(u.$$.fragment),f=O(),ue(h.$$.fragment),d=O(),ue(p.$$.fragment),m=O(),ue(_.$$.fragment),b=O(),g=C("div"),x=C("h2"),v=ae(y),w=O(),S=C("div");for(let q=0;q<ne.length;q+=1)ne[q].c();T=O(),k=C("div"),A=C("canvas"),L=O(),D=C("div"),B=C("canvas"),U=O(),N=C("div"),$=C("canvas"),M(n,"class","canvas card grid place-items-center bg-white bg-opacity-10 rounded-md svelte-qy37yl"),M(r,"class","stats card svelte-qy37yl"),M(x,"class","text-3xl text-gray-200 text-center"),M(S,"id","best-marks"),M(S,"class","svelte-qy37yl"),M(g,"class","card svelte-qy37yl"),M(k,"class","hour-distribution card svelte-qy37yl"),M(D,"class","week-distribution card svelte-qy37yl"),M(N,"class","histogram card svelte-qy37yl"),M(e,"class","svelte-qy37yl")},m(q,te){R(q,e,te),E(e,n),E(n,i),t[20](i),E(e,s),E(e,r),le(o,r,null),E(r,a),le(l,r,null),E(r,c),le(u,r,null),E(r,f),le(h,r,null),E(r,d),le(p,r,null),E(r,m),le(_,r,null),E(e,b),E(e,g),E(g,x),E(x,v),E(g,w),E(g,S);for(let re=0;re<ne.length;re+=1)ne[re].m(S,null);E(e,T),E(e,k),E(k,A),t[22](A),E(e,L),E(e,D),E(D,B),t[23](B),E(e,U),E(e,N),E(N,$),t[24]($),W=!0,j||(J=$e(window,"resize",t[19]),j=!0)},p(q,te){const re={};te[0]&2&&(re.title=q[1].TIMER.best),te[0]&4&&(re.label=Lt(q[2].best.value,!0,!0)),te[0]&4&&(re.value=q[2].best.value),te[0]&4&&(re.total=q[2].worst.value),o.$set(re);const Oe={};te[0]&2&&(Oe.title=q[1].TIMER.worst),te[0]&4&&(Oe.label=Lt(q[2].worst.value,!0,!0)),te[0]&4&&(Oe.value=q[2].worst.value),te[0]&4&&(Oe.total=q[2].worst.value),l.$set(Oe);const Ee={};te[0]&2&&(Ee.title=q[1].TIMER.average),te[0]&4&&(Ee.label=Lt(q[2].avg.value,!0,!0)),te[0]&4&&(Ee.value=q[2].avg.value),te[0]&4&&(Ee.total=q[2].worst.value),u.$set(Ee);const ye={};te[0]&2&&(ye.title=q[1].TIMER.deviation),te[0]&4&&(ye.label=Lt(q[2].dev.value,!0,!0)),te[0]&4&&(ye.value=q[2].dev.value),te[0]&4&&(ye.total=q[2].worst.value),h.$set(ye);const xe={};te[0]&2&&(xe.title=q[1].TIMER.totalTime),te[0]&4&&(xe.label=Lt(q[2].time.value,!0,!0)),p.$set(xe);const Ae={};if(te[0]&2&&(Ae.title=q[1].TIMER.count),te[0]&4&&(Ae.label=q[2].count.value.toString()),te[0]&4&&(Ae.value=q[2].count.value),te[0]&4&&(Ae.total=q[2].count.value),_.$set(Ae),(!W||te[0]&2)&&y!==(y=q[1].TIMER.bestMarks+"")&&ke(v,y),te[0]&16390){se=q[1].TIMER.bestList;let De;for(De=0;De<se.length;De+=1){const de=Ux(q,se,De);ne[De]?(ne[De].p(de,te),I(ne[De],1)):(ne[De]=Vx(de),ne[De].c(),I(ne[De],1),ne[De].m(S,null))}for(ot(),De=se.length;De<ne.length;De+=1)K(De);at()}},i(q){if(!W){I(o.$$.fragment,q),I(l.$$.fragment,q),I(u.$$.fragment,q),I(h.$$.fragment,q),I(p.$$.fragment,q),I(_.$$.fragment,q);for(let te=0;te<se.length;te+=1)I(ne[te]);W=!0}},o(q){H(o.$$.fragment,q),H(l.$$.fragment,q),H(u.$$.fragment,q),H(h.$$.fragment,q),H(p.$$.fragment,q),H(_.$$.fragment,q),ne=ne.filter(Boolean);for(let te=0;te<ne.length;te+=1)H(ne[te]);W=!1},d(q){q&&P(e),t[20](null),ce(o),ce(l),ce(u),ce(h),ce(p),ce(_),en(ne,q),t[22](null),t[23](null),t[24](null),j=!1,J()}}}function PG(t,e,n){let i,s,r,o,a,{context:l}=e,c=Rr(Hi,j=>Dr(j));dt(t,c,j=>n(1,i=j));let{solves:u,AoX:f,stats:h,session:d,selectSolveById:p}=l;dt(t,u,j=>n(17,r=j)),dt(t,f,j=>n(18,o=j)),dt(t,h,j=>n(2,s=j)),dt(t,d,j=>n(26,a=j));let m,_,b,g,x,y,v,w;const S=["Sun","Mon","Tue","Wen","Thu","Fri","Sat"];function T(j,J){let se=1/0,ne=[],K=j.length-1,q=te=>J?K-te:te;for(let te=0,re=K+1;te<re;te+=1)j[q(te)].penalty!==ft.DNF&&j[q(te)].time<se&&(se=j[q(te)].time,ne.push({x:te,y:se}));return ne}function k(j){const J=x.width;let se=yz(j,J);const ne=j.length-1,K=se.length-1,q=ne/(K||1);n(0,x.data.labels=se.map((xe,Ae)=>Ae),x),n(0,x.data.datasets[0].data.length=0,x),se.forEach((xe,Ae)=>{x.data.datasets[0].data.push({x:Ae*q,y:Qr(se[K-Ae])?void 0:se[K-Ae].time})}),n(0,x.options.plugins.zoom.limits.x.max=K+1,x),[5,12,50,o].forEach((xe,Ae)=>{var me;let De=x.data.datasets[Ae+1];De.data.length=0;let de=qf(xe,j,((me=a==null?void 0:a.settings)==null?void 0:me.calcAoX)||tr.SEQUENTIAL);vz(de,J).map((We,Ue)=>De.data.push({x:Ue*q,y:We})),De.label="Ao"+xe}),n(0,x.data.datasets[5].data.length=0,x),T(j,!0).forEach(xe=>x.data.datasets[5].data.push(xe));const{m:re,n:Oe}=bz(se.map((xe,Ae)=>[K-Ae,xe.time]));n(0,x.data.datasets[6].data.length=0,x),[{x:0,y:Oe},{x:K*q,y:re*K+Oe}].forEach(xe=>x.data.datasets[6].data.push(xe)),x.update(),x.resetZoom();let Ee=j.reduce((xe,Ae)=>(xe[rt(Ae.date).hour()]+=1,xe),new Array(24).fill(0));n(7,y.data.datasets[0].data=Ee.map((xe,Ae)=>({x:Ae,y:xe})),y),y.update();let ye=j.reduce((xe,Ae)=>(xe[rt(Ae.date).isoWeekday()]+=1,xe),new Array(7).fill(0));n(8,v.data.datasets[0].data=ye,v),v.update()}function A(){let j=s.best.value,J=s.worst.value+1e-5,se=bm(r.length,1,10),ne=te=>j+(J-j)*te/se,K=new Array(se).fill(0).map((te,re)=>[ne(re),ne(re+1)]),q=r.reduce((te,re)=>(Qr(re)||(te[Math.floor((re.time-j)*se/(J-j))]+=1),te),new Array(se).fill(0));n(16,w.data.datasets[0].data=q,w),n(16,w.data.labels=K.map(te=>`${Lt(te[0],!0)} - ${Lt(te[1],!0)}`),w),w.update()}function L(){var J;const j=localStorage.getItem("app-font")||"Ubuntu";i.TIMER.timeChartLabels.forEach((se,ne)=>{n(0,x.data.datasets[ne].label=se,x)}),(J=x.options.plugins)!=null&&J.title&&(n(0,x.options.plugins.title.text=i.TIMER.timeDistribution,x),n(0,x.options.plugins.title.font.family=j,x)),n(7,y.options.plugins.title.text=i.TIMER.hourDistribution,y),n(7,y.data.datasets[0].label=i.TIMER.solves,y),n(8,v.options.plugins.title.text=i.TIMER.weekDistribution,v),n(8,v.data.datasets[0].label=i.TIMER.solves,v),n(16,w.options.plugins.title.text=i.TIMER.histogram,w),n(16,w.data.datasets[0].label=i.TIMER.solves,w),x.update(),y.update(),v.update(),w.update()}ji(()=>{const j={showLine:!0,fill:!1,tension:.1,xAxisID:"x",yAxisID:"y"},J={normalized:!0};let se=m.getContext("2d");Ja.register(TG),Ja.defaults.color="#bbbbbb";const ne={id:"shadingArea",beforeDatasetsDraw(re){const{ctx:Oe,scales:{y:Ee}}=re,{data:ye,hidden:xe}=re.getDatasetMeta(6);if(ye.length<2||xe)return;let Ae=[ye[0].x,ye[0].y],De=[ye[1].x,ye[1].y],de=Ee.height*s.dev.value/(Ee.max-Ee.min),me=N8(De[0]-Ae[0],De[1]-Ae[1],Math.PI/2),We=Math.sqrt(me[0]**2+me[1]**2);me=me.map(Le=>Le*de/We);let Ue=nd(Ae[0],Ae[0]+me[0],Ae[1]+me[1],De[0]+me[0],De[1]+me[1]),be=nd(De[0],Ae[0]+me[0],Ae[1]+me[1],De[0]+me[0],De[1]+me[1]),F=nd(De[0],Ae[0]-me[0],Ae[1]-me[1],De[0]-me[0],De[1]-me[1]),V=nd(Ae[0],Ae[0]-me[0],Ae[1]-me[1],De[0]-me[0],De[1]-me[1]),_e=[Ae[0],Ue],oe=[De[0],be],X=[De[0],F],fe=[Ae[0],V];Oe.save(),Oe.beginPath(),Oe.fillStyle="rgba(255, 255, 255, .1)",Oe.moveTo(_e[0],_e[1]),Oe.lineTo(oe[0],oe[1]),Oe.lineTo(X[0],X[1]),Oe.lineTo(fe[0],fe[1]),Oe.lineTo(_e[0],_e[1]),Oe.fill(),Oe.restore()}};n(0,x=new Ja(se,{data:{datasets:[{data:[],type:"line",label:"Time",...j,...J},{data:[],type:"line",hidden:!0,label:"Ao5",...j,...J},{data:[],type:"line",hidden:!0,label:"Ao12",...j,...J},{data:[],type:"line",hidden:!0,label:"Ao50",...j,...J},{data:[],type:"line",hidden:!0,label:"AoX",...j,...J},{data:[],type:"line",label:"Best",borderDash:[5,5],...j,...J},{data:[],type:"line",label:"Trend",borderDash:[5,5],...j}],labels:[]},options:{responsive:!0,maintainAspectRatio:!0,animation:!1,scales:{x:{type:"linear",ticks:{display:!1},grid:{display:!1}},y:{position:"left",grid:{color:"#555"},ticks:{callback:re=>Lt(+re,!1,!0)}}},layout:{padding:{left:10,right:10}},plugins:{tooltip:{mode:"nearest",intersect:!1,callbacks:{label:re=>{let Oe=re.dataset.label,Ee=re.parsed.y;return Oe+": "+Lt(+Ee,!1,!0)},title:re=>`${i.TIMER.solve} #${Math.round(re[0].parsed.x)+1}`}},zoom:{zoom:{wheel:{enabled:!0},mode:"x",scaleMode:"x"},pan:{enabled:!0,mode:"x"},limits:{x:{min:1,max:40}}},title:{text:"Time distribution",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}}},plugins:[ne]}));let K=_.getContext("2d");n(7,y=new Ja(K,{data:{datasets:[{data:[],label:"Solves",type:"scatter",...j,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{text:"Hour distribution",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}},scales:{x:{min:0,max:23},y:{beginAtZero:!0}}}}));let q=b.getContext("2d");n(8,v=new Ja(q,{data:{datasets:[{data:[],label:"Solves",type:"line",...j,tension:.4}],labels:S},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{text:"Week distribution",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}},scales:{y:{beginAtZero:!0}}}}));let te=g.getContext("2d");n(16,w=new Ja(te,{data:{datasets:[{data:[1,2,3,4,5],label:"Solves",type:"bar"}],labels:["A","B","C","D","E"]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{text:"Histogram",display:!0,font:{size:30,family:"Raleway"},color:"#ddd"}},scales:{y:{beginAtZero:!0}}}})),k(r)});const D=()=>[x,y,v].forEach(j=>j.resize());function B(j){vt[j?"unshift":"push"](()=>{m=j,n(3,m)})}const U=j=>p(s[j.key].id||"",j.select);function N(j){vt[j?"unshift":"push"](()=>{_=j,n(4,_)})}function $(j){vt[j?"unshift":"push"](()=>{b=j,n(5,b)})}function W(j){vt[j?"unshift":"push"](()=>{g=j,n(6,g)})}return t.$$set=j=>{"context"in j&&n(15,l=j.context)},t.$$.update=()=>{t.$$.dirty[0]&393217&&o&&x&&k(r),t.$$.dirty[0]&65540&&s&&w&&A(),t.$$.dirty[0]&3&&x&&L()},[x,i,s,m,_,b,g,y,v,c,u,f,h,d,p,l,w,r,o,D,B,U,N,$,W]}class RG extends xt{constructor(e){super(),wt(this,e,PG,CG,yt,{context:15},null,[-1,-1])}}function IG(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M19.03 7.39L20.45 5.97C20 5.46 19.55 5 19.04 4.56L17.62 6C16.07 4.74 14.12 4 12 4C7.03 4 3 8.03 3 13S7.03 22 12 22C17 22 21 17.97 21 13C21 10.88 20.26 8.93 19.03 7.39M13 14H11V7H13V14M15 1H9V3H15V1Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function DG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class OG extends xt{constructor(e){super(),wt(this,e,DG,IG,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function NG(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function BG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class FG extends xt{constructor(e){super(),wt(this,e,BG,NG,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function zG(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M3.5,18.5L9.5,12.5L13.5,16.5L22,6.92L20.59,5.5L13.5,13.5L9.5,9.5L2,17L3.5,18.5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function UG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class HG extends xt{constructor(e){super(),wt(this,e,UG,zG,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function VG(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M3,17V19H9V17H3M3,5V7H13V5H3M13,21V19H21V17H13V15H11V21H13M7,9V11H3V13H7V15H9V9H7M21,13V11H11V13H21M15,9H17V7H21V5H17V3H15V9Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function GG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class WG extends xt{constructor(e){super(),wt(this,e,GG,VG,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function jG(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function YG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class xv extends xt{constructor(e){super(),wt(this,e,YG,jG,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function qG(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function XG(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class ZG extends xt{constructor(e){super(),wt(this,e,XG,qG,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function Gx(t,e,n){const i=t.slice();return i[99]=e[n],i[100]=e,i[101]=n,i}function JG(t){let e,n,i,s,r,o,a,l,c,u;n=new $i({props:{text:t[14].TIMER.manageSessions,$$slots:{default:[$G]},$$scope:{ctx:t}}}),s=new Wi({props:{class:"min-w-[8rem]",placeholder:t[14].TIMER.selectSession,value:t[9],items:t[4],label:oW,transform:aW,onChange:t[58]}});let f=t[13]===0&&Wx(t),h=t[3].length>0&&t[13]===0&&jx(t),d=t[13]===2&&Yx(t),p={class:"absolute w-full",onChange:t[63],$$slots:{default:[nW]},$$scope:{ctx:t}};return c=new ok({props:p}),t[64](c),{c(){e=C("div"),ue(n.$$.fragment),i=O(),ue(s.$$.fragment),r=O(),f&&f.c(),o=O(),h&&h.c(),a=O(),d&&d.c(),l=O(),ue(c.$$.fragment),M(e,"class","fixed w-max -translate-x-1/2 left-1/2 z-10 grid grid-flow-col gap-2 top-12 items-center justify-center text-gray-400")},m(m,_){R(m,e,_),le(n,e,null),E(e,i),le(s,e,null),E(e,r),f&&f.m(e,null),E(e,o),h&&h.m(e,null),E(e,a),d&&d.m(e,null),R(m,l,_),le(c,m,_),u=!0},p(m,_){const b={};_[0]&16384&&(b.text=m[14].TIMER.manageSessions),_[3]&512&&(b.$$scope={dirty:_,ctx:m}),n.$set(b);const g={};_[0]&16384&&(g.placeholder=m[14].TIMER.selectSession),_[0]&512&&(g.value=m[9]),_[0]&16&&(g.items=m[4]),_[0]&512&&(g.onChange=m[58]),s.$set(g),m[13]===0?f?(f.p(m,_),_[0]&8192&&I(f,1)):(f=Wx(m),f.c(),I(f,1),f.m(e,o)):f&&(ot(),H(f,1,1,()=>{f=null}),at()),m[3].length>0&&m[13]===0?h?(h.p(m,_),_[0]&8200&&I(h,1)):(h=jx(m),h.c(),I(h,1),h.m(e,a)):h&&(ot(),H(h,1,1,()=>{h=null}),at()),m[13]===2?d?(d.p(m,_),_[0]&8192&&I(d,1)):(d=Yx(m),d.c(),I(d,1),d.m(e,null)):d&&(ot(),H(d,1,1,()=>{d=null}),at());const x={};_[0]&8192&&(x.onChange=m[63]),_[3]&512&&(x.$$scope={dirty:_,ctx:m}),c.$set(x)},i(m){u||(I(n.$$.fragment,m),I(s.$$.fragment,m),I(f),I(h),I(d),I(c.$$.fragment,m),u=!0)},o(m){H(n.$$.fragment,m),H(s.$$.fragment,m),H(f),H(h),H(d),H(c.$$.fragment,m),u=!1},d(m){m&&P(e),ce(n),ce(s),f&&f.d(),h&&h.d(),d&&d.d(),m&&P(l),t[64](null),ce(c,m)}}}function KG(t){let e,n;return e=new uk({props:{context:t[51],battle:t[0],enableKeyboard:t[1]}}),e.$on("solve",t[56]),e.$on("update",t[57]),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.battle=i[0]),s[0]&2&&(r.enableKeyboard=i[1]),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function $G(t){let e,n,i,s,r;return n=new WG({props:{width:"1.2rem",height:"1.2rem"}}),{c(){e=C("span"),ue(n.$$.fragment),M(e,"class","cursor-pointer")},m(o,a){R(o,e,a),le(n,e,null),i=!0,s||(r=$e(e,"click",t[38]),s=!0)},p:qe,i(o){i||(I(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&P(e),ce(n),s=!1,r()}}}function Wx(t){let e,n,i,s;return e=new Wi({props:{class:"min-w-[8rem]",placeholder:t[14].TIMER.selectGroup,value:t[17][t[11]],items:t[17],transform:lW,onChange:t[59]}}),i=new Wi({props:{class:"min-w-[8rem]",placeholder:[t[14].TIMER.selectMode],value:t[10],items:t[2],label:cW,transform:uW,onChange:t[60]}}),{c(){ue(e.$$.fragment),n=O(),ue(i.$$.fragment)},m(r,o){le(e,r,o),R(r,n,o),le(i,r,o),s=!0},p(r,o){const a={};o[0]&16384&&(a.placeholder=r[14].TIMER.selectGroup),o[0]&2048&&(a.value=r[17][r[11]]),o[0]&2048&&(a.onChange=r[59]),e.$set(a);const l={};o[0]&16384&&(l.placeholder=[r[14].TIMER.selectMode]),o[0]&1024&&(l.value=r[10]),o[0]&4&&(l.items=r[2]),o[0]&1024&&(l.onChange=r[60]),i.$set(l)},i(r){s||(I(e.$$.fragment,r),I(i.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),H(i.$$.fragment,r),s=!1},d(r){ce(e,r),r&&P(n),ce(i,r)}}}function jx(t){let e,n;return e=new Wi({props:{class:"min-w-[8rem]",placeholder:t[14].TIMER.selectFilter,value:t[12],items:t[3],label:fW,transform:hW,onChange:t[61]}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&16384&&(r.placeholder=i[14].TIMER.selectFilter),s[0]&4096&&(r.value=i[12]),s[0]&8&&(r.items=i[3]),s[0]&4096&&(r.onChange=i[61]),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Yx(t){let e,n,i;function s(o){t[62](o)}let r={min:3,max:1e3,class:"hidden-markers bg-gray-700 rounded-md",type:"number"};return t[15]!==void 0&&(r.value=t[15]),e=new hi({props:r}),vt.push(()=>Vt(e,"value",s)),e.$on("keyup",dW),{c(){ue(e.$$.fragment)},m(o,a){le(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&32768&&(n=!0,l.value=o[15],Ht(()=>n=!1)),e.$set(l)},i(o){i||(I(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){ce(e,o)}}}function QG(t){let e,n;return e=new uk({props:{context:t[51]}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p:qe,i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function eW(t){let e,n;return e=new Hz({props:{context:t[51]}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p:qe,i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function tW(t){let e,n;return e=new RG({props:{context:t[51]}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p:qe,i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function nW(t){let e,n,i,s,r,o;return e=new rl({props:{name:"",icon:OG,ariaLabel:"timer tab",$$slots:{default:[QG]},$$scope:{ctx:t}}}),i=new rl({props:{name:"",icon:FG,ariaLabel:"sessions tab",$$slots:{default:[eW]},$$scope:{ctx:t}}}),r=new rl({props:{name:"",icon:HG,ariaLabel:"charts tab",$$slots:{default:[tW]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment),n=O(),ue(i.$$.fragment),s=O(),ue(r.$$.fragment)},m(a,l){le(e,a,l),R(a,n,l),le(i,a,l),R(a,s,l),le(r,a,l),o=!0},p(a,l){const c={};l[3]&512&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l[3]&512&&(u.$$scope={dirty:l,ctx:a}),i.$set(u);const f={};l[3]&512&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){o||(I(e.$$.fragment,a),I(i.$$.fragment,a),I(r.$$.fragment,a),o=!0)},o(a){H(e.$$.fragment,a),H(i.$$.fragment,a),H(r.$$.fragment,a),o=!1},d(a){ce(e,a),a&&P(n),ce(i,a),a&&P(s),ce(r,a)}}}function iW(t){let e,n,i=t[14].TIMER.addNewSession+"",s,r;return e=new kb({}),{c(){ue(e.$$.fragment),n=O(),s=ae(i)},m(o,a){le(e,o,a),R(o,n,a),R(o,s,a),r=!0},p(o,a){(!r||a[0]&16384)&&i!==(i=o[14].TIMER.addNewSession+"")&&ke(s,i)},i(o){r||(I(e.$$.fragment,o),r=!0)},o(o){H(e.$$.fragment,o),r=!1},d(o){ce(e,o),o&&P(n),o&&P(s)}}}function qx(t){let e,n,i,s,r,o,a,l,c,u,f,h,d;function p(_){t[65](_)}let m={focus:t[7],class:"bg-gray-600 text-gray-200 flex-1"};return t[8]!==void 0&&(m.value=t[8]),n=new hi({props:m}),vt.push(()=>Vt(n,"value",p)),n.$on("keyup",t[66]),a=new xv({props:{width:"100%",height:"100%"}}),u=new qo({props:{width:"100%",height:"100%"}}),{c(){e=C("div"),ue(n.$$.fragment),s=O(),r=C("div"),o=C("span"),ue(a.$$.fragment),l=O(),c=C("span"),ue(u.$$.fragment),M(o,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(c,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(r,"class","flex mx-2 flex-grow-0 w-10 items-center justify-center"),M(e,"class","flex")},m(_,b){R(_,e,b),le(n,e,null),E(e,s),E(e,r),E(r,o),le(a,o,null),E(r,l),E(r,c),le(u,c,null),f=!0,h||(d=[$e(o,"click",t[48]),$e(c,"click",t[40])],h=!0)},p(_,b){const g={};b[0]&128&&(g.focus=_[7]),!i&&b[0]&256&&(i=!0,g.value=_[8],Ht(()=>i=!1)),n.$set(g)},i(_){f||(I(n.$$.fragment,_),I(a.$$.fragment,_),I(u.$$.fragment,_),f=!0)},o(_){H(n.$$.fragment,_),H(a.$$.fragment,_),H(u.$$.fragment,_),f=!1},d(_){_&&P(e),ce(n),ce(a),ce(u),h=!1,Vn(d)}}}function Xx(t){let e,n,i,s,r,o,a,l;n=new ZG({props:{width:"100%",height:"100%"}});function c(){return t[69](t[99],t[100],t[101])}r=new sv({props:{width:"100%",height:"100%"}});function u(){return t[70](t[99])}return{c(){e=C("span"),ue(n.$$.fragment),i=O(),s=C("span"),ue(r.$$.fragment),M(e,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(s,"class","text-gray-400 w-8 h-8 cursor-pointer")},m(f,h){R(f,e,h),le(n,e,null),R(f,i,h),R(f,s,h),le(r,s,null),o=!0,a||(l=[$e(e,"click",c),$e(s,"click",u)],a=!0)},p(f,h){t=f},i(f){o||(I(n.$$.fragment,f),I(r.$$.fragment,f),o=!0)},o(f){H(n.$$.fragment,f),H(r.$$.fragment,f),o=!1},d(f){f&&P(e),ce(n),f&&P(i),f&&P(s),ce(r),a=!1,Vn(l)}}}function Zx(t){let e,n,i,s,r,o,a,l;n=new xv({props:{width:"100%",height:"100%"}});function c(){return t[71](t[99])}r=new qo({props:{width:"100%",height:"100%"}});function u(){return t[72](t[99],t[100],t[101])}return{c(){e=C("span"),ue(n.$$.fragment),i=O(),s=C("span"),ue(r.$$.fragment),M(e,"class","text-gray-400 w-8 h-8 cursor-pointer"),M(s,"class","text-gray-400 w-8 h-8 cursor-pointer")},m(f,h){R(f,e,h),le(n,e,null),R(f,i,h),R(f,s,h),le(r,s,null),o=!0,a||(l=[$e(e,"click",c),$e(s,"click",u)],a=!0)},p(f,h){t=f},i(f){o||(I(n.$$.fragment,f),I(r.$$.fragment,f),o=!0)},o(f){H(n.$$.fragment,f),H(r.$$.fragment,f),o=!1},d(f){f&&P(e),ce(n),f&&P(i),f&&P(s),ce(r),a=!1,Vn(l)}}}function Jx(t){let e,n,i,s,r,o,a,l;function c(p){t[67](p,t[99])}function u(...p){return t[68](t[99],t[100],t[101],...p)}let f={disabled:!t[99].editing,class:"bg-transparent text-gray-400 flex-1 "+(t[99].editing?"":"border-transparent"),focus:t[99].editing};t[99].tName!==void 0&&(f.value=t[99].tName),n=new hi({props:f}),vt.push(()=>Vt(n,"value",c)),n.$on("keyup",u);let h=!t[99].editing&&!t[7]&&Xx(t),d=t[99].editing&&!t[7]&&Zx(t);return{c(){e=C("div"),ue(n.$$.fragment),s=O(),r=C("div"),h&&h.c(),o=O(),d&&d.c(),a=O(),M(r,"class","flex mx-2 flex-grow-0 w-10 items-center justify-center"),M(e,"class","flex")},m(p,m){R(p,e,m),le(n,e,null),E(e,s),E(e,r),h&&h.m(r,null),E(r,o),d&&d.m(r,null),E(e,a),l=!0},p(p,m){t=p;const _={};m[0]&16&&(_.disabled=!t[99].editing),m[0]&16&&(_.class="bg-transparent text-gray-400 flex-1 "+(t[99].editing?"":"border-transparent")),m[0]&16&&(_.focus=t[99].editing),!i&&m[0]&16&&(i=!0,_.value=t[99].tName,Ht(()=>i=!1)),n.$set(_),!t[99].editing&&!t[7]?h?(h.p(t,m),m[0]&144&&I(h,1)):(h=Xx(t),h.c(),I(h,1),h.m(r,o)):h&&(ot(),H(h,1,1,()=>{h=null}),at()),t[99].editing&&!t[7]?d?(d.p(t,m),m[0]&144&&I(d,1)):(d=Zx(t),d.c(),I(d,1),d.m(r,null)):d&&(ot(),H(d,1,1,()=>{d=null}),at())},i(p){l||(I(n.$$.fragment,p),I(h),I(d),l=!0)},o(p){H(n.$$.fragment,p),H(h),H(d),l=!1},d(p){p&&P(e),ce(n),h&&h.d(),d&&d.d()}}}function sW(t){let e,n,i,s,r;e=new Ct({props:{$$slots:{default:[iW]},$$scope:{ctx:t}}}),e.$on("click",t[39]);let o=t[7]&&qx(t),a=t[4],l=[];for(let u=0;u<a.length;u+=1)l[u]=Jx(Gx(t,a,u));const c=u=>H(l[u],1,1,()=>{l[u]=null});return{c(){ue(e.$$.fragment),n=O(),i=C("div"),o&&o.c(),s=O();for(let u=0;u<l.length;u+=1)l[u].c();M(i,"class","grid")},m(u,f){le(e,u,f),R(u,n,f),R(u,i,f),o&&o.m(i,null),E(i,s);for(let h=0;h<l.length;h+=1)l[h].m(i,null);r=!0},p(u,f){const h={};if(f[0]&16384|f[3]&512&&(h.$$scope={dirty:f,ctx:u}),e.$set(h),u[7]?o?(o.p(u,f),f[0]&128&&I(o,1)):(o=qx(u),o.c(),I(o,1),o.m(i,s)):o&&(ot(),H(o,1,1,()=>{o=null}),at()),f[0]&144|f[1]&786432){a=u[4];let d;for(d=0;d<a.length;d+=1){const p=Gx(u,a,d);l[d]?(l[d].p(p,f),I(l[d],1)):(l[d]=Jx(p),l[d].c(),I(l[d],1),l[d].m(i,null))}for(ot(),d=a.length;d<l.length;d+=1)c(d);at()}},i(u){if(!r){I(e.$$.fragment,u),I(o);for(let f=0;f<a.length;f+=1)I(l[f]);r=!0}},o(u){H(e.$$.fragment,u),H(o),l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)H(l[f]);r=!1},d(u){ce(e,u),u&&P(n),u&&P(i),o&&o.d(),en(l,u)}}}function rW(t){let e,n,i,s,r,o,a,l;const c=[KG,JG],u=[];function f(h,d){return h[0]?0:1}return n=f(t),i=u[n]=c[n](t),r=new La({props:{show:t[6],onClose:t[41],$$slots:{default:[sW]},$$scope:{ctx:t}}}),{c(){e=C("main"),i.c(),s=O(),ue(r.$$.fragment),M(e,"class","w-full h-full")},m(h,d){R(h,e,d),u[n].m(e,null),E(e,s),le(r,e,null),o=!0,a||(l=$e(window,"keyup",t[42]),a=!0)},p(h,d){let p=n;n=f(h),n===p?u[n].p(h,d):(ot(),H(u[p],1,1,()=>{u[p]=null}),at(),i=u[n],i?i.p(h,d):(i=u[n]=c[n](h),i.c()),I(i,1),i.m(e,s));const m={};d[0]&64&&(m.show=h[6]),d[0]&16784|d[3]&512&&(m.$$scope={dirty:d,ctx:h}),r.$set(m)},i(h){o||(I(i),I(r.$$.fragment,h),o=!0)},o(h){H(i),H(r.$$.fragment,h),o=!1},d(h){h&&P(e),u[n].d(),ce(r),a=!1,l()}}}const oW=t=>(t||{}).name,aW=t=>t,lW=t=>t,cW=t=>t[0],uW=t=>t,fW=t=>t.toUpperCase(),hW=(t,e)=>e,dW=t=>t.detail.stopPropagation();function pW(t,e,n){let i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,{battle:S=!1}=e,{useScramble:T=""}=e,{useMode:k=""}=e,{genScramble:A=!0}=e,{enableKeyboard:L=!0}=e,D=Rr(Hi,Ce=>Dr(Ce));dt(t,D,Ce=>n(14,v=Ce));const B={best:{value:0,better:!1},worst:{value:0,better:!1},count:{value:0,better:!1},time:{value:0,better:!1},avg:{value:0,better:!1},dev:{value:0,better:!1},Mo3:{value:-1,better:!1},Ao5:{value:-1,better:!1},Ao12:{value:-1,better:!1},Ao50:{value:-1,better:!1},Ao100:{value:-1,better:!1},Ao200:{value:-1,better:!1},Ao500:{value:-1,better:!1},Ao1k:{value:-1,better:!1},Ao2k:{value:-1,better:!1},NP:{value:0,better:!1},P2:{value:0,better:!1},DNS:{value:0,better:!1},DNF:{value:0,better:!1},counter:{value:0,better:!1}},U=Ds.getInstance(),N=ma.map((Ce,st)=>Ce[0]);let $=[],W=[],j=[],J=[],se,ne=Oa(),K=!1,q=!1,te="",re=nn(Kt.CLEAN);dt(t,re,Ce=>n(55,p=Ce));let Oe=nn(!1),Ee=nn(0);dt(t,Ee,Ce=>n(13,g=Ce));let ye=nn([]);dt(t,ye,Ce=>n(81,m=Ce));let xe=nn([]);dt(t,xe,Ce=>n(74,s=Ce));let Ae=nn();dt(t,Ae,Ce=>n(9,i=Ce));let De=nn();dt(t,De,Ce=>n(82,_=Ce));let de=nn(100);dt(t,de,Ce=>n(15,w=Ce));let me=nn(B);dt(t,me,Ce=>n(83,b=Ce));let We=nn();dt(t,We,Ce=>n(77,u=Ce));let Ue=nn();dt(t,Ue,Ce=>n(11,o=Ce));let be=nn();dt(t,be,Ce=>n(10,r=Ce));let F=nn();dt(t,F,Ce=>n(75,l=Ce));let V=nn();dt(t,V,Ce=>n(76,c=Ce));let _e=nn();dt(t,_e,Ce=>n(79,h=Ce));let oe=nn();dt(t,oe,Ce=>n(78,f=Ce));let X=nn(Eb);dt(t,X,Ce=>n(80,d=Ce));let fe=nn();dt(t,fe,Ce=>n(12,a=Ce));let Le=nn(!1);dt(t,Le,Ce=>n(85,y=Ce));let Pe=nn(0);dt(t,Pe,Ce=>n(84,x=Ce));let Ye=nn(!0);function Ke(Ce){Ce.selected=!Ce.selected,At(Pe,x+=Ce.selected?1:-1,x),ye.set(m)}function Z(Ce,st){for(let it=0,Rt=m.length;it<Rt;it+=1)if(m[it]._id===Ce){for(let Ln=0;Ln<st&&it+Ln<Rt;Ln+=1)At(ye,m[it+Ln].selected=!m[it+Ln].selected,m),At(Pe,x+=m[it+Ln].selected?1:-1,x);g===0&&se.nextTab(),g===2&&se.prevTab();break}}function ve(Ce){At(Ue,o=Ce.group||0,o);let st=ma[o];n(2,$=st[1]);let it=$.filter(Rt=>Rt[1]===Ce.mode);At(be,r=it.length?it[0]:$[0],r),At(fe,a=Ce.prob||-1,a),mn()}function Re(Ce){var ps;let st=[3,5,12,50,100,200,500,1e3,2e3],it=[0,0,0,0,0,0,0,0,0],Rt=[],Ln=[],rs=m.length,ui=0,ds=0,ks=0,Li=new Map,ur=m.reduce((ri,bi)=>(Li.set(bi.penalty,(Li.get(bi.penalty)||0)+1),Qr(bi)?(rs-=1,ri):(ui+=bi.time,bi.time<ri[0]&&(Ln[9]=bi._id),bi.time>ri[1]&&(Ln[10]=bi._id),[Math.min(ri[0],bi.time),Math.max(ri[1],bi.time)])),[1/0,0]);ds=rs>0?ui/rs:0,ks=rs>0?Math.sqrt(m.reduce((ri,bi)=>Qr(bi)?ri:ri+(bi.time-ds)**2/rs,0)):0;for(let ri=0,bi=st.length;ri<bi;ri+=1){let Vs=qf(st[ri],m,((ps=i==null?void 0:i.settings)==null?void 0:ps.calcAoX)||tr.SEQUENTIAL);Rt[ri]=1/0,Ln[ri]="";for(let vi=0,uo=Vs.length;vi<uo;vi+=1)Vs[vi]&&Vs[vi]<Rt[ri]&&(Rt[ri]=Vs[vi],Ln[ri]=m[uo-vi-1]._id);it[ri]=Vs.pop()||-1}let Ni=Object.assign({},b);At(me,b={best:{value:ur[0],better:Ni.best.value>ur[0],id:Ln[9]},worst:{value:ur[1],better:!1,id:Ln[10]},avg:{value:ds,better:!1},dev:{value:ks,better:!1},count:{value:m.length,better:!1},time:{value:ui,better:!1},Mo3:{value:it[0],better:it[0]<=Rt[0],best:Rt[0],id:Ln[0]},Ao5:{value:it[1],better:it[1]<=Rt[1],best:Rt[1],id:Ln[1]},Ao12:{value:it[2],better:it[2]<=Rt[2],best:Rt[2],id:Ln[2]},Ao50:{value:it[3],better:it[3]<=Rt[3],best:Rt[3],id:Ln[3]},Ao100:{value:it[4],better:it[4]<=Rt[4],best:Rt[4],id:Ln[4]},Ao200:{value:it[5],better:it[5]<=Rt[5],best:Rt[5],id:Ln[5]},Ao500:{value:it[6],better:it[6]<=Rt[6],best:Rt[6],id:Ln[6]},Ao1k:{value:it[7],better:it[7]<=Rt[7],best:Rt[7],id:Ln[7]},Ao2k:{value:it[8],better:it[8]<=Rt[8],best:Rt[8],id:Ln[8]},NP:{value:Li.get(ft.NONE)||0,better:!1},P2:{value:Li.get(ft.P2)||0,better:!1},DNS:{value:Li.get(ft.DNS)||0,better:!1},DNF:{value:Li.get(ft.DNF)||0,better:!1},counter:{value:Ce?Ni.counter.value+1:Ni.counter.value,better:!1}},b),b.best.better&&Ni.best.value!=1/0}function He(){At(ye,m=s.filter(st=>st.session===(i||{})._id),m);let Ce=[];for(let st=0,it=0,Rt=m.length;st<Rt&&it<4;st+=1)m[st].penalty!=ft.DNF&&(Ce.push(m[st].time),it+=1);if(Ce.length===4){Ce.sort();let st=Ce.reduce((it,Rt)=>it+Rt,0);At(De,_=[(st-Ce[3])/3,(st-Ce[0])/3].sort((it,Rt)=>it-Rt),_)}else At(De,_=[],_)}function Ze(){At(xe,s=s.sort((Ce,st)=>st.date-Ce.date),s),He()}function _t(){Ze(),Re(!0),m.length>0&&ve(m[0])}function ln(){n(6,K=!0)}function lt(){n(7,q=!0),n(8,te="")}function gt(){n(7,q=!1)}function bn(){j.indexOf(i)<0&&At(Ae,i=j[0],i),gt(),n(6,K=!1)}function Ot(Ce){!L||!S&&(p===Kt.CLEAN||p===Kt.STOPPED)&&(Ce.key==="ArrowRight"?se.nextTab():Ce.key==="ArrowLeft"&&se.prevTab())}function Nn(Ce){if(!L)return;const st=Ce.detail;st.key==="Enter"?rn():st.key==="Escape"&&gt(),st.stopPropagation()}function Pn(Ce){let st=Ns.fromSequence(u,{...jc.get(Ce),rounded:!0,headless:!0});Ol([st],500).then(it=>{let Rt=it.subscribe(Ln=>{Ln!=="__initial__"&&(Ln===null?Rt():At(X,d=Ln,d))})})}function cn(Ce,st){var rs;At(F,l=!1,l),r||At(be,r=ma[o||0][1][0],r);let it=k||st||r[1],Rt=T||Ce;A?At(We,u=Rt||Df.get(it).apply(null,[it,Math.abs(r[2]),a<0?void 0:a]).replace(/\\n/g,"<br>").trim(),u):At(We,u=Ce||T,u),bD(it)&&At(We,u=Ks.parseNNNString(u),u),["333","333fm","333oh","333o","easyc","333ft"].indexOf(it)>-1?(At(_e,h=B6(u).map(ui=>ui.map(ds=>ds.trim()).join(" "))[0],h),At(oe,f=F6(u,0).map(ui=>ui.trim()).join(" "),f),At(F,l=!0,l)):(At(V,c=!1,c),At(F,l=!1,l)),jc.has(it)&&((rs=i==null?void 0:i.settings)==null?void 0:rs.genImage)&&Pn(it)}function mn(){cn()}function jt(){n(3,W=d1.get(r[1])||[]),At(fe,a=-1,a),mn()}function Gt(){n(2,$=ma[o][1]),At(be,r=$[0],r),jt()}function Bn(){localStorage.setItem("session",i._id),_t()}function rn(){let Ce=te.trim();Ce!=""&&(U.addSession({_id:"",name:Ce,settings:{hasInspection:!0,showElapsedTime:!0,inspection:15,calcAoX:tr.SEQUENTIAL,genImage:!0,scrambleAfterCancel:!1}}),gt())}function vn(Ce){confirm("Do you really want to remove this session? You will loose all the solves in the session.")&&U.removeSession(Ce)}function z(Ce){var st,it;Ce.editing=!1,((st=Ce.tName)==null?void 0:st.trim())!==""&&U.updateSession({_id:Ce._id,name:((it=Ce.tName)==null?void 0:it.trim())||"Session -",settings:Ce.settings})}ji(()=>{S?At(Ae,i={_id:"",name:"Battle",settings:{calcAoX:tr.SEQUENTIAL,genImage:!0,hasInspection:!0,inspection:15,scrambleAfterCancel:!1,showElapsedTime:!0,input:"Keyboard"},editing:!1,tName:""},i):(J=[U.solveSub.subscribe(Ce=>{if(!(!Ce||!Ce.data))switch(Ce.type){case"get-solves":{At(xe,s=Ce.data,s),_t();break}case"add-solve":{let st=Ce.data[0],it=s.find(Rt=>Rt.date===st.date);it&&(it._id=st._id,He());break}case"remove-solves":{let st=Ce.data;for(let it=s.length-1;it>=0;it-=1)st.indexOf(s[it]._id)>-1&&s.splice(it,1);_t();break}case"update-solve":{let st=Ce.data;if(st){for(let it=0,Rt=s.length;it<Rt;it+=1)if(s[it]._id===st._id){At(xe,s[it].comments=st.comments,s),At(xe,s[it].penalty=st.penalty,s);break}_t()}break}}}),U.sessSub.subscribe(Ce=>{if(!(!Ce||!Ce.data))switch(Ce.type){case"get-sessions":{if(n(4,j=Ce.data.map(Rt=>(Rt.tName=Rt.name,Rt))),j.length===0){n(8,te="Session 1"),rn();return}let st=localStorage.getItem("session"),it=j.find(Rt=>Rt._id===st);At(Ae,i=it||j[0],i),Bn();break}case"rename-session":case"update-session":{let st=Ce.data,it=j.find(Rt=>Rt._id===st._id);it&&(it.name=st.name,it.settings=st.settings),n(4,j);break}case"add-session":{let st=Ce.data;st.tName=st.name,n(4,j=[...j,st]),At(Ae,i=st,i),Bn();break}case"remove-session":{let st=Ce.data;if(n(4,j=j.filter(it=>it._id!=st._id)),j.length===0){n(8,te="Session 1"),rn();return}st._id===i._id&&At(Ae,i=j[0],i);break}}})],U.getSessions(),U.getSolves())}),Es(()=>{J.forEach(Ce=>Ce())});let Se={state:re,ready:Oe,tab:Ee,solves:ye,allSolves:xe,session:Ae,Ao5:De,AoX:de,stats:me,scramble:We,decimals:Ye,group:Ue,mode:be,hintDialog:F,hint:V,cross:_e,xcross:oe,preview:X,prob:fe,isRunning:Le,selected:Pe,sortSolves:Ze,updateStatistics:Re,initScrambler:cn,selectedGroup:Gt,setConfigFromSolve:ve,selectSolve:Ke,selectSolveById:Z};const Te=Ce=>ne("solve",Ce.detail),Be=Ce=>ne("solve",Ce.detail),Je=Ce=>{At(Ae,i=Ce,i),Bn()},ct=(Ce,st)=>{At(Ue,o=st||0,o),Gt()},ut=Ce=>{At(be,r=Ce,r),jt()},Dt=(Ce,st)=>{At(fe,a=st||0,a),mn()};function kt(Ce){w=Ce,de.set(w)}const tn=Ce=>At(Ee,g=Ce||0,g);function Jt(Ce){vt[Ce?"unshift":"push"](()=>{se=Ce,n(5,se)})}function zt(Ce){te=Ce,n(8,te)}const Xt=Ce=>Nn(Ce);function tt(Ce,st){t.$$.not_equal(st.tName,Ce)&&(st.tName=Ce,n(4,j))}const St=(Ce,st,it,Rt)=>{switch(Rt.detail.code){case"Enter":{n(4,st[it].editing=!1,j),z(Ce);break}case"Escape":{Rt.detail.stopPropagation(),n(4,st[it].editing=!1,j);break}}},An=(Ce,st,it)=>{j.forEach(Rt=>Rt.editing=!1),n(4,st[it].editing=!0,j)},In=Ce=>vn(Ce),ss=Ce=>z(Ce),ei=(Ce,st,it)=>n(4,st[it].editing=!1,j);return t.$$set=Ce=>{"battle"in Ce&&n(0,S=Ce.battle),"useScramble"in Ce&&n(52,T=Ce.useScramble),"useMode"in Ce&&n(53,k=Ce.useMode),"genScramble"in Ce&&n(54,A=Ce.genScramble),"enableKeyboard"in Ce&&n(1,L=Ce.enableKeyboard)},t.$$.update=()=>{t.$$.dirty[1]&16777216&&At(Le,y=p===Kt.INSPECTION||p===Kt.RUNNING,y),t.$$.dirty[1]&6291456&&(T||k?cn(T,k):cn())},[S,L,$,W,j,se,K,q,te,i,r,o,a,g,v,w,D,N,ne,re,Ee,ye,xe,Ae,De,de,me,We,Ue,be,F,V,_e,oe,X,fe,Le,Pe,ln,lt,gt,bn,Ot,Nn,mn,jt,Gt,Bn,rn,vn,z,Se,T,k,A,p,Te,Be,Je,ct,ut,Dt,kt,tn,Jt,zt,Xt,tt,St,An,In,ss,ei]}class TA extends xt{constructor(e){super(),wt(this,e,pW,rW,yt,{battle:0,useScramble:52,useMode:53,genScramble:54,enableKeyboard:1},null,[-1,-1,-1,-1])}}function Kx(t,e,n){const i=t.slice();return i[33]=e[n],i}function $x(t,e,n){const i=t.slice();return i[36]=e[n],i}function Qx(t,e,n){const i=t.slice();return i[39]=e[n],i}function eM(t){let e,n,i=t[0].PLL.topFace+"",s,r,o,a,l,c,u=t[0].PLL.cases+"",f,h,d,p,m,_,b;function g(w){t[21](w)}let x={items:t[1],label:vW};t[3]!==void 0&&(x.value=t[3]),o=new Wi({props:x}),vt.push(()=>Vt(o,"value",g));function y(w){t[22](w)}let v={items:t[15],transform:yW};return t[4]!==void 0&&(v.value=t[4]),d=new Wi({props:v}),vt.push(()=>Vt(d,"value",y)),_=new Ct({props:{class:"bg-green-700 hover:bg-green-600 text-gray-300 mx-auto my-4",$$slots:{default:[mW]},$$scope:{ctx:t}}}),_.$on("click",t[17]),{c(){e=C("div"),n=C("span"),s=ae(i),r=O(),ue(o.$$.fragment),l=O(),c=C("span"),f=ae(u),h=O(),ue(d.$$.fragment),m=O(),ue(_.$$.fragment),M(e,"class","grid grid-cols-2 w-max items-center mx-auto gap-4 svelte-160bab9")},m(w,S){R(w,e,S),E(e,n),E(n,s),E(e,r),le(o,e,null),E(e,l),E(e,c),E(c,f),E(e,h),le(d,e,null),R(w,m,S),le(_,w,S),b=!0},p(w,S){(!b||S[0]&1)&&i!==(i=w[0].PLL.topFace+"")&&ke(s,i);const T={};S[0]&2&&(T.items=w[1]),!a&&S[0]&8&&(a=!0,T.value=w[3],Ht(()=>a=!1)),o.$set(T),(!b||S[0]&1)&&u!==(u=w[0].PLL.cases+"")&&ke(f,u);const k={};!p&&S[0]&16&&(p=!0,k.value=w[4],Ht(()=>p=!1)),d.$set(k);const A={};S[0]&1|S[1]&2048&&(A.$$scope={dirty:S,ctx:w}),_.$set(A)},i(w){b||(I(o.$$.fragment,w),I(d.$$.fragment,w),I(_.$$.fragment,w),b=!0)},o(w){H(o.$$.fragment,w),H(d.$$.fragment,w),H(_.$$.fragment,w),b=!1},d(w){w&&P(e),ce(o),ce(d),w&&P(m),ce(_,w)}}}function mW(t){let e=t[0].PLL.next+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&1&&e!==(e=i[0].PLL.next+"")&&ke(n,e)},d(i){i&&P(n)}}}function tM(t){let e,n=t[0].PLL.case+"",i,s,r=t[7]+1+"",o,a,l,c,u,f,h,d,p=t[16],m=[];for(let _=0;_<p.length;_+=1)m[_]=nM(Qx(t,p,_));return{c(){e=C("h3"),i=ae(n),s=O(),o=ae(r),a=ae(" / "),l=ae(t[4]),c=O(),u=C("img"),h=O(),d=C("div");for(let _=0;_<m.length;_+=1)m[_].c();wi(u.src,f=t[9][t[7]])||M(u,"src",f),M(u,"class","puzzle-img"),M(u,"alt",""),M(d,"class","answer-container grid gap-2 my-4 max-w-2xl svelte-160bab9")},m(_,b){R(_,e,b),E(e,i),E(e,s),E(e,o),E(e,a),E(e,l),R(_,c,b),R(_,u,b),R(_,h,b),R(_,d,b);for(let g=0;g<m.length;g+=1)m[g].m(d,null)},p(_,b){if(b[0]&1&&n!==(n=_[0].PLL.case+"")&&ke(i,n),b[0]&128&&r!==(r=_[7]+1+"")&&ke(o,r),b[0]&16&&ke(l,_[4]),b[0]&640&&!wi(u.src,f=_[9][_[7]])&&M(u,"src",f),b[0]&334208){p=_[16];let g;for(g=0;g<p.length;g+=1){const x=Qx(_,p,g);m[g]?m[g].p(x,b):(m[g]=nM(x),m[g].c(),m[g].m(d,null))}for(;g<m.length;g+=1)m[g].d(1);m.length=p.length}},d(_){_&&P(e),_&&P(c),_&&P(u),_&&P(h),_&&P(d),en(m,_)}}}function nM(t){let e,n=t[39]+"",i,s,r;function o(){return t[23](t[39])}return{c(){e=C("button"),i=ae(n),M(e,"class","answer border border-gray-300 p-4 flex items-center justify-center outline-none rounded-md svelte-160bab9"),pt(e,"right",t[39]===t[8][t[7]]&&t[11]),pt(e,"wrong",t[39]!=t[8][t[7]]&&t[39]===t[12]&&t[11])},m(a,l){R(a,e,l),E(e,i),s||(r=$e(e,"click",o),s=!0)},p(a,l){t=a,l[0]&67968&&pt(e,"right",t[39]===t[8][t[7]]&&t[11]),l[0]&72064&&pt(e,"wrong",t[39]!=t[8][t[7]]&&t[39]===t[12]&&t[11])},d(a){a&&P(e),s=!1,r()}}}function iM(t){let e,n,i=t[0].PLL.completed+"",s,r,o,a,l,c,u,f,h,d,p,m,_=t[6]===t[4]&&sM();f=new Ct({props:{class:"ml-12 bg-green-700 hover:bg-green-600 text-gray-300",$$slots:{default:[gW]},$$scope:{ctx:t}}}),f.$on("click",t[17]);let b=t[2],g=[];for(let v=0;v<b.length;v+=1)g[v]=rM($x(t,b,v));let x=t[10],y=[];for(let v=0;v<x.length;v+=1)y[v]=oM(Kx(t,x,v));return{c(){e=C("div"),n=C("span"),s=ae(i),r=ae(": "),o=ae(t[6]),a=ae(" / "),l=ae(t[4]),c=O(),_&&_.c(),u=O(),ue(f.$$.fragment),h=O(),d=C("div");for(let v=0;v<g.length;v+=1)g[v].c();p=O();for(let v=0;v<y.length;v+=1)y[v].c();M(n,"class","mr-1"),M(e,"class","flex items-center text-gray-400 font-bold"),M(d,"class","grid grid-cols-5 mt-8 text-center w-full overflow-scroll place-items-center svelte-160bab9")},m(v,w){R(v,e,w),E(e,n),E(n,s),E(n,r),E(n,o),E(n,a),E(n,l),E(e,c),_&&_.m(e,null),E(e,u),le(f,e,null),R(v,h,w),R(v,d,w);for(let S=0;S<g.length;S+=1)g[S].m(d,null);E(d,p);for(let S=0;S<y.length;S+=1)y[S].m(d,null);m=!0},p(v,w){(!m||w[0]&1)&&i!==(i=v[0].PLL.completed+"")&&ke(s,i),(!m||w[0]&64)&&ke(o,v[6]),(!m||w[0]&16)&&ke(l,v[4]),v[6]===v[4]?_?w[0]&80&&I(_,1):(_=sM(),_.c(),I(_,1),_.m(e,u)):_&&(ot(),H(_,1,1,()=>{_=null}),at());const S={};if(w[0]&1|w[1]&2048&&(S.$$scope={dirty:w,ctx:v}),f.$set(S),w[0]&4){b=v[2];let T;for(T=0;T<b.length;T+=1){const k=$x(v,b,T);g[T]?g[T].p(k,w):(g[T]=rM(k),g[T].c(),g[T].m(d,p))}for(;T<g.length;T+=1)g[T].d(1);g.length=b.length}if(w[0]&1024){x=v[10];let T;for(T=0;T<x.length;T+=1){const k=Kx(v,x,T);y[T]?y[T].p(k,w):(y[T]=oM(k),y[T].c(),y[T].m(d,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=x.length}},i(v){m||(I(_),I(f.$$.fragment,v),m=!0)},o(v){H(_),H(f.$$.fragment,v),m=!1},d(v){v&&P(e),_&&_.d(),ce(f),v&&P(h),v&&P(d),en(g,v),en(y,v)}}}function sM(t){let e,n;return e=new xv({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function gW(t){let e=t[0].PLL.tryAgain+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&1&&e!==(e=i[0].PLL.tryAgain+"")&&ke(n,e)},d(i){i&&P(n)}}}function rM(t){let e,n=t[36]+"",i;return{c(){e=C("strong"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[0]&4&&n!==(n=s[36]+"")&&ke(i,n)},d(s){s&&P(e)}}}function oM(t){let e,n=t[33].id+"",i,s,r,o,a,l,c,u=t[33].expected+"",f,h,d,p,m=t[33].answer+"",_,b,g,x,y=Lt(t[33].time,!1,!0)+"",v,w;return{c(){e=C("span"),i=ae(n),r=O(),o=C("img"),l=O(),c=C("span"),f=ae(u),d=O(),p=C("span"),_=ae(m),g=O(),x=C("span"),v=ae(y),M(e,"class",s=t[33].expected===t[33].answer?"text-green-400":""),wi(o.src,a=t[33].img)||M(o,"src",a),M(o,"alt",""),M(o,"class","puzzle-img flex mx-auto"),M(c,"class",h=t[33].expected===t[33].answer?"text-green-400":""),M(p,"class",b=t[33].expected===t[33].answer?"text-green-400":""),M(x,"class",w=t[33].expected===t[33].answer?"text-green-400":"")},m(S,T){R(S,e,T),E(e,i),R(S,r,T),R(S,o,T),R(S,l,T),R(S,c,T),E(c,f),R(S,d,T),R(S,p,T),E(p,_),R(S,g,T),R(S,x,T),E(x,v)},p(S,T){T[0]&1024&&n!==(n=S[33].id+"")&&ke(i,n),T[0]&1024&&s!==(s=S[33].expected===S[33].answer?"text-green-400":"")&&M(e,"class",s),T[0]&1024&&!wi(o.src,a=S[33].img)&&M(o,"src",a),T[0]&1024&&u!==(u=S[33].expected+"")&&ke(f,u),T[0]&1024&&h!==(h=S[33].expected===S[33].answer?"text-green-400":"")&&M(c,"class",h),T[0]&1024&&m!==(m=S[33].answer+"")&&ke(_,m),T[0]&1024&&b!==(b=S[33].expected===S[33].answer?"text-green-400":"")&&M(p,"class",b),T[0]&1024&&y!==(y=Lt(S[33].time,!1,!0)+"")&&ke(v,y),T[0]&1024&&w!==(w=S[33].expected===S[33].answer?"text-green-400":"")&&M(x,"class",w)},d(S){S&&P(e),S&&P(r),S&&P(o),S&&P(l),S&&P(c),S&&P(d),S&&P(p),S&&P(g),S&&P(x)}}}function _W(t){let e,n=t[0].PLL.keyBindings+"",i,s,r,o=t[0].PLL.singleLetter+"",a,l,c,u,f,h=t[0].PLL.twoVariant+"",d,p,m,_,b,g=t[0].PLL.gPerms+"",x,y,v,w,S;return{c(){e=C("h1"),i=ae(n),s=O(),r=C("h2"),a=ae(o),l=O(),c=C("blockquote"),u=O(),f=C("h2"),d=ae(h),p=O(),m=C("blockquote"),_=O(),b=C("h2"),x=ae(g),y=O(),v=C("blockquote"),M(e,"class","svelte-160bab9"),M(r,"class","svelte-160bab9"),M(c,"contenteditable","false"),t[0].PLL.singleLetterBlock===void 0&&qr(()=>t[24].call(c)),M(f,"class","svelte-160bab9"),M(m,"contenteditable","false"),t[0].PLL.twoVariantBlock===void 0&&qr(()=>t[25].call(m)),M(b,"class","svelte-160bab9"),M(v,"contenteditable","false"),t[0].PLL.gPermsBlock===void 0&&qr(()=>t[26].call(v))},m(T,k){R(T,e,k),E(e,i),R(T,s,k),R(T,r,k),E(r,a),R(T,l,k),R(T,c,k),t[0].PLL.singleLetterBlock!==void 0&&(c.innerHTML=t[0].PLL.singleLetterBlock),R(T,u,k),R(T,f,k),E(f,d),R(T,p,k),R(T,m,k),t[0].PLL.twoVariantBlock!==void 0&&(m.innerHTML=t[0].PLL.twoVariantBlock),R(T,_,k),R(T,b,k),E(b,x),R(T,y,k),R(T,v,k),t[0].PLL.gPermsBlock!==void 0&&(v.innerHTML=t[0].PLL.gPermsBlock),w||(S=[$e(c,"input",t[24]),$e(m,"input",t[25]),$e(v,"input",t[26])],w=!0)},p(T,k){k[0]&1&&n!==(n=T[0].PLL.keyBindings+"")&&ke(i,n),k[0]&1&&o!==(o=T[0].PLL.singleLetter+"")&&ke(a,o),k[0]&1&&T[0].PLL.singleLetterBlock!==c.innerHTML&&(c.innerHTML=T[0].PLL.singleLetterBlock),k[0]&1&&h!==(h=T[0].PLL.twoVariant+"")&&ke(d,h),k[0]&1&&T[0].PLL.twoVariantBlock!==m.innerHTML&&(m.innerHTML=T[0].PLL.twoVariantBlock),k[0]&1&&g!==(g=T[0].PLL.gPerms+"")&&ke(x,g),k[0]&1&&T[0].PLL.gPermsBlock!==v.innerHTML&&(v.innerHTML=T[0].PLL.gPermsBlock)},d(T){T&&P(e),T&&P(s),T&&P(r),T&&P(l),T&&P(c),T&&P(u),T&&P(f),T&&P(p),T&&P(m),T&&P(_),T&&P(b),T&&P(y),T&&P(v),w=!1,Vn(S)}}}function bW(t){let e,n,i=t[0].PLL.title+"",s,r,o,a,l,c,u,f,h,d,p,m,_=t[5]===0&&eM(t),b=t[5]===1&&tM(t),g=t[5]===2&&iM(t);function x(v){t[27](v)}let y={class:"max-w-[70ch] text-justify",$$slots:{default:[_W]},$$scope:{ctx:t}};return t[13]!==void 0&&(y.show=t[13]),f=new La({props:y}),vt.push(()=>Vt(f,"show",x)),{c(){e=C("div"),n=C("h1"),s=ae(i),r=O(),o=C("span"),o.textContent="?",a=O(),_&&_.c(),l=O(),b&&b.c(),c=O(),g&&g.c(),u=O(),ue(f.$$.fragment),M(n,"class","text-center text-3xl mb-4 text-gray-300 font-bold svelte-160bab9"),M(o,"class","absolute right-4 top-4 bg-gray-500 text-gray-200 w-6 h-6 flex items-center justify-center cursor-pointer rounded-full shadow-md hover:shadow-lg hover:bg-gray-400 font-bold transition-all duration-200 "),M(e,"class","text-gray-400 container-mini bg-white bg-opacity-10 w-4/5 mx-auto rounded-md flex flex-col items-center px-4 py-8 cnt relative  svelte-160bab9")},m(v,w){R(v,e,w),E(e,n),E(n,s),E(e,r),E(e,o),E(e,a),_&&_.m(e,null),E(e,l),b&&b.m(e,null),E(e,c),g&&g.m(e,null),E(e,u),le(f,e,null),d=!0,p||(m=[$e(window,"keyup",t[19]),$e(o,"click",t[20])],p=!0)},p(v,w){(!d||w[0]&1)&&i!==(i=v[0].PLL.title+"")&&ke(s,i),v[5]===0?_?(_.p(v,w),w[0]&32&&I(_,1)):(_=eM(v),_.c(),I(_,1),_.m(e,l)):_&&(ot(),H(_,1,1,()=>{_=null}),at()),v[5]===1?b?b.p(v,w):(b=tM(v),b.c(),b.m(e,c)):b&&(b.d(1),b=null),v[5]===2?g?(g.p(v,w),w[0]&32&&I(g,1)):(g=iM(v),g.c(),I(g,1),g.m(e,u)):g&&(ot(),H(g,1,1,()=>{g=null}),at());const S={};w[0]&1|w[1]&2048&&(S.$$scope={dirty:w,ctx:v}),!h&&w[0]&8192&&(h=!0,S.show=v[13],Ht(()=>h=!1)),f.$set(S)},i(v){d||(I(_),I(g),I(f.$$.fragment,v),d=!0)},o(v){H(_),H(g),H(f.$$.fragment,v),d=!1},d(v){v&&P(e),_&&_.d(),b&&b.d(),g&&g.d(),ce(f),p=!1,Vn(m)}}}const vW=t=>t.label,yW=t=>t;function wW(t,e,n){let i,s=Rr(Hi,J=>Dr(J));dt(t,s,J=>n(0,i=J));let r=[{value:"random",label:"Color neutral"},{value:"",label:"White"},{value:"x2",label:"Yellow"},{value:"z'",label:"Red"},{value:"z",label:"Orange"},{value:"x'",label:"Blue"},{value:"x",label:"Green"}],o=["No.","Case","Expected","Answer","Time"],a=[10,20,30,40,50,60,70,80,90,100],l="random",c=20,u=0,f=0,h,d=[],p=[],m=[],_=rp.slice().sort(),b=[],g=[],x=!1,y="",v,w=!1;function S(){switch(u){case 0:{n(8,d.length=0,d),n(9,p.length=0,p),m.length=0,b.length=0,n(7,h=0);let J=rp.length,se=[];for(let ne=0,K=c;ne<K;ne+=1){let q=~~(Math.random()*J),te=r4(null,null,q);d.push(rp[q]);let re=l==="random"?["x","x'","","z","z'","x2"][~~(Math.random()*6)]:l,Oe=["","y","y'","y2"][~~(Math.random()*4)];se.push(Ns.fromSequence(re+" "+Oe+" "+te,{type:"rubik",view:"trans"}))}Ol(se,void 0,!0).then(ne=>{let K=ne.subscribe(q=>{q!=="__initial__"&&(q!==null?p.push(...q):(v=Date.now(),n(5,u=1),setTimeout(()=>K())))})});break}case 1:{n(10,g.length=0,g);for(let J=0,se=c;J<se;J+=1)g.push({id:J+1,img:p[J],expected:d[J],answer:m[J],time:b[J]});n(5,u=2);break}case 2:{n(6,f=0),n(5,u=0);break}}}function T(J){m.push(J),b.push(Date.now()-v),n(12,y=J),n(11,x=!0),J===d[h]&&n(6,f+=1),setTimeout(()=>{n(11,x=!1),n(7,h+=1),v=Date.now(),h===c&&S()},1e3)}function k(J){if(u!=1)return;let se=[/^(Numpad|Digit)1$/,/^(Numpad|Digit)2$/,/^(Numpad|Digit)3$/,/^(Numpad|Digit)4$/],ne=/^Key[AJNRU]$/,K=/^Key[EFHTVYZ]$/;se.some(q=>q.test(J.code))?T(["Ga","Gb","Gc","Gd"][+J.code.slice(-1)-1]):ne.test(J.code)?T(J.code.slice(-1)+(J.shiftKey?"b":"a")):K.test(J.code)&&T(J.code.slice(-1))}function A(){n(1,r[0].label=i.PLL.colorNeutral,r),n(1,r[1].label=i.PLL.white,r),n(1,r[2].label=i.PLL.yellow,r),n(1,r[3].label=i.PLL.red,r),n(1,r[4].label=i.PLL.orange,r),n(1,r[5].label=i.PLL.blue,r),n(1,r[6].label=i.PLL.green,r),n(2,o=["No.",i.PLL.case,i.PLL.expected,i.PLL.answer,i.PLL.time])}const L=()=>n(13,w=!0);function D(J){l=J,n(3,l)}function B(J){c=J,n(4,c)}const U=J=>T(J);function N(){i.PLL.singleLetterBlock=this.innerHTML,s.set(i)}function $(){i.PLL.twoVariantBlock=this.innerHTML,s.set(i)}function W(){i.PLL.gPermsBlock=this.innerHTML,s.set(i)}function j(J){w=J,n(13,w)}return t.$$.update=()=>{t.$$.dirty[0]&1&&A()},[i,r,o,l,c,u,f,h,d,p,g,x,y,w,s,a,_,S,T,k,L,D,B,U,N,$,W,j]}class xW extends xt{constructor(e){super(),wt(this,e,wW,bW,yt,{},null,[-1,-1])}}function aM(t,e,n){const i=t.slice();return i[22]=e[n],i[24]=n,i}function lM(t,e,n){const i=t.slice();return i[25]=e[n],i}function cM(t,e,n){const i=t.slice();return i[28]=e[n],i}function uM(t,e,n){const i=t.slice();return i[19]=e[n],i}function MW(t){let e,n,i,s=t[2]<2&&fM(t),r=(t[2]===2||t[2]>=4)&&dM(t);return{c(){s&&s.c(),e=O(),r&&r.c(),n=ts()},m(o,a){s&&s.m(o,a),R(o,e,a),r&&r.m(o,a),R(o,n,a),i=!0},p(o,a){o[2]<2?s?(s.p(o,a),a[0]&4&&I(s,1)):(s=fM(o),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(ot(),H(s,1,1,()=>{s=null}),at()),o[2]===2||o[2]>=4?r?r.p(o,a):(r=dM(o),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i(o){i||(I(s),i=!0)},o(o){H(s),i=!1},d(o){s&&s.d(o),o&&P(e),r&&r.d(o),o&&P(n)}}}function SW(t){var A,L;let e,n,i=((A=t[3])==null?void 0:A.name)+"",s,r,o,a,l,c,u,f,h,d=t[5].ALGORITHMS.solution+"",p,m,_,b=t[5].ALGORITHMS.moves+"",g,x,y,v,w,S=((L=t[3])==null?void 0:L.solutions)||[],T=[];for(let D=0;D<S.length;D+=1)T[D]=gM(uM(t,S,D));const k=D=>H(T[D],1,1,()=>{T[D]=null});return{c(){var D,B;e=C("div"),n=C("h1"),s=ae(i),r=O(),o=C("img"),l=O(),c=C("div"),u=C("h2"),f=O(),h=C("h2"),p=ae(d),m=O(),_=C("h2"),g=ae(b),x=O(),y=C("h2"),v=O();for(let U=0;U<T.length;U+=1)T[U].c();M(n,"class","text-gray-300 text-3xl font-bold text-center"),wi(o.src,a=(B=(D=t[3])==null?void 0:D._puzzle)==null?void 0:B.img)||M(o,"src",a),M(o,"class","puzzle-img flex mx-auto"),M(o,"alt",""),M(u,"class","col-span-1 font-bold text-xl"),M(h,"class","col-span-3 font-bold text-xl text-gray-300"),M(_,"class","col-span-1 font-bold text-xl text-gray-300"),M(y,"class","col-span-1 font-bold text-xl"),M(c,"class","grid grid-cols-6"),M(e,"class","svelte-1mzn3bq")},m(D,B){R(D,e,B),E(e,n),E(n,s),E(e,r),E(e,o),E(e,l),E(e,c),E(c,u),E(c,f),E(c,h),E(h,p),E(c,m),E(c,_),E(_,g),E(c,x),E(c,y),E(c,v);for(let U=0;U<T.length;U+=1)T[U].m(c,null);w=!0},p(D,B){var U,N,$,W;if((!w||B[0]&8)&&i!==(i=((U=D[3])==null?void 0:U.name)+"")&&ke(s,i),(!w||B[0]&8&&!wi(o.src,a=($=(N=D[3])==null?void 0:N._puzzle)==null?void 0:$.img))&&M(o,"src",a),(!w||B[0]&32)&&d!==(d=D[5].ALGORITHMS.solution+"")&&ke(p,d),(!w||B[0]&32)&&b!==(b=D[5].ALGORITHMS.moves+"")&&ke(g,b),B[0]&520){S=((W=D[3])==null?void 0:W.solutions)||[];let j;for(j=0;j<S.length;j+=1){const J=uM(D,S,j);T[j]?(T[j].p(J,B),I(T[j],1)):(T[j]=gM(J),T[j].c(),I(T[j],1),T[j].m(c,null))}for(ot(),j=S.length;j<T.length;j+=1)k(j);at()}},i(D){if(!w){for(let B=0;B<S.length;B+=1)I(T[B]);w=!0}},o(D){T=T.filter(Boolean);for(let B=0;B<T.length;B+=1)H(T[B]);w=!1},d(D){D&&P(e),en(T,D)}}}function fM(t){let e,n,i=t[0],s=[];for(let o=0;o<i.length;o+=1)s[o]=hM(cM(t,i,o));const r=o=>H(s[o],1,1,()=>{s[o]=null});return{c(){e=C("ul");for(let o=0;o<s.length;o+=1)s[o].c();M(e,"class","w-full grid svelte-1mzn3bq")},m(o,a){R(o,e,a);for(let l=0;l<s.length;l+=1)s[l].m(e,null);n=!0},p(o,a){if(a[0]&1){i=o[0];let l;for(l=0;l<i.length;l+=1){const c=cM(o,i,l);s[l]?(s[l].p(c,a),I(s[l],1)):(s[l]=hM(c),s[l].c(),I(s[l],1),s[l].m(e,null))}for(ot(),l=i.length;l<s.length;l+=1)r(l);at()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)I(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)H(s[a]);n=!1},d(o){o&&P(e),en(s,o)}}}function EW(t){let e,n,i,s,r,o,a=t[28].title+"",l,c;return{c(){var u,f;e=C("li"),n=C("img"),r=O(),o=C("h2"),l=ae(a),c=O(),M(n,"class","w-32 h-32"),wi(n.src,i=((f=(u=t[28])==null?void 0:u.puzzle)==null?void 0:f.img)||"")||M(n,"src",i),M(n,"alt",s=t[28].title),M(e,"class","w-40 h-48 text-center shadow-md rounded-md select-none cursor-pointer transition-all duration-200 flex flex-col items-center justify-between py-3 bg-white bg-opacity-10 text-gray-400 hover:rotate-3 hover:shadow-lg")},m(u,f){R(u,e,f),E(e,n),E(e,r),E(e,o),E(o,l),R(u,c,f)},p(u,f){var h,d;f[0]&1&&!wi(n.src,i=((d=(h=u[28])==null?void 0:h.puzzle)==null?void 0:d.img)||"")&&M(n,"src",i),f[0]&1&&s!==(s=u[28].title)&&M(n,"alt",s),f[0]&1&&a!==(a=u[28].title+"")&&ke(l,a)},d(u){u&&P(e),u&&P(c)}}}function hM(t){let e,n;return e=new Mh({props:{to:t[28].route,$$slots:{default:[EW]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.to=i[28].route),s[0]&1|s[1]&1&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function dM(t){let e,n,i,s=t[5].ALGORITHMS.case+"",r,o,a,l,c,u=t[5].ALGORITHMS.algorithms+"",f,h,d=t[1],p=[];for(let m=0;m<d.length;m+=1)p[m]=mM(aM(t,d,m));return{c(){e=C("div"),n=C("div"),i=C("span"),r=ae(s),o=O(),a=C("span"),l=O(),c=C("span"),f=ae(u),h=O();for(let m=0;m<p.length;m+=1)p[m].c();M(i,"class","text-gray-300 font-bold"),M(a,"class","text-gray-300 font-bold"),M(c,"class","text-gray-300 font-bold"),M(n,"class","row svelte-1mzn3bq"),M(e,"class","grid text-gray-400 svelte-1mzn3bq")},m(m,_){R(m,e,_),E(e,n),E(n,i),E(i,r),E(n,o),E(n,a),E(n,l),E(n,c),E(c,f),E(e,h);for(let b=0;b<p.length;b+=1)p[b].m(e,null)},p(m,_){if(_[0]&32&&s!==(s=m[5].ALGORITHMS.case+"")&&ke(r,s),_[0]&32&&u!==(u=m[5].ALGORITHMS.algorithms+"")&&ke(f,u),_[0]&258){d=m[1];let b;for(b=0;b<d.length;b+=1){const g=aM(m,d,b);p[b]?p[b].p(g,_):(p[b]=mM(g),p[b].c(),p[b].m(e,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=d.length}},d(m){m&&P(e),en(p,m)}}}function pM(t){let e,n=t[25].moves+"",i;return{c(){e=C("li"),i=ae(n),M(e,"class","algorithm")},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[0]&2&&n!==(n=s[25].moves+"")&&ke(i,n)},d(s){s&&P(e)}}}function mM(t){let e,n,i=t[22].name+"",s,r,o,a,l,c,u,f,h;function d(){return t[12](t[22])}let p=(t[22].solutions||[]).slice(0,4),m=[];for(let _=0;_<p.length;_+=1)m[_]=pM(lM(t,p,_));return{c(){var _,b;e=C("div"),n=C("span"),s=ae(i),r=O(),o=C("img"),l=O(),c=C("ul");for(let g=0;g<m.length;g+=1)m[g].c();u=O(),M(n,"class","font-bold"),M(o,"class","puzzle-img hover:shadow-lg transition-all duration-200 cursor-pointer svelte-1mzn3bq"),wi(o.src,a=((b=(_=t[22])==null?void 0:_._puzzle)==null?void 0:b.img)||"")||M(o,"src",a),M(o,"alt",""),M(c,"class","svelte-1mzn3bq"),M(e,"class","row svelte-1mzn3bq")},m(_,b){R(_,e,b),E(e,n),E(n,s),E(e,r),E(e,o),E(e,l),E(e,c);for(let g=0;g<m.length;g+=1)m[g].m(c,null);E(e,u),f||(h=$e(o,"click",d),f=!0)},p(_,b){var g,x;if(t=_,b[0]&2&&i!==(i=t[22].name+"")&&ke(s,i),b[0]&2&&!wi(o.src,a=((x=(g=t[22])==null?void 0:g._puzzle)==null?void 0:x.img)||"")&&M(o,"src",a),b[0]&2){p=(t[22].solutions||[]).slice(0,4);let y;for(y=0;y<p.length;y+=1){const v=lM(t,p,y);m[y]?m[y].p(v,b):(m[y]=pM(v),m[y].c(),m[y].m(c,null))}for(;y<m.length;y+=1)m[y].d(1);m.length=p.length}},d(_){_&&P(e),en(m,_),f=!1,h()}}}function TW(t){let e,n=t[19].moves+"",i,s,r;function o(){return t[11](t[19])}return{c(){e=C("span"),i=ae(n),M(e,"class","mt-2 cursor-pointer hover:text-gray-300 transition-all duration-200")},m(a,l){R(a,e,l),E(e,i),s||(r=$e(e,"click",o),s=!0)},p(a,l){t=a,l[0]&8&&n!==(n=t[19].moves+"")&&ke(i,n)},d(a){a&&P(e),s=!1,r()}}}function gM(t){let e,n,i,s,r,o=t[19].moves.split(" ").length+"",a,l,c,u;return i=new $i({props:{position:"left",text:"Click to copy",class:"col-span-3",$$slots:{default:[TW]},$$scope:{ctx:t}}}),{c(){e=C("span"),n=O(),ue(i.$$.fragment),s=O(),r=C("span"),a=ae(o),l=O(),c=C("span"),M(e,"class","col-span-1"),M(r,"class","col-span-1 mt-2"),M(c,"class","col-span-1")},m(f,h){R(f,e,h),R(f,n,h),le(i,f,h),R(f,s,h),R(f,r,h),E(r,a),R(f,l,h),R(f,c,h),u=!0},p(f,h){const d={};h[0]&8|h[1]&1&&(d.$$scope={dirty:h,ctx:f}),i.$set(d),(!u||h[0]&8)&&o!==(o=f[19].moves.split(" ").length+"")&&ke(a,o)},i(f){u||(I(i.$$.fragment,f),u=!0)},o(f){H(i.$$.fragment,f),u=!1},d(f){f&&P(e),f&&P(n),ce(i,f),f&&P(s),f&&P(r),f&&P(l),f&&P(c)}}}function kW(t){let e,n,i,s,r,o;const a=[SW,MW],l=[];function c(u,f){return u[4]?0:1}return n=c(t),i=l[n]=a[n](t),{c(){e=C("main"),i.c(),M(e,"class","container-mini overflow-hidden text-gray-400 svelte-1mzn3bq")},m(u,f){R(u,e,f),l[n].m(e,null),s=!0,r||(o=$e(window,"keyup",t[7]),r=!0)},p(u,f){let h=n;n=c(u),n===h?l[n].p(u,f):(ot(),H(l[h],1,1,()=>{l[h]=null}),at(),i=l[n],i?i.p(u,f):(i=l[n]=a[n](u),i.c()),I(i,1),i.m(e,null))},i(u){s||(I(i),s=!0)},o(u){H(i),s=!1},d(u){u&&P(e),l[n].d(),r=!1,o()}}}function AW(t){const e=/^(\d*)[xX](\d*)$/,n=/^(\d*)[xX](\d*)[xX](\d*)$/,i=/^(\d){3}$/;let s;if(e.test(t))return["rubik",+t.replace(e,"$1")];if(n.test(t))return s=t.replace(n,"$1 $2 $3").split(" ").map(Number),["rubik",...s];if(i.test(t))return s=t.split("").map(Number),["rubik",...s];switch(t){case"sq1":case"Square-1":return["square1"];case"Skewb":return["skewb"];case"Pyraminx":return["pyraminx"];case"Axis":return["axis"];case"Fisher":return["fisher"];case"Ivy":return["ivy"];default:return["rubik",3]}}function LW(t,e,n){let i,{location:s}=e,r=Rr(Hi,(w,S)=>{S(Dr(w))});dt(t,r,w=>n(5,i=w));const o=Ds.getInstance(),a=Xr.getInstance();let l="",c=[],u=[],f=0,h=null,d=!1,p;function m(w){if(n(2,f=0),n(0,c.length=0,c),n(1,u.length=0,u),w.length>0&&w.find(A=>A.hasOwnProperty("solutions"))){for(let A=0,L=w.length;A<L;A+=1)w[A].hasOwnProperty("solutions")||(w[A].solutions=[{moves:w[A].scramble,votes:0}]);n(2,f=2)}w.sort(function(k,A){let L=k.name.split(" ").map(B=>B.toLowerCase()),D=A.name.split(" ").map(B=>B.toLowerCase());for(let B=0,U=Math.min(L.length,D.length);B<U;B+=1)if(L[B]!=D[B])return!isNaN(parseInt(L[B]))&&!isNaN(parseInt(D[B]))?parseInt(L[B])-parseInt(D[B]):L[B]<D[B]?-1:1;return k<A?-1:1});let S=w.map(k=>{let A=AW(k.puzzle||""),L=k.scramble+" z2";return Ns.fromSequence(L,{type:A[0],order:A.slice(1,A.length),mode:k.mode,view:k.view,tips:k.tips,headless:!0},!0)});for(let k=0,A=w.length;k<A;k+=1){let L=w[k];f<2?c.push({title:L.name,cube:"",ready:!1,route:"/algorithms"+(L.parentPath?"/"+L.parentPath:"")+"/"+L.shortName,puzzle:S[k]}):(L.cube="",L.ready=!1,L.parentPath="/algorithms/"+L.parentPath,L._puzzle=S[k],u.push(L))}let T=f<2?c.map(k=>k.puzzle):u.map(k=>k._puzzle);Ol(T,250,!1,!0).then(k=>{let A=k.subscribe(L=>{L===null&&(n(0,c),n(1,u),A())})})}function _(w){w.code==="Escape"&&d&&Fp(s.pathname.split("?")[0])}function b(w){let T=ak(w.search).get("case"),k=u.filter(L=>L.shortName===T);T&&k.length?(n(3,h=k[0]),n(4,d=!0)):n(4,d=!1);let A=w.pathname.split("/").slice(2).join("/");(A!=l||!A)&&(n(0,c.length=0,c),n(1,u.length=0,u),l=A,o.getAlgorithms(A))}function g(w){Fp(w.parentPath+"?case="+w.shortName)}function x(w){navigator.clipboard.writeText(w).then(()=>{a.addNotification({key:crypto.randomUUID(),header:i.global.done,text:i.global.scrambleCopied,timeout:1e3})})}ji(()=>{p=o.algSub.subscribe(w=>{m(w)})}),Es(()=>{p()});const y=w=>x(w.moves),v=w=>g(w);return t.$$set=w=>{"location"in w&&n(10,s=w.location)},t.$$.update=()=>{t.$$.dirty[0]&1024&&b(s)},[c,u,f,h,d,i,r,_,g,x,s,y,v]}class CW extends xt{constructor(e){super(),wt(this,e,LW,kW,yt,{location:10},null,[-1,-1])}}Number.EPSILON===void 0&&(Number.EPSILON=Math.pow(2,-52));Number.isInteger===void 0&&(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});Math.sign===void 0&&(Math.sign=function(t){return t<0?-1:t>0?1:+t});"name"in Function.prototype||Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});Object.assign===void 0&&(Object.assign=function(t){if(t==null)throw new TypeError("Cannot convert undefined or null to object");const e=Object(t);for(let n=1;n<arguments.length;n++){const i=arguments[n];if(i!=null)for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e});const PW="120",M0={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},RW=0,_M=1,IW=2,kA=1,DW=2,Ku=3,Mg=0,Ui=1,Ml=2,AA=1,_f=0,bf=1,bM=2,vM=3,yM=4,OW=5,gc=100,NW=101,BW=102,wM=103,xM=104,FW=200,zW=201,UW=202,HW=203,LA=204,CA=205,VW=206,GW=207,WW=208,jW=209,YW=210,qW=0,XW=1,ZW=2,a_=3,JW=4,KW=5,$W=6,QW=7,Sg=0,ej=1,tj=2,vf=0,nj=1,ij=2,sj=3,rj=4,oj=5,Mv=300,Eg=301,Tg=302,l_=303,c_=304,kg=306,Ag=307,Lm=1e3,ys=1001,Cm=1002,Xi=1003,u_=1004,f_=1005,Gi=1006,PA=1007,Bh=1008,Sv=1009,aj=1010,lj=1011,Pm=1012,cj=1013,Lp=1014,fa=1015,Rm=1016,uj=1017,fj=1018,hj=1019,yf=1020,dj=1021,dl=1022,Tr=1023,pj=1024,mj=1025,Gc=1026,nh=1027,gj=1028,_j=1029,bj=1030,vj=1031,yj=1032,wj=1033,MM=33776,SM=33777,EM=33778,TM=33779,kM=35840,AM=35841,LM=35842,CM=35843,xj=36196,PM=37492,RM=37496,Mj=37808,Sj=37809,Ej=37810,Tj=37811,kj=37812,Aj=37813,Lj=37814,Cj=37815,Pj=37816,Rj=37817,Ij=37818,Dj=37819,Oj=37820,Nj=37821,Bj=36492,Fj=37840,zj=37841,Uj=37842,Hj=37843,Vj=37844,Gj=37845,Wj=37846,jj=37847,Yj=37848,qj=37849,Xj=37850,Zj=37851,Jj=37852,Kj=37853,$j=2200,Qj=2201,eY=2202,Im=2300,Cp=2301,S0=2302,wc=2400,xc=2401,Dm=2402,Ev=2500,RA=2501,tY=0,Fh=3e3,IA=3001,nY=3007,iY=3002,sY=3003,rY=3004,oY=3005,aY=3006,lY=3200,cY=3201,_u=0,uY=1,E0=7680,fY=519,Lg=35044,ih=35048,IM="300 es";function co(){}Object.assign(co.prototype,{addEventListener:function(t,e){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)},hasEventListener:function(t,e){if(this._listeners===void 0)return!1;const n=this._listeners;return n[t]!==void 0&&n[t].indexOf(e)!==-1},removeEventListener:function(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const s=i.indexOf(e);s!==-1&&i.splice(s,1)}},dispatchEvent:function(t){if(this._listeners===void 0)return;const n=this._listeners[t.type];if(n!==void 0){t.target=this;const i=n.slice(0);for(let s=0,r=i.length;s<r;s++)i[s].call(this,t)}}});const Fi=[];for(let t=0;t<256;t++)Fi[t]=(t<16?"0":"")+t.toString(16);let _d=1234567;const Qt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Fi[t&255]+Fi[t>>8&255]+Fi[t>>16&255]+Fi[t>>24&255]+"-"+Fi[e&255]+Fi[e>>8&255]+"-"+Fi[e>>16&15|64]+Fi[e>>24&255]+"-"+Fi[n&63|128]+Fi[n>>8&255]+"-"+Fi[n>>16&255]+Fi[n>>24&255]+Fi[i&255]+Fi[i>>8&255]+Fi[i>>16&255]+Fi[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,s){return i+(t-e)*(s-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return t!==void 0&&(_d=t%2147483647),_d=_d*16807%2147483647,(_d-1)/2147483646},degToRad:function(t){return t*Qt.DEG2RAD},radToDeg:function(t){return t*Qt.RAD2DEG},isPowerOfTwo:function(t){return(t&t-1)===0&&t!==0},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,s){const r=Math.cos,o=Math.sin,a=r(n/2),l=o(n/2),c=r((e+i)/2),u=o((e+i)/2),f=r((e-i)/2),h=o((e-i)/2),d=r((i-e)/2),p=o((i-e)/2);switch(s){case"XYX":t.set(a*u,l*f,l*h,a*c);break;case"YZY":t.set(l*h,a*u,l*f,a*c);break;case"ZXZ":t.set(l*f,l*h,a*u,a*c);break;case"XZX":t.set(a*u,l*p,l*d,a*c);break;case"YXY":t.set(l*d,a*u,l*p,a*c);break;case"ZYZ":t.set(l*p,l*d,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}};class je{constructor(e=0,n=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6],this.y=s[1]*n+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),s=Math.sin(n),r=this.x-e.x,o=this.y-e.y;return this.x=r*i-o*s+e.x,this.y=r*s+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class ws{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,s,r,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=s,u[2]=a,u[3]=n,u[4]=r,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],d=i[5],p=i[8],m=s[0],_=s[3],b=s[6],g=s[1],x=s[4],y=s[7],v=s[2],w=s[5],S=s[8];return r[0]=o*m+a*g+l*v,r[3]=o*_+a*x+l*w,r[6]=o*b+a*y+l*S,r[1]=c*m+u*g+f*v,r[4]=c*_+u*x+f*w,r[7]=c*b+u*y+f*S,r[2]=h*m+d*g+p*v,r[5]=h*_+d*x+p*w,r[8]=h*b+d*y+p*S,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-i*r*u+i*a*l+s*r*c-s*o*l}getInverse(e,n){n!==void 0&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");const i=e.elements,s=this.elements,r=i[0],o=i[1],a=i[2],l=i[3],c=i[4],u=i[5],f=i[6],h=i[7],d=i[8],p=d*c-u*h,m=u*f-d*l,_=h*l-c*f,b=r*p+o*m+a*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/b;return s[0]=p*g,s[1]=(a*h-d*o)*g,s[2]=(u*o-a*c)*g,s[3]=m*g,s[4]=(d*r-a*f)*g,s[5]=(a*l-u*r)*g,s[6]=_*g,s[7]=(o*f-h*r)*g,s[8]=(c*r-o*l)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).getInverse(this).transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,s,r,o,a){const l=Math.cos(r),c=Math.sin(r);this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-s*c,s*l,-s*(-c*o+l*a)+a+n,0,0,1)}scale(e,n){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),s=this.elements,r=s[0],o=s[3],a=s[6],l=s[1],c=s[4],u=s[7];return s[0]=n*r+i*l,s[3]=n*o+i*c,s[6]=n*a+i*u,s[1]=-i*r+n*l,s[4]=-i*o+n*c,s[7]=-i*a+n*u,this}translate(e,n){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<9;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n){n===void 0&&(n=0);for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}}let Jl;const Sl={getDataURL:function(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Jl===void 0&&(Jl=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Jl.width=t.width,Jl.height=t.height;const n=Jl.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Jl}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let hY=0;function Hn(t,e,n,i,s,r,o,a,l,c){Object.defineProperty(this,"id",{value:hY++}),this.uuid=Qt.generateUUID(),this.name="",this.image=t!==void 0?t:Hn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=e!==void 0?e:Hn.DEFAULT_MAPPING,this.wrapS=n!==void 0?n:ys,this.wrapT=i!==void 0?i:ys,this.magFilter=s!==void 0?s:Gi,this.minFilter=r!==void 0?r:Bh,this.anisotropy=l!==void 0?l:1,this.format=o!==void 0?o:Tr,this.internalFormat=null,this.type=a!==void 0?a:Sv,this.offset=new je(0,0),this.repeat=new je(1,1),this.center=new je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ws,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c!==void 0?c:Fh,this.version=0,this.onUpdate=null}Hn.DEFAULT_IMAGE=void 0;Hn.DEFAULT_MAPPING=Mv;Hn.prototype=Object.assign(Object.create(co.prototype),{constructor:Hn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Qt.generateUUID()),!e&&t.images[i.uuid]===void 0){let s;if(Array.isArray(i)){s=[];for(let r=0,o=i.length;r<o;r++)s.push(Sl.getDataURL(i[r]))}else s=Sl.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:s}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==Mv)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Lm:t.x=t.x-Math.floor(t.x);break;case ys:t.x=t.x<0?0:1;break;case Cm:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Lm:t.y=t.y-Math.floor(t.y);break;case ys:t.y=t.y<0?0:1;break;case Cm:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}});Object.defineProperty(Hn.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});class Un{constructor(e=0,n=0,i=0,s=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=n,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,s){return this.x=e,this.y=n,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*s+o[12]*r,this.y=o[1]*n+o[5]*i+o[9]*s+o[13]*r,this.z=o[2]*n+o[6]*i+o[10]*s+o[14]*r,this.w=o[3]*n+o[7]*i+o[11]*s+o[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,s,r;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],p=l[9],m=l[2],_=l[6],b=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-m)<.01&&Math.abs(p-_)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+m)<.1&&Math.abs(p+_)<.1&&Math.abs(c+d+b-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(c+1)/2,y=(d+1)/2,v=(b+1)/2,w=(u+h)/4,S=(f+m)/4,T=(p+_)/4;return x>y&&x>v?x<.01?(i=0,s=.707106781,r=.707106781):(i=Math.sqrt(x),s=w/i,r=S/i):y>v?y<.01?(i=.707106781,s=0,r=.707106781):(s=Math.sqrt(y),i=w/s,r=T/s):v<.01?(i=.707106781,s=.707106781,r=0):(r=Math.sqrt(v),i=S/r,s=T/r),this.set(i,s,r,n),this}let g=Math.sqrt((_-p)*(_-p)+(f-m)*(f-m)+(h-u)*(h-u));return Math.abs(g)<.001&&(g=1),this.x=(_-p)/g,this.y=(f-m)/g,this.z=(h-u)/g,this.w=Math.acos((c+d+b-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}function kr(t,e,n){this.width=t,this.height=e,this.scissor=new Un(0,0,t,e),this.scissorTest=!1,this.viewport=new Un(0,0,t,e),n=n||{},this.texture=new Hn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Gi,this.depthBuffer=n.depthBuffer!==void 0?n.depthBuffer:!0,this.stencilBuffer=n.stencilBuffer!==void 0?n.stencilBuffer:!1,this.depthTexture=n.depthTexture!==void 0?n.depthTexture:null}kr.prototype=Object.assign(Object.create(co.prototype),{constructor:kr,isWebGLRenderTarget:!0,setSize:function(t,e){(this.width!==t||this.height!==e)&&(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});function DM(t,e,n){kr.call(this,t,e,n),this.samples=4}DM.prototype=Object.assign(Object.create(kr.prototype),{constructor:DM,isWebGLMultisampleRenderTarget:!0,copy:function(t){return kr.prototype.copy.call(this,t),this.samples=t.samples,this}});class Ki{constructor(e=0,n=0,i=0,s=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=n,this._z=i,this._w=s}static slerp(e,n,i,s){return i.copy(e).slerp(n,s)}static slerpFlat(e,n,i,s,r,o,a){let l=i[s+0],c=i[s+1],u=i[s+2],f=i[s+3];const h=r[o+0],d=r[o+1],p=r[o+2],m=r[o+3];if(f!==m||l!==h||c!==d||u!==p){let _=1-a;const b=l*h+c*d+u*p+f*m,g=b>=0?1:-1,x=1-b*b;if(x>Number.EPSILON){const v=Math.sqrt(x),w=Math.atan2(v,b*g);_=Math.sin(_*w)/v,a=Math.sin(a*w)/v}const y=a*g;if(l=l*_+h*y,c=c*_+d*y,u=u*_+p*y,f=f*_+m*y,_===1-a){const v=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=v,c*=v,u*=v,f*=v}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=f}static multiplyQuaternionsFlat(e,n,i,s,r,o){const a=i[s],l=i[s+1],c=i[s+2],u=i[s+3],f=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return e[n]=a*p+u*f+l*d-c*h,e[n+1]=l*p+u*h+c*f-a*d,e[n+2]=c*p+u*d+a*h-l*f,e[n+3]=u*p-a*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,s=e._y,r=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(s/2),f=a(r/2),h=l(i/2),d=l(s/2),p=l(r/2);switch(o){case"XYZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"YXZ":this._x=h*u*f+c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"ZXY":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f-h*d*p;break;case"ZYX":this._x=h*u*f-c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f+h*d*p;break;case"YZX":this._x=h*u*f+c*d*p,this._y=c*d*f+h*u*p,this._z=c*u*p-h*d*f,this._w=c*u*f-h*d*p;break;case"XZY":this._x=h*u*f-c*d*p,this._y=c*d*f-h*u*p,this._z=c*u*p+h*d*f,this._w=c*u*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],s=n[4],r=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],f=n[10],h=i+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(r-c)*d,this._z=(o-s)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(u-l)/d,this._x=.25*d,this._y=(s+o)/d,this._z=(r+c)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(r-c)/d,this._x=(s+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(o-s)/d,this._x=(r+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let s=e.dot(n)+1;return s<1e-6?(s=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=s):(this._x=0,this._y=-e.z,this._z=e.y,this._w=s)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=s),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Qt.clamp(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,n/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}inverse(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,s=e._y,r=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+o*a+s*c-r*l,this._y=s*u+o*l+r*a-i*c,this._z=r*u+o*c+i*l-s*a,this._w=o*u-i*a-s*l-r*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,s=this._y,r=this._z,o=this._w;let a=o*e._w+i*e._x+s*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=s,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*i+n*this._x,this._y=d*s+n*this._y,this._z=d*r+n*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-n)*u)/c,h=Math.sin(n*u)/c;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=s*f+this._y*h,this._z=r*f+this._z*h,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n){return n===void 0&&(n=0),this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}class ee{constructor(e=0,n=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(OM.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(OM.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6]*s,this.y=r[1]*n+r[4]*i+r[7]*s,this.z=r[2]*n+r[5]*i+r[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,s=this.z,r=e.elements,o=1/(r[3]*n+r[7]*i+r[11]*s+r[15]);return this.x=(r[0]*n+r[4]*i+r[8]*s+r[12])*o,this.y=(r[1]*n+r[5]*i+r[9]*s+r[13])*o,this.z=(r[2]*n+r[6]*i+r[10]*s+r[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,s=this.z,r=e.x,o=e.y,a=e.z,l=e.w,c=l*n+o*s-a*i,u=l*i+a*n-r*s,f=l*s+r*i-o*n,h=-r*n-o*i-a*s;return this.x=c*l+h*-r+u*-a-f*-o,this.y=u*l+h*-o+f*-r-c*-a,this.z=f*l+h*-a+c*-o-u*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,s=this.z,r=e.elements;return this.x=r[0]*n+r[4]*i+r[8]*s,this.y=r[1]*n+r[5]*i+r[9]*s,this.z=r[2]*n+r[6]*i+r[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,s=e.y,r=e.z,o=n.x,a=n.y,l=n.z;return this.x=s*l-r*a,this.y=r*o-i*l,this.z=i*a-s*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return T0.copy(this).projectOnVector(e),this.sub(T0)}reflect(e){return this.sub(T0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(Qt.clamp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return n*n+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const s=Math.sin(n)*e;return this.x=s*Math.sin(i),this.y=Math.cos(n)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=s,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n){return n===void 0&&(n=0),this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const T0=new ee,OM=new Ki;class Zo{constructor(e,n){Object.defineProperty(this,"isBox3",{value:!0}),this.min=e!==void 0?e:new ee(1/0,1/0,1/0),this.max=n!==void 0?n:new ee(-1/0,-1/0,-1/0)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],f=e[l+1],h=e[l+2];u<n&&(n=u),f<i&&(i=f),h<s&&(s=h),u>r&&(r=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,i,s),this.max.set(r,o,a),this}setFromBufferAttribute(e){let n=1/0,i=1/0,s=1/0,r=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),f=e.getY(l),h=e.getZ(l);u<n&&(n=u),f<i&&(i=f),h<s&&(s=h),u>r&&(r=u),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,i,s),this.max.set(r,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Iu.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new ee),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new ee),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),A0.copy(n.boundingBox),A0.applyMatrix4(e.matrixWorld),this.union(A0));const i=e.children;for(let s=0,r=i.length;s<r;s++)this.expandByObject(i[s]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new ee),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Iu),Iu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Du),bd.subVectors(this.max,Du),Kl.subVectors(e.a,Du),$l.subVectors(e.b,Du),Ql.subVectors(e.c,Du),Ko.subVectors($l,Kl),$o.subVectors(Ql,$l),Wa.subVectors(Kl,Ql);let n=[0,-Ko.z,Ko.y,0,-$o.z,$o.y,0,-Wa.z,Wa.y,Ko.z,0,-Ko.x,$o.z,0,-$o.x,Wa.z,0,-Wa.x,-Ko.y,Ko.x,0,-$o.y,$o.x,0,-Wa.y,Wa.x,0];return!k0(n,Kl,$l,Ql,bd)||(n=[1,0,0,0,1,0,0,0,1],!k0(n,Kl,$l,Ql,bd))?!1:(vd.crossVectors(Ko,$o),n=[vd.x,vd.y,vd.z],k0(n,Kl,$l,Ql,bd))}clampPoint(e,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new ee),n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Iu.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(Iu).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(po[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),po[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),po[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),po[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),po[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),po[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),po[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),po[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(po),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}function k0(t,e,n,i,s){for(let r=0,o=t.length-3;r<=o;r+=3){ja.fromArray(t,r);const a=s.x*Math.abs(ja.x)+s.y*Math.abs(ja.y)+s.z*Math.abs(ja.z),l=e.dot(ja),c=n.dot(ja),u=i.dot(ja);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const po=[new ee,new ee,new ee,new ee,new ee,new ee,new ee,new ee],Iu=new ee,A0=new Zo,Kl=new ee,$l=new ee,Ql=new ee,Ko=new ee,$o=new ee,Wa=new ee,Du=new ee,bd=new ee,vd=new ee,ja=new ee,dY=new Zo;class Fa{constructor(e,n){this.center=e!==void 0?e:new ee,this.radius=n!==void 0?n:-1}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):dY.setFromPoints(e).getCenter(i);let s=0;for(let r=0,o=e.length;r<o;r++)s=Math.max(s,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new ee),n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Zo),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}}const mo=new ee,L0=new ee,yd=new ee,Qo=new ee,C0=new ee,wd=new ee,P0=new ee;class zh{constructor(e,n){this.origin=e!==void 0?e:new ee,this.direction=n!==void 0?n:new ee(0,0,-1)}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new ee),n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,mo)),this}closestPointToPoint(e,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new ee),n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=mo.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(mo.copy(this.direction).multiplyScalar(n).add(this.origin),mo.distanceToSquared(e))}distanceSqToSegment(e,n,i,s){L0.copy(e).add(n).multiplyScalar(.5),yd.copy(n).sub(e).normalize(),Qo.copy(this.origin).sub(L0);const r=e.distanceTo(n)*.5,o=-this.direction.dot(yd),a=Qo.dot(this.direction),l=-Qo.dot(yd),c=Qo.lengthSq(),u=Math.abs(1-o*o);let f,h,d,p;if(u>0)if(f=o*l-a,h=o*a-l,p=r*u,f>=0)if(h>=-p)if(h<=p){const m=1/u;f*=m,h*=m,d=f*(f+o*h+2*a)+h*(o*f+h+2*l)+c}else h=r,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h=-r,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;else h<=-p?(f=Math.max(0,-(-o*r+a)),h=f>0?-r:Math.min(Math.max(-r,-l),r),d=-f*f+h*(h+2*l)+c):h<=p?(f=0,h=Math.min(Math.max(-r,-l),r),d=h*(h+2*l)+c):(f=Math.max(0,-(o*r+a)),h=f>0?r:Math.min(Math.max(-r,-l),r),d=-f*f+h*(h+2*l)+c);else h=o>0?-r:r,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),s&&s.copy(yd).multiplyScalar(h).add(L0),d}intersectSphere(e,n){mo.subVectors(e.center,this.origin);const i=mo.dot(this.direction),s=mo.dot(mo)-i*i,r=e.radius*e.radius;if(s>r)return null;const o=Math.sqrt(r-s),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,s,r,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,s=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,s=(e.min.x-h.x)*c),u>=0?(r=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(r=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||r>s||((r>i||i!==i)&&(i=r),(o<s||s!==s)&&(s=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||a>s)||((a>i||i!==i)&&(i=a),(l<s||s!==s)&&(s=l),s<0)?null:this.at(i>=0?i:s,n)}intersectsBox(e){return this.intersectBox(e,mo)!==null}intersectTriangle(e,n,i,s,r){C0.subVectors(n,e),wd.subVectors(i,e),P0.crossVectors(C0,wd);let o=this.direction.dot(P0),a;if(o>0){if(s)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Qo.subVectors(this.origin,e);const l=a*this.direction.dot(wd.crossVectors(Qo,wd));if(l<0)return null;const c=a*this.direction.dot(C0.cross(Qo));if(c<0||l+c>o)return null;const u=-a*Qo.dot(P0);return u<0?null:this.at(u/o,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}class an{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_){const b=this.elements;return b[0]=e,b[4]=n,b[8]=i,b[12]=s,b[1]=r,b[5]=o,b[9]=a,b[13]=l,b[2]=c,b[6]=u,b[10]=f,b[14]=h,b[3]=d,b[7]=p,b[11]=m,b[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new an().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,s=1/ec.setFromMatrixColumn(e,0).length(),r=1/ec.setFromMatrixColumn(e,1).length(),o=1/ec.setFromMatrixColumn(e,2).length();return n[0]=i[0]*s,n[1]=i[1]*s,n[2]=i[2]*s,n[3]=0,n[4]=i[4]*r,n[5]=i[5]*r,n[6]=i[6]*r,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,i=e.x,s=e.y,r=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(s),c=Math.sin(s),u=Math.cos(r),f=Math.sin(r);if(e.order==="XYZ"){const h=o*u,d=o*f,p=a*u,m=a*f;n[0]=l*u,n[4]=-l*f,n[8]=c,n[1]=d+p*c,n[5]=h-m*c,n[9]=-a*l,n[2]=m-h*c,n[6]=p+d*c,n[10]=o*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,p=c*u,m=c*f;n[0]=h+m*a,n[4]=p*a-d,n[8]=o*c,n[1]=o*f,n[5]=o*u,n[9]=-a,n[2]=d*a-p,n[6]=m+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,p=c*u,m=c*f;n[0]=h-m*a,n[4]=-o*f,n[8]=p+d*a,n[1]=d+p*a,n[5]=o*u,n[9]=m-h*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*u,d=o*f,p=a*u,m=a*f;n[0]=l*u,n[4]=p*c-d,n[8]=h*c+m,n[1]=l*f,n[5]=m*c+h,n[9]=d*c-p,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=m-h*f,n[8]=p*f+d,n[1]=f,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=d*f+p,n[10]=h-m*f}else if(e.order==="XZY"){const h=o*l,d=o*c,p=a*l,m=a*c;n[0]=l*u,n[4]=-f,n[8]=c*u,n[1]=h*f+m,n[5]=o*u,n[9]=d*f-p,n[2]=p*f-d,n[6]=a*u,n[10]=m*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(pY,e,mY)}lookAt(e,n,i){const s=this.elements;return As.subVectors(e,n),As.lengthSq()===0&&(As.z=1),As.normalize(),ea.crossVectors(i,As),ea.lengthSq()===0&&(Math.abs(i.z)===1?As.x+=1e-4:As.z+=1e-4,As.normalize(),ea.crossVectors(i,As)),ea.normalize(),xd.crossVectors(As,ea),s[0]=ea.x,s[4]=xd.x,s[8]=As.x,s[1]=ea.y,s[5]=xd.y,s[9]=As.y,s[2]=ea.z,s[6]=xd.z,s[10]=As.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,s=n.elements,r=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],d=i[13],p=i[2],m=i[6],_=i[10],b=i[14],g=i[3],x=i[7],y=i[11],v=i[15],w=s[0],S=s[4],T=s[8],k=s[12],A=s[1],L=s[5],D=s[9],B=s[13],U=s[2],N=s[6],$=s[10],W=s[14],j=s[3],J=s[7],se=s[11],ne=s[15];return r[0]=o*w+a*A+l*U+c*j,r[4]=o*S+a*L+l*N+c*J,r[8]=o*T+a*D+l*$+c*se,r[12]=o*k+a*B+l*W+c*ne,r[1]=u*w+f*A+h*U+d*j,r[5]=u*S+f*L+h*N+d*J,r[9]=u*T+f*D+h*$+d*se,r[13]=u*k+f*B+h*W+d*ne,r[2]=p*w+m*A+_*U+b*j,r[6]=p*S+m*L+_*N+b*J,r[10]=p*T+m*D+_*$+b*se,r[14]=p*k+m*B+_*W+b*ne,r[3]=g*w+x*A+y*U+v*j,r[7]=g*S+x*L+y*N+v*J,r[11]=g*T+x*D+y*$+v*se,r[15]=g*k+x*B+y*W+v*ne,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],s=e[8],r=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],p=e[3],m=e[7],_=e[11],b=e[15];return p*(+r*l*f-s*c*f-r*a*h+i*c*h+s*a*d-i*l*d)+m*(+n*l*d-n*c*h+r*o*h-s*o*d+s*c*u-r*l*u)+_*(+n*c*f-n*a*d-r*o*f+i*o*d+r*a*u-i*c*u)+b*(-s*a*u-n*l*f+n*a*h+s*o*f-i*o*h+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=n,s[14]=i),this}getInverse(e,n){n!==void 0&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");const i=this.elements,s=e.elements,r=s[0],o=s[1],a=s[2],l=s[3],c=s[4],u=s[5],f=s[6],h=s[7],d=s[8],p=s[9],m=s[10],_=s[11],b=s[12],g=s[13],x=s[14],y=s[15],v=p*x*h-g*m*h+g*f*_-u*x*_-p*f*y+u*m*y,w=b*m*h-d*x*h-b*f*_+c*x*_+d*f*y-c*m*y,S=d*g*h-b*p*h+b*u*_-c*g*_-d*u*y+c*p*y,T=b*p*f-d*g*f-b*u*m+c*g*m+d*u*x-c*p*x,k=r*v+o*w+a*S+l*T;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/k;return i[0]=v*A,i[1]=(g*m*l-p*x*l-g*a*_+o*x*_+p*a*y-o*m*y)*A,i[2]=(u*x*l-g*f*l+g*a*h-o*x*h-u*a*y+o*f*y)*A,i[3]=(p*f*l-u*m*l-p*a*h+o*m*h+u*a*_-o*f*_)*A,i[4]=w*A,i[5]=(d*x*l-b*m*l+b*a*_-r*x*_-d*a*y+r*m*y)*A,i[6]=(b*f*l-c*x*l-b*a*h+r*x*h+c*a*y-r*f*y)*A,i[7]=(c*m*l-d*f*l+d*a*h-r*m*h-c*a*_+r*f*_)*A,i[8]=S*A,i[9]=(b*p*l-d*g*l-b*o*_+r*g*_+d*o*y-r*p*y)*A,i[10]=(c*g*l-b*u*l+b*o*h-r*g*h-c*o*y+r*u*y)*A,i[11]=(d*u*l-c*p*l-d*o*h+r*p*h+c*o*_-r*u*_)*A,i[12]=T*A,i[13]=(d*g*a-b*p*a+b*o*m-r*g*m-d*o*x+r*p*x)*A,i[14]=(b*u*a-c*g*a-b*o*f+r*g*f+c*o*x-r*u*x)*A,i[15]=(c*p*a-d*u*a+d*o*f-r*p*f-c*o*m+r*u*m)*A,this}scale(e){const n=this.elements,i=e.x,s=e.y,r=e.z;return n[0]*=i,n[4]*=s,n[8]*=r,n[1]*=i,n[5]*=s,n[9]*=r,n[2]*=i,n[6]*=s,n[10]*=r,n[3]*=i,n[7]*=s,n[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,s))}makeTranslation(e,n,i){return this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),s=Math.sin(n),r=1-i,o=e.x,a=e.y,l=e.z,c=r*o,u=r*a;return this.set(c*o+i,c*a-s*l,c*l+s*a,0,c*a+s*l,u*a+i,u*l-s*o,0,c*l-s*a,u*l+s*o,r*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i){return this.set(1,n,i,0,e,1,i,0,e,n,1,0,0,0,0,1),this}compose(e,n,i){const s=this.elements,r=n._x,o=n._y,a=n._z,l=n._w,c=r+r,u=o+o,f=a+a,h=r*c,d=r*u,p=r*f,m=o*u,_=o*f,b=a*f,g=l*c,x=l*u,y=l*f,v=i.x,w=i.y,S=i.z;return s[0]=(1-(m+b))*v,s[1]=(d+y)*v,s[2]=(p-x)*v,s[3]=0,s[4]=(d-y)*w,s[5]=(1-(h+b))*w,s[6]=(_+g)*w,s[7]=0,s[8]=(p+x)*S,s[9]=(_-g)*S,s[10]=(1-(h+m))*S,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,n,i){const s=this.elements;let r=ec.set(s[0],s[1],s[2]).length();const o=ec.set(s[4],s[5],s[6]).length(),a=ec.set(s[8],s[9],s[10]).length();this.determinant()<0&&(r=-r),e.x=s[12],e.y=s[13],e.z=s[14],fr.copy(this);const c=1/r,u=1/o,f=1/a;return fr.elements[0]*=c,fr.elements[1]*=c,fr.elements[2]*=c,fr.elements[4]*=u,fr.elements[5]*=u,fr.elements[6]*=u,fr.elements[8]*=f,fr.elements[9]*=f,fr.elements[10]*=f,n.setFromRotationMatrix(fr),i.x=r,i.y=o,i.z=a,this}makePerspective(e,n,i,s,r,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*r/(n-e),c=2*r/(i-s),u=(n+e)/(n-e),f=(i+s)/(i-s),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,i,s,r,o){const a=this.elements,l=1/(n-e),c=1/(i-s),u=1/(o-r),f=(n+e)*l,h=(i+s)*c,d=(o+r)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let s=0;s<16;s++)if(n[s]!==i[s])return!1;return!0}fromArray(e,n){n===void 0&&(n=0);for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const ec=new ee,fr=new an,pY=new ee(0,0,0),mY=new ee(1,1,1),ea=new ee,xd=new ee,As=new ee;class Uh{constructor(e=0,n=0,i=0,s=Uh.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=n,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,s){return this._x=e,this._y=n,this._z=i,this._order=s||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n,i){const s=Qt.clamp,r=e.elements,o=r[0],a=r[4],l=r[8],c=r[1],u=r[5],f=r[9],h=r[2],d=r[6],p=r[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(s(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-s(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(s(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-s(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(s(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-s(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-f,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return NM.makeRotationFromQuaternion(e),this.setFromRotationMatrix(NM,n,i)}setFromVector3(e,n){return this.set(e.x,e.y,e.z,n||this._order)}reorder(e){return BM.setFromEuler(this),this.setFromQuaternion(BM,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new ee(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Uh.DefaultOrder="XYZ";Uh.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const NM=new an,BM=new Ki;class DA{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let gY=0;const FM=new ee,tc=new Ki,go=new an,Md=new ee,Ou=new ee,_Y=new ee,bY=new Ki,zM=new ee(1,0,0),UM=new ee(0,1,0),HM=new ee(0,0,1),vY={type:"added"},yY={type:"removed"};function Bt(){Object.defineProperty(this,"id",{value:gY++}),this.uuid=Qt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bt.DefaultUp.clone();const t=new ee,e=new Uh,n=new Ki,i=new ee(1,1,1);function s(){n.setFromEuler(e,!1)}function r(){e.setFromQuaternion(n,void 0,!1)}e._onChange(s),n._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new an},normalMatrix:{value:new ws}}),this.matrix=new an,this.matrixWorld=new an,this.matrixAutoUpdate=Bt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new DA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Bt.DefaultUp=new ee(0,1,0);Bt.DefaultMatrixAutoUpdate=!0;Bt.prototype=Object.assign(Object.create(co.prototype),{constructor:Bt,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return tc.setFromAxisAngle(t,e),this.quaternion.multiply(tc),this},rotateOnWorldAxis:function(t,e){return tc.setFromAxisAngle(t,e),this.quaternion.premultiply(tc),this},rotateX:function(t){return this.rotateOnAxis(zM,t)},rotateY:function(t){return this.rotateOnAxis(UM,t)},rotateZ:function(t){return this.rotateOnAxis(HM,t)},translateOnAxis:function(t,e){return FM.copy(t).applyQuaternion(this.quaternion),this.position.add(FM.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(zM,t)},translateY:function(t){return this.translateOnAxis(UM,t)},translateZ:function(t){return this.translateOnAxis(HM,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(go.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?Md.copy(t):Md.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ou.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?go.lookAt(Ou,Md,this.up):go.lookAt(Md,Ou,this.up),this.quaternion.setFromRotationMatrix(go),i&&(go.extractRotation(i.matrixWorld),tc.setFromRotationMatrix(go),this.quaternion.premultiply(tc.inverse()))},add:function(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(vY)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(yY)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),go.getInverse(this.matrixWorld),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),go.multiply(t.parent.matrixWorld)),t.applyMatrix4(go),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const r=this.children[n].getObjectByProperty(t,e);if(r!==void 0)return r}},getWorldPosition:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new ee),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Ki),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ou,t,_Y),t},getWorldScale:function(t){return t===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new ee),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ou,bY,t),t},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new ee),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(this.visible===!1)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(t===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=t===void 0||typeof t=="string",n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function s(o,a){return o[a.uuid]===void 0&&(o[a.uuid]=a.toJSON(t)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(t.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const a=o.shapes;if(Array.isArray(a))for(let l=0,c=a.length;l<c;l++){const u=a[l];s(t.shapes,u)}else s(t.shapes,a)}}if(this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let a=0,l=this.material.length;a<l;a++)o.push(s(t.materials,this.material[a]));i.material=o}else i.material=s(t.materials,this.material);if(this.children.length>0){i.children=[];for(let o=0;o<this.children.length;o++)i.children.push(this.children[o].toJSON(t).object)}if(e){const o=r(t.geometries),a=r(t.materials),l=r(t.textures),c=r(t.images),u=r(t.shapes);o.length>0&&(n.geometries=o),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),c.length>0&&(n.images=c),u.length>0&&(n.shapes=u)}return n.object=i,n;function r(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}},clone:function(t){return new this.constructor().copy(this,t)},copy:function(t,e){if(e===void 0&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let n=0;n<t.children.length;n++){const i=t.children[n];this.add(i.clone())}return this}});const R0=new ee,wY=new ee,xY=new ws;class So{constructor(e,n){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=e!==void 0?e:new ee(1,0,0),this.constant=n!==void 0?n:0}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,s){return this.normal.set(e,n,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const s=R0.subVectors(i,n).cross(wY.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}clone(){return new this.constructor().copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new ee),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new ee);const i=e.delta(R0),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):void 0;const r=-(e.start.dot(this.normal)+this.constant)/s;if(!(r<0||r>1))return n.copy(i).multiplyScalar(r).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new ee),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||xY.getNormalMatrix(e),s=this.coplanarPoint(R0).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}const hr=new ee,_o=new ee,I0=new ee,bo=new ee,nc=new ee,ic=new ee,VM=new ee,D0=new ee,O0=new ee,N0=new ee;class cs{constructor(e,n,i){this.a=e!==void 0?e:new ee,this.b=n!==void 0?n:new ee,this.c=i!==void 0?i:new ee}static getNormal(e,n,i,s){s===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),s=new ee),s.subVectors(i,n),hr.subVectors(e,n),s.cross(hr);const r=s.lengthSq();return r>0?s.multiplyScalar(1/Math.sqrt(r)):s.set(0,0,0)}static getBarycoord(e,n,i,s,r){hr.subVectors(s,n),_o.subVectors(i,n),I0.subVectors(e,n);const o=hr.dot(hr),a=hr.dot(_o),l=hr.dot(I0),c=_o.dot(_o),u=_o.dot(I0),f=o*c-a*a;if(r===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new ee),f===0)return r.set(-2,-1,-1);const h=1/f,d=(c*l-a*u)*h,p=(o*u-a*l)*h;return r.set(1-d-p,p,d)}static containsPoint(e,n,i,s){return this.getBarycoord(e,n,i,s,bo),bo.x>=0&&bo.y>=0&&bo.x+bo.y<=1}static getUV(e,n,i,s,r,o,a,l){return this.getBarycoord(e,n,i,s,bo),l.set(0,0),l.addScaledVector(r,bo.x),l.addScaledVector(o,bo.y),l.addScaledVector(a,bo.z),l}static isFrontFacing(e,n,i,s){return hr.subVectors(i,n),_o.subVectors(e,n),hr.cross(_o).dot(s)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,s){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[s]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return hr.subVectors(this.c,this.b),_o.subVectors(this.a,this.b),hr.cross(_o).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new ee),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new So),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return cs.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,i,s,r){return cs.getUV(e,this.a,this.b,this.c,n,i,s,r)}containsPoint(e){return cs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new ee);const i=this.a,s=this.b,r=this.c;let o,a;nc.subVectors(s,i),ic.subVectors(r,i),D0.subVectors(e,i);const l=nc.dot(D0),c=ic.dot(D0);if(l<=0&&c<=0)return n.copy(i);O0.subVectors(e,s);const u=nc.dot(O0),f=ic.dot(O0);if(u>=0&&f<=u)return n.copy(s);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(i).addScaledVector(nc,o);N0.subVectors(e,r);const d=nc.dot(N0),p=ic.dot(N0);if(p>=0&&d<=p)return n.copy(r);const m=d*c-l*p;if(m<=0&&c>=0&&p<=0)return a=c/(c-p),n.copy(i).addScaledVector(ic,a);const _=u*p-d*f;if(_<=0&&f-u>=0&&d-p>=0)return VM.subVectors(r,s),a=(f-u)/(f-u+(d-p)),n.copy(s).addScaledVector(VM,a);const b=1/(_+m+h);return o=m*b,a=h*b,n.copy(i).addScaledVector(nc,o).addScaledVector(ic,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const OA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},dr={h:0,s:0,l:0},Sd={h:0,s:0,l:0};function B0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function F0(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function z0(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}class Pt{constructor(e,n,i){return Object.defineProperty(this,"isColor",{value:!0}),n===void 0&&i===void 0?this.set(e):this.setRGB(e,n,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,n,i){return this.r=e,this.g=n,this.b=i,this}setHSL(e,n,i){if(e=Qt.euclideanModulo(e,1),n=Qt.clamp(n,0,1),i=Qt.clamp(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,r=2*i-s;this.r=B0(r,s,e+1/3),this.g=B0(r,s,e),this.b=B0(r,s,e-1/3)}return this}setStyle(e){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){let s;const r=i[1],o=i[2];switch(r){case"rgb":case"rgba":if(s=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,n(s[5]),this;if(s=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,n(s[5]),this;break;case"hsl":case"hsla":if(s=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){const a=parseFloat(s[1])/360,l=parseInt(s[2],10)/100,c=parseInt(s[3],10)/100;return n(s[5]),this.setHSL(a,l,c)}break}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){const s=i[1],r=s.length;if(r===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,this;if(r===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const n=OA[e];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,n){return n===void 0&&(n=2),this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}copyLinearToGamma(e,n){n===void 0&&(n=2);const i=n>0?1/n:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=F0(e.r),this.g=F0(e.g),this.b=F0(e.b),this}copyLinearToSRGB(e){return this.r=z0(e.r),this.g=z0(e.g),this.b=z0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const n=this.r,i=this.g,s=this.b,r=Math.max(n,i,s),o=Math.min(n,i,s);let a,l;const c=(o+r)/2;if(o===r)a=0,l=0;else{const u=r-o;switch(l=c<=.5?u/(r+o):u/(2-r-o),r){case n:a=(i-s)/u+(i<s?6:0);break;case i:a=(s-n)/u+2;break;case s:a=(n-i)/u+4;break}a/=6}return e.h=a,e.s=l,e.l=c,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,n,i){return this.getHSL(dr),dr.h+=e,dr.s+=n,dr.l+=i,this.setHSL(dr.h,dr.s,dr.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpHSL(e,n){this.getHSL(dr),e.getHSL(Sd);const i=Qt.lerp(dr.h,Sd.h,n),s=Qt.lerp(dr.s,Sd.s,n),r=Qt.lerp(dr.l,Sd.l,n);return this.setHSL(i,s,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n){return n===void 0&&(n=0),this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e,n){return e===void 0&&(e=[]),n===void 0&&(n=0),e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Pt.NAMES=OA;Pt.prototype.r=1;Pt.prototype.g=1;Pt.prototype.b=1;class sh{constructor(e,n,i,s,r,o){this.a=e,this.b=n,this.c=i,this.normal=s&&s.isVector3?s:new ee,this.vertexNormals=Array.isArray(s)?s:[],this.color=r&&r.isColor?r:new Pt,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=o!==void 0?o:0}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let n=0,i=e.vertexNormals.length;n<i;n++)this.vertexNormals[n]=e.vertexNormals[n].clone();for(let n=0,i=e.vertexColors.length;n<i;n++)this.vertexColors[n]=e.vertexColors[n].clone();return this}}let MY=0;function Wt(){Object.defineProperty(this,"id",{value:MY++}),this.uuid=Qt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=bf,this.side=Mg,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=LA,this.blendDst=CA,this.blendEquation=gc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=a_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=fY,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=E0,this.stencilZFail=E0,this.stencilZPass=E0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Wt.prototype=Object.assign(Object.create(co.prototype),{constructor:Wt,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(t!==void 0)for(const e in t){const n=t[e];if(n===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===AA;continue}const i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n}},toJSON:function(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==bf&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==Mg&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(s){const r=[];for(const o in s){const a=s[o];delete a.metadata,r.push(a)}return r}if(e){const s=i(t.textures),r=i(t.images);s.length>0&&(n.textures=s),r.length>0&&(n.images=r)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(e!==null){const i=e.length;n=new Array(i);for(let s=0;s!==i;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Wt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});function eo(t){Wt.call(this),this.type="MeshBasicMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Sg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}eo.prototype=Object.create(Wt.prototype);eo.prototype.constructor=eo;eo.prototype.isMeshBasicMaterial=!0;eo.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const Gn=new ee,Ed=new je;function qt(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n===!0,this.usage=Lg,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(qt.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(qt.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new Pt),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new je),e[n++]=r.x,e[n++]=r.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new ee),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let i=0,s=t.length;i<s;i++){let r=t[i];r===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Un),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this},applyMatrix3:function(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)Ed.fromBufferAttribute(this,e),Ed.applyMatrix3(t),this.setXY(e,Ed.x,Ed.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)Gn.fromBufferAttribute(this,e),Gn.applyMatrix3(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)Gn.x=this.getX(e),Gn.y=this.getY(e),Gn.z=this.getZ(e),Gn.applyMatrix4(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)Gn.x=this.getX(e),Gn.y=this.getY(e),Gn.z=this.getZ(e),Gn.applyNormalMatrix(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)Gn.x=this.getX(e),Gn.y=this.getY(e),Gn.z=this.getZ(e),Gn.transformDirection(t),this.setXYZ(e,Gn.x,Gn.y,Gn.z);return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,s){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=s,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function h_(t,e,n){qt.call(this,new Int8Array(t),e,n)}h_.prototype=Object.create(qt.prototype);h_.prototype.constructor=h_;function d_(t,e,n){qt.call(this,new Uint8Array(t),e,n)}d_.prototype=Object.create(qt.prototype);d_.prototype.constructor=d_;function p_(t,e,n){qt.call(this,new Uint8ClampedArray(t),e,n)}p_.prototype=Object.create(qt.prototype);p_.prototype.constructor=p_;function m_(t,e,n){qt.call(this,new Int16Array(t),e,n)}m_.prototype=Object.create(qt.prototype);m_.prototype.constructor=m_;function rh(t,e,n){qt.call(this,new Uint16Array(t),e,n)}rh.prototype=Object.create(qt.prototype);rh.prototype.constructor=rh;function g_(t,e,n){qt.call(this,new Int32Array(t),e,n)}g_.prototype=Object.create(qt.prototype);g_.prototype.constructor=g_;function oh(t,e,n){qt.call(this,new Uint32Array(t),e,n)}oh.prototype=Object.create(qt.prototype);oh.prototype.constructor=oh;function It(t,e,n){qt.call(this,new Float32Array(t),e,n)}It.prototype=Object.create(qt.prototype);It.prototype.constructor=It;function __(t,e,n){qt.call(this,new Float64Array(t),e,n)}__.prototype=Object.create(qt.prototype);__.prototype.constructor=__;class SY{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){const n=[];let i,s,r;const o=e.faces;for(s=0;s<o.length;s++){const a=o[s];a.materialIndex!==r&&(r=a.materialIndex,i!==void 0&&(i.count=s*3-i.start,n.push(i)),i={start:s*3,materialIndex:r})}i!==void 0&&(i.count=s*3-i.start,n.push(i)),this.groups=n}fromGeometry(e){const n=e.faces,i=e.vertices,s=e.faceVertexUvs,r=s[0]&&s[0].length>0,o=s[1]&&s[1].length>0,a=e.morphTargets,l=a.length;let c;if(l>0){c=[];for(let b=0;b<l;b++)c[b]={name:a[b].name,data:[]};this.morphTargets.position=c}const u=e.morphNormals,f=u.length;let h;if(f>0){h=[];for(let b=0;b<f;b++)h[b]={name:u[b].name,data:[]};this.morphTargets.normal=h}const d=e.skinIndices,p=e.skinWeights,m=d.length===i.length,_=p.length===i.length;i.length>0&&n.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let b=0;b<n.length;b++){const g=n[b];this.vertices.push(i[g.a],i[g.b],i[g.c]);const x=g.vertexNormals;if(x.length===3)this.normals.push(x[0],x[1],x[2]);else{const v=g.normal;this.normals.push(v,v,v)}const y=g.vertexColors;if(y.length===3)this.colors.push(y[0],y[1],y[2]);else{const v=g.color;this.colors.push(v,v,v)}if(r===!0){const v=s[0][b];v!==void 0?this.uvs.push(v[0],v[1],v[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",b),this.uvs.push(new je,new je,new je))}if(o===!0){const v=s[1][b];v!==void 0?this.uvs2.push(v[0],v[1],v[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",b),this.uvs2.push(new je,new je,new je))}for(let v=0;v<l;v++){const w=a[v].vertices;c[v].data.push(w[g.a],w[g.b],w[g.c])}for(let v=0;v<f;v++){const w=u[v].vertexNormals[b];h[v].data.push(w.a,w.b,w.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),_&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}}function NA(t){if(t.length===0)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}let EY=1;const Br=new an,U0=new Bt,sc=new ee,Ls=new Zo,Nu=new Zo,Pi=new ee;function sn(){Object.defineProperty(this,"id",{value:EY+=2}),this.uuid=Qt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}sn.prototype=Object.assign(Object.create(co.prototype),{constructor:sn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(NA(t)>65535?oh:rh)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:n!==void 0?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new ws().getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(t){return Br.makeRotationX(t),this.applyMatrix4(Br),this},rotateY:function(t){return Br.makeRotationY(t),this.applyMatrix4(Br),this},rotateZ:function(t){return Br.makeRotationZ(t),this.applyMatrix4(Br),this},translate:function(t,e,n){return Br.makeTranslation(t,e,n),this.applyMatrix4(Br),this},scale:function(t,e,n){return Br.makeScale(t,e,n),this.applyMatrix4(Br),this},lookAt:function(t){return U0.lookAt(t),U0.updateMatrix(),this.applyMatrix4(U0.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(sc).negate(),this.translate(sc.x,sc.y,sc.z),this},setFromObject:function(t){const e=t.geometry;if(t.isPoints||t.isLine){const n=new It(e.vertices.length*3,3),i=new It(e.colors.length*3,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){const s=new It(e.lineDistances.length,1);this.setAttribute("lineDistance",s.copyArray(e.lineDistances))}e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new It(e,3)),this},updateFromObject:function(t){let e=t.geometry;if(t.isMesh){let n=e.__directGeometry;if(e.elementsNeedUpdate===!0&&(n=void 0,e.elementsNeedUpdate=!1),n===void 0)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(e.verticesNeedUpdate===!0){const n=this.attributes.position;n!==void 0&&(n.copyVector3sArray(e.vertices),n.needsUpdate=!0),e.verticesNeedUpdate=!1}if(e.normalsNeedUpdate===!0){const n=this.attributes.normal;n!==void 0&&(n.copyVector3sArray(e.normals),n.needsUpdate=!0),e.normalsNeedUpdate=!1}if(e.colorsNeedUpdate===!0){const n=this.attributes.color;n!==void 0&&(n.copyColorsArray(e.colors),n.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){const n=this.attributes.uv;n!==void 0&&(n.copyVector2sArray(e.uvs),n.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){const n=this.attributes.lineDistance;n!==void 0&&(n.copyArray(e.lineDistances),n.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=new SY().fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){const e=new Float32Array(t.vertices.length*3);if(this.setAttribute("position",new qt(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){const n=new Float32Array(t.normals.length*3);this.setAttribute("normal",new qt(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){const n=new Float32Array(t.colors.length*3);this.setAttribute("color",new qt(n,3).copyColorsArray(t.colors))}if(t.uvs.length>0){const n=new Float32Array(t.uvs.length*2);this.setAttribute("uv",new qt(n,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){const n=new Float32Array(t.uvs2.length*2);this.setAttribute("uv2",new qt(n,2).copyVector2sArray(t.uvs2))}this.groups=t.groups;for(const n in t.morphTargets){const i=[],s=t.morphTargets[n];for(let r=0,o=s.length;r<o;r++){const a=s[r],l=new It(a.data.length*3,3);l.name=a.name,i.push(l.copyVector3sArray(a.data))}this.morphAttributes[n]=i}if(t.skinIndices.length>0){const n=new It(t.skinIndices.length*4,4);this.setAttribute("skinIndex",n.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){const n=new It(t.skinWeights.length*4,4);this.setAttribute("skinWeight",n.copyVector4sArray(t.skinWeights))}return t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Zo);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ee(-1/0,-1/0,-1/0),new ee(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const s=e[n];Ls.setFromBufferAttribute(s),this.morphTargetsRelative?(Pi.addVectors(this.boundingBox.min,Ls.min),this.boundingBox.expandByPoint(Pi),Pi.addVectors(this.boundingBox.max,Ls.max),this.boundingBox.expandByPoint(Pi)):(this.boundingBox.expandByPoint(Ls.min),this.boundingBox.expandByPoint(Ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Fa);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ee,1/0);return}if(t){const n=this.boundingSphere.center;if(Ls.setFromBufferAttribute(t),e)for(let s=0,r=e.length;s<r;s++){const o=e[s];Nu.setFromBufferAttribute(o),this.morphTargetsRelative?(Pi.addVectors(Ls.min,Nu.min),Ls.expandByPoint(Pi),Pi.addVectors(Ls.max,Nu.max),Ls.expandByPoint(Pi)):(Ls.expandByPoint(Nu.min),Ls.expandByPoint(Nu.max))}Ls.getCenter(n);let i=0;for(let s=0,r=t.count;s<r;s++)Pi.fromBufferAttribute(t,s),i=Math.max(i,n.distanceToSquared(Pi));if(e)for(let s=0,r=e.length;s<r;s++){const o=e[s],a=this.morphTargetsRelative;for(let l=0,c=o.count;l<c;l++)Pi.fromBufferAttribute(o,l),a&&(sc.fromBufferAttribute(t,l),Pi.add(sc)),i=Math.max(i,n.distanceToSquared(Pi))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new qt(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let f=0,h=n.count;f<h;f++)n.setXYZ(f,0,0,0);const i=new ee,s=new ee,r=new ee,o=new ee,a=new ee,l=new ee,c=new ee,u=new ee;if(t)for(let f=0,h=t.count;f<h;f+=3){const d=t.getX(f+0),p=t.getX(f+1),m=t.getX(f+2);i.fromBufferAttribute(e,d),s.fromBufferAttribute(e,p),r.fromBufferAttribute(e,m),c.subVectors(r,s),u.subVectors(i,s),c.cross(u),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,m),o.add(c),a.add(c),l.add(c),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let f=0,h=e.count;f<h;f+=3)i.fromBufferAttribute(e,f+0),s.fromBufferAttribute(e,f+1),r.fromBufferAttribute(e,f+2),c.subVectors(r,s),u.subVectors(i,s),c.cross(u),n.setXYZ(f+0,c.x,c.y,c.z),n.setXYZ(f+1,c.x,c.y,c.z),n.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(t.attributes[i]===void 0)continue;const r=n[i].array,o=t.attributes[i],a=o.array,l=o.itemSize*e,c=Math.min(a.length,r.length-l);for(let u=0,f=l;u<c;u++,f++)r[f]=a[u]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Pi.fromBufferAttribute(t,e),Pi.normalize(),t.setXYZ(e,Pi.x,Pi.y,Pi.z)},toNonIndexed:function(){function t(o,a){const l=o.array,c=o.itemSize,u=o.normalized,f=new l.constructor(a.length*c);let h=0,d=0;for(let p=0,m=a.length;p<m;p++){h=a[p]*c;for(let _=0;_<c;_++)f[d++]=l[h++]}return new qt(f,c,u)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;const e=new sn,n=this.index.array,i=this.attributes;for(const o in i){const a=i[o],l=t(a,n);e.setAttribute(o,l)}const s=this.morphAttributes;for(const o in s){const a=[],l=s[o];for(let c=0,u=l.length;c<u;c++){const f=l[c],h=t(f,n);a.push(h)}e.morphAttributes[o]=a}e.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let o=0,a=r.length;o<a;o++){const l=r[o];e.addGroup(l.start,l.count,l.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const l in a)a[l]!==void 0&&(t[l]=a[l]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const a in n){const l=n[a],c=l.toJSON(t.data);l.name!==""&&(c.name=l.name),t.data.attributes[a]=c}const i={};let s=!1;for(const a in this.morphAttributes){const l=this.morphAttributes[a],c=[];for(let u=0,f=l.length;u<f;u++){const h=l[u],d=h.toJSON(t.data);h.name!==""&&(d.name=h.name),c.push(d)}c.length>0&&(i[a]=c,s=!0)}s&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(t.data.groups=JSON.parse(JSON.stringify(r)));const o=this.boundingSphere;return o!==null&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t},clone:function(){return new sn().copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;n!==null&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const c=i[l];this.setAttribute(l,c.clone(e))}const s=t.morphAttributes;for(const l in s){const c=[],u=s[l];for(let f=0,h=u.length;f<h;f++)c.push(u[f].clone(e));this.morphAttributes[l]=c}this.morphTargetsRelative=t.morphTargetsRelative;const r=t.groups;for(let l=0,c=r.length;l<c;l++){const u=r[l];this.addGroup(u.start,u.count,u.materialIndex)}const o=t.boundingBox;o!==null&&(this.boundingBox=o.clone());const a=t.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const GM=new an,Ya=new zh,H0=new Fa,ta=new ee,na=new ee,ia=new ee,V0=new ee,G0=new ee,W0=new ee,Td=new ee,kd=new ee,Ad=new ee,Mc=new je,Sc=new je,Ec=new je,wf=new ee,Ld=new ee;function Ai(t,e){Bt.call(this),this.type="Mesh",this.geometry=t!==void 0?t:new sn,this.material=e!==void 0?e:new eo,this.updateMorphTargets()}Ai.prototype=Object.assign(Object.create(Bt.prototype),{constructor:Ai,isMesh:!0,copy:function(t){return Bt.prototype.copy.call(this,t),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),H0.copy(n.boundingSphere),H0.applyMatrix4(s),t.ray.intersectsSphere(H0)===!1)||(GM.getInverse(s),Ya.copy(t.ray).applyMatrix4(GM),n.boundingBox!==null&&Ya.intersectsBox(n.boundingBox)===!1))return;let r;if(n.isBufferGeometry){const o=n.index,a=n.attributes.position,l=n.morphAttributes.position,c=n.morphTargetsRelative,u=n.attributes.uv,f=n.attributes.uv2,h=n.groups,d=n.drawRange;if(o!==null)if(Array.isArray(i))for(let p=0,m=h.length;p<m;p++){const _=h[p],b=i[_.materialIndex],g=Math.max(_.start,d.start),x=Math.min(_.start+_.count,d.start+d.count);for(let y=g,v=x;y<v;y+=3){const w=o.getX(y),S=o.getX(y+1),T=o.getX(y+2);r=Cd(this,b,t,Ya,a,l,c,u,f,w,S,T),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=_.materialIndex,e.push(r))}}else{const p=Math.max(0,d.start),m=Math.min(o.count,d.start+d.count);for(let _=p,b=m;_<b;_+=3){const g=o.getX(_),x=o.getX(_+1),y=o.getX(_+2);r=Cd(this,i,t,Ya,a,l,c,u,f,g,x,y),r&&(r.faceIndex=Math.floor(_/3),e.push(r))}}else if(a!==void 0)if(Array.isArray(i))for(let p=0,m=h.length;p<m;p++){const _=h[p],b=i[_.materialIndex],g=Math.max(_.start,d.start),x=Math.min(_.start+_.count,d.start+d.count);for(let y=g,v=x;y<v;y+=3){const w=y,S=y+1,T=y+2;r=Cd(this,b,t,Ya,a,l,c,u,f,w,S,T),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=_.materialIndex,e.push(r))}}else{const p=Math.max(0,d.start),m=Math.min(a.count,d.start+d.count);for(let _=p,b=m;_<b;_+=3){const g=_,x=_+1,y=_+2;r=Cd(this,i,t,Ya,a,l,c,u,f,g,x,y),r&&(r.faceIndex=Math.floor(_/3),e.push(r))}}}else if(n.isGeometry){const o=Array.isArray(i),a=n.vertices,l=n.faces;let c;const u=n.faceVertexUvs[0];u.length>0&&(c=u);for(let f=0,h=l.length;f<h;f++){const d=l[f],p=o?i[d.materialIndex]:i;if(p===void 0)continue;const m=a[d.a],_=a[d.b],b=a[d.c];if(r=BA(this,p,t,Ya,m,_,b,wf),r){if(c&&c[f]){const g=c[f];Mc.copy(g[0]),Sc.copy(g[1]),Ec.copy(g[2]),r.uv=cs.getUV(wf,m,_,b,Mc,Sc,Ec,new je)}r.face=d,r.faceIndex=f,e.push(r)}}}}});function BA(t,e,n,i,s,r,o,a){let l;if(e.side===Ui?l=i.intersectTriangle(o,r,s,!0,a):l=i.intersectTriangle(s,r,o,e.side!==Ml,a),l===null)return null;Ld.copy(a),Ld.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(Ld);return c<n.near||c>n.far?null:{distance:c,point:Ld.clone(),object:t}}function Cd(t,e,n,i,s,r,o,a,l,c,u,f){ta.fromBufferAttribute(s,c),na.fromBufferAttribute(s,u),ia.fromBufferAttribute(s,f);const h=t.morphTargetInfluences;if(e.morphTargets&&r&&h){Td.set(0,0,0),kd.set(0,0,0),Ad.set(0,0,0);for(let p=0,m=r.length;p<m;p++){const _=h[p],b=r[p];_!==0&&(V0.fromBufferAttribute(b,c),G0.fromBufferAttribute(b,u),W0.fromBufferAttribute(b,f),o?(Td.addScaledVector(V0,_),kd.addScaledVector(G0,_),Ad.addScaledVector(W0,_)):(Td.addScaledVector(V0.sub(ta),_),kd.addScaledVector(G0.sub(na),_),Ad.addScaledVector(W0.sub(ia),_)))}ta.add(Td),na.add(kd),ia.add(Ad)}t.isSkinnedMesh&&(t.boneTransform(c,ta),t.boneTransform(u,na),t.boneTransform(f,ia));const d=BA(t,e,n,i,ta,na,ia,wf);if(d){a&&(Mc.fromBufferAttribute(a,c),Sc.fromBufferAttribute(a,u),Ec.fromBufferAttribute(a,f),d.uv=cs.getUV(wf,ta,na,ia,Mc,Sc,Ec,new je)),l&&(Mc.fromBufferAttribute(l,c),Sc.fromBufferAttribute(l,u),Ec.fromBufferAttribute(l,f),d.uv2=cs.getUV(wf,ta,na,ia,Mc,Sc,Ec,new je));const p=new sh(c,u,f);cs.getNormal(ta,na,ia,p.normal),d.face=p}return d}let TY=0;const Fr=new an,j0=new Bt,Pd=new ee;function Rn(){Object.defineProperty(this,"id",{value:TY+=2}),this.uuid=Qt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}Rn.prototype=Object.assign(Object.create(co.prototype),{constructor:Rn,isGeometry:!0,applyMatrix4:function(t){const e=new ws().getNormalMatrix(t);for(let n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n];s.normal.applyMatrix3(e).normalize();for(let r=0,o=s.vertexNormals.length;r<o;r++)s.vertexNormals[r].applyMatrix3(e).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Fr.makeRotationX(t),this.applyMatrix4(Fr),this},rotateY:function(t){return Fr.makeRotationY(t),this.applyMatrix4(Fr),this},rotateZ:function(t){return Fr.makeRotationZ(t),this.applyMatrix4(Fr),this},translate:function(t,e,n){return Fr.makeTranslation(t,e,n),this.applyMatrix4(Fr),this},scale:function(t,e,n){return Fr.makeScale(t,e,n),this.applyMatrix4(Fr),this},lookAt:function(t){return j0.lookAt(t),j0.updateMatrix(),this.applyMatrix4(j0.matrix),this},fromBufferGeometry:function(t){const e=this,n=t.index!==null?t.index:void 0,i=t.attributes;if(i.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;const s=i.position,r=i.normal,o=i.color,a=i.uv,l=i.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let f=0;f<s.count;f++)e.vertices.push(new ee().fromBufferAttribute(s,f)),o!==void 0&&e.colors.push(new Pt().fromBufferAttribute(o,f));function c(f,h,d,p){const m=o===void 0?[]:[e.colors[f].clone(),e.colors[h].clone(),e.colors[d].clone()],_=r===void 0?[]:[new ee().fromBufferAttribute(r,f),new ee().fromBufferAttribute(r,h),new ee().fromBufferAttribute(r,d)],b=new sh(f,h,d,_,m,p);e.faces.push(b),a!==void 0&&e.faceVertexUvs[0].push([new je().fromBufferAttribute(a,f),new je().fromBufferAttribute(a,h),new je().fromBufferAttribute(a,d)]),l!==void 0&&e.faceVertexUvs[1].push([new je().fromBufferAttribute(l,f),new je().fromBufferAttribute(l,h),new je().fromBufferAttribute(l,d)])}const u=t.groups;if(u.length>0)for(let f=0;f<u.length;f++){const h=u[f],d=h.start,p=h.count;for(let m=d,_=d+p;m<_;m+=3)n!==void 0?c(n.getX(m),n.getX(m+1),n.getX(m+2),h.materialIndex):c(m,m+1,m+2,h.materialIndex)}else if(n!==void 0)for(let f=0;f<n.count;f+=3)c(n.getX(f),n.getX(f+1),n.getX(f+2));else for(let f=0;f<s.count;f+=3)c(f,f+1,f+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pd).negate(),this.translate(Pd.x,Pd.y,Pd.z),this},normalize:function(){this.computeBoundingSphere();const t=this.boundingSphere.center,e=this.boundingSphere.radius,n=e===0?1:1/e,i=new an;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){const t=new ee,e=new ee;for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n],r=this.vertices[s.a],o=this.vertices[s.b],a=this.vertices[s.c];t.subVectors(a,o),e.subVectors(r,o),t.cross(e),t.normalize(),s.normal.copy(t)}},computeVertexNormals:function(t){t===void 0&&(t=!0);const e=new Array(this.vertices.length);for(let n=0,i=this.vertices.length;n<i;n++)e[n]=new ee;if(t){const n=new ee,i=new ee;for(let s=0,r=this.faces.length;s<r;s++){const o=this.faces[s],a=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c];n.subVectors(c,l),i.subVectors(a,l),n.cross(i),e[o.a].add(n),e[o.b].add(n),e[o.c].add(n)}}else{this.computeFaceNormals();for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n];e[s.a].add(s.normal),e[s.b].add(s.normal),e[s.c].add(s.normal)}}for(let n=0,i=this.vertices.length;n<i;n++)e[n].normalize();for(let n=0,i=this.faces.length;n<i;n++){const s=this.faces[n],r=s.vertexNormals;r.length===3?(r[0].copy(e[s.a]),r[1].copy(e[s.b]),r[2].copy(e[s.c])):(r[0]=e[s.a].clone(),r[1]=e[s.b].clone(),r[2]=e[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(let t=0,e=this.faces.length;t<e;t++){const n=this.faces[t],i=n.vertexNormals;i.length===3?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(let e=0,n=this.faces.length;e<n;e++){const i=this.faces[e];i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]);for(let s=0,r=i.vertexNormals.length;s<r;s++)i.__originalVertexNormals[s]?i.__originalVertexNormals[s].copy(i.vertexNormals[s]):i.__originalVertexNormals[s]=i.vertexNormals[s].clone()}const t=new Rn;t.faces=this.faces;for(let e=0,n=this.morphTargets.length;e<n;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];const s=this.morphNormals[e].faceNormals,r=this.morphNormals[e].vertexNormals;for(let o=0,a=this.faces.length;o<a;o++){const l=new ee,c={a:new ee,b:new ee,c:new ee};s.push(l),r.push(c)}}const i=this.morphNormals[e];t.vertices=this.morphTargets[e].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let s=0,r=this.faces.length;s<r;s++){const o=this.faces[s],a=i.faceNormals[s],l=i.vertexNormals[s];a.copy(o.normal),l.a.copy(o.vertexNormals[0]),l.b.copy(o.vertexNormals[1]),l.c.copy(o.vertexNormals[2])}}for(let e=0,n=this.faces.length;e<n;e++){const i=this.faces[e];i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals}},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new Zo),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new Fa),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}let i;const s=this.vertices.length,r=this.vertices,o=t.vertices,a=this.faces,l=t.faces,c=this.colors,u=t.colors;n===void 0&&(n=0),e!==void 0&&(i=new ws().getNormalMatrix(e));for(let f=0,h=o.length;f<h;f++){const p=o[f].clone();e!==void 0&&p.applyMatrix4(e),r.push(p)}for(let f=0,h=u.length;f<h;f++)c.push(u[f].clone());for(let f=0,h=l.length;f<h;f++){const d=l[f];let p,m;const _=d.vertexNormals,b=d.vertexColors,g=new sh(d.a+s,d.b+s,d.c+s);g.normal.copy(d.normal),i!==void 0&&g.normal.applyMatrix3(i).normalize();for(let x=0,y=_.length;x<y;x++)p=_[x].clone(),i!==void 0&&p.applyMatrix3(i).normalize(),g.vertexNormals.push(p);g.color.copy(d.color);for(let x=0,y=b.length;x<y;x++)m=b[x],g.vertexColors.push(m.clone());g.materialIndex=d.materialIndex+n,a.push(g)}for(let f=0,h=t.faceVertexUvs.length;f<h;f++){const d=t.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let p=0,m=d.length;p<m;p++){const _=d[p],b=[];for(let g=0,x=_.length;g<x;g++)b.push(_[g].clone());this.faceVertexUvs[f].push(b)}}},mergeMesh:function(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)},mergeVertices:function(){const t={},e=[],n=[],s=Math.pow(10,4);for(let a=0,l=this.vertices.length;a<l;a++){const c=this.vertices[a],u=Math.round(c.x*s)+"_"+Math.round(c.y*s)+"_"+Math.round(c.z*s);t[u]===void 0?(t[u]=a,e.push(this.vertices[a]),n[a]=e.length-1):n[a]=n[t[u]]}const r=[];for(let a=0,l=this.faces.length;a<l;a++){const c=this.faces[a];c.a=n[c.a],c.b=n[c.b],c.c=n[c.c];const u=[c.a,c.b,c.c];for(let f=0;f<3;f++)if(u[f]===u[(f+1)%3]){r.push(a);break}}for(let a=r.length-1;a>=0;a--){const l=r[a];this.faces.splice(l,1);for(let c=0,u=this.faceVertexUvs.length;c<u;c++)this.faceVertexUvs[c].splice(l,1)}const o=this.vertices.length-e.length;return this.vertices=e,o},setFromPoints:function(t){this.vertices=[];for(let e=0,n=t.length;e<n;e++){const i=t[e];this.vertices.push(new ee(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){const t=this.faces,e=t.length;for(let a=0;a<e;a++)t[a]._id=a;function n(a,l){return a.materialIndex-l.materialIndex}t.sort(n);const i=this.faceVertexUvs[0],s=this.faceVertexUvs[1];let r,o;i&&i.length===e&&(r=[]),s&&s.length===e&&(o=[]);for(let a=0;a<e;a++){const l=t[a]._id;r&&r.push(i[l]),o&&o.push(s[l])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){const t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(t[p]=d[p]);return t}const e=[];for(let d=0;d<this.vertices.length;d++){const p=this.vertices[d];e.push(p.x,p.y,p.z)}const n=[],i=[],s={},r=[],o={},a=[],l={};for(let d=0;d<this.faces.length;d++){const p=this.faces[d],m=!0,_=!1,b=this.faceVertexUvs[0][d]!==void 0,g=p.normal.length()>0,x=p.vertexNormals.length>0,y=p.color.r!==1||p.color.g!==1||p.color.b!==1,v=p.vertexColors.length>0;let w=0;if(w=c(w,0,0),w=c(w,1,m),w=c(w,2,_),w=c(w,3,b),w=c(w,4,g),w=c(w,5,x),w=c(w,6,y),w=c(w,7,v),n.push(w),n.push(p.a,p.b,p.c),n.push(p.materialIndex),b){const S=this.faceVertexUvs[0][d];n.push(h(S[0]),h(S[1]),h(S[2]))}if(g&&n.push(u(p.normal)),x){const S=p.vertexNormals;n.push(u(S[0]),u(S[1]),u(S[2]))}if(y&&n.push(f(p.color)),v){const S=p.vertexColors;n.push(f(S[0]),f(S[1]),f(S[2]))}}function c(d,p,m){return m?d|1<<p:d&~(1<<p)}function u(d){const p=d.x.toString()+d.y.toString()+d.z.toString();return s[p]!==void 0||(s[p]=i.length/3,i.push(d.x,d.y,d.z)),s[p]}function f(d){const p=d.r.toString()+d.g.toString()+d.b.toString();return o[p]!==void 0||(o[p]=r.length,r.push(d.getHex())),o[p]}function h(d){const p=d.x.toString()+d.y.toString();return l[p]!==void 0||(l[p]=a.length/2,a.push(d.x,d.y)),l[p]}return t.data={},t.data.vertices=e,t.data.normals=i,r.length>0&&(t.data.colors=r),a.length>0&&(t.data.uvs=[a]),t.data.faces=n,t},clone:function(){return new Rn().copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;const e=t.vertices;for(let f=0,h=e.length;f<h;f++)this.vertices.push(e[f].clone());const n=t.colors;for(let f=0,h=n.length;f<h;f++)this.colors.push(n[f].clone());const i=t.faces;for(let f=0,h=i.length;f<h;f++)this.faces.push(i[f].clone());for(let f=0,h=t.faceVertexUvs.length;f<h;f++){const d=t.faceVertexUvs[f];this.faceVertexUvs[f]===void 0&&(this.faceVertexUvs[f]=[]);for(let p=0,m=d.length;p<m;p++){const _=d[p],b=[];for(let g=0,x=_.length;g<x;g++){const y=_[g];b.push(y.clone())}this.faceVertexUvs[f].push(b)}}const s=t.morphTargets;for(let f=0,h=s.length;f<h;f++){const d={};if(d.name=s[f].name,s[f].vertices!==void 0){d.vertices=[];for(let p=0,m=s[f].vertices.length;p<m;p++)d.vertices.push(s[f].vertices[p].clone())}if(s[f].normals!==void 0){d.normals=[];for(let p=0,m=s[f].normals.length;p<m;p++)d.normals.push(s[f].normals[p].clone())}this.morphTargets.push(d)}const r=t.morphNormals;for(let f=0,h=r.length;f<h;f++){const d={};if(r[f].vertexNormals!==void 0){d.vertexNormals=[];for(let p=0,m=r[f].vertexNormals.length;p<m;p++){const _=r[f].vertexNormals[p],b={};b.a=_.a.clone(),b.b=_.b.clone(),b.c=_.c.clone(),d.vertexNormals.push(b)}}if(r[f].faceNormals!==void 0){d.faceNormals=[];for(let p=0,m=r[f].faceNormals.length;p<m;p++)d.faceNormals.push(r[f].faceNormals[p].clone())}this.morphNormals.push(d)}const o=t.skinWeights;for(let f=0,h=o.length;f<h;f++)this.skinWeights.push(o[f].clone());const a=t.skinIndices;for(let f=0,h=a.length;f<h;f++)this.skinIndices.push(a[f].clone());const l=t.lineDistances;for(let f=0,h=l.length;f<h;f++)this.lineDistances.push(l[f]);const c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());const u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class kY extends Rn{constructor(e,n,i,s,r,o){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new Cg(e,n,i,s,r,o)),this.mergeVertices()}}class Cg extends sn{constructor(e=1,n=1,i=1,s=1,r=1,o=1){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:s,heightSegments:r,depthSegments:o};const a=this;s=Math.floor(s),r=Math.floor(r),o=Math.floor(o);const l=[],c=[],u=[],f=[];let h=0,d=0;p("z","y","x",-1,-1,i,n,e,o,r,0),p("z","y","x",1,-1,i,n,-e,o,r,1),p("x","z","y",1,1,e,i,n,s,o,2),p("x","z","y",1,-1,e,i,-n,s,o,3),p("x","y","z",1,-1,e,n,i,s,r,4),p("x","y","z",-1,-1,e,n,-i,s,r,5),this.setIndex(l),this.setAttribute("position",new It(c,3)),this.setAttribute("normal",new It(u,3)),this.setAttribute("uv",new It(f,2));function p(m,_,b,g,x,y,v,w,S,T,k){const A=y/S,L=v/T,D=y/2,B=v/2,U=w/2,N=S+1,$=T+1;let W=0,j=0;const J=new ee;for(let se=0;se<$;se++){const ne=se*L-B;for(let K=0;K<N;K++){const q=K*A-D;J[m]=q*g,J[_]=ne*x,J[b]=U,c.push(J.x,J.y,J.z),J[m]=0,J[_]=0,J[b]=w>0?1:-1,u.push(J.x,J.y,J.z),f.push(K/S),f.push(1-se/T),W+=1}}for(let se=0;se<T;se++)for(let ne=0;ne<S;ne++){const K=h+ne+N*se,q=h+ne+N*(se+1),te=h+(ne+1)+N*(se+1),re=h+(ne+1)+N*se;l.push(K,q,re),l.push(q,te,re),j+=6}a.addGroup(d,j,k),d+=j,h+=W}}}function tu(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const s=t[n][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture)?e[n][i]=s.clone():Array.isArray(s)?e[n][i]=s.slice():e[n][i]=s}}return e}function Yi(t){const e={};for(let n=0;n<t.length;n++){const i=tu(t[n]);for(const s in i)e[s]=i[s]}return e}const AY={clone:tu,merge:Yi};var LY=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,CY=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function Ss(t){Wt.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=LY,this.fragmentShader=CY,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}Ss.prototype=Object.create(Wt.prototype);Ss.prototype.constructor=Ss;Ss.prototype.isShaderMaterial=!0;Ss.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=tu(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this};Ss.prototype.toJSON=function(t){const e=Wt.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e};function No(){Bt.call(this),this.type="Camera",this.matrixWorldInverse=new an,this.projectionMatrix=new an,this.projectionMatrixInverse=new an}No.prototype=Object.assign(Object.create(Bt.prototype),{constructor:No,isCamera:!0,copy:function(t,e){return Bt.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){t===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new ee),this.updateMatrixWorld(!0);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Bt.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Bt.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}});function Ei(t,e,n,i){No.call(this),this.type="PerspectiveCamera",this.fov=t!==void 0?t:50,this.zoom=1,this.near=n!==void 0?n:.1,this.far=i!==void 0?i:2e3,this.focus=10,this.aspect=e!==void 0?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Ei.prototype=Object.assign(Object.create(No.prototype),{constructor:Ei,isPerspectiveCamera:!0,copy:function(t,e){return No.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=Qt.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(Qt.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/t},getEffectiveFOV:function(){return Qt.RAD2DEG*2*Math.atan(Math.tan(Qt.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,s,r){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(Qt.DEG2RAD*.5*this.fov)/this.zoom,n=2*e,i=this.aspect*n,s=-.5*i;const r=this.view;if(this.view!==null&&this.view.enabled){const a=r.fullWidth,l=r.fullHeight;s+=r.offsetX*i/a,e-=r.offsetY*n/l,i*=r.width/a,n*=r.height/l}const o=this.filmOffset;o!==0&&(s+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=Bt.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const rc=90,oc=1;function ah(t,e,n){if(Bt.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Ei(rc,oc,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new ee(1,0,0)),this.add(i);const s=new Ei(rc,oc,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new ee(-1,0,0)),this.add(s);const r=new Ei(rc,oc,t,e);r.layers=this.layers,r.up.set(0,0,1),r.lookAt(new ee(0,1,0)),this.add(r);const o=new Ei(rc,oc,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new ee(0,-1,0)),this.add(o);const a=new Ei(rc,oc,t,e);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new ee(0,0,1)),this.add(a);const l=new Ei(rc,oc,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new ee(0,0,-1)),this.add(l),this.update=function(c,u){this.parent===null&&this.updateMatrixWorld();const f=c.xr.enabled,h=c.getRenderTarget();c.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,c.setRenderTarget(n,0),c.render(u,i),c.setRenderTarget(n,1),c.render(u,s),c.setRenderTarget(n,2),c.render(u,r),c.setRenderTarget(n,3),c.render(u,o),c.setRenderTarget(n,4),c.render(u,a),n.texture.generateMipmaps=d,c.setRenderTarget(n,5),c.render(u,l),c.setRenderTarget(h),c.xr.enabled=f},this.clear=function(c,u,f,h){const d=c.getRenderTarget();for(let p=0;p<6;p++)c.setRenderTarget(n,p),c.clear(u,f,h);c.setRenderTarget(d)}}ah.prototype=Object.create(Bt.prototype);ah.prototype.constructor=ah;function nu(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),kr.call(this,t,t,e),this.texture.isWebGLCubeRenderTargetTexture=!0}nu.prototype=Object.create(kr.prototype);nu.prototype.constructor=nu;nu.prototype.isWebGLCubeRenderTarget=!0;nu.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=Tr,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

			varying vec3 vWorldDirection;

			vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

				return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

			}

			void main() {

				vWorldDirection = transformDirection( position, modelMatrix );

				#include <begin_vertex>
				#include <project_vertex>

			}
		`,fragmentShader:`

			uniform sampler2D tEquirect;

			varying vec3 vWorldDirection;

			#include <common>

			void main() {

				vec3 direction = normalize( vWorldDirection );

				vec2 sampleUV = equirectUv( direction );

				gl_FragColor = texture2D( tEquirect, sampleUV );

			}
		`},i=new Cg(5,5,5),s=new Ss({name:"CubemapFromEquirect",uniforms:tu(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ui,blending:_f});s.uniforms.tEquirect.value=e;const r=new Ai(i,s),o=e.minFilter;return e.minFilter===Bh&&(e.minFilter=Gi),new ah(1,10,this).update(t,r),e.minFilter=o,r.geometry.dispose(),r.material.dispose(),this};function iu(t,e,n,i,s,r,o,a,l,c,u,f){Hn.call(this,null,r,o,a,l,c,i,s,u,f),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=l!==void 0?l:Xi,this.minFilter=c!==void 0?c:Xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}iu.prototype=Object.create(Hn.prototype);iu.prototype.constructor=iu;iu.prototype.isDataTexture=!0;const ac=new Fa,Rd=new ee;class Pg{constructor(e,n,i,s,r,o){this.planes=[e!==void 0?e:new So,n!==void 0?n:new So,i!==void 0?i:new So,s!==void 0?s:new So,r!==void 0?r:new So,o!==void 0?o:new So]}set(e,n,i,s,r,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(s),a[4].copy(r),a[5].copy(o),this}clone(){return new this.constructor().copy(this)}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const n=this.planes,i=e.elements,s=i[0],r=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],f=i[7],h=i[8],d=i[9],p=i[10],m=i[11],_=i[12],b=i[13],g=i[14],x=i[15];return n[0].setComponents(a-s,f-l,m-h,x-_).normalize(),n[1].setComponents(a+s,f+l,m+h,x+_).normalize(),n[2].setComponents(a+r,f+c,m+d,x+b).normalize(),n[3].setComponents(a-r,f-c,m-d,x-b).normalize(),n[4].setComponents(a-o,f-u,m-p,x-g).normalize(),n[5].setComponents(a+o,f+u,m+p,x+g).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),ac.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ac)}intersectsSprite(e){return ac.center.set(0,0,0),ac.radius=.7071067811865476,ac.applyMatrix4(e.matrixWorld),this.intersectsSphere(ac)}intersectsSphere(e){const n=this.planes,i=e.center,s=-e.radius;for(let r=0;r<6;r++)if(n[r].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const s=n[i];if(Rd.x=s.normal.x>0?e.max.x:e.min.x,Rd.y=s.normal.y>0?e.max.y:e.min.y,Rd.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Rd)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}}function FA(){let t=null,e=!1,n=null,i=null;function s(r,o){n(r,o),i=t.requestAnimationFrame(s)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(s),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){n=r},setContext:function(r){t=r}}}function PY(t,e){const n=e.isWebGL2,i=new WeakMap;function s(c,u){const f=c.array,h=c.usage,d=t.createBuffer();t.bindBuffer(u,d),t.bufferData(u,f,h),c.onUploadCallback();let p=5126;return f instanceof Float32Array?p=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?p=5123:f instanceof Int16Array?p=5122:f instanceof Uint32Array?p=5125:f instanceof Int32Array?p=5124:f instanceof Int8Array?p=5120:f instanceof Uint8Array&&(p=5121),{buffer:d,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function r(c,u,f){const h=u.array,d=u.updateRange;t.bindBuffer(f,c),d.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(t.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){var f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h===void 0?i.set(c,s(c,u)):h.version<c.version&&(r(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class RY extends Rn{constructor(e,n,i,s){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s},this.fromBufferGeometry(new Rg(e,n,i,s)),this.mergeVertices()}}class Rg extends sn{constructor(e,n,i,s){super(),this.type="PlaneBufferGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:s},e=e||1,n=n||1;const r=e/2,o=n/2,a=Math.floor(i)||1,l=Math.floor(s)||1,c=a+1,u=l+1,f=e/a,h=n/l,d=[],p=[],m=[],_=[];for(let b=0;b<u;b++){const g=b*h-o;for(let x=0;x<c;x++){const y=x*f-r;p.push(y,-g,0),m.push(0,0,1),_.push(x/a),_.push(1-b/l)}}for(let b=0;b<l;b++)for(let g=0;g<a;g++){const x=g+c*b,y=g+c*(b+1),v=g+1+c*(b+1),w=g+1+c*b;d.push(x,y,w),d.push(y,v,w)}this.setIndex(d),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(m,3)),this.setAttribute("uv",new It(_,2))}}var IY=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,DY=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,OY=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,NY=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,BY=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,FY="vec3 transformed = vec3( position );",zY=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,UY=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,HY=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,VY=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,GY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,WY=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jY=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,YY=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,qY=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,XY=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ZY=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,JY=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,KY=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$Y=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,QY=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,eq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,tq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,nq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,iq="gl_FragColor = linearToOutputTexel( gl_FragColor );",sq=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,rq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,oq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,aq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,cq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,uq=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,fq=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,hq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,dq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,pq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,mq=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,gq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_q=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,bq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,vq=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,yq=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,wq=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,xq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Mq=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Sq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,Eq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Tq=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,kq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,Aq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Lq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Cq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Pq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Rq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Iq=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,Dq=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Oq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Nq=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Bq=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Fq=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zq=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,Uq=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,Hq=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,Vq=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Gq=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,Wq=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,jq=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Yq=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,qq=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Xq=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Zq=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Jq=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Kq=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$q=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Qq=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,nX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,iX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,sX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,rX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,aX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,hX=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,dX=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,pX=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,mX=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,gX=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,_X=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,bX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,vX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,yX=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,wX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,xX=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,MX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SX=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,EX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,kX=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,AX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,LX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,CX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,PX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,RX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,IX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OX=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,NX=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BX=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zX=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,UX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HX=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GX=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WX=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jX=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,qX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,XX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ZX=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,JX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,KX=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$X=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,QX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const dn={alphamap_fragment:IY,alphamap_pars_fragment:DY,alphatest_fragment:OY,aomap_fragment:NY,aomap_pars_fragment:BY,begin_vertex:FY,beginnormal_vertex:zY,bsdfs:UY,bumpmap_pars_fragment:HY,clipping_planes_fragment:VY,clipping_planes_pars_fragment:GY,clipping_planes_pars_vertex:WY,clipping_planes_vertex:jY,color_fragment:YY,color_pars_fragment:qY,color_pars_vertex:XY,color_vertex:ZY,common:JY,cube_uv_reflection_fragment:KY,defaultnormal_vertex:$Y,displacementmap_pars_vertex:QY,displacementmap_vertex:eq,emissivemap_fragment:tq,emissivemap_pars_fragment:nq,encodings_fragment:iq,encodings_pars_fragment:sq,envmap_fragment:rq,envmap_common_pars_fragment:oq,envmap_pars_fragment:aq,envmap_pars_vertex:lq,envmap_physical_pars_fragment:vq,envmap_vertex:cq,fog_vertex:uq,fog_pars_vertex:fq,fog_fragment:hq,fog_pars_fragment:dq,gradientmap_pars_fragment:pq,lightmap_fragment:mq,lightmap_pars_fragment:gq,lights_lambert_vertex:_q,lights_pars_begin:bq,lights_toon_fragment:yq,lights_toon_pars_fragment:wq,lights_phong_fragment:xq,lights_phong_pars_fragment:Mq,lights_physical_fragment:Sq,lights_physical_pars_fragment:Eq,lights_fragment_begin:Tq,lights_fragment_maps:kq,lights_fragment_end:Aq,logdepthbuf_fragment:Lq,logdepthbuf_pars_fragment:Cq,logdepthbuf_pars_vertex:Pq,logdepthbuf_vertex:Rq,map_fragment:Iq,map_pars_fragment:Dq,map_particle_fragment:Oq,map_particle_pars_fragment:Nq,metalnessmap_fragment:Bq,metalnessmap_pars_fragment:Fq,morphnormal_vertex:zq,morphtarget_pars_vertex:Uq,morphtarget_vertex:Hq,normal_fragment_begin:Vq,normal_fragment_maps:Gq,normalmap_pars_fragment:Wq,clearcoat_normal_fragment_begin:jq,clearcoat_normal_fragment_maps:Yq,clearcoat_pars_fragment:qq,packing:Xq,premultiplied_alpha_fragment:Zq,project_vertex:Jq,dithering_fragment:Kq,dithering_pars_fragment:$q,roughnessmap_fragment:Qq,roughnessmap_pars_fragment:eX,shadowmap_pars_fragment:tX,shadowmap_pars_vertex:nX,shadowmap_vertex:iX,shadowmask_pars_fragment:sX,skinbase_vertex:rX,skinning_pars_vertex:oX,skinning_vertex:aX,skinnormal_vertex:lX,specularmap_fragment:cX,specularmap_pars_fragment:uX,tonemapping_fragment:fX,tonemapping_pars_fragment:hX,transmissionmap_fragment:dX,transmissionmap_pars_fragment:pX,uv_pars_fragment:mX,uv_pars_vertex:gX,uv_vertex:_X,uv2_pars_fragment:bX,uv2_pars_vertex:vX,uv2_vertex:yX,worldpos_vertex:wX,background_frag:xX,background_vert:MX,cube_frag:SX,cube_vert:EX,depth_frag:TX,depth_vert:kX,distanceRGBA_frag:AX,distanceRGBA_vert:LX,equirect_frag:CX,equirect_vert:PX,linedashed_frag:RX,linedashed_vert:IX,meshbasic_frag:DX,meshbasic_vert:OX,meshlambert_frag:NX,meshlambert_vert:BX,meshmatcap_frag:FX,meshmatcap_vert:zX,meshtoon_frag:UX,meshtoon_vert:HX,meshphong_frag:VX,meshphong_vert:GX,meshphysical_frag:WX,meshphysical_vert:jX,normal_frag:YX,normal_vert:qX,points_frag:XX,points_vert:ZX,shadow_frag:JX,shadow_vert:KX,sprite_frag:$X,sprite_vert:QX},ht={common:{diffuse:{value:new Pt(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ws},uv2Transform:{value:new ws},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new je(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pt(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ws}},sprite:{diffuse:{value:new Pt(15658734)},opacity:{value:1},center:{value:new je(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new ws}}},Gr={basic:{uniforms:Yi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.fog]),vertexShader:dn.meshbasic_vert,fragmentShader:dn.meshbasic_frag},lambert:{uniforms:Yi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.fog,ht.lights,{emissive:{value:new Pt(0)}}]),vertexShader:dn.meshlambert_vert,fragmentShader:dn.meshlambert_frag},phong:{uniforms:Yi([ht.common,ht.specularmap,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,ht.lights,{emissive:{value:new Pt(0)},specular:{value:new Pt(1118481)},shininess:{value:30}}]),vertexShader:dn.meshphong_vert,fragmentShader:dn.meshphong_frag},standard:{uniforms:Yi([ht.common,ht.envmap,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.roughnessmap,ht.metalnessmap,ht.fog,ht.lights,{emissive:{value:new Pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:dn.meshphysical_vert,fragmentShader:dn.meshphysical_frag},toon:{uniforms:Yi([ht.common,ht.aomap,ht.lightmap,ht.emissivemap,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.gradientmap,ht.fog,ht.lights,{emissive:{value:new Pt(0)}}]),vertexShader:dn.meshtoon_vert,fragmentShader:dn.meshtoon_frag},matcap:{uniforms:Yi([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,ht.fog,{matcap:{value:null}}]),vertexShader:dn.meshmatcap_vert,fragmentShader:dn.meshmatcap_frag},points:{uniforms:Yi([ht.points,ht.fog]),vertexShader:dn.points_vert,fragmentShader:dn.points_frag},dashed:{uniforms:Yi([ht.common,ht.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:dn.linedashed_vert,fragmentShader:dn.linedashed_frag},depth:{uniforms:Yi([ht.common,ht.displacementmap]),vertexShader:dn.depth_vert,fragmentShader:dn.depth_frag},normal:{uniforms:Yi([ht.common,ht.bumpmap,ht.normalmap,ht.displacementmap,{opacity:{value:1}}]),vertexShader:dn.normal_vert,fragmentShader:dn.normal_frag},sprite:{uniforms:Yi([ht.sprite,ht.fog]),vertexShader:dn.sprite_vert,fragmentShader:dn.sprite_frag},background:{uniforms:{uvTransform:{value:new ws},t2D:{value:null}},vertexShader:dn.background_vert,fragmentShader:dn.background_frag},cube:{uniforms:Yi([ht.envmap,{opacity:{value:1}}]),vertexShader:dn.cube_vert,fragmentShader:dn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:dn.equirect_vert,fragmentShader:dn.equirect_frag},distanceRGBA:{uniforms:Yi([ht.common,ht.displacementmap,{referencePosition:{value:new ee},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:dn.distanceRGBA_vert,fragmentShader:dn.distanceRGBA_frag},shadow:{uniforms:Yi([ht.lights,ht.fog,{color:{value:new Pt(0)},opacity:{value:1}}]),vertexShader:dn.shadow_vert,fragmentShader:dn.shadow_frag}};Gr.physical={uniforms:Yi([Gr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new je(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Pt(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:dn.meshphysical_vert,fragmentShader:dn.meshphysical_frag};function eZ(t,e,n,i,s){const r=new Pt(0);let o=0,a,l,c=null,u=0,f=null;function h(p,m,_,b){let g=m.isScene===!0?m.background:null;g&&g.isTexture&&(g=e.get(g));const x=t.xr,y=x.getSession&&x.getSession();y&&y.environmentBlendMode==="additive"&&(g=null),g===null?d(r,o):g&&g.isColor&&(d(g,1),b=!0),(t.autoClear||b)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.isWebGLCubeRenderTargetTexture||g.mapping===kg)?(l===void 0&&(l=new Ai(new Cg(1,1,1),new Ss({name:"BackgroundCubeMaterial",uniforms:tu(Gr.cube.uniforms),vertexShader:Gr.cube.vertexShader,fragmentShader:Gr.cube.fragmentShader,side:Ui,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(v,w,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),g.isWebGLCubeRenderTarget&&(g=g.texture),l.material.uniforms.envMap.value=g,l.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,(c!==g||u!==g.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,c=g,u=g.version,f=t.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):g&&g.isTexture&&(a===void 0&&(a=new Ai(new Rg(2,2),new Ss({name:"BackgroundMaterial",uniforms:tu(Gr.background.uniforms),vertexShader:Gr.background.vertexShader,fragmentShader:Gr.background.fragmentShader,side:Mg,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,g.matrixAutoUpdate===!0&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),(c!==g||u!==g.version||f!==t.toneMapping)&&(a.material.needsUpdate=!0,c=g,u=g.version,f=t.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function d(p,m){n.buffers.color.setClear(p.r,p.g,p.b,m,s)}return{getClearColor:function(){return r},setClearColor:function(p,m){r.set(p),o=m!==void 0?m:1,d(r,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,d(r,o)},render:h}}function tZ(t,e,n,i){const s=t.getParameter(34921),r=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||r!==null,a={},l=m(null);let c=l;function u(B,U,N,$,W){let j=!1;if(o){const J=p($,N,U);c!==J&&(c=J,h(c.object)),j=_($,W),j&&b($,W)}else{const J=U.wireframe===!0;(c.geometry!==$.id||c.program!==N.id||c.wireframe!==J)&&(c.geometry=$.id,c.program=N.id,c.wireframe=J,j=!0)}B.isInstancedMesh===!0&&(j=!0),W!==null&&n.update(W,34963),j&&(S(B,U,N,$),W!==null&&t.bindBuffer(34963,n.get(W).buffer))}function f(){return i.isWebGL2?t.createVertexArray():r.createVertexArrayOES()}function h(B){return i.isWebGL2?t.bindVertexArray(B):r.bindVertexArrayOES(B)}function d(B){return i.isWebGL2?t.deleteVertexArray(B):r.deleteVertexArrayOES(B)}function p(B,U,N){const $=N.wireframe===!0;let W=a[B.id];W===void 0&&(W={},a[B.id]=W);let j=W[U.id];j===void 0&&(j={},W[U.id]=j);let J=j[$];return J===void 0&&(J=m(f()),j[$]=J),J}function m(B){const U=[],N=[],$=[];for(let W=0;W<s;W++)U[W]=0,N[W]=0,$[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:N,attributeDivisors:$,object:B,attributes:{},index:null}}function _(B,U){const N=c.attributes,$=B.attributes;if(Object.keys(N).length!==Object.keys($).length)return!0;for(const W in $){const j=N[W],J=$[W];if(j===void 0||j.attribute!==J||j.data!==J.data)return!0}return c.index!==U}function b(B,U){const N={},$=B.attributes;for(const W in $){const j=$[W],J={};J.attribute=j,j.data&&(J.data=j.data),N[W]=J}c.attributes=N,c.index=U}function g(){const B=c.newAttributes;for(let U=0,N=B.length;U<N;U++)B[U]=0}function x(B){y(B,0)}function y(B,U){const N=c.newAttributes,$=c.enabledAttributes,W=c.attributeDivisors;N[B]=1,$[B]===0&&(t.enableVertexAttribArray(B),$[B]=1),W[B]!==U&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](B,U),W[B]=U)}function v(){const B=c.newAttributes,U=c.enabledAttributes;for(let N=0,$=U.length;N<$;N++)U[N]!==B[N]&&(t.disableVertexAttribArray(N),U[N]=0)}function w(B,U,N,$,W,j){i.isWebGL2===!0&&(N===5124||N===5125)?t.vertexAttribIPointer(B,U,N,W,j):t.vertexAttribPointer(B,U,N,$,W,j)}function S(B,U,N,$){if(i.isWebGL2===!1&&(B.isInstancedMesh||$.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;g();const W=$.attributes,j=N.getAttributes(),J=U.defaultAttributeValues;for(const se in j){const ne=j[se];if(ne>=0){const K=W[se];if(K!==void 0){const q=K.normalized,te=K.itemSize,re=n.get(K);if(re===void 0)continue;const Oe=re.buffer,Ee=re.type,ye=re.bytesPerElement;if(K.isInterleavedBufferAttribute){const xe=K.data,Ae=xe.stride,De=K.offset;xe&&xe.isInstancedInterleavedBuffer?(y(ne,xe.meshPerAttribute),$._maxInstanceCount===void 0&&($._maxInstanceCount=xe.meshPerAttribute*xe.count)):x(ne),t.bindBuffer(34962,Oe),w(ne,te,Ee,q,Ae*ye,De*ye)}else K.isInstancedBufferAttribute?(y(ne,K.meshPerAttribute),$._maxInstanceCount===void 0&&($._maxInstanceCount=K.meshPerAttribute*K.count)):x(ne),t.bindBuffer(34962,Oe),w(ne,te,Ee,q,0,0)}else if(se==="instanceMatrix"){const q=n.get(B.instanceMatrix);if(q===void 0)continue;const te=q.buffer,re=q.type;y(ne+0,1),y(ne+1,1),y(ne+2,1),y(ne+3,1),t.bindBuffer(34962,te),t.vertexAttribPointer(ne+0,4,re,!1,64,0),t.vertexAttribPointer(ne+1,4,re,!1,64,16),t.vertexAttribPointer(ne+2,4,re,!1,64,32),t.vertexAttribPointer(ne+3,4,re,!1,64,48)}else if(se==="instanceColor"){const q=n.get(B.instanceColor);if(q===void 0)continue;const te=q.buffer,re=q.type;y(ne,1),t.bindBuffer(34962,te),t.vertexAttribPointer(ne,3,re,!1,12,0)}else if(J!==void 0){const q=J[se];if(q!==void 0)switch(q.length){case 2:t.vertexAttrib2fv(ne,q);break;case 3:t.vertexAttrib3fv(ne,q);break;case 4:t.vertexAttrib4fv(ne,q);break;default:t.vertexAttrib1fv(ne,q)}}}}v()}function T(){L();for(const B in a){const U=a[B];for(const N in U){const $=U[N];for(const W in $)d($[W].object),delete $[W];delete U[N]}delete a[B]}}function k(B){if(a[B.id]===void 0)return;const U=a[B.id];for(const N in U){const $=U[N];for(const W in $)d($[W].object),delete $[W];delete U[N]}delete a[B.id]}function A(B){for(const U in a){const N=a[U];if(N[B.id]===void 0)continue;const $=N[B.id];for(const W in $)d($[W].object),delete $[W];delete N[B.id]}}function L(){D(),c!==l&&(c=l,h(c.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:L,resetDefaultState:D,dispose:T,releaseStatesOfGeometry:k,releaseStatesOfProgram:A,initAttributes:g,enableAttribute:x,disableUnusedAttributes:v}}function nZ(t,e,n,i){const s=i.isWebGL2;let r;function o(c){r=c}function a(c,u){t.drawArrays(r,c,u),n.update(u,r,1)}function l(c,u,f){if(f===0)return;let h,d;if(s)h=t,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](r,c,u,f),n.update(u,r,f)}this.setMode=o,this.render=a,this.renderInstances=l}function iZ(t,e,n){let i;function s(){if(i!==void 0)return i;const w=e.get("EXT_texture_filter_anisotropic");return w!==null?i=t.getParameter(w.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function r(w){if(w==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";w="mediump"}return w==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=r(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=n.logarithmicDepthBuffer===!0,u=t.getParameter(34930),f=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),p=t.getParameter(34921),m=t.getParameter(36347),_=t.getParameter(36348),b=t.getParameter(36349),g=f>0,x=o||!!e.get("OES_texture_float"),y=g&&x,v=o?t.getParameter(36183):0;return{isWebGL2:o,getMaxAnisotropy:s,getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:m,maxVaryings:_,maxFragmentUniforms:b,vertexTextures:g,floatFragmentTextures:x,floatVertexTextures:y,maxSamples:v}}function sZ(t){const e=this;let n=null,i=0,s=!1,r=!1;const o=new So,a=new ws,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,d){const p=f.length!==0||h||i!==0||s;return s=h,n=u(f,d,0),i=f.length,p},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1,c()},this.setState=function(f,h,d){const p=f.clippingPlanes,m=f.clipIntersection,_=f.clipShadows,b=t.get(f);if(!s||p===null||p.length===0||r&&!_)r?u(null):c();else{const g=r?0:i,x=g*4;let y=b.clippingState||null;l.value=y,y=u(p,h,x,d);for(let v=0;v!==x;++v)y[v]=n[v];b.clippingState=y,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=g}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,p){const m=f!==null?f.length:0;let _=null;if(m!==0){if(_=l.value,p!==!0||_===null){const b=d+m*4,g=h.matrixWorldInverse;a.getNormalMatrix(g),(_===null||_.length<b)&&(_=new Float32Array(b));for(let x=0,y=d;x!==m;++x,y+=4)o.copy(f[x]).applyMatrix4(g,a),o.normal.toArray(_,y),_[y+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,_}}function rZ(t){let e=new WeakMap;function n(r,o){return o===l_?r.mapping=Eg:o===c_&&(r.mapping=Tg),r}function i(r){if(r&&r.isTexture){const o=r.mapping;if(o===l_||o===c_)if(e.has(r)){const a=e.get(r).texture;return n(a,r.mapping)}else{const a=r.image;if(a&&a.height>0){const l=t.getRenderList(),c=t.getRenderTarget(),u=t.getRenderState(),f=new nu(a.height/2);return f.fromEquirectangularTexture(t,r),e.set(r,f),t.setRenderTarget(c),t.setRenderList(l),t.setRenderState(u),n(f.texture,r.mapping)}else return null}}return r}function s(){e=new WeakMap}return{get:i,dispose:s}}function oZ(t){const e={};return{has:function(n){if(e[n]!==void 0)return e[n]!==null;let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i!==null},get:function(n){return this.has(n)||console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]}}}function aZ(t,e,n,i){const s=new WeakMap,r=new WeakMap;function o(f){const h=f.target,d=s.get(h);d.index!==null&&e.remove(d.index);for(const m in d.attributes)e.remove(d.attributes[m]);h.removeEventListener("dispose",o),s.delete(h);const p=r.get(d);p&&(e.remove(p),r.delete(d)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){let d=s.get(h);return d||(h.addEventListener("dispose",o),h.isBufferGeometry?d=h:h.isGeometry&&(h._bufferGeometry===void 0&&(h._bufferGeometry=new sn().setFromObject(f)),d=h._bufferGeometry),s.set(h,d),n.memory.geometries++,d)}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],34962);const d=f.morphAttributes;for(const p in d){const m=d[p];for(let _=0,b=m.length;_<b;_++)e.update(m[_],34962)}}function c(f){const h=[],d=f.index,p=f.attributes.position;let m=0;if(d!==null){const g=d.array;m=d.version;for(let x=0,y=g.length;x<y;x+=3){const v=g[x+0],w=g[x+1],S=g[x+2];h.push(v,w,w,S,S,v)}}else{const g=p.array;m=p.version;for(let x=0,y=g.length/3-1;x<y;x+=3){const v=x+0,w=x+1,S=x+2;h.push(v,w,w,S,S,v)}}const _=new(NA(h)>65535?oh:rh)(h,1);_.version=m;const b=r.get(f);b&&e.remove(b),r.set(f,_)}function u(f){const h=r.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return r.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function lZ(t,e,n,i){const s=i.isWebGL2;let r;function o(h){r=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,d){t.drawElements(r,d,a,h*l),n.update(d,r,1)}function f(h,d,p){if(p===0)return;let m,_;if(s)m=t,_="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[_](r,d,a,h*l,p),n.update(d,r,p)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=f}function cZ(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(r/3);break;case 1:n.lines+=a*(r/2);break;case 3:n.lines+=a*(r-1);break;case 2:n.lines+=a*r;break;case 0:n.points+=a*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function s(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:s,update:i}}function uZ(t,e){return t[0]-e[0]}function fZ(t,e){return Math.abs(e[1])-Math.abs(t[1])}function hZ(t){const e={},n=new Float32Array(8),i=[];for(let r=0;r<8;r++)i[r]=[r,0];function s(r,o,a,l){const c=r.morphTargetInfluences,u=c===void 0?0:c.length;let f=e[o.id];if(f===void 0){f=[];for(let _=0;_<u;_++)f[_]=[_,0];e[o.id]=f}for(let _=0;_<u;_++){const b=f[_];b[0]=_,b[1]=c[_]}f.sort(fZ);for(let _=0;_<8;_++)_<u&&f[_][1]?(i[_][0]=f[_][0],i[_][1]=f[_][1]):(i[_][0]=Number.MAX_SAFE_INTEGER,i[_][1]=0);i.sort(uZ);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let _=0;_<8;_++){const b=i[_],g=b[0],x=b[1];g!==Number.MAX_SAFE_INTEGER&&x?(h&&o.getAttribute("morphTarget"+_)!==h[g]&&o.setAttribute("morphTarget"+_,h[g]),d&&o.getAttribute("morphNormal"+_)!==d[g]&&o.setAttribute("morphNormal"+_,d[g]),n[_]=x,p+=x):(h&&o.getAttribute("morphTarget"+_)!==void 0&&o.deleteAttribute("morphTarget"+_),d&&o.getAttribute("morphNormal"+_)!==void 0&&o.deleteAttribute("morphNormal"+_),n[_]=0)}const m=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",m),l.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:s}}function dZ(t,e,n,i){let s=new WeakMap;function r(a){const l=i.render.frame,c=a.geometry,u=e.get(a,c);return s.get(u)!==l&&(c.isGeometry&&u.updateFromObject(a),e.update(u),s.set(u,l)),a.isInstancedMesh&&(n.update(a.instanceMatrix,34962),a.instanceColor!==null&&n.update(a.instanceColor,34962)),u}function o(){s=new WeakMap}return{update:r,dispose:o}}function Ia(t,e,n,i,s,r,o,a,l,c){t=t!==void 0?t:[],e=e!==void 0?e:Eg,o=o!==void 0?o:dl,Hn.call(this,t,e,n,i,s,r,o,a,l,c),this.flipY=!1}Ia.prototype=Object.create(Hn.prototype);Ia.prototype.constructor=Ia;Ia.prototype.isCubeTexture=!0;Object.defineProperty(Ia.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});function lh(t,e,n,i){Hn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=Xi,this.minFilter=Xi,this.wrapR=ys,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}lh.prototype=Object.create(Hn.prototype);lh.prototype.constructor=lh;lh.prototype.isDataTexture2DArray=!0;function ch(t,e,n,i){Hn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=Xi,this.minFilter=Xi,this.wrapR=ys,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}ch.prototype=Object.create(Hn.prototype);ch.prototype.constructor=ch;ch.prototype.isDataTexture3D=!0;const zA=new Hn,pZ=new lh,mZ=new ch,UA=new Ia,WM=[],jM=[],YM=new Float32Array(16),qM=new Float32Array(9),XM=new Float32Array(4);function bu(t,e,n){const i=t[0];if(i<=0||i>0)return t;const s=e*n;let r=WM[s];if(r===void 0&&(r=new Float32Array(s),WM[s]=r),e!==0){i.toArray(r,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(r,a)}return r}function rr(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Bs(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function HA(t,e){let n=jM[e];n===void 0&&(n=new Int32Array(e),jM[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function gZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function _Z(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(rr(n,e))return;t.uniform2fv(this.addr,e),Bs(n,e)}}function bZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(rr(n,e))return;t.uniform3fv(this.addr,e),Bs(n,e)}}function vZ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(rr(n,e))return;t.uniform4fv(this.addr,e),Bs(n,e)}}function yZ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(rr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Bs(n,e)}else{if(rr(n,i))return;XM.set(i),t.uniformMatrix2fv(this.addr,!1,XM),Bs(n,i)}}function wZ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(rr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Bs(n,e)}else{if(rr(n,i))return;qM.set(i),t.uniformMatrix3fv(this.addr,!1,qM),Bs(n,i)}}function xZ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(rr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Bs(n,e)}else{if(rr(n,i))return;YM.set(i),t.uniformMatrix4fv(this.addr,!1,YM),Bs(n,i)}}function MZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.safeSetTexture2D(e||zA,s)}function SZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture2DArray(e||pZ,s)}function EZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.setTexture3D(e||mZ,s)}function TZ(t,e,n){const i=this.cache,s=n.allocateTextureUnit();i[0]!==s&&(t.uniform1i(this.addr,s),i[0]=s),n.safeSetTextureCube(e||UA,s)}function kZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function AZ(t,e){const n=this.cache;rr(n,e)||(t.uniform2iv(this.addr,e),Bs(n,e))}function LZ(t,e){const n=this.cache;rr(n,e)||(t.uniform3iv(this.addr,e),Bs(n,e))}function CZ(t,e){const n=this.cache;rr(n,e)||(t.uniform4iv(this.addr,e),Bs(n,e))}function PZ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function RZ(t){switch(t){case 5126:return gZ;case 35664:return _Z;case 35665:return bZ;case 35666:return vZ;case 35674:return yZ;case 35675:return wZ;case 35676:return xZ;case 5124:case 35670:return kZ;case 35667:case 35671:return AZ;case 35668:case 35672:return LZ;case 35669:case 35673:return CZ;case 5125:return PZ;case 35678:case 36198:case 36298:case 36306:case 35682:return MZ;case 35679:case 36299:case 36307:return EZ;case 35680:case 36300:case 36308:case 36293:return TZ;case 36289:case 36303:case 36311:case 36292:return SZ}}function IZ(t,e){t.uniform1fv(this.addr,e)}function DZ(t,e){t.uniform1iv(this.addr,e)}function OZ(t,e){t.uniform2iv(this.addr,e)}function NZ(t,e){t.uniform3iv(this.addr,e)}function BZ(t,e){t.uniform4iv(this.addr,e)}function FZ(t,e){const n=bu(e,this.size,2);t.uniform2fv(this.addr,n)}function zZ(t,e){const n=bu(e,this.size,3);t.uniform3fv(this.addr,n)}function UZ(t,e){const n=bu(e,this.size,4);t.uniform4fv(this.addr,n)}function HZ(t,e){const n=bu(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function VZ(t,e){const n=bu(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function GZ(t,e){const n=bu(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function WZ(t,e,n){const i=e.length,s=HA(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.safeSetTexture2D(e[r]||zA,s[r])}function jZ(t,e,n){const i=e.length,s=HA(n,i);t.uniform1iv(this.addr,s);for(let r=0;r!==i;++r)n.safeSetTextureCube(e[r]||UA,s[r])}function YZ(t){switch(t){case 5126:return IZ;case 35664:return FZ;case 35665:return zZ;case 35666:return UZ;case 35674:return HZ;case 35675:return VZ;case 35676:return GZ;case 5124:case 35670:return DZ;case 35667:case 35671:return OZ;case 35668:case 35672:return NZ;case 35669:case 35673:return BZ;case 35678:case 36198:case 36298:case 36306:case 35682:return WZ;case 35680:case 36300:case 36308:case 36293:return jZ}}function qZ(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=RZ(e.type)}function VA(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=YZ(e.type)}VA.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Bs(e,t)};function GA(t){this.id=t,this.seq=[],this.map={}}GA.prototype.setValue=function(t,e,n){const i=this.seq;for(let s=0,r=i.length;s!==r;++s){const o=i[s];o.setValue(t,e[o.id],n)}};const Y0=/([\w\d_]+)(\])?(\[|\.)?/g;function ZM(t,e){t.seq.push(e),t.map[e.id]=e}function XZ(t,e,n){const i=t.name,s=i.length;for(Y0.lastIndex=0;;){const r=Y0.exec(i),o=Y0.lastIndex;let a=r[1];const l=r[2]==="]",c=r[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===s){ZM(n,c===void 0?new qZ(a,t,e):new VA(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new GA(a),ZM(n,f)),n=f}}}function Sa(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const s=t.getActiveUniform(e,i),r=t.getUniformLocation(e,s.name);XZ(s,r,this)}}Sa.prototype.setValue=function(t,e,n,i){const s=this.map[e];s!==void 0&&s.setValue(t,n,i)};Sa.prototype.setOptional=function(t,e,n){const i=e[n];i!==void 0&&this.setValue(t,n,i)};Sa.upload=function(t,e,n,i){for(let s=0,r=e.length;s!==r;++s){const o=e[s],a=n[o.id];a.needsUpdate!==!1&&o.setValue(t,a.value,i)}};Sa.seqWithValue=function(t,e){const n=[];for(let i=0,s=t.length;i!==s;++i){const r=t[i];r.id in e&&n.push(r)}return n};function JM(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}let ZZ=0;function JZ(t){const e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function WA(t){switch(t){case Fh:return["Linear","( value )"];case IA:return["sRGB","( value )"];case iY:return["RGBE","( value )"];case rY:return["RGBM","( value, 7.0 )"];case oY:return["RGBM","( value, 16.0 )"];case aY:return["RGBD","( value, 256.0 )"];case nY:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case sY:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function KM(t,e,n){const i=t.getShaderParameter(e,35713),s=t.getShaderInfoLog(e).trim();if(i&&s==="")return"";const r=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+s+JZ(r)}function Bu(t,e){const n=WA(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function KZ(t,e){const n=WA(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function $Z(t,e){let n;switch(e){case nj:n="Linear";break;case ij:n="Reinhard";break;case sj:n="OptimizedCineon";break;case rj:n="ACESFilmic";break;case oj:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function QZ(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter($u).join(`
`)}function eJ(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function tJ(t,e){const n={},i=t.getProgramParameter(e,35721);for(let s=0;s<i;s++){const o=t.getActiveAttrib(e,s).name;n[o]=t.getAttribLocation(e,o)}return n}function $u(t){return t!==""}function $M(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function QM(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const nJ=/^[ \t]*#include +<([\w\d./]+)>/gm;function b_(t){return t.replace(nJ,iJ)}function iJ(t,e){const n=dn[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return b_(n)}const sJ=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,rJ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e3(t){return t.replace(rJ,jA).replace(sJ,oJ)}function oJ(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),jA(t,e,n,i)}function jA(t,e,n,i){let s="";for(let r=parseInt(e);r<parseInt(n);r++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return s}function t3(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function aJ(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===kA?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===DW?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Ku&&(e="SHADOWMAP_TYPE_VSM"),e}function lJ(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Eg:case Tg:e="ENVMAP_TYPE_CUBE";break;case kg:case Ag:e="ENVMAP_TYPE_CUBE_UV";break}return e}function cJ(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Tg:case Ag:e="ENVMAP_MODE_REFRACTION";break}return e}function uJ(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Sg:e="ENVMAP_BLENDING_MULTIPLY";break;case ej:e="ENVMAP_BLENDING_MIX";break;case tj:e="ENVMAP_BLENDING_ADD";break}return e}function fJ(t,e,n,i){const s=t.getContext(),r=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=aJ(n),c=lJ(n),u=cJ(n),f=uJ(n),h=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":QZ(n),p=eJ(r),m=s.createProgram();let _,b,g=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(_=[p].filter($u).join(`
`),_.length>0&&(_+=`
`),b=[d,p].filter($u).join(`
`),b.length>0&&(b+=`
`)):(_=[t3(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($u).join(`
`),b=[d,t3(n),"#define SHADER_NAME "+n.shaderName,p,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==vf?"#define TONE_MAPPING":"",n.toneMapping!==vf?dn.tonemapping_pars_fragment:"",n.toneMapping!==vf?$Z("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",dn.encodings_pars_fragment,n.map?Bu("mapTexelToLinear",n.mapEncoding):"",n.matcap?Bu("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Bu("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Bu("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Bu("lightMapTexelToLinear",n.lightMapEncoding):"",KZ("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter($u).join(`
`)),o=b_(o),o=$M(o,n),o=QM(o,n),a=b_(a),a=$M(a,n),a=QM(a,n),o=e3(o),a=e3(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(g=`#version 300 es
`,_=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,b=["#define varying in",n.glslVersion===IM?"":"out highp vec4 pc_fragColor;",n.glslVersion===IM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const x=g+_+o,y=g+b+a,v=JM(s,35633,x),w=JM(s,35632,y);if(s.attachShader(m,v),s.attachShader(m,w),n.index0AttributeName!==void 0?s.bindAttribLocation(m,0,n.index0AttributeName):n.morphTargets===!0&&s.bindAttribLocation(m,0,"position"),s.linkProgram(m),t.debug.checkShaderErrors){const k=s.getProgramInfoLog(m).trim(),A=s.getShaderInfoLog(v).trim(),L=s.getShaderInfoLog(w).trim();let D=!0,B=!0;if(s.getProgramParameter(m,35714)===!1){D=!1;const U=KM(s,v,"vertex"),N=KM(s,w,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(m,35715),"gl.getProgramInfoLog",k,U,N)}else k!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",k):(A===""||L==="")&&(B=!1);B&&(this.diagnostics={runnable:D,programLog:k,vertexShader:{log:A,prefix:_},fragmentShader:{log:L,prefix:b}})}s.deleteShader(v),s.deleteShader(w);let S;this.getUniforms=function(){return S===void 0&&(S=new Sa(s,m)),S};let T;return this.getAttributes=function(){return T===void 0&&(T=tJ(s,m)),T},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=ZZ++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=v,this.fragmentShader=w,this}function hJ(t,e,n,i,s,r){const o=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,f=i.vertexTextures;let h=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function m(w){const T=w.skeleton.bones;if(c)return 1024;{const A=Math.floor((u-20)/4),L=Math.min(A,T.length);return L<T.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+T.length+" bones. This GPU supports "+L+"."),0):L}}function _(w){let S;return w?w.isTexture?S=w.encoding:w.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),S=w.texture.encoding):S=Fh,S}function b(w,S,T,k,A){const L=k.fog,D=w.isMeshStandardMaterial?k.environment:null,B=e.get(w.envMap||D),U=d[w.type],N=A.isSkinnedMesh?m(A):0;w.precision!==null&&(h=i.getMaxPrecision(w.precision),h!==w.precision&&console.warn("THREE.WebGLProgram.getParameters:",w.precision,"not supported, using",h,"instead."));let $,W;if(U){const se=Gr[U];$=se.vertexShader,W=se.fragmentShader}else $=w.vertexShader,W=w.fragmentShader;const j=t.getRenderTarget();return{isWebGL2:a,shaderID:U,shaderName:w.type,vertexShader:$,fragmentShader:W,defines:w.defines,isRawShaderMaterial:w.isRawShaderMaterial===!0,glslVersion:w.glslVersion,precision:h,instancing:A.isInstancedMesh===!0,instancingColor:A.isInstancedMesh===!0&&A.instanceColor!==null,supportsVertexTextures:f,outputEncoding:j!==null?_(j.texture):t.outputEncoding,map:!!w.map,mapEncoding:_(w.map),matcap:!!w.matcap,matcapEncoding:_(w.matcap),envMap:!!B,envMapMode:B&&B.mapping,envMapEncoding:_(B),envMapCubeUV:!!B&&(B.mapping===kg||B.mapping===Ag),lightMap:!!w.lightMap,lightMapEncoding:_(w.lightMap),aoMap:!!w.aoMap,emissiveMap:!!w.emissiveMap,emissiveMapEncoding:_(w.emissiveMap),bumpMap:!!w.bumpMap,normalMap:!!w.normalMap,objectSpaceNormalMap:w.normalMapType===uY,tangentSpaceNormalMap:w.normalMapType===_u,clearcoatMap:!!w.clearcoatMap,clearcoatRoughnessMap:!!w.clearcoatRoughnessMap,clearcoatNormalMap:!!w.clearcoatNormalMap,displacementMap:!!w.displacementMap,roughnessMap:!!w.roughnessMap,metalnessMap:!!w.metalnessMap,specularMap:!!w.specularMap,alphaMap:!!w.alphaMap,gradientMap:!!w.gradientMap,sheen:!!w.sheen,transmissionMap:!!w.transmissionMap,combine:w.combine,vertexTangents:w.normalMap&&w.vertexTangents,vertexColors:w.vertexColors,vertexUvs:!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatMap||!!w.clearcoatRoughnessMap||!!w.clearcoatNormalMap||!!w.displacementMap||!!w.transmissionMap,uvsVertexOnly:!(!!w.map||!!w.bumpMap||!!w.normalMap||!!w.specularMap||!!w.alphaMap||!!w.emissiveMap||!!w.roughnessMap||!!w.metalnessMap||!!w.clearcoatNormalMap||!!w.transmissionMap)&&!!w.displacementMap,fog:!!L,useFog:w.fog,fogExp2:L&&L.isFogExp2,flatShading:w.flatShading,sizeAttenuation:w.sizeAttenuation,logarithmicDepthBuffer:l,skinning:w.skinning&&N>0,maxBones:N,useVertexTexture:c,morphTargets:w.morphTargets,morphNormals:w.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:w.dithering,shadowMapEnabled:t.shadowMap.enabled&&T.length>0,shadowMapType:t.shadowMap.type,toneMapping:w.toneMapped?t.toneMapping:vf,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:w.premultipliedAlpha,alphaTest:w.alphaTest,doubleSided:w.side===Ml,flipSided:w.side===Ui,depthPacking:w.depthPacking!==void 0?w.depthPacking:!1,index0AttributeName:w.index0AttributeName,extensionDerivatives:w.extensions&&w.extensions.derivatives,extensionFragDepth:w.extensions&&w.extensions.fragDepth,extensionDrawBuffers:w.extensions&&w.extensions.drawBuffers,extensionShaderTextureLOD:w.extensions&&w.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:w.customProgramCacheKey()}}function g(w){const S=[];if(w.shaderID?S.push(w.shaderID):(S.push(w.fragmentShader),S.push(w.vertexShader)),w.defines!==void 0)for(const T in w.defines)S.push(T),S.push(w.defines[T]);if(w.isRawShaderMaterial===!1){for(let T=0;T<p.length;T++)S.push(w[p[T]]);S.push(t.outputEncoding),S.push(t.gammaFactor)}return S.push(w.customProgramCacheKey),S.join()}function x(w){const S=d[w.type];let T;if(S){const k=Gr[S];T=AY.clone(k.uniforms)}else T=w.uniforms;return T}function y(w,S){let T;for(let k=0,A=o.length;k<A;k++){const L=o[k];if(L.cacheKey===S){T=L,++T.usedTimes;break}}return T===void 0&&(T=new fJ(t,S,w,s),o.push(T)),T}function v(w){if(--w.usedTimes===0){const S=o.indexOf(w);o[S]=o[o.length-1],o.pop(),w.destroy()}}return{getParameters:b,getProgramCacheKey:g,getUniforms:x,acquireProgram:y,releaseProgram:v,programs:o}}function dJ(){let t=new WeakMap;function e(r){let o=t.get(r);return o===void 0&&(o={},t.set(r,o)),o}function n(r){t.delete(r)}function i(r,o,a){t.get(r)[o]=a}function s(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:s}}function pJ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function mJ(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function n3(t){const e=[];let n=0;const i=[],s=[],r={id:-1};function o(){n=0,i.length=0,s.length=0}function a(h,d,p,m,_,b){let g=e[n];const x=t.get(p);return g===void 0?(g={id:h.id,object:h,geometry:d,material:p,program:x.program||r,groupOrder:m,renderOrder:h.renderOrder,z:_,group:b},e[n]=g):(g.id=h.id,g.object=h,g.geometry=d,g.material=p,g.program=x.program||r,g.groupOrder=m,g.renderOrder=h.renderOrder,g.z=_,g.group=b),n++,g}function l(h,d,p,m,_,b){const g=a(h,d,p,m,_,b);(p.transparent===!0?s:i).push(g)}function c(h,d,p,m,_,b){const g=a(h,d,p,m,_,b);(p.transparent===!0?s:i).unshift(g)}function u(h,d){i.length>1&&i.sort(h||pJ),s.length>1&&s.sort(d||mJ)}function f(){for(let h=n,d=e.length;h<d;h++){const p=e[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.program=null,p.group=null}}return{opaque:i,transparent:s,init:o,push:l,unshift:c,finish:f,sort:u}}function gJ(t){let e=new WeakMap;function n(s,r){const o=e.get(s);let a;return o===void 0?(a=new n3(t),e.set(s,new WeakMap),e.get(s).set(r,a)):(a=o.get(r),a===void 0&&(a=new n3(t),o.set(r,a))),a}function i(){e=new WeakMap}return{get:n,dispose:i}}function _J(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ee,color:new Pt};break;case"SpotLight":n={position:new ee,direction:new ee,color:new Pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ee,color:new Pt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ee,skyColor:new Pt,groundColor:new Pt};break;case"RectAreaLight":n={color:new Pt,position:new ee,halfWidth:new ee,halfHeight:new ee};break}return t[e.id]=n,n}}}function bJ(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new je,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let vJ=0;function yJ(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function wJ(){const t=new _J,e=bJ(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let a=0;a<9;a++)n.probe.push(new ee);const i=new ee,s=new an,r=new an;function o(a,l,c){let u=0,f=0,h=0;for(let S=0;S<9;S++)n.probe[S].set(0,0,0);let d=0,p=0,m=0,_=0,b=0,g=0,x=0,y=0;const v=c.matrixWorldInverse;a.sort(yJ);for(let S=0,T=a.length;S<T;S++){const k=a[S],A=k.color,L=k.intensity,D=k.distance,B=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)u+=A.r*L,f+=A.g*L,h+=A.b*L;else if(k.isLightProbe)for(let U=0;U<9;U++)n.probe[U].addScaledVector(k.sh.coefficients[U],L);else if(k.isDirectionalLight){const U=t.get(k);if(U.color.copy(k.color).multiplyScalar(k.intensity),U.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),U.direction.sub(i),U.direction.transformDirection(v),k.castShadow){const N=k.shadow,$=e.get(k);$.shadowBias=N.bias,$.shadowNormalBias=N.normalBias,$.shadowRadius=N.radius,$.shadowMapSize=N.mapSize,n.directionalShadow[d]=$,n.directionalShadowMap[d]=B,n.directionalShadowMatrix[d]=k.shadow.matrix,g++}n.directional[d]=U,d++}else if(k.isSpotLight){const U=t.get(k);if(U.position.setFromMatrixPosition(k.matrixWorld),U.position.applyMatrix4(v),U.color.copy(A).multiplyScalar(L),U.distance=D,U.direction.setFromMatrixPosition(k.matrixWorld),i.setFromMatrixPosition(k.target.matrixWorld),U.direction.sub(i),U.direction.transformDirection(v),U.coneCos=Math.cos(k.angle),U.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),U.decay=k.decay,k.castShadow){const N=k.shadow,$=e.get(k);$.shadowBias=N.bias,$.shadowNormalBias=N.normalBias,$.shadowRadius=N.radius,$.shadowMapSize=N.mapSize,n.spotShadow[m]=$,n.spotShadowMap[m]=B,n.spotShadowMatrix[m]=k.shadow.matrix,y++}n.spot[m]=U,m++}else if(k.isRectAreaLight){const U=t.get(k);U.color.copy(A).multiplyScalar(L),U.position.setFromMatrixPosition(k.matrixWorld),U.position.applyMatrix4(v),r.identity(),s.copy(k.matrixWorld),s.premultiply(v),r.extractRotation(s),U.halfWidth.set(k.width*.5,0,0),U.halfHeight.set(0,k.height*.5,0),U.halfWidth.applyMatrix4(r),U.halfHeight.applyMatrix4(r),n.rectArea[_]=U,_++}else if(k.isPointLight){const U=t.get(k);if(U.position.setFromMatrixPosition(k.matrixWorld),U.position.applyMatrix4(v),U.color.copy(k.color).multiplyScalar(k.intensity),U.distance=k.distance,U.decay=k.decay,k.castShadow){const N=k.shadow,$=e.get(k);$.shadowBias=N.bias,$.shadowNormalBias=N.normalBias,$.shadowRadius=N.radius,$.shadowMapSize=N.mapSize,$.shadowCameraNear=N.camera.near,$.shadowCameraFar=N.camera.far,n.pointShadow[p]=$,n.pointShadowMap[p]=B,n.pointShadowMatrix[p]=k.shadow.matrix,x++}n.point[p]=U,p++}else if(k.isHemisphereLight){const U=t.get(k);U.direction.setFromMatrixPosition(k.matrixWorld),U.direction.transformDirection(v),U.direction.normalize(),U.skyColor.copy(k.color).multiplyScalar(L),U.groundColor.copy(k.groundColor).multiplyScalar(L),n.hemi[b]=U,b++}}_>0&&(n.rectAreaLTC1=ht.LTC_1,n.rectAreaLTC2=ht.LTC_2),n.ambient[0]=u,n.ambient[1]=f,n.ambient[2]=h;const w=n.hash;(w.directionalLength!==d||w.pointLength!==p||w.spotLength!==m||w.rectAreaLength!==_||w.hemiLength!==b||w.numDirectionalShadows!==g||w.numPointShadows!==x||w.numSpotShadows!==y)&&(n.directional.length=d,n.spot.length=m,n.rectArea.length=_,n.point.length=p,n.hemi.length=b,n.directionalShadow.length=g,n.directionalShadowMap.length=g,n.pointShadow.length=x,n.pointShadowMap.length=x,n.spotShadow.length=y,n.spotShadowMap.length=y,n.directionalShadowMatrix.length=g,n.pointShadowMatrix.length=x,n.spotShadowMatrix.length=y,w.directionalLength=d,w.pointLength=p,w.spotLength=m,w.rectAreaLength=_,w.hemiLength=b,w.numDirectionalShadows=g,w.numPointShadows=x,w.numSpotShadows=y,n.version=vJ++)}return{setup:o,state:n}}function i3(){const t=new wJ,e=[],n=[];function i(){e.length=0,n.length=0}function s(l){e.push(l)}function r(l){n.push(l)}function o(l){t.setup(e,n,l)}return{init:i,state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:o,pushLight:s,pushShadow:r}}function xJ(){let t=new WeakMap;function e(i,s){let r;return t.has(i)===!1?(r=new i3,t.set(i,new WeakMap),t.get(i).set(s,r)):t.get(i).has(s)===!1?(r=new i3,t.get(i).set(s,r)):r=t.get(i).get(s),r}function n(){t=new WeakMap}return{get:e,dispose:n}}function El(t){Wt.call(this),this.type="MeshDepthMaterial",this.depthPacking=lY,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}El.prototype=Object.create(Wt.prototype);El.prototype.constructor=El;El.prototype.isMeshDepthMaterial=!0;El.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this};function Tl(t){Wt.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new ee,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}Tl.prototype=Object.create(Wt.prototype);Tl.prototype.constructor=Tl;Tl.prototype.isMeshDistanceMaterial=!0;Tl.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var MJ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,SJ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function YA(t,e,n){let i=new Pg;const s=new je,r=new je,o=new Un,a=[],l=[],c={},u={0:Ui,1:Mg,2:Ml},f=new Ss({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new je},radius:{value:4}},vertexShader:SJ,fragmentShader:MJ}),h=f.clone();h.defines.HORIZONAL_PASS=1;const d=new sn;d.setAttribute("position",new qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new Ai(d,f),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=kA,this.render=function(v,w,S){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||v.length===0)return;const T=t.getRenderTarget(),k=t.getActiveCubeFace(),A=t.getActiveMipmapLevel(),L=t.state;L.setBlending(_f),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let D=0,B=v.length;D<B;D++){const U=v[D],N=U.shadow;if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;if(N===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}s.copy(N.mapSize);const $=N.getFrameExtents();if(s.multiply($),r.copy(N.mapSize),(s.x>n||s.y>n)&&(s.x>n&&(r.x=Math.floor(n/$.x),s.x=r.x*$.x,N.mapSize.x=r.x),s.y>n&&(r.y=Math.floor(n/$.y),s.y=r.y*$.y,N.mapSize.y=r.y)),N.map===null&&!N.isPointLightShadow&&this.type===Ku){const j={minFilter:Gi,magFilter:Gi,format:Tr};N.map=new kr(s.x,s.y,j),N.map.texture.name=U.name+".shadowMap",N.mapPass=new kr(s.x,s.y,j),N.camera.updateProjectionMatrix()}if(N.map===null){const j={minFilter:Xi,magFilter:Xi,format:Tr};N.map=new kr(s.x,s.y,j),N.map.texture.name=U.name+".shadowMap",N.camera.updateProjectionMatrix()}t.setRenderTarget(N.map),t.clear();const W=N.getViewportCount();for(let j=0;j<W;j++){const J=N.getViewport(j);o.set(r.x*J.x,r.y*J.y,r.x*J.z,r.y*J.w),L.viewport(o),N.updateMatrices(U,j),i=N.getFrustum(),y(w,S,N.camera,U,this.type)}!N.isPointLightShadow&&this.type===Ku&&_(N,S),N.needsUpdate=!1}m.needsUpdate=!1,t.setRenderTarget(T,k,A)};function _(v,w){const S=e.update(p);f.uniforms.shadow_pass.value=v.map.texture,f.uniforms.resolution.value=v.mapSize,f.uniforms.radius.value=v.radius,t.setRenderTarget(v.mapPass),t.clear(),t.renderBufferDirect(w,null,S,f,p,null),h.uniforms.shadow_pass.value=v.mapPass.texture,h.uniforms.resolution.value=v.mapSize,h.uniforms.radius.value=v.radius,t.setRenderTarget(v.map),t.clear(),t.renderBufferDirect(w,null,S,h,p,null)}function b(v,w,S){const T=v<<0|w<<1|S<<2;let k=a[T];return k===void 0&&(k=new El({depthPacking:cY,morphTargets:v,skinning:w}),a[T]=k),k}function g(v,w,S){const T=v<<0|w<<1|S<<2;let k=l[T];return k===void 0&&(k=new Tl({morphTargets:v,skinning:w}),l[T]=k),k}function x(v,w,S,T,k,A,L){let D=null,B=b,U=v.customDepthMaterial;if(T.isPointLight===!0&&(B=g,U=v.customDistanceMaterial),U===void 0){let N=!1;S.morphTargets===!0&&(N=w.morphAttributes&&w.morphAttributes.position&&w.morphAttributes.position.length>0);let $=!1;v.isSkinnedMesh===!0&&(S.skinning===!0?$=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",v));const W=v.isInstancedMesh===!0;D=B(N,$,W)}else D=U;if(t.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0){const N=D.uuid,$=S.uuid;let W=c[N];W===void 0&&(W={},c[N]=W);let j=W[$];j===void 0&&(j=D.clone(),W[$]=j),D=j}return D.visible=S.visible,D.wireframe=S.wireframe,L===Ku?D.side=S.shadowSide!==null?S.shadowSide:S.side:D.side=S.shadowSide!==null?S.shadowSide:u[S.side],D.clipShadows=S.clipShadows,D.clippingPlanes=S.clippingPlanes,D.clipIntersection=S.clipIntersection,D.wireframeLinewidth=S.wireframeLinewidth,D.linewidth=S.linewidth,T.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(T.matrixWorld),D.nearDistance=k,D.farDistance=A),D}function y(v,w,S,T,k){if(v.visible===!1)return;if(v.layers.test(w.layers)&&(v.isMesh||v.isLine||v.isPoints)&&(v.castShadow||v.receiveShadow&&k===Ku)&&(!v.frustumCulled||i.intersectsObject(v))){v.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,v.matrixWorld);const D=e.update(v),B=v.material;if(Array.isArray(B)){const U=D.groups;for(let N=0,$=U.length;N<$;N++){const W=U[N],j=B[W.materialIndex];if(j&&j.visible){const J=x(v,D,j,T,S.near,S.far,k);t.renderBufferDirect(S,null,D,J,v,W)}}}else if(B.visible){const U=x(v,D,B,T,S.near,S.far,k);t.renderBufferDirect(S,null,D,U,v,null)}}const L=v.children;for(let D=0,B=L.length;D<B;D++)y(L[D],w,S,T,k)}}function EJ(t,e,n){const i=n.isWebGL2;function s(){let X=!1;const fe=new Un;let Le=null;const Pe=new Un(0,0,0,0);return{setMask:function(Ye){Le!==Ye&&!X&&(t.colorMask(Ye,Ye,Ye,Ye),Le=Ye)},setLocked:function(Ye){X=Ye},setClear:function(Ye,Ke,Z,ve,Re){Re===!0&&(Ye*=ve,Ke*=ve,Z*=ve),fe.set(Ye,Ke,Z,ve),Pe.equals(fe)===!1&&(t.clearColor(Ye,Ke,Z,ve),Pe.copy(fe))},reset:function(){X=!1,Le=null,Pe.set(-1,0,0,0)}}}function r(){let X=!1,fe=null,Le=null,Pe=null;return{setTest:function(Ye){Ye?se(2929):ne(2929)},setMask:function(Ye){fe!==Ye&&!X&&(t.depthMask(Ye),fe=Ye)},setFunc:function(Ye){if(Le!==Ye){if(Ye)switch(Ye){case qW:t.depthFunc(512);break;case XW:t.depthFunc(519);break;case ZW:t.depthFunc(513);break;case a_:t.depthFunc(515);break;case JW:t.depthFunc(514);break;case KW:t.depthFunc(518);break;case $W:t.depthFunc(516);break;case QW:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);Le=Ye}},setLocked:function(Ye){X=Ye},setClear:function(Ye){Pe!==Ye&&(t.clearDepth(Ye),Pe=Ye)},reset:function(){X=!1,fe=null,Le=null,Pe=null}}}function o(){let X=!1,fe=null,Le=null,Pe=null,Ye=null,Ke=null,Z=null,ve=null,Re=null;return{setTest:function(He){X||(He?se(2960):ne(2960))},setMask:function(He){fe!==He&&!X&&(t.stencilMask(He),fe=He)},setFunc:function(He,Ze,_t){(Le!==He||Pe!==Ze||Ye!==_t)&&(t.stencilFunc(He,Ze,_t),Le=He,Pe=Ze,Ye=_t)},setOp:function(He,Ze,_t){(Ke!==He||Z!==Ze||ve!==_t)&&(t.stencilOp(He,Ze,_t),Ke=He,Z=Ze,ve=_t)},setLocked:function(He){X=He},setClear:function(He){Re!==He&&(t.clearStencil(He),Re=He)},reset:function(){X=!1,fe=null,Le=null,Pe=null,Ye=null,Ke=null,Z=null,ve=null,Re=null}}}const a=new s,l=new r,c=new o;let u={},f=null,h=null,d=null,p=null,m=null,_=null,b=null,g=null,x=null,y=!1,v=null,w=null,S=null,T=null,k=null;const A=t.getParameter(35661);let L=!1,D=0;const B=t.getParameter(7938);B.indexOf("WebGL")!==-1?(D=parseFloat(/^WebGL\ ([0-9])/.exec(B)[1]),L=D>=1):B.indexOf("OpenGL ES")!==-1&&(D=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(B)[1]),L=D>=2);let U=null,N={};const $=new Un,W=new Un;function j(X,fe,Le){const Pe=new Uint8Array(4),Ye=t.createTexture();t.bindTexture(X,Ye),t.texParameteri(X,10241,9728),t.texParameteri(X,10240,9728);for(let Ke=0;Ke<Le;Ke++)t.texImage2D(fe+Ke,0,6408,1,1,0,6408,5121,Pe);return Ye}const J={};J[3553]=j(3553,3553,1),J[34067]=j(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),se(2929),l.setFunc(a_),Ee(!1),ye(_M),se(2884),re(_f);function se(X){u[X]!==!0&&(t.enable(X),u[X]=!0)}function ne(X){u[X]!==!1&&(t.disable(X),u[X]=!1)}function K(X){return f!==X?(t.useProgram(X),f=X,!0):!1}const q={[gc]:32774,[NW]:32778,[BW]:32779};if(i)q[wM]=32775,q[xM]=32776;else{const X=e.get("EXT_blend_minmax");X!==null&&(q[wM]=X.MIN_EXT,q[xM]=X.MAX_EXT)}const te={[FW]:0,[zW]:1,[UW]:768,[LA]:770,[YW]:776,[WW]:774,[VW]:772,[HW]:769,[CA]:771,[jW]:775,[GW]:773};function re(X,fe,Le,Pe,Ye,Ke,Z,ve){if(X===_f){h&&(ne(3042),h=!1);return}if(h||(se(3042),h=!0),X!==OW){if(X!==d||ve!==y){if((p!==gc||b!==gc)&&(t.blendEquation(32774),p=gc,b=gc),ve)switch(X){case bf:t.blendFuncSeparate(1,771,1,771);break;case bM:t.blendFunc(1,1);break;case vM:t.blendFuncSeparate(0,0,769,771);break;case yM:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case bf:t.blendFuncSeparate(770,771,1,771);break;case bM:t.blendFunc(770,1);break;case vM:t.blendFunc(0,769);break;case yM:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}m=null,_=null,g=null,x=null,d=X,y=ve}return}Ye=Ye||fe,Ke=Ke||Le,Z=Z||Pe,(fe!==p||Ye!==b)&&(t.blendEquationSeparate(q[fe],q[Ye]),p=fe,b=Ye),(Le!==m||Pe!==_||Ke!==g||Z!==x)&&(t.blendFuncSeparate(te[Le],te[Pe],te[Ke],te[Z]),m=Le,_=Pe,g=Ke,x=Z),d=X,y=null}function Oe(X,fe){X.side===Ml?ne(2884):se(2884);let Le=X.side===Ui;fe&&(Le=!Le),Ee(Le),X.blending===bf&&X.transparent===!1?re(_f):re(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.premultipliedAlpha),l.setFunc(X.depthFunc),l.setTest(X.depthTest),l.setMask(X.depthWrite),a.setMask(X.colorWrite);const Pe=X.stencilWrite;c.setTest(Pe),Pe&&(c.setMask(X.stencilWriteMask),c.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),c.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),Ae(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits)}function Ee(X){v!==X&&(X?t.frontFace(2304):t.frontFace(2305),v=X)}function ye(X){X!==RW?(se(2884),X!==w&&(X===_M?t.cullFace(1029):X===IW?t.cullFace(1028):t.cullFace(1032))):ne(2884),w=X}function xe(X){X!==S&&(L&&t.lineWidth(X),S=X)}function Ae(X,fe,Le){X?(se(32823),(T!==fe||k!==Le)&&(t.polygonOffset(fe,Le),T=fe,k=Le)):ne(32823)}function De(X){X?se(3089):ne(3089)}function de(X){X===void 0&&(X=33984+A-1),U!==X&&(t.activeTexture(X),U=X)}function me(X,fe){U===null&&de();let Le=N[U];Le===void 0&&(Le={type:void 0,texture:void 0},N[U]=Le),(Le.type!==X||Le.texture!==fe)&&(t.bindTexture(X,fe||J[X]),Le.type=X,Le.texture=fe)}function We(){const X=N[U];X!==void 0&&X.type!==void 0&&(t.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}function Ue(){try{t.compressedTexImage2D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function be(){try{t.texImage2D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function F(){try{t.texImage3D.apply(t,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}function V(X){$.equals(X)===!1&&(t.scissor(X.x,X.y,X.z,X.w),$.copy(X))}function _e(X){W.equals(X)===!1&&(t.viewport(X.x,X.y,X.z,X.w),W.copy(X))}function oe(){u={},U=null,N={},f=null,d=null,v=null,w=null,a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:se,disable:ne,useProgram:K,setBlending:re,setMaterial:Oe,setFlipSided:Ee,setCullFace:ye,setLineWidth:xe,setPolygonOffset:Ae,setScissorTest:De,activeTexture:de,bindTexture:me,unbindTexture:We,compressedTexImage2D:Ue,texImage2D:be,texImage3D:F,scissor:V,viewport:_e,reset:oe}}function TJ(t,e,n,i,s,r,o){const a=s.isWebGL2,l=s.maxTextures,c=s.maxCubemapSize,u=s.maxTextureSize,f=s.maxSamples,h=new WeakMap;let d,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function m(F,V){return p?new OffscreenCanvas(F,V):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function _(F,V,_e,oe){let X=1;if((F.width>oe||F.height>oe)&&(X=oe/Math.max(F.width,F.height)),X<1||V===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const fe=V?Qt.floorPowerOfTwo:Math.floor,Le=fe(X*F.width),Pe=fe(X*F.height);d===void 0&&(d=m(Le,Pe));const Ye=_e?m(Le,Pe):d;return Ye.width=Le,Ye.height=Pe,Ye.getContext("2d").drawImage(F,0,0,Le,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Le+"x"+Pe+")."),Ye}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function b(F){return Qt.isPowerOfTwo(F.width)&&Qt.isPowerOfTwo(F.height)}function g(F){return a?!1:F.wrapS!==ys||F.wrapT!==ys||F.minFilter!==Xi&&F.minFilter!==Gi}function x(F,V){return F.generateMipmaps&&V&&F.minFilter!==Xi&&F.minFilter!==Gi}function y(F,V,_e,oe){t.generateMipmap(F);const X=i.get(V);X.__maxMipLevel=Math.log(Math.max(_e,oe))*Math.LOG2E}function v(F,V,_e){if(a===!1)return V;if(F!==null){if(t[F]!==void 0)return t[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let oe=V;return V===6403&&(_e===5126&&(oe=33326),_e===5131&&(oe=33325),_e===5121&&(oe=33321)),V===6407&&(_e===5126&&(oe=34837),_e===5131&&(oe=34843),_e===5121&&(oe=32849)),V===6408&&(_e===5126&&(oe=34836),_e===5131&&(oe=34842),_e===5121&&(oe=32856)),(oe===33325||oe===33326||oe===34842||oe===34836)&&e.get("EXT_color_buffer_float"),oe}function w(F){return F===Xi||F===u_||F===f_?9728:9729}function S(F){const V=F.target;V.removeEventListener("dispose",S),k(V),V.isVideoTexture&&h.delete(V),o.memory.textures--}function T(F){const V=F.target;V.removeEventListener("dispose",T),A(V),o.memory.textures--}function k(F){const V=i.get(F);V.__webglInit!==void 0&&(t.deleteTexture(V.__webglTexture),i.remove(F))}function A(F){const V=i.get(F),_e=i.get(F.texture);if(!!F){if(_e.__webglTexture!==void 0&&t.deleteTexture(_e.__webglTexture),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let oe=0;oe<6;oe++)t.deleteFramebuffer(V.__webglFramebuffer[oe]),V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer[oe]);else t.deleteFramebuffer(V.__webglFramebuffer),V.__webglDepthbuffer&&t.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&t.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer&&t.deleteRenderbuffer(V.__webglColorRenderbuffer),V.__webglDepthRenderbuffer&&t.deleteRenderbuffer(V.__webglDepthRenderbuffer);i.remove(F.texture),i.remove(F)}}let L=0;function D(){L=0}function B(){const F=L;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),L+=1,F}function U(F,V){const _e=i.get(F);if(F.isVideoTexture&&de(F),F.version>0&&_e.__version!==F.version){const oe=F.image;if(oe===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(oe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{q(_e,F,V);return}}n.activeTexture(33984+V),n.bindTexture(3553,_e.__webglTexture)}function N(F,V){const _e=i.get(F);if(F.version>0&&_e.__version!==F.version){q(_e,F,V);return}n.activeTexture(33984+V),n.bindTexture(35866,_e.__webglTexture)}function $(F,V){const _e=i.get(F);if(F.version>0&&_e.__version!==F.version){q(_e,F,V);return}n.activeTexture(33984+V),n.bindTexture(32879,_e.__webglTexture)}function W(F,V){if(F.image.length!==6)return;const _e=i.get(F);if(F.version>0&&_e.__version!==F.version){K(_e,F),n.activeTexture(33984+V),n.bindTexture(34067,_e.__webglTexture),t.pixelStorei(37440,F.flipY);const oe=F&&(F.isCompressedTexture||F.image[0].isCompressedTexture),X=F.image[0]&&F.image[0].isDataTexture,fe=[];for(let Re=0;Re<6;Re++)!oe&&!X?fe[Re]=_(F.image[Re],!1,!0,c):fe[Re]=X?F.image[Re].image:F.image[Re];const Le=fe[0],Pe=b(Le)||a,Ye=r.convert(F.format),Ke=r.convert(F.type),Z=v(F.internalFormat,Ye,Ke);ne(34067,F,Pe);let ve;if(oe){for(let Re=0;Re<6;Re++){ve=fe[Re].mipmaps;for(let He=0;He<ve.length;He++){const Ze=ve[He];F.format!==Tr&&F.format!==dl?Ye!==null?n.compressedTexImage2D(34069+Re,He,Z,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+Re,He,Z,Ze.width,Ze.height,0,Ye,Ke,Ze.data)}}_e.__maxMipLevel=ve.length-1}else{ve=F.mipmaps;for(let Re=0;Re<6;Re++)if(X){n.texImage2D(34069+Re,0,Z,fe[Re].width,fe[Re].height,0,Ye,Ke,fe[Re].data);for(let He=0;He<ve.length;He++){const _t=ve[He].image[Re].image;n.texImage2D(34069+Re,He+1,Z,_t.width,_t.height,0,Ye,Ke,_t.data)}}else{n.texImage2D(34069+Re,0,Z,Ye,Ke,fe[Re]);for(let He=0;He<ve.length;He++){const Ze=ve[He];n.texImage2D(34069+Re,He+1,Z,Ye,Ke,Ze.image[Re])}}_e.__maxMipLevel=ve.length}x(F,Pe)&&y(34067,F,Le.width,Le.height),_e.__version=F.version,F.onUpdate&&F.onUpdate(F)}else n.activeTexture(33984+V),n.bindTexture(34067,_e.__webglTexture)}function j(F,V){n.activeTexture(33984+V),n.bindTexture(34067,i.get(F).__webglTexture)}const J={[Lm]:10497,[ys]:33071,[Cm]:33648},se={[Xi]:9728,[u_]:9984,[f_]:9986,[Gi]:9729,[PA]:9985,[Bh]:9987};function ne(F,V,_e){_e?(t.texParameteri(F,10242,J[V.wrapS]),t.texParameteri(F,10243,J[V.wrapT]),(F===32879||F===35866)&&t.texParameteri(F,32882,J[V.wrapR]),t.texParameteri(F,10240,se[V.magFilter]),t.texParameteri(F,10241,se[V.minFilter])):(t.texParameteri(F,10242,33071),t.texParameteri(F,10243,33071),(F===32879||F===35866)&&t.texParameteri(F,32882,33071),(V.wrapS!==ys||V.wrapT!==ys)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(F,10240,w(V.magFilter)),t.texParameteri(F,10241,w(V.minFilter)),V.minFilter!==Xi&&V.minFilter!==Gi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const oe=e.get("EXT_texture_filter_anisotropic");if(oe){if(V.type===fa&&e.get("OES_texture_float_linear")===null||V.type===Rm&&(a||e.get("OES_texture_half_float_linear"))===null)return;(V.anisotropy>1||i.get(V).__currentAnisotropy)&&(t.texParameterf(F,oe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,s.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy)}}function K(F,V){F.__webglInit===void 0&&(F.__webglInit=!0,V.addEventListener("dispose",S),F.__webglTexture=t.createTexture(),o.memory.textures++)}function q(F,V,_e){let oe=3553;V.isDataTexture2DArray&&(oe=35866),V.isDataTexture3D&&(oe=32879),K(F,V),n.activeTexture(33984+_e),n.bindTexture(oe,F.__webglTexture),t.pixelStorei(37440,V.flipY),t.pixelStorei(37441,V.premultiplyAlpha),t.pixelStorei(3317,V.unpackAlignment);const X=g(V)&&b(V.image)===!1,fe=_(V.image,X,!1,u),Le=b(fe)||a,Pe=r.convert(V.format);let Ye=r.convert(V.type),Ke=v(V.internalFormat,Pe,Ye);ne(oe,V,Le);let Z;const ve=V.mipmaps;if(V.isDepthTexture)Ke=6402,a?V.type===fa?Ke=36012:V.type===Lp?Ke=33190:V.type===yf?Ke=35056:Ke=33189:V.type===fa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),V.format===Gc&&Ke===6402&&V.type!==Pm&&V.type!==Lp&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),V.type=Pm,Ye=r.convert(V.type)),V.format===nh&&Ke===6402&&(Ke=34041,V.type!==yf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),V.type=yf,Ye=r.convert(V.type))),n.texImage2D(3553,0,Ke,fe.width,fe.height,0,Pe,Ye,null);else if(V.isDataTexture)if(ve.length>0&&Le){for(let Re=0,He=ve.length;Re<He;Re++)Z=ve[Re],n.texImage2D(3553,Re,Ke,Z.width,Z.height,0,Pe,Ye,Z.data);V.generateMipmaps=!1,F.__maxMipLevel=ve.length-1}else n.texImage2D(3553,0,Ke,fe.width,fe.height,0,Pe,Ye,fe.data),F.__maxMipLevel=0;else if(V.isCompressedTexture){for(let Re=0,He=ve.length;Re<He;Re++)Z=ve[Re],V.format!==Tr&&V.format!==dl?Pe!==null?n.compressedTexImage2D(3553,Re,Ke,Z.width,Z.height,0,Z.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,Re,Ke,Z.width,Z.height,0,Pe,Ye,Z.data);F.__maxMipLevel=ve.length-1}else if(V.isDataTexture2DArray)n.texImage3D(35866,0,Ke,fe.width,fe.height,fe.depth,0,Pe,Ye,fe.data),F.__maxMipLevel=0;else if(V.isDataTexture3D)n.texImage3D(32879,0,Ke,fe.width,fe.height,fe.depth,0,Pe,Ye,fe.data),F.__maxMipLevel=0;else if(ve.length>0&&Le){for(let Re=0,He=ve.length;Re<He;Re++)Z=ve[Re],n.texImage2D(3553,Re,Ke,Pe,Ye,Z);V.generateMipmaps=!1,F.__maxMipLevel=ve.length-1}else n.texImage2D(3553,0,Ke,Pe,Ye,fe),F.__maxMipLevel=0;x(V,Le)&&y(oe,V,fe.width,fe.height),F.__version=V.version,V.onUpdate&&V.onUpdate(V)}function te(F,V,_e,oe){const X=r.convert(V.texture.format),fe=r.convert(V.texture.type),Le=v(V.texture.internalFormat,X,fe);n.texImage2D(oe,0,Le,V.width,V.height,0,X,fe,null),t.bindFramebuffer(36160,F),t.framebufferTexture2D(36160,_e,oe,i.get(V.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function re(F,V,_e){if(t.bindRenderbuffer(36161,F),V.depthBuffer&&!V.stencilBuffer){let oe=33189;if(_e){const X=V.depthTexture;X&&X.isDepthTexture&&(X.type===fa?oe=36012:X.type===Lp&&(oe=33190));const fe=De(V);t.renderbufferStorageMultisample(36161,fe,oe,V.width,V.height)}else t.renderbufferStorage(36161,oe,V.width,V.height);t.framebufferRenderbuffer(36160,36096,36161,F)}else if(V.depthBuffer&&V.stencilBuffer){if(_e){const oe=De(V);t.renderbufferStorageMultisample(36161,oe,35056,V.width,V.height)}else t.renderbufferStorage(36161,34041,V.width,V.height);t.framebufferRenderbuffer(36160,33306,36161,F)}else{const oe=r.convert(V.texture.format),X=r.convert(V.texture.type),fe=v(V.texture.internalFormat,oe,X);if(_e){const Le=De(V);t.renderbufferStorageMultisample(36161,Le,fe,V.width,V.height)}else t.renderbufferStorage(36161,fe,V.width,V.height)}t.bindRenderbuffer(36161,null)}function Oe(F,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,F),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(V.depthTexture).__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),U(V.depthTexture,0);const oe=i.get(V.depthTexture).__webglTexture;if(V.depthTexture.format===Gc)t.framebufferTexture2D(36160,36096,3553,oe,0);else if(V.depthTexture.format===nh)t.framebufferTexture2D(36160,33306,3553,oe,0);else throw new Error("Unknown depthTexture format")}function Ee(F){const V=i.get(F),_e=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");Oe(V.__webglFramebuffer,F)}else if(_e){V.__webglDepthbuffer=[];for(let oe=0;oe<6;oe++)t.bindFramebuffer(36160,V.__webglFramebuffer[oe]),V.__webglDepthbuffer[oe]=t.createRenderbuffer(),re(V.__webglDepthbuffer[oe],F,!1)}else t.bindFramebuffer(36160,V.__webglFramebuffer),V.__webglDepthbuffer=t.createRenderbuffer(),re(V.__webglDepthbuffer,F,!1);t.bindFramebuffer(36160,null)}function ye(F){const V=i.get(F),_e=i.get(F.texture);F.addEventListener("dispose",T),_e.__webglTexture=t.createTexture(),o.memory.textures++;const oe=F.isWebGLCubeRenderTarget===!0,X=F.isWebGLMultisampleRenderTarget===!0,fe=b(F)||a;if(a&&F.texture.format===dl&&(F.texture.type===fa||F.texture.type===Rm)&&(F.texture.format=Tr,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),oe){V.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)V.__webglFramebuffer[Le]=t.createFramebuffer()}else if(V.__webglFramebuffer=t.createFramebuffer(),X)if(a){V.__webglMultisampledFramebuffer=t.createFramebuffer(),V.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,V.__webglColorRenderbuffer);const Le=r.convert(F.texture.format),Pe=r.convert(F.texture.type),Ye=v(F.texture.internalFormat,Le,Pe),Ke=De(F);t.renderbufferStorageMultisample(36161,Ke,Ye,F.width,F.height),t.bindFramebuffer(36160,V.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,V.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),F.depthBuffer&&(V.__webglDepthRenderbuffer=t.createRenderbuffer(),re(V.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(oe){n.bindTexture(34067,_e.__webglTexture),ne(34067,F.texture,fe);for(let Le=0;Le<6;Le++)te(V.__webglFramebuffer[Le],F,36064,34069+Le);x(F.texture,fe)&&y(34067,F.texture,F.width,F.height),n.bindTexture(34067,null)}else n.bindTexture(3553,_e.__webglTexture),ne(3553,F.texture,fe),te(V.__webglFramebuffer,F,36064,3553),x(F.texture,fe)&&y(3553,F.texture,F.width,F.height),n.bindTexture(3553,null);F.depthBuffer&&Ee(F)}function xe(F){const V=F.texture,_e=b(F)||a;if(x(V,_e)){const oe=F.isWebGLCubeRenderTarget?34067:3553,X=i.get(V).__webglTexture;n.bindTexture(oe,X),y(oe,V,F.width,F.height),n.bindTexture(oe,null)}}function Ae(F){if(F.isWebGLMultisampleRenderTarget)if(a){const V=i.get(F);t.bindFramebuffer(36008,V.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,V.__webglFramebuffer);const _e=F.width,oe=F.height;let X=16384;F.depthBuffer&&(X|=256),F.stencilBuffer&&(X|=1024),t.blitFramebuffer(0,0,_e,oe,0,0,_e,oe,X,9728),t.bindFramebuffer(36160,V.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function De(F){return a&&F.isWebGLMultisampleRenderTarget?Math.min(f,F.samples):0}function de(F){const V=o.render.frame;h.get(F)!==V&&(h.set(F,V),F.update())}let me=!1,We=!1;function Ue(F,V){F&&F.isWebGLRenderTarget&&(me===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),me=!0),F=F.texture),U(F,V)}function be(F,V){F&&F.isWebGLCubeRenderTarget&&(We===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),We=!0),F=F.texture),F&&F.isCubeTexture||Array.isArray(F.image)&&F.image.length===6?W(F,V):j(F,V)}this.allocateTextureUnit=B,this.resetTextureUnits=D,this.setTexture2D=U,this.setTexture2DArray=N,this.setTexture3D=$,this.setTextureCube=W,this.setTextureCubeDynamic=j,this.setupRenderTarget=ye,this.updateRenderTargetMipmap=xe,this.updateMultisampleRenderTarget=Ae,this.safeSetTexture2D=Ue,this.safeSetTextureCube=be}function kJ(t,e,n){const i=n.isWebGL2;function s(r){let o;if(r===Sv)return 5121;if(r===uj)return 32819;if(r===fj)return 32820;if(r===hj)return 33635;if(r===aj)return 5120;if(r===lj)return 5122;if(r===Pm)return 5123;if(r===cj)return 5124;if(r===Lp)return 5125;if(r===fa)return 5126;if(r===Rm)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(r===dj)return 6406;if(r===dl)return 6407;if(r===Tr)return 6408;if(r===pj)return 6409;if(r===mj)return 6410;if(r===Gc)return 6402;if(r===nh)return 34041;if(r===gj)return 6403;if(r===_j)return 36244;if(r===bj)return 33319;if(r===vj)return 33320;if(r===yj)return 36248;if(r===wj)return 36249;if(r===MM||r===SM||r===EM||r===TM)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===MM)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===SM)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===EM)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===TM)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===kM||r===AM||r===LM||r===CM)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===kM)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===AM)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===LM)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===CM)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===xj)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((r===PM||r===RM)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(r===PM)return o.COMPRESSED_RGB8_ETC2;if(r===RM)return o.COMPRESSED_RGBA8_ETC2_EAC}if(r===Mj||r===Sj||r===Ej||r===Tj||r===kj||r===Aj||r===Lj||r===Cj||r===Pj||r===Rj||r===Ij||r===Dj||r===Oj||r===Nj||r===Fj||r===zj||r===Uj||r===Hj||r===Vj||r===Gj||r===Wj||r===jj||r===Yj||r===qj||r===Xj||r===Zj||r===Jj||r===Kj)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?r:null;if(r===Bj)return o=e.get("EXT_texture_compression_bptc"),o!==null?r:null;if(r===yf)return i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:s}}function v_(t){Ei.call(this),this.cameras=t||[]}v_.prototype=Object.assign(Object.create(Ei.prototype),{constructor:v_,isArrayCamera:!0});function ol(){Bt.call(this),this.type="Group"}ol.prototype=Object.assign(Object.create(Bt.prototype),{constructor:ol,isGroup:!0});function xf(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign(xf.prototype,{constructor:xf,getHandSpace:function(){if(this._hand===null&&(this._hand=new ol,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(let t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){const e=new ol;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new ol,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new ol,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(t,e,n){let i=null,s=null,r=null;const o=this._targetRay,a=this._grip,l=this._hand;if(t)if(l&&t.hand){r=!0;for(let c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(t.hand[c]){const u=e.getJointPose(t.hand[c],n),f=l.joints[c];u!==null&&(f.matrix.fromArray(u.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.jointRadius=u.radius),f.visible=u!==null;const h=l.joints[window.XRHand.INDEX_PHALANX_TIP],d=l.joints[window.XRHand.THUMB_PHALANX_TIP],p=h.position.distanceTo(d.position),m=.02,_=.005;l.inputState.pinching&&p>m+_?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&p<=m-_&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else o!==null&&(i=e.getPose(t.targetRaySpace,n),i!==null&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),a!==null&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),s!==null&&(a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return o!==null&&(o.visible=i!==null),a!==null&&(a.visible=s!==null),l!==null&&(l.visible=r!==null),this}});function qA(t,e){const n=this;let i=null,s=1,r=null,o="local-floor",a=null;const l=[],c=new Map,u=new Ei;u.layers.enable(1),u.viewport=new Un;const f=new Ei;f.layers.enable(2),f.viewport=new Un;const h=[u,f],d=new v_;d.layers.enable(1),d.layers.enable(2);let p=null,m=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let D=l[L];return D===void 0&&(D=new xf,l[L]=D),D.getTargetRaySpace()},this.getControllerGrip=function(L){let D=l[L];return D===void 0&&(D=new xf,l[L]=D),D.getGripSpace()},this.getHand=function(L){let D=l[L];return D===void 0&&(D=new xf,l[L]=D),D.getHandSpace()};function _(L){const D=c.get(L.inputSource);D&&D.dispatchEvent({type:L.type})}function b(){c.forEach(function(L,D){L.disconnect(D)}),c.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),A.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function g(L){r=L,A.setContext(i),A.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}this.setFramebufferScaleFactor=function(L){s=L,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){o=L,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return r},this.getSession=function(){return i},this.setSession=function(L){if(i=L,i!==null){i.addEventListener("select",_),i.addEventListener("selectstart",_),i.addEventListener("selectend",_),i.addEventListener("squeeze",_),i.addEventListener("squeezestart",_),i.addEventListener("squeezeend",_),i.addEventListener("end",b);const D=e.getContextAttributes();D.xrCompatible!==!0&&e.makeXRCompatible();const B={antialias:D.antialias,alpha:D.alpha,depth:D.depth,stencil:D.stencil,framebufferScaleFactor:s},U=new XRWebGLLayer(i,e,B);i.updateRenderState({baseLayer:U}),i.requestReferenceSpace(o).then(g),i.addEventListener("inputsourceschange",x)}};function x(L){const D=i.inputSources;for(let B=0;B<l.length;B++)c.set(D[B],l[B]);for(let B=0;B<L.removed.length;B++){const U=L.removed[B],N=c.get(U);N&&(N.dispatchEvent({type:"disconnected",data:U}),c.delete(U))}for(let B=0;B<L.added.length;B++){const U=L.added[B],N=c.get(U);N&&N.dispatchEvent({type:"connected",data:U})}}const y=new ee,v=new ee;function w(L,D,B){y.setFromMatrixPosition(D.matrixWorld),v.setFromMatrixPosition(B.matrixWorld);const U=y.distanceTo(v),N=D.projectionMatrix.elements,$=B.projectionMatrix.elements,W=N[14]/(N[10]-1),j=N[14]/(N[10]+1),J=(N[9]+1)/N[5],se=(N[9]-1)/N[5],ne=(N[8]-1)/N[0],K=($[8]+1)/$[0],q=W*ne,te=W*K,re=U/(-ne+K),Oe=re*-ne;D.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(Oe),L.translateZ(re),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.getInverse(L.matrixWorld);const Ee=W+re,ye=j+re,xe=q-Oe,Ae=te+(U-Oe),De=J*j/ye*Ee,de=se*j/ye*Ee;L.projectionMatrix.makePerspective(xe,Ae,De,de,Ee,ye)}function S(L,D){D===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(D.matrixWorld,L.matrix),L.matrixWorldInverse.getInverse(L.matrixWorld)}this.getCamera=function(L){d.near=f.near=u.near=L.near,d.far=f.far=u.far=L.far,(p!==d.near||m!==d.far)&&(i.updateRenderState({depthNear:d.near,depthFar:d.far}),p=d.near,m=d.far);const D=L.parent,B=d.cameras;S(d,D);for(let N=0;N<B.length;N++)S(B[N],D);L.matrixWorld.copy(d.matrixWorld);const U=L.children;for(let N=0,$=U.length;N<$;N++)U[N].updateMatrixWorld(!0);return B.length===2?w(d,u,f):d.projectionMatrix.copy(u.projectionMatrix),d};let T=null;function k(L,D){if(a=D.getViewerPose(r),a!==null){const U=a.views,N=i.renderState.baseLayer;t.setFramebuffer(N.framebuffer);let $=!1;U.length!==d.cameras.length&&(d.cameras.length=0,$=!0);for(let W=0;W<U.length;W++){const j=U[W],J=N.getViewport(j),se=h[W];se.matrix.fromArray(j.transform.matrix),se.projectionMatrix.fromArray(j.projectionMatrix),se.viewport.set(J.x,J.y,J.width,J.height),W===0&&d.matrix.copy(se.matrix),$===!0&&d.cameras.push(se)}}const B=i.inputSources;for(let U=0;U<l.length;U++){const N=l[U],$=B[U];N.update($,D,r)}T&&T(L,D)}const A=new FA;A.setAnimationLoop(k),this.setAnimationLoop=function(L){T=L},this.dispose=function(){}}Object.assign(qA.prototype,co.prototype);function AJ(t){function e(b,g){b.fogColor.value.copy(g.color),g.isFog?(b.fogNear.value=g.near,b.fogFar.value=g.far):g.isFogExp2&&(b.fogDensity.value=g.density)}function n(b,g,x,y){g.isMeshBasicMaterial?i(b,g):g.isMeshLambertMaterial?(i(b,g),l(b,g)):g.isMeshToonMaterial?(i(b,g),u(b,g)):g.isMeshPhongMaterial?(i(b,g),c(b,g)):g.isMeshStandardMaterial?(i(b,g),g.isMeshPhysicalMaterial?h(b,g):f(b,g)):g.isMeshMatcapMaterial?(i(b,g),d(b,g)):g.isMeshDepthMaterial?(i(b,g),p(b,g)):g.isMeshDistanceMaterial?(i(b,g),m(b,g)):g.isMeshNormalMaterial?(i(b,g),_(b,g)):g.isLineBasicMaterial?(s(b,g),g.isLineDashedMaterial&&r(b,g)):g.isPointsMaterial?o(b,g,x,y):g.isSpriteMaterial?a(b,g):g.isShadowMaterial?(b.color.value.copy(g.color),b.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function i(b,g){b.opacity.value=g.opacity,g.color&&b.diffuse.value.copy(g.color),g.emissive&&b.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(b.map.value=g.map),g.alphaMap&&(b.alphaMap.value=g.alphaMap),g.specularMap&&(b.specularMap.value=g.specularMap);const x=t.get(g).envMap;if(x){b.envMap.value=x,b.flipEnvMap.value=x.isCubeTexture?-1:1,b.reflectivity.value=g.reflectivity,b.refractionRatio.value=g.refractionRatio;const w=t.get(x).__maxMipLevel;w!==void 0&&(b.maxMipLevel.value=w)}g.lightMap&&(b.lightMap.value=g.lightMap,b.lightMapIntensity.value=g.lightMapIntensity),g.aoMap&&(b.aoMap.value=g.aoMap,b.aoMapIntensity.value=g.aoMapIntensity);let y;g.map?y=g.map:g.specularMap?y=g.specularMap:g.displacementMap?y=g.displacementMap:g.normalMap?y=g.normalMap:g.bumpMap?y=g.bumpMap:g.roughnessMap?y=g.roughnessMap:g.metalnessMap?y=g.metalnessMap:g.alphaMap?y=g.alphaMap:g.emissiveMap?y=g.emissiveMap:g.clearcoatMap?y=g.clearcoatMap:g.clearcoatNormalMap?y=g.clearcoatNormalMap:g.clearcoatRoughnessMap&&(y=g.clearcoatRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),b.uvTransform.value.copy(y.matrix));let v;g.aoMap?v=g.aoMap:g.lightMap&&(v=g.lightMap),v!==void 0&&(v.isWebGLRenderTarget&&(v=v.texture),v.matrixAutoUpdate===!0&&v.updateMatrix(),b.uv2Transform.value.copy(v.matrix))}function s(b,g){b.diffuse.value.copy(g.color),b.opacity.value=g.opacity}function r(b,g){b.dashSize.value=g.dashSize,b.totalSize.value=g.dashSize+g.gapSize,b.scale.value=g.scale}function o(b,g,x,y){b.diffuse.value.copy(g.color),b.opacity.value=g.opacity,b.size.value=g.size*x,b.scale.value=y*.5,g.map&&(b.map.value=g.map),g.alphaMap&&(b.alphaMap.value=g.alphaMap);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),b.uvTransform.value.copy(v.matrix))}function a(b,g){b.diffuse.value.copy(g.color),b.opacity.value=g.opacity,b.rotation.value=g.rotation,g.map&&(b.map.value=g.map),g.alphaMap&&(b.alphaMap.value=g.alphaMap);let x;g.map?x=g.map:g.alphaMap&&(x=g.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),b.uvTransform.value.copy(x.matrix))}function l(b,g){g.emissiveMap&&(b.emissiveMap.value=g.emissiveMap)}function c(b,g){b.specular.value.copy(g.specular),b.shininess.value=Math.max(g.shininess,1e-4),g.emissiveMap&&(b.emissiveMap.value=g.emissiveMap),g.bumpMap&&(b.bumpMap.value=g.bumpMap,b.bumpScale.value=g.bumpScale,g.side===Ui&&(b.bumpScale.value*=-1)),g.normalMap&&(b.normalMap.value=g.normalMap,b.normalScale.value.copy(g.normalScale),g.side===Ui&&b.normalScale.value.negate()),g.displacementMap&&(b.displacementMap.value=g.displacementMap,b.displacementScale.value=g.displacementScale,b.displacementBias.value=g.displacementBias)}function u(b,g){g.gradientMap&&(b.gradientMap.value=g.gradientMap),g.emissiveMap&&(b.emissiveMap.value=g.emissiveMap),g.bumpMap&&(b.bumpMap.value=g.bumpMap,b.bumpScale.value=g.bumpScale,g.side===Ui&&(b.bumpScale.value*=-1)),g.normalMap&&(b.normalMap.value=g.normalMap,b.normalScale.value.copy(g.normalScale),g.side===Ui&&b.normalScale.value.negate()),g.displacementMap&&(b.displacementMap.value=g.displacementMap,b.displacementScale.value=g.displacementScale,b.displacementBias.value=g.displacementBias)}function f(b,g){b.roughness.value=g.roughness,b.metalness.value=g.metalness,g.roughnessMap&&(b.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(b.metalnessMap.value=g.metalnessMap),g.emissiveMap&&(b.emissiveMap.value=g.emissiveMap),g.bumpMap&&(b.bumpMap.value=g.bumpMap,b.bumpScale.value=g.bumpScale,g.side===Ui&&(b.bumpScale.value*=-1)),g.normalMap&&(b.normalMap.value=g.normalMap,b.normalScale.value.copy(g.normalScale),g.side===Ui&&b.normalScale.value.negate()),g.displacementMap&&(b.displacementMap.value=g.displacementMap,b.displacementScale.value=g.displacementScale,b.displacementBias.value=g.displacementBias),t.get(g).envMap&&(b.envMapIntensity.value=g.envMapIntensity)}function h(b,g){f(b,g),b.reflectivity.value=g.reflectivity,b.clearcoat.value=g.clearcoat,b.clearcoatRoughness.value=g.clearcoatRoughness,g.sheen&&b.sheen.value.copy(g.sheen),g.clearcoatMap&&(b.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(b.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(b.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),b.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Ui&&b.clearcoatNormalScale.value.negate()),b.transmission.value=g.transmission,g.transmissionMap&&(b.transmissionMap.value=g.transmissionMap)}function d(b,g){g.matcap&&(b.matcap.value=g.matcap),g.bumpMap&&(b.bumpMap.value=g.bumpMap,b.bumpScale.value=g.bumpScale,g.side===Ui&&(b.bumpScale.value*=-1)),g.normalMap&&(b.normalMap.value=g.normalMap,b.normalScale.value.copy(g.normalScale),g.side===Ui&&b.normalScale.value.negate()),g.displacementMap&&(b.displacementMap.value=g.displacementMap,b.displacementScale.value=g.displacementScale,b.displacementBias.value=g.displacementBias)}function p(b,g){g.displacementMap&&(b.displacementMap.value=g.displacementMap,b.displacementScale.value=g.displacementScale,b.displacementBias.value=g.displacementBias)}function m(b,g){g.displacementMap&&(b.displacementMap.value=g.displacementMap,b.displacementScale.value=g.displacementScale,b.displacementBias.value=g.displacementBias),b.referencePosition.value.copy(g.referencePosition),b.nearDistance.value=g.nearDistance,b.farDistance.value=g.farDistance}function _(b,g){g.bumpMap&&(b.bumpMap.value=g.bumpMap,b.bumpScale.value=g.bumpScale,g.side===Ui&&(b.bumpScale.value*=-1)),g.normalMap&&(b.normalMap.value=g.normalMap,b.normalScale.value.copy(g.normalScale),g.side===Ui&&b.normalScale.value.negate()),g.displacementMap&&(b.displacementMap.value=g.displacementMap,b.displacementScale.value=g.displacementScale,b.displacementBias.value=g.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function Hh(t){t=t||{};const e=t.canvas!==void 0?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=t.context!==void 0?t.context:null,i=t.alpha!==void 0?t.alpha:!1,s=t.depth!==void 0?t.depth:!0,r=t.stencil!==void 0?t.stencil:!0,o=t.antialias!==void 0?t.antialias:!1,a=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,l=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,c=t.powerPreference!==void 0?t.powerPreference:"default",u=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let f=null,h=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Fh,this.physicallyCorrectLights=!1,this.toneMapping=vf,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const d=this;let p=!1,m=null,_=0,b=0,g=null,x=null,y=-1,v=null,w=null;const S=new Un,T=new Un;let k=null,A=e.width,L=e.height,D=1,B=null,U=null;const N=new Un(0,0,A,L),$=new Un(0,0,A,L);let W=!1;const j=new Pg;let J=!1,se=!1;const ne=new an,K=new ee,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function te(){return g===null?D:1}let re=n;function Oe(z,Se){for(let Te=0;Te<z.length;Te++){const Be=z[Te],Je=e.getContext(Be,Se);if(Je!==null)return Je}return null}try{const z={alpha:i,depth:s,stencil:r,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",Ze,!1),e.addEventListener("webglcontextrestored",_t,!1),re===null){const Se=["webgl2","webgl","experimental-webgl"];if(d.isWebGL1Renderer===!0&&Se.shift(),re=Oe(Se,z),re===null)throw Oe(Se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}re.getShaderPrecisionFormat===void 0&&(re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(z){throw console.error("THREE.WebGLRenderer: "+z.message),z}let Ee,ye,xe,Ae,De,de,me,We,Ue,be,F,V,_e,oe,X,fe,Le,Pe,Ye,Ke,Z;function ve(){Ee=new oZ(re),ye=new iZ(re,Ee,t),ye.isWebGL2===!1&&(Ee.get("WEBGL_depth_texture"),Ee.get("OES_texture_float"),Ee.get("OES_texture_half_float"),Ee.get("OES_texture_half_float_linear"),Ee.get("OES_standard_derivatives"),Ee.get("OES_element_index_uint"),Ee.get("OES_vertex_array_object"),Ee.get("ANGLE_instanced_arrays")),Ee.get("OES_texture_float_linear"),Ke=new kJ(re,Ee,ye),xe=new EJ(re,Ee,ye),xe.scissor(T.copy($).multiplyScalar(D).floor()),xe.viewport(S.copy(N).multiplyScalar(D).floor()),Ae=new cZ,De=new dJ,de=new TJ(re,Ee,xe,De,ye,Ke,Ae),me=new rZ(d),We=new PY(re,ye),Z=new tZ(re,Ee,We,ye),Ue=new aZ(re,We,Ae,Z),be=new dZ(re,Ue,We,Ae),Le=new hZ(re),X=new sZ(De),F=new hJ(d,me,Ee,ye,Z,X),V=new AJ(De),_e=new gJ(De),oe=new xJ,fe=new eZ(d,me,xe,be,a),Pe=new nZ(re,Ee,Ae,ye),Ye=new lZ(re,Ee,Ae,ye),Ae.programs=F.programs,d.capabilities=ye,d.extensions=Ee,d.properties=De,d.renderLists=_e,d.state=xe,d.info=Ae}ve();const Re=new qA(d,re);this.xr=Re;const He=new YA(d,be,ye.maxTextureSize);this.shadowMap=He,this.getContext=function(){return re},this.getContextAttributes=function(){return re.getContextAttributes()},this.forceContextLoss=function(){const z=Ee.get("WEBGL_lose_context");z&&z.loseContext()},this.forceContextRestore=function(){const z=Ee.get("WEBGL_lose_context");z&&z.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(z){z!==void 0&&(D=z,this.setSize(A,L,!1))},this.getSize=function(z){return z===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),z=new je),z.set(A,L)},this.setSize=function(z,Se,Te){if(Re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=z,L=Se,e.width=Math.floor(z*D),e.height=Math.floor(Se*D),Te!==!1&&(e.style.width=z+"px",e.style.height=Se+"px"),this.setViewport(0,0,z,Se)},this.getDrawingBufferSize=function(z){return z===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),z=new je),z.set(A*D,L*D).floor()},this.setDrawingBufferSize=function(z,Se,Te){A=z,L=Se,D=Te,e.width=Math.floor(z*Te),e.height=Math.floor(Se*Te),this.setViewport(0,0,z,Se)},this.getCurrentViewport=function(z){return z===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),z=new Un),z.copy(S)},this.getViewport=function(z){return z.copy(N)},this.setViewport=function(z,Se,Te,Be){z.isVector4?N.set(z.x,z.y,z.z,z.w):N.set(z,Se,Te,Be),xe.viewport(S.copy(N).multiplyScalar(D).floor())},this.getScissor=function(z){return z.copy($)},this.setScissor=function(z,Se,Te,Be){z.isVector4?$.set(z.x,z.y,z.z,z.w):$.set(z,Se,Te,Be),xe.scissor(T.copy($).multiplyScalar(D).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(z){xe.setScissorTest(W=z)},this.setOpaqueSort=function(z){B=z},this.setTransparentSort=function(z){U=z},this.getClearColor=function(){return fe.getClearColor()},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(z,Se,Te){let Be=0;(z===void 0||z)&&(Be|=16384),(Se===void 0||Se)&&(Be|=256),(Te===void 0||Te)&&(Be|=1024),re.clear(Be)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ze,!1),e.removeEventListener("webglcontextrestored",_t,!1),_e.dispose(),oe.dispose(),De.dispose(),me.dispose(),be.dispose(),Z.dispose(),Re.dispose(),Pn.stop()};function Ze(z){z.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),p=!0}function _t(){console.log("THREE.WebGLRenderer: Context Restored."),p=!1,ve()}function ln(z){const Se=z.target;Se.removeEventListener("dispose",ln),lt(Se)}function lt(z){gt(z),De.remove(z)}function gt(z){const Se=De.get(z).program;Se!==void 0&&F.releaseProgram(Se)}function bn(z,Se){z.render(function(Te){d.renderBufferImmediate(Te,Se)})}this.renderBufferImmediate=function(z,Se){Z.initAttributes();const Te=De.get(z);z.hasPositions&&!Te.position&&(Te.position=re.createBuffer()),z.hasNormals&&!Te.normal&&(Te.normal=re.createBuffer()),z.hasUvs&&!Te.uv&&(Te.uv=re.createBuffer()),z.hasColors&&!Te.color&&(Te.color=re.createBuffer());const Be=Se.getAttributes();z.hasPositions&&(re.bindBuffer(34962,Te.position),re.bufferData(34962,z.positionArray,35048),Z.enableAttribute(Be.position),re.vertexAttribPointer(Be.position,3,5126,!1,0,0)),z.hasNormals&&(re.bindBuffer(34962,Te.normal),re.bufferData(34962,z.normalArray,35048),Z.enableAttribute(Be.normal),re.vertexAttribPointer(Be.normal,3,5126,!1,0,0)),z.hasUvs&&(re.bindBuffer(34962,Te.uv),re.bufferData(34962,z.uvArray,35048),Z.enableAttribute(Be.uv),re.vertexAttribPointer(Be.uv,2,5126,!1,0,0)),z.hasColors&&(re.bindBuffer(34962,Te.color),re.bufferData(34962,z.colorArray,35048),Z.enableAttribute(Be.color),re.vertexAttribPointer(Be.color,3,5126,!1,0,0)),Z.disableUnusedAttributes(),re.drawArrays(4,0,z.count),z.count=0},this.renderBufferDirect=function(z,Se,Te,Be,Je,ct){Se===null&&(Se=q);const ut=Je.isMesh&&Je.matrixWorld.determinant()<0,Dt=Bn(z,Se,Be,Je);xe.setMaterial(Be,ut);let kt=Te.index;const tn=Te.attributes.position;if(kt===null){if(tn===void 0||tn.count===0)return}else if(kt.count===0)return;let Jt=1;Be.wireframe===!0&&(kt=Ue.getWireframeAttribute(Te),Jt=2),(Be.morphTargets||Be.morphNormals)&&Le.update(Je,Te,Be,Dt),Z.setup(Je,Be,Dt,Te,kt);let zt,Xt=Pe;kt!==null&&(zt=We.get(kt),Xt=Ye,Xt.setIndex(zt));const tt=kt!==null?kt.count:tn.count,St=Te.drawRange.start*Jt,An=Te.drawRange.count*Jt,In=ct!==null?ct.start*Jt:0,ss=ct!==null?ct.count*Jt:1/0,ei=Math.max(St,In),Ce=Math.min(tt,St+An,In+ss)-1,st=Math.max(0,Ce-ei+1);if(st!==0){if(Je.isMesh)Be.wireframe===!0?(xe.setLineWidth(Be.wireframeLinewidth*te()),Xt.setMode(1)):Xt.setMode(4);else if(Je.isLine){let it=Be.linewidth;it===void 0&&(it=1),xe.setLineWidth(it*te()),Je.isLineSegments?Xt.setMode(1):Je.isLineLoop?Xt.setMode(2):Xt.setMode(3)}else Je.isPoints?Xt.setMode(0):Je.isSprite&&Xt.setMode(4);if(Je.isInstancedMesh)Xt.renderInstances(ei,st,Je.count);else if(Te.isInstancedBufferGeometry){const it=Math.min(Te.instanceCount,Te._maxInstanceCount);Xt.renderInstances(ei,st,it)}else Xt.render(ei,st)}},this.compile=function(z,Se){h=oe.get(z,Se),h.init(),z.traverse(function(Be){Be.isLight&&(h.pushLight(Be),Be.castShadow&&h.pushShadow(Be))}),h.setupLights(Se);const Te=new WeakMap;z.traverse(function(Be){const Je=Be.material;if(Je)if(Array.isArray(Je))for(let ct=0;ct<Je.length;ct++){const ut=Je[ct];Te.has(ut)===!1&&(Gt(ut,z,Be),Te.set(ut))}else Te.has(Je)===!1&&(Gt(Je,z,Be),Te.set(Je))})};let Ot=null;function Nn(z){Re.isPresenting||Ot&&Ot(z)}const Pn=new FA;Pn.setAnimationLoop(Nn),typeof window<"u"&&Pn.setContext(window),this.setAnimationLoop=function(z){Ot=z,Re.setAnimationLoop(z),z===null?Pn.stop():Pn.start()},this.render=function(z,Se){let Te,Be;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),Te=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),Be=arguments[3]),Se!==void 0&&Se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(p===!0)return;Z.resetDefaultState(),y=-1,v=null,z.autoUpdate===!0&&z.updateMatrixWorld(),Se.parent===null&&Se.updateMatrixWorld(),Re.enabled===!0&&Re.isPresenting===!0&&(Se=Re.getCamera(Se)),z.isScene===!0&&z.onBeforeRender(d,z,Se,Te||g),h=oe.get(z,Se),h.init(),ne.multiplyMatrices(Se.projectionMatrix,Se.matrixWorldInverse),j.setFromProjectionMatrix(ne),se=this.localClippingEnabled,J=X.init(this.clippingPlanes,se,Se),f=_e.get(z,Se),f.init(),cn(z,Se,0,d.sortObjects),f.finish(),d.sortObjects===!0&&f.sort(B,U),J===!0&&X.beginShadows();const Je=h.state.shadowsArray;He.render(Je,z,Se),h.setupLights(Se),J===!0&&X.endShadows(),this.info.autoReset===!0&&this.info.reset(),Te!==void 0&&this.setRenderTarget(Te),fe.render(f,z,Se,Be);const ct=f.opaque,ut=f.transparent;ct.length>0&&mn(ct,z,Se),ut.length>0&&mn(ut,z,Se),z.isScene===!0&&z.onAfterRender(d,z,Se),g!==null&&(de.updateRenderTargetMipmap(g),de.updateMultisampleRenderTarget(g)),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1),f=null,h=null};function cn(z,Se,Te,Be){if(z.visible===!1)return;if(z.layers.test(Se.layers)){if(z.isGroup)Te=z.renderOrder;else if(z.isLOD)z.autoUpdate===!0&&z.update(Se);else if(z.isLight)h.pushLight(z),z.castShadow&&h.pushShadow(z);else if(z.isSprite){if(!z.frustumCulled||j.intersectsSprite(z)){Be&&K.setFromMatrixPosition(z.matrixWorld).applyMatrix4(ne);const ut=be.update(z),Dt=z.material;Dt.visible&&f.push(z,ut,Dt,Te,K.z,null)}}else if(z.isImmediateRenderObject)Be&&K.setFromMatrixPosition(z.matrixWorld).applyMatrix4(ne),f.push(z,null,z.material,Te,K.z,null);else if((z.isMesh||z.isLine||z.isPoints)&&(z.isSkinnedMesh&&z.skeleton.frame!==Ae.render.frame&&(z.skeleton.update(),z.skeleton.frame=Ae.render.frame),!z.frustumCulled||j.intersectsObject(z))){Be&&K.setFromMatrixPosition(z.matrixWorld).applyMatrix4(ne);const ut=be.update(z),Dt=z.material;if(Array.isArray(Dt)){const kt=ut.groups;for(let tn=0,Jt=kt.length;tn<Jt;tn++){const zt=kt[tn],Xt=Dt[zt.materialIndex];Xt&&Xt.visible&&f.push(z,ut,Xt,Te,K.z,zt)}}else Dt.visible&&f.push(z,ut,Dt,Te,K.z,null)}}const ct=z.children;for(let ut=0,Dt=ct.length;ut<Dt;ut++)cn(ct[ut],Se,Te,Be)}function mn(z,Se,Te){const Be=Se.isScene===!0?Se.overrideMaterial:null;for(let Je=0,ct=z.length;Je<ct;Je++){const ut=z[Je],Dt=ut.object,kt=ut.geometry,tn=Be===null?ut.material:Be,Jt=ut.group;if(Te.isArrayCamera){w=Te;const zt=Te.cameras;for(let Xt=0,tt=zt.length;Xt<tt;Xt++){const St=zt[Xt];Dt.layers.test(St.layers)&&(xe.viewport(S.copy(St.viewport)),h.setupLights(St),jt(Dt,Se,St,kt,tn,Jt))}}else w=null,jt(Dt,Se,Te,kt,tn,Jt)}}function jt(z,Se,Te,Be,Je,ct){if(z.onBeforeRender(d,Se,Te,Be,Je,ct),h=oe.get(Se,w||Te),z.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,z.matrixWorld),z.normalMatrix.getNormalMatrix(z.modelViewMatrix),z.isImmediateRenderObject){const ut=Bn(Te,Se,Je,z);xe.setMaterial(Je),Z.reset(),bn(z,ut)}else d.renderBufferDirect(Te,Se,Be,Je,z,ct);z.onAfterRender(d,Se,Te,Be,Je,ct),h=oe.get(Se,w||Te)}function Gt(z,Se,Te){Se.isScene!==!0&&(Se=q);const Be=De.get(z),Je=h.state.lights,ct=h.state.shadowsArray,ut=Je.state.version,Dt=F.getParameters(z,Je.state,ct,Se,Te),kt=F.getProgramCacheKey(Dt);let tn=Be.program,Jt=!0;if(tn===void 0)z.addEventListener("dispose",ln);else if(tn.cacheKey!==kt)gt(z);else if(Be.lightsStateVersion!==ut)Jt=!1;else if(Dt.shaderID!==void 0){const St=z.isMeshStandardMaterial?Se.environment:null;Be.envMap=me.get(z.envMap||St);return}else Jt=!1;Jt&&(Dt.uniforms=F.getUniforms(z),z.onBeforeCompile(Dt,d),tn=F.acquireProgram(Dt,kt),Be.program=tn,Be.uniforms=Dt.uniforms,Be.outputEncoding=Dt.outputEncoding);const zt=Be.uniforms;(!z.isShaderMaterial&&!z.isRawShaderMaterial||z.clipping===!0)&&(Be.numClippingPlanes=X.numPlanes,Be.numIntersection=X.numIntersection,zt.clippingPlanes=X.uniform),Be.environment=z.isMeshStandardMaterial?Se.environment:null,Be.fog=Se.fog,Be.envMap=me.get(z.envMap||Be.environment),Be.needsLights=vn(z),Be.lightsStateVersion=ut,Be.needsLights&&(zt.ambientLightColor.value=Je.state.ambient,zt.lightProbe.value=Je.state.probe,zt.directionalLights.value=Je.state.directional,zt.directionalLightShadows.value=Je.state.directionalShadow,zt.spotLights.value=Je.state.spot,zt.spotLightShadows.value=Je.state.spotShadow,zt.rectAreaLights.value=Je.state.rectArea,zt.ltc_1.value=Je.state.rectAreaLTC1,zt.ltc_2.value=Je.state.rectAreaLTC2,zt.pointLights.value=Je.state.point,zt.pointLightShadows.value=Je.state.pointShadow,zt.hemisphereLights.value=Je.state.hemi,zt.directionalShadowMap.value=Je.state.directionalShadowMap,zt.directionalShadowMatrix.value=Je.state.directionalShadowMatrix,zt.spotShadowMap.value=Je.state.spotShadowMap,zt.spotShadowMatrix.value=Je.state.spotShadowMatrix,zt.pointShadowMap.value=Je.state.pointShadowMap,zt.pointShadowMatrix.value=Je.state.pointShadowMatrix);const Xt=Be.program.getUniforms(),tt=Sa.seqWithValue(Xt.seq,zt);Be.uniformsList=tt}function Bn(z,Se,Te,Be){Se.isScene!==!0&&(Se=q),de.resetTextureUnits();const Je=Se.fog,ct=Te.isMeshStandardMaterial?Se.environment:null,ut=g===null?d.outputEncoding:g.texture.encoding,Dt=me.get(Te.envMap||ct),kt=De.get(Te),tn=h.state.lights;if(J===!0&&(se===!0||z!==v)){const In=z===v&&Te.id===y;X.setState(Te,z,In)}Te.version===kt.__version?(Te.fog&&kt.fog!==Je||kt.environment!==ct||kt.needsLights&&kt.lightsStateVersion!==tn.state.version||kt.numClippingPlanes!==void 0&&(kt.numClippingPlanes!==X.numPlanes||kt.numIntersection!==X.numIntersection)||kt.outputEncoding!==ut||kt.envMap!==Dt)&&Gt(Te,Se,Be):(Gt(Te,Se,Be),kt.__version=Te.version);let Jt=!1,zt=!1,Xt=!1;const tt=kt.program,St=tt.getUniforms(),An=kt.uniforms;if(xe.useProgram(tt.program)&&(Jt=!0,zt=!0,Xt=!0),Te.id!==y&&(y=Te.id,zt=!0),Jt||v!==z){if(St.setValue(re,"projectionMatrix",z.projectionMatrix),ye.logarithmicDepthBuffer&&St.setValue(re,"logDepthBufFC",2/(Math.log(z.far+1)/Math.LN2)),v!==z&&(v=z,zt=!0,Xt=!0),Te.isShaderMaterial||Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshStandardMaterial||Te.envMap){const In=St.map.cameraPosition;In!==void 0&&In.setValue(re,K.setFromMatrixPosition(z.matrixWorld))}(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial)&&St.setValue(re,"isOrthographic",z.isOrthographicCamera===!0),(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial||Te.isShadowMaterial||Te.skinning)&&St.setValue(re,"viewMatrix",z.matrixWorldInverse)}if(Te.skinning){St.setOptional(re,Be,"bindMatrix"),St.setOptional(re,Be,"bindMatrixInverse");const In=Be.skeleton;if(In){const ss=In.bones;if(ye.floatVertexTextures){if(In.boneTexture===void 0){let ei=Math.sqrt(ss.length*4);ei=Qt.ceilPowerOfTwo(ei),ei=Math.max(ei,4);const Ce=new Float32Array(ei*ei*4);Ce.set(In.boneMatrices);const st=new iu(Ce,ei,ei,Tr,fa);In.boneMatrices=Ce,In.boneTexture=st,In.boneTextureSize=ei}St.setValue(re,"boneTexture",In.boneTexture,de),St.setValue(re,"boneTextureSize",In.boneTextureSize)}else St.setOptional(re,In,"boneMatrices")}}return(zt||kt.receiveShadow!==Be.receiveShadow)&&(kt.receiveShadow=Be.receiveShadow,St.setValue(re,"receiveShadow",Be.receiveShadow)),zt&&(St.setValue(re,"toneMappingExposure",d.toneMappingExposure),kt.needsLights&&rn(An,Xt),Je&&Te.fog&&V.refreshFogUniforms(An,Je),V.refreshMaterialUniforms(An,Te,D,L),Sa.upload(re,kt.uniformsList,An,de)),Te.isShaderMaterial&&Te.uniformsNeedUpdate===!0&&(Sa.upload(re,kt.uniformsList,An,de),Te.uniformsNeedUpdate=!1),Te.isSpriteMaterial&&St.setValue(re,"center",Be.center),St.setValue(re,"modelViewMatrix",Be.modelViewMatrix),St.setValue(re,"normalMatrix",Be.normalMatrix),St.setValue(re,"modelMatrix",Be.matrixWorld),tt}function rn(z,Se){z.ambientLightColor.needsUpdate=Se,z.lightProbe.needsUpdate=Se,z.directionalLights.needsUpdate=Se,z.directionalLightShadows.needsUpdate=Se,z.pointLights.needsUpdate=Se,z.pointLightShadows.needsUpdate=Se,z.spotLights.needsUpdate=Se,z.spotLightShadows.needsUpdate=Se,z.rectAreaLights.needsUpdate=Se,z.hemisphereLights.needsUpdate=Se}function vn(z){return z.isMeshLambertMaterial||z.isMeshToonMaterial||z.isMeshPhongMaterial||z.isMeshStandardMaterial||z.isShadowMaterial||z.isShaderMaterial&&z.lights===!0}this.setFramebuffer=function(z){m!==z&&g===null&&re.bindFramebuffer(36160,z),m=z},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return b},this.getRenderList=function(){return f},this.setRenderList=function(z){f=z},this.getRenderState=function(){return h},this.setRenderState=function(z){h=z},this.getRenderTarget=function(){return g},this.setRenderTarget=function(z,Se=0,Te=0){g=z,_=Se,b=Te,z&&De.get(z).__webglFramebuffer===void 0&&de.setupRenderTarget(z);let Be=m,Je=!1;if(z){const ct=De.get(z).__webglFramebuffer;z.isWebGLCubeRenderTarget?(Be=ct[Se],Je=!0):z.isWebGLMultisampleRenderTarget?Be=De.get(z).__webglMultisampledFramebuffer:Be=ct,S.copy(z.viewport),T.copy(z.scissor),k=z.scissorTest}else S.copy(N).multiplyScalar(D).floor(),T.copy($).multiplyScalar(D).floor(),k=W;if(x!==Be&&(re.bindFramebuffer(36160,Be),x=Be),xe.viewport(S),xe.scissor(T),xe.setScissorTest(k),Je){const ct=De.get(z.texture);re.framebufferTexture2D(36160,36064,34069+Se,ct.__webglTexture,Te)}},this.readRenderTargetPixels=function(z,Se,Te,Be,Je,ct,ut){if(!(z&&z.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Dt=De.get(z).__webglFramebuffer;if(z.isWebGLCubeRenderTarget&&ut!==void 0&&(Dt=Dt[ut]),Dt){let kt=!1;Dt!==x&&(re.bindFramebuffer(36160,Dt),kt=!0);try{const tn=z.texture,Jt=tn.format,zt=tn.type;if(Jt!==Tr&&Ke.convert(Jt)!==re.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(zt!==Sv&&Ke.convert(zt)!==re.getParameter(35738)&&!(zt===fa&&(ye.isWebGL2||Ee.get("OES_texture_float")||Ee.get("WEBGL_color_buffer_float")))&&!(zt===Rm&&(ye.isWebGL2?Ee.get("EXT_color_buffer_float"):Ee.get("EXT_color_buffer_half_float")))){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re.checkFramebufferStatus(36160)===36053?Se>=0&&Se<=z.width-Be&&Te>=0&&Te<=z.height-Je&&re.readPixels(Se,Te,Be,Je,Ke.convert(Jt),Ke.convert(zt),ct):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{kt&&re.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(z,Se,Te){Te===void 0&&(Te=0);const Be=Math.pow(2,-Te),Je=Math.floor(Se.image.width*Be),ct=Math.floor(Se.image.height*Be),ut=Ke.convert(Se.format);de.setTexture2D(Se,0),re.copyTexImage2D(3553,Te,ut,z.x,z.y,Je,ct,0),xe.unbindTexture()},this.copyTextureToTexture=function(z,Se,Te,Be){Be===void 0&&(Be=0);const Je=Se.image.width,ct=Se.image.height,ut=Ke.convert(Te.format),Dt=Ke.convert(Te.type);de.setTexture2D(Te,0),re.pixelStorei(37440,Te.flipY),re.pixelStorei(37441,Te.premultiplyAlpha),re.pixelStorei(3317,Te.unpackAlignment),Se.isDataTexture?re.texSubImage2D(3553,Be,z.x,z.y,Je,ct,ut,Dt,Se.image.data):Se.isCompressedTexture?re.compressedTexSubImage2D(3553,Be,z.x,z.y,Se.mipmaps[0].width,Se.mipmaps[0].height,ut,Se.mipmaps[0].data):re.texSubImage2D(3553,Be,z.x,z.y,ut,Dt,Se.image),Be===0&&Te.generateMipmaps&&re.generateMipmap(3553),xe.unbindTexture()},this.initTexture=function(z){de.setTexture2D(z,0),xe.unbindTexture()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function s3(t){Hh.call(this,t)}s3.prototype=Object.assign(Object.create(Hh.prototype),{constructor:s3,isWebGL1Renderer:!0});class Tv{constructor(e,n){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new Pt(e),this.density=n!==void 0?n:25e-5}clone(){return new Tv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class kv{constructor(e,n,i){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new Pt(e),this.near=n!==void 0?n:1,this.far=i!==void 0?i:1e3}clone(){return new kv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Av extends Bt{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.background!==null&&(n.object.background=this.background.toJSON(e)),this.environment!==null&&(n.object.environment=this.environment.toJSON(e)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}function Qs(t,e){this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Lg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qt.generateUUID()}Object.defineProperty(Qs.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(Qs.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,s=this.stride;i<s;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return e===void 0&&(e=0),this.array.set(t,e),this},clone:function(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qt.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new Qs(e,this.stride);return n.setUsage(this.usage),n},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qt.generateUUID()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const qa=new ee;function kl(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=i===!0}Object.defineProperties(kl.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}});Object.assign(kl.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)qa.x=this.getX(e),qa.y=this.getY(e),qa.z=this.getZ(e),qa.applyMatrix4(t),this.setXYZ(e,qa.x,qa.y,qa.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,s){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=s,this},clone:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return new qt(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new kl(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function Al(t){Wt.call(this),this.type="SpriteMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Al.prototype=Object.create(Wt.prototype);Al.prototype.constructor=Al;Al.prototype.isSpriteMaterial=!0;Al.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};let lc;const Fu=new ee,cc=new ee,uc=new ee,fc=new je,zu=new je,XA=new an,Id=new ee,Uu=new ee,Dd=new ee,r3=new je,q0=new je,o3=new je;function y_(t){if(Bt.call(this),this.type="Sprite",lc===void 0){lc=new sn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Qs(e,5);lc.setIndex([0,1,2,0,2,3]),lc.setAttribute("position",new kl(n,3,0,!1)),lc.setAttribute("uv",new kl(n,2,3,!1))}this.geometry=lc,this.material=t!==void 0?t:new Al,this.center=new je(.5,.5)}y_.prototype=Object.assign(Object.create(Bt.prototype),{constructor:y_,isSprite:!0,raycast:function(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),cc.setFromMatrixScale(this.matrixWorld),XA.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),uc.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&cc.multiplyScalar(-uc.z);const n=this.material.rotation;let i,s;n!==0&&(s=Math.cos(n),i=Math.sin(n));const r=this.center;Od(Id.set(-.5,-.5,0),uc,r,cc,i,s),Od(Uu.set(.5,-.5,0),uc,r,cc,i,s),Od(Dd.set(.5,.5,0),uc,r,cc,i,s),r3.set(0,0),q0.set(1,0),o3.set(1,1);let o=t.ray.intersectTriangle(Id,Uu,Dd,!1,Fu);if(o===null&&(Od(Uu.set(-.5,.5,0),uc,r,cc,i,s),q0.set(0,1),o=t.ray.intersectTriangle(Id,Dd,Uu,!1,Fu),o===null))return;const a=t.ray.origin.distanceTo(Fu);a<t.near||a>t.far||e.push({distance:a,point:Fu.clone(),uv:cs.getUV(Fu,Id,Uu,Dd,r3,q0,o3,new je),face:null,object:this})},copy:function(t){return Bt.prototype.copy.call(this,t),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}});function Od(t,e,n,i,s,r){fc.subVectors(t,n).addScalar(.5).multiply(i),s!==void 0?(zu.x=r*fc.x-s*fc.y,zu.y=s*fc.x+r*fc.y):zu.copy(fc),t.copy(e),t.x+=zu.x,t.y+=zu.y,t.applyMatrix4(XA)}const Nd=new ee,a3=new ee;function Om(){Bt.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Om.prototype=Object.assign(Object.create(Bt.prototype),{constructor:Om,isLOD:!0,copy:function(t){Bt.prototype.copy.call(this,t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const s=e[n];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){e===void 0&&(e=0),e=Math.abs(e);const n=this.levels;let i;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){Nd.setFromMatrixPosition(this.matrixWorld);const i=t.ray.origin.distanceTo(Nd);this.getObjectForDistance(i).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){Nd.setFromMatrixPosition(t.matrixWorld),a3.setFromMatrixPosition(this.matrixWorld);const n=Nd.distanceTo(a3)/t.zoom;e[0].object.visible=!0;let i,s;for(i=1,s=e.length;i<s&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<s;i++)e[i].object.visible=!1}},toJSON:function(t){const e=Bt.prototype.toJSON.call(this,t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,s=n.length;i<s;i++){const r=n[i];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}});function w_(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Ai.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new an,this.bindMatrixInverse=new an}w_.prototype=Object.assign(Object.create(Ai.prototype),{constructor:w_,isSkinnedMesh:!0,copy:function(t){return Ai.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new Un,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Ai.prototype.updateMatrixWorld.call(this,t),this.bindMode==="attached"?this.bindMatrixInverse.getInverse(this.matrixWorld):this.bindMode==="detached"?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(){const t=new ee,e=new Un,n=new Un,i=new ee,s=new an;return function(r,o){const a=this.skeleton,l=this.geometry;e.fromBufferAttribute(l.attributes.skinIndex,r),n.fromBufferAttribute(l.attributes.skinWeight,r),t.fromBufferAttribute(l.attributes.position,r).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let c=0;c<4;c++){const u=n.getComponent(c);if(u!==0){const f=e.getComponent(c);s.multiplyMatrices(a.bones[f].matrixWorld,a.boneInverses[f]),o.addScaledVector(i.copy(t).applyMatrix4(s),u)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});const l3=new an,LJ=new an;function x_(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(this.bones.length*16),this.frame=-1,e===void 0)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new an)}}Object.assign(x_.prototype,{calculateInverses:function(){this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++){const n=new an;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.getInverse(this.boneInverses[t])}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.getInverse(n.parent.matrixWorld),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let s=0,r=t.length;s<r;s++){const o=t[s]?t[s].matrixWorld:LJ;l3.multiplyMatrices(o,e[s]),l3.toArray(n,s*16)}i!==void 0&&(i.needsUpdate=!0)},clone:function(){return new x_(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}});function c3(){Bt.call(this),this.type="Bone"}c3.prototype=Object.assign(Object.create(Bt.prototype),{constructor:c3,isBone:!0});const u3=new an,f3=new an,Bd=[],Hu=new Ai;function M_(t,e,n){Ai.call(this,t,e),this.instanceMatrix=new qt(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}M_.prototype=Object.assign(Object.create(Ai.prototype),{constructor:M_,isInstancedMesh:!0,copy:function(t){return Ai.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},setColorAt:function(t,e){this.instanceColor===null&&(this.instanceColor=new qt(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,t*3)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,t*16)},raycast:function(t,e){const n=this.matrixWorld,i=this.count;if(Hu.geometry=this.geometry,Hu.material=this.material,Hu.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,u3),f3.multiplyMatrices(n,u3),Hu.matrixWorld=f3,Hu.raycast(t,Bd);for(let r=0,o=Bd.length;r<o;r++){const a=Bd[r];a.instanceId=s,a.object=this,e.push(a)}Bd.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,t*16)},updateMorphTargets:function(){}});function or(t){Wt.call(this),this.type="LineBasicMaterial",this.color=new Pt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}or.prototype=Object.create(Wt.prototype);or.prototype.constructor=or;or.prototype.isLineBasicMaterial=!0;or.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const h3=new ee,d3=new ee,p3=new an,Fd=new zh,zd=new Fa;function Ll(t,e,n){n===1&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Bt.call(this),this.type="Line",this.geometry=t!==void 0?t:new sn,this.material=e!==void 0?e:new or,this.updateMorphTargets()}Ll.prototype=Object.assign(Object.create(Bt.prototype),{constructor:Ll,isLine:!0,copy:function(t){return Bt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[0];for(let i=1,s=e.count;i<s;i++)h3.fromBufferAttribute(e,i-1),d3.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=h3.distanceTo(d3);t.setAttribute("lineDistance",new It(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;n[0]=0;for(let i=1,s=e.length;i<s;i++)n[i]=n[i-1],n[i]+=e[i-1].distanceTo(e[i])}return this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),zd.copy(n.boundingSphere),zd.applyMatrix4(i),zd.radius+=s,t.ray.intersectsSphere(zd)===!1)return;p3.getInverse(i),Fd.copy(t.ray).applyMatrix4(p3);const r=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r,a=new ee,l=new ee,c=new ee,u=new ee,f=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){const h=n.index,p=n.attributes.position.array;if(h!==null){const m=h.array;for(let _=0,b=m.length-1;_<b;_+=f){const g=m[_],x=m[_+1];if(a.fromArray(p,g*3),l.fromArray(p,x*3),Fd.distanceSqToSegment(a,l,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const v=t.ray.origin.distanceTo(u);v<t.near||v>t.far||e.push({distance:v,point:c.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(let m=0,_=p.length/3-1;m<_;m+=f){if(a.fromArray(p,3*m),l.fromArray(p,3*m+3),Fd.distanceSqToSegment(a,l,u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const g=t.ray.origin.distanceTo(u);g<t.near||g>t.far||e.push({distance:g,point:c.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){const h=n.vertices,d=h.length;for(let p=0;p<d-1;p+=f){if(Fd.distanceSqToSegment(h[p],h[p+1],u,c)>o)continue;u.applyMatrix4(this.matrixWorld);const _=t.ray.origin.distanceTo(u);_<t.near||_>t.far||e.push({distance:_,point:c.clone().applyMatrix4(this.matrixWorld),index:p,face:null,faceIndex:null,object:this})}}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const Ud=new ee,Hd=new ee;function uh(t,e){Ll.call(this,t,e),this.type="LineSegments"}uh.prototype=Object.assign(Object.create(Ll.prototype),{constructor:uh,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(t.index===null){const e=t.attributes.position,n=[];for(let i=0,s=e.count;i<s;i+=2)Ud.fromBufferAttribute(e,i),Hd.fromBufferAttribute(e,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Ud.distanceTo(Hd);t.setAttribute("lineDistance",new It(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){const e=t.vertices,n=t.lineDistances;for(let i=0,s=e.length;i<s;i+=2)Ud.copy(e[i]),Hd.copy(e[i+1]),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+Ud.distanceTo(Hd)}return this}});function S_(t,e){Ll.call(this,t,e),this.type="LineLoop"}S_.prototype=Object.assign(Object.create(Ll.prototype),{constructor:S_,isLineLoop:!0});function Cl(t){Wt.call(this),this.type="PointsMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Cl.prototype=Object.create(Wt.prototype);Cl.prototype.constructor=Cl;Cl.prototype.isPointsMaterial=!0;Cl.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const m3=new an,E_=new zh,Vd=new Fa,Gd=new ee;function T_(t,e){Bt.call(this),this.type="Points",this.geometry=t!==void 0?t:new sn,this.material=e!==void 0?e:new Cl,this.updateMorphTargets()}T_.prototype=Object.assign(Object.create(Bt.prototype),{constructor:T_,isPoints:!0,copy:function(t){return Bt.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,s=t.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),Vd.copy(n.boundingSphere),Vd.applyMatrix4(i),Vd.radius+=s,t.ray.intersectsSphere(Vd)===!1)return;m3.getInverse(i),E_.copy(t.ray).applyMatrix4(m3);const r=s/((this.scale.x+this.scale.y+this.scale.z)/3),o=r*r;if(n.isBufferGeometry){const a=n.index,c=n.attributes.position.array;if(a!==null){const u=a.array;for(let f=0,h=u.length;f<h;f++){const d=u[f];Gd.fromArray(c,d*3),X0(Gd,d,o,i,t,e,this)}}else for(let u=0,f=c.length/3;u<f;u++)Gd.fromArray(c,u*3),X0(Gd,u,o,i,t,e,this)}else{const a=n.vertices;for(let l=0,c=a.length;l<c;l++)X0(a[l],l,o,i,t,e,this)}},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const i=e[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++){const o=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const e=t.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function X0(t,e,n,i,s,r,o){const a=E_.distanceSqToPoint(t);if(a<n){const l=new ee;E_.closestPointToPoint(t,l),l.applyMatrix4(i);const c=s.ray.origin.distanceTo(l);if(c<s.near||c>s.far)return;r.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}function g3(t,e,n,i,s,r,o,a,l){Hn.call(this,t,e,n,i,s,r,o,a,l),this.format=o!==void 0?o:dl,this.minFilter=r!==void 0?r:Gi,this.magFilter=s!==void 0?s:Gi,this.generateMipmaps=!1;const c=this;function u(){c.needsUpdate=!0,t.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(u)}g3.prototype=Object.assign(Object.create(Hn.prototype),{constructor:g3,isVideoTexture:!0,update:function(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function fh(t,e,n,i,s,r,o,a,l,c,u,f){Hn.call(this,null,r,o,a,l,c,i,s,u,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}fh.prototype=Object.create(Hn.prototype);fh.prototype.constructor=fh;fh.prototype.isCompressedTexture=!0;function Nm(t,e,n,i,s,r,o,a,l){Hn.call(this,t,e,n,i,s,r,o,a,l),this.needsUpdate=!0}Nm.prototype=Object.create(Hn.prototype);Nm.prototype.constructor=Nm;Nm.prototype.isCanvasTexture=!0;function Bm(t,e,n,i,s,r,o,a,l,c){if(c=c!==void 0?c:Gc,c!==Gc&&c!==nh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&c===Gc&&(n=Pm),n===void 0&&c===nh&&(n=yf),Hn.call(this,null,i,s,r,o,a,c,n,l),this.image={width:t,height:e},this.magFilter=o!==void 0?o:Xi,this.minFilter=a!==void 0?a:Xi,this.flipY=!1,this.generateMipmaps=!1}Bm.prototype=Object.create(Hn.prototype);Bm.prototype.constructor=Bm;Bm.prototype.isDepthTexture=!0;class CJ extends sn{constructor(e){super(),this.type="WireframeGeometry";const n=[],i=[0,0],s={},r=["a","b","c"];if(e&&e.isGeometry){const o=e.faces;for(let a=0,l=o.length;a<l;a++){const c=o[a];for(let u=0;u<3;u++){const f=c[r[u]],h=c[r[(u+1)%3]];i[0]=Math.min(f,h),i[1]=Math.max(f,h);const d=i[0]+","+i[1];s[d]===void 0&&(s[d]={index1:i[0],index2:i[1]})}}for(const a in s){const l=s[a];let c=e.vertices[l.index1];n.push(c.x,c.y,c.z),c=e.vertices[l.index2],n.push(c.x,c.y,c.z)}}else if(e&&e.isBufferGeometry){const o=new ee;if(e.index!==null){const a=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let u=0,f=c.length;u<f;++u){const h=c[u],d=h.start,p=h.count;for(let m=d,_=d+p;m<_;m+=3)for(let b=0;b<3;b++){const g=l.getX(m+b),x=l.getX(m+(b+1)%3);i[0]=Math.min(g,x),i[1]=Math.max(g,x);const y=i[0]+","+i[1];s[y]===void 0&&(s[y]={index1:i[0],index2:i[1]})}}for(const u in s){const f=s[u];o.fromBufferAttribute(a,f.index1),n.push(o.x,o.y,o.z),o.fromBufferAttribute(a,f.index2),n.push(o.x,o.y,o.z)}}else{const a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let u=0;u<3;u++){const f=3*l+u;o.fromBufferAttribute(a,f),n.push(o.x,o.y,o.z);const h=3*l+(u+1)%3;o.fromBufferAttribute(a,h),n.push(o.x,o.y,o.z)}}}this.setAttribute("position",new It(n,3))}}function Fm(t,e,n){Rn.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new hh(t,e,n)),this.mergeVertices()}Fm.prototype=Object.create(Rn.prototype);Fm.prototype.constructor=Fm;function hh(t,e,n){sn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};const i=[],s=[],r=[],o=[],a=1e-5,l=new ee,c=new ee,u=new ee,f=new ee,h=new ee;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=e+1;for(let p=0;p<=n;p++){const m=p/n;for(let _=0;_<=e;_++){const b=_/e;t(b,m,c),s.push(c.x,c.y,c.z),b-a>=0?(t(b-a,m,u),f.subVectors(c,u)):(t(b+a,m,u),f.subVectors(u,c)),m-a>=0?(t(b,m-a,u),h.subVectors(c,u)):(t(b,m+a,u),h.subVectors(u,c)),l.crossVectors(f,h).normalize(),r.push(l.x,l.y,l.z),o.push(b,m)}}for(let p=0;p<n;p++)for(let m=0;m<e;m++){const _=p*d+m,b=p*d+m+1,g=(p+1)*d+m+1,x=(p+1)*d+m;i.push(_,b,x),i.push(b,g,x)}this.setIndex(i),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(r,3)),this.setAttribute("uv",new It(o,2))}hh.prototype=Object.create(sn.prototype);hh.prototype.constructor=hh;class PJ extends Rn{constructor(e,n,i,s){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:s},this.fromBufferGeometry(new vu(e,n,i,s)),this.mergeVertices()}}class vu extends sn{constructor(e,n,i,s){super(),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:s},i=i||1,s=s||0;const r=[],o=[];a(s),c(i),u(),this.setAttribute("position",new It(r,3)),this.setAttribute("normal",new It(r.slice(),3)),this.setAttribute("uv",new It(o,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function a(g){const x=new ee,y=new ee,v=new ee;for(let w=0;w<n.length;w+=3)d(n[w+0],x),d(n[w+1],y),d(n[w+2],v),l(x,y,v,g)}function l(g,x,y,v){const w=Math.pow(2,v),S=[];for(let T=0;T<=w;T++){S[T]=[];const k=g.clone().lerp(y,T/w),A=x.clone().lerp(y,T/w),L=w-T;for(let D=0;D<=L;D++)D===0&&T===w?S[T][D]=k:S[T][D]=k.clone().lerp(A,D/L)}for(let T=0;T<w;T++)for(let k=0;k<2*(w-T)-1;k++){const A=Math.floor(k/2);k%2===0?(h(S[T][A+1]),h(S[T+1][A]),h(S[T][A])):(h(S[T][A+1]),h(S[T+1][A+1]),h(S[T+1][A]))}}function c(g){const x=new ee;for(let y=0;y<r.length;y+=3)x.x=r[y+0],x.y=r[y+1],x.z=r[y+2],x.normalize().multiplyScalar(g),r[y+0]=x.x,r[y+1]=x.y,r[y+2]=x.z}function u(){const g=new ee;for(let x=0;x<r.length;x+=3){g.x=r[x+0],g.y=r[x+1],g.z=r[x+2];const y=_(g)/2/Math.PI+.5,v=b(g)/Math.PI+.5;o.push(y,1-v)}p(),f()}function f(){for(let g=0;g<o.length;g+=6){const x=o[g+0],y=o[g+2],v=o[g+4],w=Math.max(x,y,v),S=Math.min(x,y,v);w>.9&&S<.1&&(x<.2&&(o[g+0]+=1),y<.2&&(o[g+2]+=1),v<.2&&(o[g+4]+=1))}}function h(g){r.push(g.x,g.y,g.z)}function d(g,x){const y=g*3;x.x=e[y+0],x.y=e[y+1],x.z=e[y+2]}function p(){const g=new ee,x=new ee,y=new ee,v=new ee,w=new je,S=new je,T=new je;for(let k=0,A=0;k<r.length;k+=9,A+=6){g.set(r[k+0],r[k+1],r[k+2]),x.set(r[k+3],r[k+4],r[k+5]),y.set(r[k+6],r[k+7],r[k+8]),w.set(o[A+0],o[A+1]),S.set(o[A+2],o[A+3]),T.set(o[A+4],o[A+5]),v.copy(g).add(x).add(y).divideScalar(3);const L=_(v);m(w,A+0,g,L),m(S,A+2,x,L),m(T,A+4,y,L)}}function m(g,x,y,v){v<0&&g.x===1&&(o[x]=g.x-1),y.x===0&&y.z===0&&(o[x]=v/2/Math.PI+.5)}function _(g){return Math.atan2(g.z,-g.x)}function b(g){return Math.atan2(-g.y,Math.sqrt(g.x*g.x+g.z*g.z))}}}class RJ extends Rn{constructor(e,n){super(),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new ZA(e,n)),this.mergeVertices()}}class ZA extends vu{constructor(e,n){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,n),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class IJ extends Rn{constructor(e,n){super(),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new JA(e,n)),this.mergeVertices()}}class JA extends vu{constructor(e,n){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,n),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class DJ extends Rn{constructor(e,n){super(),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new KA(e,n)),this.mergeVertices()}}class KA extends vu{constructor(e,n){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,r,e,n),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class OJ extends Rn{constructor(e,n){super(),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n},this.fromBufferGeometry(new $A(e,n)),this.mergeVertices()}}class $A extends vu{constructor(e,n){const i=(1+Math.sqrt(5))/2,s=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,e,n),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:n}}}class NJ extends Rn{constructor(e,n,i,s,r,o){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:s,closed:r},o!==void 0&&console.warn("THREE.TubeGeometry: taper has been removed.");const a=new QA(e,n,i,s,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}}class QA extends sn{constructor(e,n,i,s,r){super(),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:s,closed:r},n=n||64,i=i||1,s=s||8,r=r||!1;const o=e.computeFrenetFrames(n,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ee,l=new ee,c=new je;let u=new ee;const f=[],h=[],d=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new It(f,3)),this.setAttribute("normal",new It(h,3)),this.setAttribute("uv",new It(d,2));function m(){for(let x=0;x<n;x++)_(x);_(r===!1?n:0),g(),b()}function _(x){u=e.getPointAt(x/n,u);const y=o.normals[x],v=o.binormals[x];for(let w=0;w<=s;w++){const S=w/s*Math.PI*2,T=Math.sin(S),k=-Math.cos(S);l.x=k*y.x+T*v.x,l.y=k*y.y+T*v.y,l.z=k*y.z+T*v.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function b(){for(let x=1;x<=n;x++)for(let y=1;y<=s;y++){const v=(s+1)*(x-1)+(y-1),w=(s+1)*x+(y-1),S=(s+1)*x+y,T=(s+1)*(x-1)+y;p.push(v,w,T),p.push(w,S,T)}}function g(){for(let x=0;x<=n;x++)for(let y=0;y<=s;y++)c.x=x/n,c.y=y/s,d.push(c.x,c.y)}}toJSON(){const e=sn.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e}}class BJ extends Rn{constructor(e,n,i,s,r,o,a){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:s,p:r,q:o},a!==void 0&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new eL(e,n,i,s,r,o)),this.mergeVertices()}}class eL extends sn{constructor(e,n,i,s,r,o){super(),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:s,p:r,q:o},e=e||1,n=n||.4,i=Math.floor(i)||64,s=Math.floor(s)||8,r=r||2,o=o||3;const a=[],l=[],c=[],u=[],f=new ee,h=new ee,d=new ee,p=new ee,m=new ee,_=new ee,b=new ee;for(let x=0;x<=i;++x){const y=x/i*r*Math.PI*2;g(y,r,o,e,d),g(y+.01,r,o,e,p),_.subVectors(p,d),b.addVectors(p,d),m.crossVectors(_,b),b.crossVectors(m,_),m.normalize(),b.normalize();for(let v=0;v<=s;++v){const w=v/s*Math.PI*2,S=-n*Math.cos(w),T=n*Math.sin(w);f.x=d.x+(S*b.x+T*m.x),f.y=d.y+(S*b.y+T*m.y),f.z=d.z+(S*b.z+T*m.z),l.push(f.x,f.y,f.z),h.subVectors(f,d).normalize(),c.push(h.x,h.y,h.z),u.push(x/i),u.push(v/s)}}for(let x=1;x<=i;x++)for(let y=1;y<=s;y++){const v=(s+1)*(x-1)+(y-1),w=(s+1)*x+(y-1),S=(s+1)*x+y,T=(s+1)*(x-1)+y;a.push(v,w,T),a.push(w,S,T)}this.setIndex(a),this.setAttribute("position",new It(l,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(u,2));function g(x,y,v,w,S){const T=Math.cos(x),k=Math.sin(x),A=v/y*x,L=Math.cos(A);S.x=w*(2+L)*.5*T,S.y=w*(2+L)*k*.5,S.z=w*Math.sin(A)*.5}}}class FJ extends Rn{constructor(e,n,i,s,r){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:s,arc:r},this.fromBufferGeometry(new tL(e,n,i,s,r)),this.mergeVertices()}}class tL extends sn{constructor(e,n,i,s,r){super(),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:s,arc:r},e=e||1,n=n||.4,i=Math.floor(i)||8,s=Math.floor(s)||6,r=r||Math.PI*2;const o=[],a=[],l=[],c=[],u=new ee,f=new ee,h=new ee;for(let d=0;d<=i;d++)for(let p=0;p<=s;p++){const m=p/s*r,_=d/i*Math.PI*2;f.x=(e+n*Math.cos(_))*Math.cos(m),f.y=(e+n*Math.cos(_))*Math.sin(m),f.z=n*Math.sin(_),a.push(f.x,f.y,f.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),h.subVectors(f,u).normalize(),l.push(h.x,h.y,h.z),c.push(p/s),c.push(d/i)}for(let d=1;d<=i;d++)for(let p=1;p<=s;p++){const m=(s+1)*d+p-1,_=(s+1)*(d-1)+p-1,b=(s+1)*(d-1)+p,g=(s+1)*d+p;o.push(m,_,g),o.push(_,b,g)}this.setIndex(o),this.setAttribute("position",new It(a,3)),this.setAttribute("normal",new It(l,3)),this.setAttribute("uv",new It(c,2))}}const zJ={triangulate:function(t,e,n){n=n||2;const i=e&&e.length,s=i?e[0]*n:t.length;let r=nL(t,0,s,n,!0);const o=[];if(!r||r.next===r.prev)return o;let a,l,c,u,f,h,d;if(i&&(r=WJ(t,e,r,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(let p=n;p<s;p+=n)f=t[p],h=t[p+1],f<a&&(a=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-a,u-l),d=d!==0?1/d:0}return dh(r,o,n,a,l,d),o}};function nL(t,e,n,i,s){let r,o;if(s===tK(t,e,n,i)>0)for(r=e;r<n;r+=i)o=_3(r,t[r],t[r+1],o);else for(r=n-i;r>=e;r-=i)o=_3(r,t[r],t[r+1],o);return o&&Ig(o,o.next)&&(mh(o),o=o.next),o}function Da(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Ig(n,n.next)||ci(n.prev,n,n.next)===0)){if(mh(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function dh(t,e,n,i,s,r,o){if(!t)return;!o&&r&&ZJ(t,i,s,r);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,r?HJ(t,i,s,r):UJ(t)){e.push(l.i/n),e.push(t.i/n),e.push(c.i/n),mh(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=VJ(Da(t),e,n),dh(t,e,n,i,s,r,2)):o===2&&GJ(t,e,n,i,s,r):dh(Da(t),e,n,i,s,r,1);break}}}function UJ(t){const e=t.prev,n=t,i=t.next;if(ci(e,n,i)>=0)return!1;let s=t.next.next;for(;s!==t.prev;){if(Tc(e.x,e.y,n.x,n.y,i.x,i.y,s.x,s.y)&&ci(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function HJ(t,e,n,i){const s=t.prev,r=t,o=t.next;if(ci(s,r,o)>=0)return!1;const a=s.x<r.x?s.x<o.x?s.x:o.x:r.x<o.x?r.x:o.x,l=s.y<r.y?s.y<o.y?s.y:o.y:r.y<o.y?r.y:o.y,c=s.x>r.x?s.x>o.x?s.x:o.x:r.x>o.x?r.x:o.x,u=s.y>r.y?s.y>o.y?s.y:o.y:r.y>o.y?r.y:o.y,f=k_(a,l,e,n,i),h=k_(c,u,e,n,i);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=f&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&Tc(s.x,s.y,r.x,r.y,o.x,o.y,d.x,d.y)&&ci(d.prev,d,d.next)>=0||(d=d.prevZ,p!==t.prev&&p!==t.next&&Tc(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&ci(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&Tc(s.x,s.y,r.x,r.y,o.x,o.y,d.x,d.y)&&ci(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&Tc(s.x,s.y,r.x,r.y,o.x,o.y,p.x,p.y)&&ci(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function VJ(t,e,n){let i=t;do{const s=i.prev,r=i.next.next;!Ig(s,r)&&iL(s,i,i.next,r)&&ph(s,r)&&ph(r,s)&&(e.push(s.i/n),e.push(i.i/n),e.push(r.i/n),mh(i),mh(i.next),i=t=r),i=i.next}while(i!==t);return Da(i)}function GJ(t,e,n,i,s,r){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&$J(o,a)){let l=sL(o,a);o=Da(o,o.next),l=Da(l,l.next),dh(o,e,n,i,s,r),dh(l,e,n,i,s,r);return}a=a.next}o=o.next}while(o!==t)}function WJ(t,e,n,i){const s=[];let r,o,a,l,c;for(r=0,o=e.length;r<o;r++)a=e[r]*i,l=r<o-1?e[r+1]*i:t.length,c=nL(t,a,l,i,!1),c===c.next&&(c.steiner=!0),s.push(KJ(c));for(s.sort(jJ),r=0;r<s.length;r++)YJ(s[r],n),n=Da(n,n.next);return n}function jJ(t,e){return t.x-e.x}function YJ(t,e){if(e=qJ(t,e),e){const n=sL(e,t);Da(e,e.next),Da(n,n.next)}}function qJ(t,e){let n=e;const i=t.x,s=t.y;let r=-1/0,o;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const h=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=i&&h>r){if(r=h,h===i){if(s===n.y)return n;if(s===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===r)return o;const a=o,l=o.x,c=o.y;let u=1/0,f;n=o;do i>=n.x&&n.x>=l&&i!==n.x&&Tc(s<c?i:r,s,l,c,s<c?r:i,s,n.x,n.y)&&(f=Math.abs(s-n.y)/(i-n.x),ph(n,t)&&(f<u||f===u&&(n.x>o.x||n.x===o.x&&XJ(o,n)))&&(o=n,u=f)),n=n.next;while(n!==a);return o}function XJ(t,e){return ci(t.prev,t,e.prev)<0&&ci(e.next,t,t.next)<0}function ZJ(t,e,n,i){let s=t;do s.z===null&&(s.z=k_(s.x,s.y,e,n,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,JJ(s)}function JJ(t){let e,n,i,s,r,o,a,l,c=1;do{for(n=t,t=null,r=null,o=0;n;){for(o++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(s=n,n=n.nextZ,a--):(s=i,i=i.nextZ,l--),r?r.nextZ=s:t=s,s.prevZ=r,r=s;n=i}r.nextZ=null,c*=2}while(o>1);return t}function k_(t,e,n,i,s){return t=32767*(t-n)*s,e=32767*(e-i)*s,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function KJ(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Tc(t,e,n,i,s,r,o,a){return(s-o)*(e-a)-(t-o)*(r-a)>=0&&(t-o)*(i-a)-(n-o)*(e-a)>=0&&(n-o)*(r-a)-(s-o)*(i-a)>=0}function $J(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!QJ(t,e)&&(ph(t,e)&&ph(e,t)&&eK(t,e)&&(ci(t.prev,t,e.prev)||ci(t,e.prev,e))||Ig(t,e)&&ci(t.prev,t,t.next)>0&&ci(e.prev,e,e.next)>0)}function ci(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Ig(t,e){return t.x===e.x&&t.y===e.y}function iL(t,e,n,i){const s=jd(ci(t,e,n)),r=jd(ci(t,e,i)),o=jd(ci(n,i,t)),a=jd(ci(n,i,e));return!!(s!==r&&o!==a||s===0&&Wd(t,n,e)||r===0&&Wd(t,i,e)||o===0&&Wd(n,t,i)||a===0&&Wd(n,e,i))}function Wd(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function jd(t){return t>0?1:t<0?-1:0}function QJ(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&iL(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function ph(t,e){return ci(t.prev,t,t.next)<0?ci(t,e,t.next)>=0&&ci(t,t.prev,e)>=0:ci(t,e,t.prev)<0||ci(t,t.next,e)<0}function eK(t,e){let n=t,i=!1;const s=(t.x+e.x)/2,r=(t.y+e.y)/2;do n.y>r!=n.next.y>r&&n.next.y!==n.y&&s<(n.next.x-n.x)*(r-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function sL(t,e){const n=new A_(t.i,t.x,t.y),i=new A_(e.i,e.x,e.y),s=t.next,r=e.prev;return t.next=e,e.prev=t,n.next=s,s.prev=n,i.next=n,n.prev=i,r.next=i,i.prev=r,i}function _3(t,e,n,i){const s=new A_(t,e,n);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function mh(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A_(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function tK(t,e,n,i){let s=0;for(let r=e,o=n-i;r<n;r+=i)s+=(t[o]-t[r])*(t[r+1]+t[o+1]),o=r;return s}const Ea={area:function(t){const e=t.length;let n=0;for(let i=e-1,s=0;s<e;i=s++)n+=t[i].x*t[s].y-t[s].x*t[i].y;return n*.5},isClockWise:function(t){return Ea.area(t)<0},triangulateShape:function(t,e){const n=[],i=[],s=[];b3(t),v3(n,t);let r=t.length;e.forEach(b3);for(let a=0;a<e.length;a++)i.push(r),r+=e[a].length,v3(n,e[a]);const o=zJ.triangulate(n,i);for(let a=0;a<o.length;a+=3)s.push(o.slice(a,a+3));return s}};function b3(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function v3(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class rL extends Rn{constructor(e,n){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},this.fromBufferGeometry(new Dg(e,n)),this.mergeVertices()}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return oL(n,i,e)}}class Dg extends sn{constructor(e,n){super(),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,s=[],r=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new It(s,3)),this.setAttribute("uv",new It(r,2)),this.computeVertexNormals();function o(a){const l=[],c=n.curveSegments!==void 0?n.curveSegments:12,u=n.steps!==void 0?n.steps:1;let f=n.depth!==void 0?n.depth:100,h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:6,p=n.bevelSize!==void 0?n.bevelSize:d-2,m=n.bevelOffset!==void 0?n.bevelOffset:0,_=n.bevelSegments!==void 0?n.bevelSegments:3;const b=n.extrudePath,g=n.UVGenerator!==void 0?n.UVGenerator:nK;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),f=n.amount);let x,y=!1,v,w,S,T;b&&(x=b.getSpacedPoints(u),y=!0,h=!1,v=b.computeFrenetFrames(u,!1),w=new ee,S=new ee,T=new ee),h||(_=0,d=0,p=0,m=0);const k=a.extractPoints(c);let A=k.shape;const L=k.holes;if(!Ea.isClockWise(A)){A=A.reverse();for(let de=0,me=L.length;de<me;de++){const We=L[de];Ea.isClockWise(We)&&(L[de]=We.reverse())}}const B=Ea.triangulateShape(A,L),U=A;for(let de=0,me=L.length;de<me;de++){const We=L[de];A=A.concat(We)}function N(de,me,We){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().multiplyScalar(We).add(de)}const $=A.length,W=B.length;function j(de,me,We){let Ue,be,F;const V=de.x-me.x,_e=de.y-me.y,oe=We.x-de.x,X=We.y-de.y,fe=V*V+_e*_e,Le=V*X-_e*oe;if(Math.abs(Le)>Number.EPSILON){const Pe=Math.sqrt(fe),Ye=Math.sqrt(oe*oe+X*X),Ke=me.x-_e/Pe,Z=me.y+V/Pe,ve=We.x-X/Ye,Re=We.y+oe/Ye,He=((ve-Ke)*X-(Re-Z)*oe)/(V*X-_e*oe);Ue=Ke+V*He-de.x,be=Z+_e*He-de.y;const Ze=Ue*Ue+be*be;if(Ze<=2)return new je(Ue,be);F=Math.sqrt(Ze/2)}else{let Pe=!1;V>Number.EPSILON?oe>Number.EPSILON&&(Pe=!0):V<-Number.EPSILON?oe<-Number.EPSILON&&(Pe=!0):Math.sign(_e)===Math.sign(X)&&(Pe=!0),Pe?(Ue=-_e,be=V,F=Math.sqrt(fe)):(Ue=V,be=_e,F=Math.sqrt(fe/2))}return new je(Ue/F,be/F)}const J=[];for(let de=0,me=U.length,We=me-1,Ue=de+1;de<me;de++,We++,Ue++)We===me&&(We=0),Ue===me&&(Ue=0),J[de]=j(U[de],U[We],U[Ue]);const se=[];let ne,K=J.concat();for(let de=0,me=L.length;de<me;de++){const We=L[de];ne=[];for(let Ue=0,be=We.length,F=be-1,V=Ue+1;Ue<be;Ue++,F++,V++)F===be&&(F=0),V===be&&(V=0),ne[Ue]=j(We[Ue],We[F],We[V]);se.push(ne),K=K.concat(ne)}for(let de=0;de<_;de++){const me=de/_,We=d*Math.cos(me*Math.PI/2),Ue=p*Math.sin(me*Math.PI/2)+m;for(let be=0,F=U.length;be<F;be++){const V=N(U[be],J[be],Ue);Ee(V.x,V.y,-We)}for(let be=0,F=L.length;be<F;be++){const V=L[be];ne=se[be];for(let _e=0,oe=V.length;_e<oe;_e++){const X=N(V[_e],ne[_e],Ue);Ee(X.x,X.y,-We)}}}const q=p+m;for(let de=0;de<$;de++){const me=h?N(A[de],K[de],q):A[de];y?(S.copy(v.normals[0]).multiplyScalar(me.x),w.copy(v.binormals[0]).multiplyScalar(me.y),T.copy(x[0]).add(S).add(w),Ee(T.x,T.y,T.z)):Ee(me.x,me.y,0)}for(let de=1;de<=u;de++)for(let me=0;me<$;me++){const We=h?N(A[me],K[me],q):A[me];y?(S.copy(v.normals[de]).multiplyScalar(We.x),w.copy(v.binormals[de]).multiplyScalar(We.y),T.copy(x[de]).add(S).add(w),Ee(T.x,T.y,T.z)):Ee(We.x,We.y,f/u*de)}for(let de=_-1;de>=0;de--){const me=de/_,We=d*Math.cos(me*Math.PI/2),Ue=p*Math.sin(me*Math.PI/2)+m;for(let be=0,F=U.length;be<F;be++){const V=N(U[be],J[be],Ue);Ee(V.x,V.y,f+We)}for(let be=0,F=L.length;be<F;be++){const V=L[be];ne=se[be];for(let _e=0,oe=V.length;_e<oe;_e++){const X=N(V[_e],ne[_e],Ue);y?Ee(X.x,X.y+x[u-1].y,x[u-1].x+We):Ee(X.x,X.y,f+We)}}}te(),re();function te(){const de=s.length/3;if(h){let me=0,We=$*me;for(let Ue=0;Ue<W;Ue++){const be=B[Ue];ye(be[2]+We,be[1]+We,be[0]+We)}me=u+_*2,We=$*me;for(let Ue=0;Ue<W;Ue++){const be=B[Ue];ye(be[0]+We,be[1]+We,be[2]+We)}}else{for(let me=0;me<W;me++){const We=B[me];ye(We[2],We[1],We[0])}for(let me=0;me<W;me++){const We=B[me];ye(We[0]+$*u,We[1]+$*u,We[2]+$*u)}}i.addGroup(de,s.length/3-de,0)}function re(){const de=s.length/3;let me=0;Oe(U,me),me+=U.length;for(let We=0,Ue=L.length;We<Ue;We++){const be=L[We];Oe(be,me),me+=be.length}i.addGroup(de,s.length/3-de,1)}function Oe(de,me){let We=de.length;for(;--We>=0;){const Ue=We;let be=We-1;be<0&&(be=de.length-1);for(let F=0,V=u+_*2;F<V;F++){const _e=$*F,oe=$*(F+1),X=me+Ue+_e,fe=me+be+_e,Le=me+be+oe,Pe=me+Ue+oe;xe(X,fe,Le,Pe)}}}function Ee(de,me,We){l.push(de),l.push(me),l.push(We)}function ye(de,me,We){Ae(de),Ae(me),Ae(We);const Ue=s.length/3,be=g.generateTopUV(i,s,Ue-3,Ue-2,Ue-1);De(be[0]),De(be[1]),De(be[2])}function xe(de,me,We,Ue){Ae(de),Ae(me),Ae(Ue),Ae(me),Ae(We),Ae(Ue);const be=s.length/3,F=g.generateSideWallUV(i,s,be-6,be-3,be-2,be-1);De(F[0]),De(F[1]),De(F[3]),De(F[1]),De(F[2]),De(F[3])}function Ae(de){s.push(l[de*3+0]),s.push(l[de*3+1]),s.push(l[de*3+2])}function De(de){r.push(de.x),r.push(de.y)}}}toJSON(){const e=sn.prototype.toJSON.call(this),n=this.parameters.shapes,i=this.parameters.options;return oL(n,i,e)}}const nK={generateTopUV:function(t,e,n,i,s){const r=e[n*3],o=e[n*3+1],a=e[i*3],l=e[i*3+1],c=e[s*3],u=e[s*3+1];return[new je(r,o),new je(a,l),new je(c,u)]},generateSideWallUV:function(t,e,n,i,s,r){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[s*3],d=e[s*3+1],p=e[s*3+2],m=e[r*3],_=e[r*3+1],b=e[r*3+2];return Math.abs(a-u)<.01?[new je(o,1-l),new je(c,1-f),new je(h,1-p),new je(m,1-b)]:[new je(a,1-l),new je(u,1-f),new je(d,1-p),new je(_,1-b)]}};function oL(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,s=t.length;i<s;i++){const r=t[i];n.shapes.push(r.uuid)}else n.shapes.push(t.uuid);return e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class iK extends Rn{constructor(e,n){super(),this.type="TextGeometry",this.parameters={text:e,parameters:n},this.fromBufferGeometry(new aL(e,n)),this.mergeVertices()}}class aL extends Dg{constructor(e,n){n=n||{};const i=n.font;if(!(i&&i.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Rn;const s=i.generateShapes(e,n.size);n.depth=n.height!==void 0?n.height:50,n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(s,n),this.type="TextBufferGeometry"}}class sK extends Rn{constructor(e,n,i,s,r,o,a){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new lL(e,n,i,s,r,o,a)),this.mergeVertices()}}class lL extends sn{constructor(e,n,i,s,r,o,a){super(),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:s,phiLength:r,thetaStart:o,thetaLength:a},e=e||1,n=Math.max(3,Math.floor(n)||8),i=Math.max(2,Math.floor(i)||6),s=s!==void 0?s:0,r=r!==void 0?r:Math.PI*2,o=o!==void 0?o:0,a=a!==void 0?a:Math.PI;const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new ee,h=new ee,d=[],p=[],m=[],_=[];for(let b=0;b<=i;b++){const g=[],x=b/i;let y=0;b==0&&o==0?y=.5/n:b==i&&l==Math.PI&&(y=-.5/n);for(let v=0;v<=n;v++){const w=v/n;f.x=-e*Math.cos(s+w*r)*Math.sin(o+x*a),f.y=e*Math.cos(o+x*a),f.z=e*Math.sin(s+w*r)*Math.sin(o+x*a),p.push(f.x,f.y,f.z),h.copy(f).normalize(),m.push(h.x,h.y,h.z),_.push(w+y,1-x),g.push(c++)}u.push(g)}for(let b=0;b<i;b++)for(let g=0;g<n;g++){const x=u[b][g+1],y=u[b][g],v=u[b+1][g],w=u[b+1][g+1];(b!==0||o>0)&&d.push(x,y,w),(b!==i-1||l<Math.PI)&&d.push(y,v,w)}this.setIndex(d),this.setAttribute("position",new It(p,3)),this.setAttribute("normal",new It(m,3)),this.setAttribute("uv",new It(_,2))}}class rK extends Rn{constructor(e,n,i,s,r,o){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new cL(e,n,i,s,r,o)),this.mergeVertices()}}class cL extends sn{constructor(e,n,i,s,r,o){super(),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:s,thetaStart:r,thetaLength:o},e=e||.5,n=n||1,r=r!==void 0?r:0,o=o!==void 0?o:Math.PI*2,i=i!==void 0?Math.max(3,i):8,s=s!==void 0?Math.max(1,s):1;const a=[],l=[],c=[],u=[];let f=e;const h=(n-e)/s,d=new ee,p=new je;for(let m=0;m<=s;m++){for(let _=0;_<=i;_++){const b=r+_/i*o;d.x=f*Math.cos(b),d.y=f*Math.sin(b),l.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/n+1)/2,p.y=(d.y/n+1)/2,u.push(p.x,p.y)}f+=h}for(let m=0;m<s;m++){const _=m*(i+1);for(let b=0;b<i;b++){const g=b+_,x=g,y=g+i+1,v=g+i+2,w=g+1;a.push(x,y,w),a.push(y,v,w)}}this.setIndex(a),this.setAttribute("position",new It(l,3)),this.setAttribute("normal",new It(c,3)),this.setAttribute("uv",new It(u,2))}}class oK extends Rn{constructor(e,n,i,s){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:s},this.fromBufferGeometry(new uL(e,n,i,s)),this.mergeVertices()}}class uL extends sn{constructor(e,n,i,s){super(),this.type="LatheBufferGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:s},n=Math.floor(n)||12,i=i||0,s=s||Math.PI*2,s=Qt.clamp(s,0,Math.PI*2);const r=[],o=[],a=[],l=1/n,c=new ee,u=new je;for(let f=0;f<=n;f++){const h=i+f*l*s,d=Math.sin(h),p=Math.cos(h);for(let m=0;m<=e.length-1;m++)c.x=e[m].x*d,c.y=e[m].y,c.z=e[m].x*p,o.push(c.x,c.y,c.z),u.x=f/n,u.y=m/(e.length-1),a.push(u.x,u.y)}for(let f=0;f<n;f++)for(let h=0;h<e.length-1;h++){const d=h+f*e.length,p=d,m=d+e.length,_=d+e.length+1,b=d+1;r.push(p,m,b),r.push(m,_,b)}if(this.setIndex(r),this.setAttribute("position",new It(o,3)),this.setAttribute("uv",new It(a,2)),this.computeVertexNormals(),s===Math.PI*2){const f=this.attributes.normal.array,h=new ee,d=new ee,p=new ee,m=n*e.length*3;for(let _=0,b=0;_<e.length;_++,b+=3)h.x=f[b+0],h.y=f[b+1],h.z=f[b+2],d.x=f[m+b+0],d.y=f[m+b+1],d.z=f[m+b+2],p.addVectors(h,d).normalize(),f[b+0]=f[m+b+0]=p.x,f[b+1]=f[m+b+1]=p.y,f[b+2]=f[m+b+2]=p.z}}}class fL extends Rn{constructor(e,n){super(),this.type="ShapeGeometry",typeof n=="object"&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),n=n.curveSegments),this.parameters={shapes:e,curveSegments:n},this.fromBufferGeometry(new hL(e,n)),this.mergeVertices()}toJSON(){const e=Rn.prototype.toJSON.call(this),n=this.parameters.shapes;return dL(n,e)}}class hL extends sn{constructor(e,n){super(),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:n},n=n||12;const i=[],s=[],r=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new It(s,3)),this.setAttribute("normal",new It(r,3)),this.setAttribute("uv",new It(o,2));function c(u){const f=s.length/3,h=u.extractPoints(n);let d=h.shape;const p=h.holes;Ea.isClockWise(d)===!1&&(d=d.reverse());for(let _=0,b=p.length;_<b;_++){const g=p[_];Ea.isClockWise(g)===!0&&(p[_]=g.reverse())}const m=Ea.triangulateShape(d,p);for(let _=0,b=p.length;_<b;_++){const g=p[_];d=d.concat(g)}for(let _=0,b=d.length;_<b;_++){const g=d[_];s.push(g.x,g.y,0),r.push(0,0,1),o.push(g.x,g.y)}for(let _=0,b=m.length;_<b;_++){const g=m[_],x=g[0]+f,y=g[1]+f,v=g[2]+f;i.push(x,y,v),l+=3}}}toJSON(){const e=sn.prototype.toJSON.call(this),n=this.parameters.shapes;return dL(n,e)}}function dL(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const s=t[n];e.shapes.push(s.uuid)}else e.shapes.push(t.uuid);return e}class aK extends sn{constructor(e,n){super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:n},n=n!==void 0?n:1;const i=[],s=Math.cos(Qt.DEG2RAD*n),r=[0,0],o={};let a,l,c;const u=["a","b","c"];let f;e.isBufferGeometry?(f=new Rn,f.fromBufferGeometry(e)):f=e.clone(),f.mergeVertices(),f.computeFaceNormals();const h=f.vertices,d=f.faces;for(let p=0,m=d.length;p<m;p++){const _=d[p];for(let b=0;b<3;b++)a=_[u[b]],l=_[u[(b+1)%3]],r[0]=Math.min(a,l),r[1]=Math.max(a,l),c=r[0]+","+r[1],o[c]===void 0?o[c]={index1:r[0],index2:r[1],face1:p,face2:void 0}:o[c].face2=p}for(c in o){const p=o[c];if(p.face2===void 0||d[p.face1].normal.dot(d[p.face2].normal)<=s){let m=h[p.index1];i.push(m.x,m.y,m.z),m=h[p.index2],i.push(m.x,m.y,m.z)}}this.setAttribute("position",new It(i,3))}}class pL extends Rn{constructor(e,n,i,s,r,o,a,l){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l},this.fromBufferGeometry(new Lv(e,n,i,s,r,o,a,l)),this.mergeVertices()}}class Lv extends sn{constructor(e,n,i,s,r,o,a,l){super(),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:s,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:l};const c=this;e=e!==void 0?e:1,n=n!==void 0?n:1,i=i||1,s=Math.floor(s)||8,r=Math.floor(r)||1,o=o!==void 0?o:!1,a=a!==void 0?a:0,l=l!==void 0?l:Math.PI*2;const u=[],f=[],h=[],d=[];let p=0;const m=[],_=i/2;let b=0;g(),o===!1&&(e>0&&x(!0),n>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new It(f,3)),this.setAttribute("normal",new It(h,3)),this.setAttribute("uv",new It(d,2));function g(){const y=new ee,v=new ee;let w=0;const S=(n-e)/i;for(let T=0;T<=r;T++){const k=[],A=T/r,L=A*(n-e)+e;for(let D=0;D<=s;D++){const B=D/s,U=B*l+a,N=Math.sin(U),$=Math.cos(U);v.x=L*N,v.y=-A*i+_,v.z=L*$,f.push(v.x,v.y,v.z),y.set(N,S,$).normalize(),h.push(y.x,y.y,y.z),d.push(B,1-A),k.push(p++)}m.push(k)}for(let T=0;T<s;T++)for(let k=0;k<r;k++){const A=m[k][T],L=m[k+1][T],D=m[k+1][T+1],B=m[k][T+1];u.push(A,L,B),u.push(L,D,B),w+=6}c.addGroup(b,w,0),b+=w}function x(y){const v=p,w=new je,S=new ee;let T=0;const k=y===!0?e:n,A=y===!0?1:-1;for(let D=1;D<=s;D++)f.push(0,_*A,0),h.push(0,A,0),d.push(.5,.5),p++;const L=p;for(let D=0;D<=s;D++){const U=D/s*l+a,N=Math.cos(U),$=Math.sin(U);S.x=k*$,S.y=_*A,S.z=k*N,f.push(S.x,S.y,S.z),h.push(0,A,0),w.x=N*.5+.5,w.y=$*.5*A+.5,d.push(w.x,w.y),p++}for(let D=0;D<s;D++){const B=v+D,U=L+D;y===!0?u.push(U,U+1,B):u.push(U+1,U,B),T+=3}c.addGroup(b,T,y===!0?1:2),b+=T}}}class lK extends pL{constructor(e,n,i,s,r,o,a){super(0,e,n,i,s,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}}class cK extends Lv{constructor(e,n,i,s,r,o,a){super(0,e,n,i,s,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:s,openEnded:r,thetaStart:o,thetaLength:a}}}class uK extends Rn{constructor(e,n,i,s){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:s},this.fromBufferGeometry(new mL(e,n,i,s)),this.mergeVertices()}}class mL extends sn{constructor(e,n,i,s){super(),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:s},e=e||1,n=n!==void 0?Math.max(3,n):8,i=i!==void 0?i:0,s=s!==void 0?s:Math.PI*2;const r=[],o=[],a=[],l=[],c=new ee,u=new je;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const d=i+f/n*s;c.x=e*Math.cos(d),c.y=e*Math.sin(d),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=n;f++)r.push(f,f+1,0);this.setIndex(r),this.setAttribute("position",new It(o,3)),this.setAttribute("normal",new It(a,3)),this.setAttribute("uv",new It(l,2))}}var as=Object.freeze({__proto__:null,WireframeGeometry:CJ,ParametricGeometry:Fm,ParametricBufferGeometry:hh,TetrahedronGeometry:RJ,TetrahedronBufferGeometry:ZA,OctahedronGeometry:IJ,OctahedronBufferGeometry:JA,IcosahedronGeometry:DJ,IcosahedronBufferGeometry:KA,DodecahedronGeometry:OJ,DodecahedronBufferGeometry:$A,PolyhedronGeometry:PJ,PolyhedronBufferGeometry:vu,TubeGeometry:NJ,TubeBufferGeometry:QA,TorusKnotGeometry:BJ,TorusKnotBufferGeometry:eL,TorusGeometry:FJ,TorusBufferGeometry:tL,TextGeometry:iK,TextBufferGeometry:aL,SphereGeometry:sK,SphereBufferGeometry:lL,RingGeometry:rK,RingBufferGeometry:cL,PlaneGeometry:RY,PlaneBufferGeometry:Rg,LatheGeometry:oK,LatheBufferGeometry:uL,ShapeGeometry:fL,ShapeBufferGeometry:hL,ExtrudeGeometry:rL,ExtrudeBufferGeometry:Dg,EdgesGeometry:aK,ConeGeometry:lK,ConeBufferGeometry:cK,CylinderGeometry:pL,CylinderBufferGeometry:Lv,CircleGeometry:uK,CircleBufferGeometry:mL,BoxGeometry:kY,BoxBufferGeometry:Cg});function su(t){Wt.call(this),this.type="ShadowMaterial",this.color=new Pt(0),this.transparent=!0,this.setValues(t)}su.prototype=Object.create(Wt.prototype);su.prototype.constructor=su;su.prototype.isShadowMaterial=!0;su.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this};function gh(t){Ss.call(this,t),this.type="RawShaderMaterial"}gh.prototype=Object.create(Ss.prototype);gh.prototype.constructor=gh;gh.prototype.isRawShaderMaterial=!0;function Bo(t){Wt.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}Bo.prototype=Object.create(Wt.prototype);Bo.prototype.constructor=Bo;Bo.prototype.isMeshStandardMaterial=!0;Bo.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this};function Pl(t){Bo.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new je(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}Pl.prototype=Object.create(Bo.prototype);Pl.prototype.constructor=Pl;Pl.prototype.isMeshPhysicalMaterial=!0;Pl.prototype.copy=function(t){return Bo.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new Pt).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this};function Rl(t){Wt.call(this),this.type="MeshPhongMaterial",this.color=new Pt(16777215),this.specular=new Pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Sg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}Rl.prototype=Object.create(Wt.prototype);Rl.prototype.constructor=Rl;Rl.prototype.isMeshPhongMaterial=!0;Rl.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function ru(t){Wt.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}ru.prototype=Object.create(Wt.prototype);ru.prototype.constructor=ru;ru.prototype.isMeshToonMaterial=!0;ru.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function ou(t){Wt.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}ou.prototype=Object.create(Wt.prototype);ou.prototype.constructor=ou;ou.prototype.isMeshNormalMaterial=!0;ou.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function au(t){Wt.call(this),this.type="MeshLambertMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Sg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}au.prototype=Object.create(Wt.prototype);au.prototype.constructor=au;au.prototype.isMeshLambertMaterial=!0;au.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function lu(t){Wt.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_u,this.normalScale=new je(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}lu.prototype=Object.create(Wt.prototype);lu.prototype.constructor=lu;lu.prototype.isMeshMatcapMaterial=!0;lu.prototype.copy=function(t){return Wt.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this};function cu(t){or.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}cu.prototype=Object.create(or.prototype);cu.prototype.constructor=cu;cu.prototype.isLineDashedMaterial=!0;cu.prototype.copy=function(t){return or.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var fK=Object.freeze({__proto__:null,ShadowMaterial:su,SpriteMaterial:Al,RawShaderMaterial:gh,ShaderMaterial:Ss,PointsMaterial:Cl,MeshPhysicalMaterial:Pl,MeshStandardMaterial:Bo,MeshPhongMaterial:Rl,MeshToonMaterial:ru,MeshNormalMaterial:ou,MeshLambertMaterial:au,MeshDepthMaterial:El,MeshDistanceMaterial:Tl,MeshBasicMaterial:eo,MeshMatcapMaterial:lu,LineDashedMaterial:cu,LineBasicMaterial:or,Material:Wt});const ii={arraySlice:function(t,e,n){return ii.isTypedArray(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(s,r){return t[s]-t[r]}const n=t.length,i=new Array(n);for(let s=0;s!==n;++s)i[s]=s;return i.sort(e),i},sortedArray:function(t,e,n){const i=t.length,s=new t.constructor(i);for(let r=0,o=0;o!==i;++r){const a=n[r]*e;for(let l=0;l!==e;++l)s[o++]=t[a+l]}return s},flattenJSON:function(t,e,n,i){let s=1,r=t[0];for(;r!==void 0&&r[i]===void 0;)r=t[s++];if(r===void 0)return;let o=r[i];if(o!==void 0)if(Array.isArray(o))do o=r[i],o!==void 0&&(e.push(r.time),n.push.apply(n,o)),r=t[s++];while(r!==void 0);else if(o.toArray!==void 0)do o=r[i],o!==void 0&&(e.push(r.time),o.toArray(n,n.length)),r=t[s++];while(r!==void 0);else do o=r[i],o!==void 0&&(e.push(r.time),n.push(o)),r=t[s++];while(r!==void 0)},subclip:function(t,e,n,i,s){s=s||30;const r=t.clone();r.name=e;const o=[];for(let l=0;l<r.tracks.length;++l){const c=r.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const p=c.times[d]*s;if(!(p<n||p>=i)){f.push(c.times[d]);for(let m=0;m<u;++m)h.push(c.values[d*u+m])}}f.length!==0&&(c.times=ii.convertArray(f,c.times.constructor),c.values=ii.convertArray(h,c.values.constructor),o.push(c))}r.tracks=o;let a=1/0;for(let l=0;l<r.tracks.length;++l)a>r.tracks[l].times[0]&&(a=r.tracks[l].times[0]);for(let l=0;l<r.tracks.length;++l)r.tracks[l].shift(-1*a);return r.resetDuration(),r},makeClipAdditive:function(t,e,n,i){e===void 0&&(e=0),n===void 0&&(n=t),(i===void 0||i<=0)&&(i=30);const s=t.tracks.length,r=e/i;for(let o=0;o<s;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=t.tracks.find(function(b){return b.name===a.name&&b.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const p=a.times.length-1;let m;if(r<=a.times[0]){const b=u,g=f-u;m=ii.arraySlice(a.values,b,g)}else if(r>=a.times[p]){const b=p*f+u,g=b+f-u;m=ii.arraySlice(a.values,b,g)}else{const b=a.createInterpolant(),g=u,x=f-u;b.evaluate(r),m=ii.arraySlice(b.resultBuffer,g,x)}l==="quaternion"&&new Ki().fromArray(m).normalize().conjugate().toArray(m);const _=c.times.length;for(let b=0;b<_;++b){const g=b*d+h;if(l==="quaternion")Ki.multiplyQuaternionsFlat(c.values,g,m,0,c.values,g);else{const x=d-h*2;for(let y=0;y<x;++y)c.values[g+y]-=m[y]}}}return t.blendMode=RA,t}};function ir(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}Object.assign(ir.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],s=e[n-1];e:{t:{let r;n:{i:if(!(t<i)){for(let o=n+2;;){if(i===void 0){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,s)}if(n===o)break;if(s=i,i=e[++n],t<i)break t}r=e.length;break n}if(!(t>=s)){const o=e[1];t<o&&(n=2,s=o);for(let a=n-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=s,s=e[--n-1],t>=s)break t}r=n,n=0;break n}break e}for(;n<r;){const o=n+r>>>1;t<e[o]?r=o:n=o+1}if(i=e[n],s=e[n-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(i===void 0)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,s,t)}this._cachedIndex=n,this.intervalChanged_(n,s,i)}return this.interpolate_(n,s,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,s=t*i;for(let r=0;r!==i;++r)e[r]=n[s+r];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(ir.prototype,{beforeStart_:ir.prototype.copySampleValue_,afterEnd_:ir.prototype.copySampleValue_});function L_(t,e,n,i){ir.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}L_.prototype=Object.assign(Object.create(ir.prototype),{constructor:L_,DefaultSettings_:{endingStart:wc,endingEnd:wc},intervalChanged_:function(t,e,n){const i=this.parameterPositions;let s=t-2,r=t+1,o=i[s],a=i[r];if(o===void 0)switch(this.getSettings_().endingStart){case xc:s=t,o=2*e-n;break;case Dm:s=i.length-2,o=e+i[s]-i[s+1];break;default:s=t,o=n}if(a===void 0)switch(this.getSettings_().endingEnd){case xc:r=t,a=2*n-e;break;case Dm:r=1,a=n+i[1]-i[0];break;default:r=t-1,a=e}const l=(n-e)*.5,c=this.valueSize;this._weightPrev=l/(e-o),this._weightNext=l/(a-n),this._offsetPrev=s*c,this._offsetNext=r*c},interpolate_:function(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=this._offsetPrev,u=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-e)/(i-e),p=d*d,m=p*d,_=-f*m+2*f*p-f*d,b=(1+f)*m+(-1.5-2*f)*p+(-.5+f)*d+1,g=(-1-h)*m+(1.5+h)*p+.5*d,x=h*m-h*p;for(let y=0;y!==o;++y)s[y]=_*r[c+y]+b*r[l+y]+g*r[a+y]+x*r[u+y];return s}});function zm(t,e,n,i){ir.call(this,t,e,n,i)}zm.prototype=Object.assign(Object.create(ir.prototype),{constructor:zm,interpolate_:function(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=t*o,l=a-o,c=(n-e)/(i-e),u=1-c;for(let f=0;f!==o;++f)s[f]=r[l+f]*u+r[a+f]*c;return s}});function C_(t,e,n,i){ir.call(this,t,e,n,i)}C_.prototype=Object.assign(Object.create(ir.prototype),{constructor:C_,interpolate_:function(t){return this.copySampleValue_(t-1)}});function es(t,e,n,i){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ii.convertArray(e,this.TimeBufferType),this.values=ii.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(es,{toJSON:function(t){const e=t.constructor;let n;if(e.toJSON!==void 0)n=e.toJSON(t);else{n={name:t.name,times:ii.convertArray(t.times,Array),values:ii.convertArray(t.values,Array)};const i=t.getInterpolation();i!==t.DefaultInterpolation&&(n.interpolation=i)}return n.type=t.ValueTypeName,n}});Object.assign(es.prototype,{constructor:es,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Cp,InterpolantFactoryMethodDiscrete:function(t){return new C_(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new zm(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new L_(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Im:e=this.InterpolantFactoryMethodDiscrete;break;case Cp:e=this.InterpolantFactoryMethodLinear;break;case S0:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Im;case this.InterpolantFactoryMethodLinear:return Cp;case this.InterpolantFactoryMethodSmooth:return S0}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(t!==0){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this},scale:function(t){if(t!==1){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,i=n.length;let s=0,r=i-1;for(;s!==i&&n[s]<t;)++s;for(;r!==-1&&n[r]>e;)--r;if(++r,s!==0||r!==i){s>=r&&(r=Math.max(r,1),s=r-1);const o=this.getValueSize();this.times=ii.arraySlice(n,s,r),this.values=ii.arraySlice(this.values,s*o,r*o)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let r=null;for(let o=0;o!==s;o++){const a=n[o];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),t=!1;break}if(r!==null&&r>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,r),t=!1;break}r=a}if(i!==void 0&&ii.isTypedArray(i))for(let o=0,a=i.length;o!==a;++o){const l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),t=!1;break}}return t},optimize:function(){const t=ii.arraySlice(this.times),e=ii.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===S0,s=t.length-1;let r=1;for(let o=1;o<s;++o){let a=!1;const l=t[o],c=t[o+1];if(l!==c&&(o!==1||l!==l[0]))if(i)a=!0;else{const u=o*n,f=u-n,h=u+n;for(let d=0;d!==n;++d){const p=e[u+d];if(p!==e[f+d]||p!==e[h+d]){a=!0;break}}}if(a){if(o!==r){t[r]=t[o];const u=o*n,f=r*n;for(let h=0;h!==n;++h)e[f+h]=e[u+h]}++r}}if(s>0){t[r]=t[s];for(let o=s*n,a=r*n,l=0;l!==n;++l)e[a+l]=e[o+l];++r}return r!==t.length?(this.times=ii.arraySlice(t,0,r),this.values=ii.arraySlice(e,0,r*n)):(this.times=t,this.values=e),this},clone:function(){const t=ii.arraySlice(this.times,0),e=ii.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}});function P_(t,e,n){es.call(this,t,e,n)}P_.prototype=Object.assign(Object.create(es.prototype),{constructor:P_,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Im,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function R_(t,e,n,i){es.call(this,t,e,n,i)}R_.prototype=Object.assign(Object.create(es.prototype),{constructor:R_,ValueTypeName:"color"});function _h(t,e,n,i){es.call(this,t,e,n,i)}_h.prototype=Object.assign(Object.create(es.prototype),{constructor:_h,ValueTypeName:"number"});function I_(t,e,n,i){ir.call(this,t,e,n,i)}I_.prototype=Object.assign(Object.create(ir.prototype),{constructor:I_,interpolate_:function(t,e,n,i){const s=this.resultBuffer,r=this.sampleValues,o=this.valueSize,a=(n-e)/(i-e);let l=t*o;for(let c=l+o;l!==c;l+=4)Ki.slerpFlat(s,0,r,l-o,r,l,a);return s}});function Um(t,e,n,i){es.call(this,t,e,n,i)}Um.prototype=Object.assign(Object.create(es.prototype),{constructor:Um,ValueTypeName:"quaternion",DefaultInterpolation:Cp,InterpolantFactoryMethodLinear:function(t){return new I_(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0});function D_(t,e,n,i){es.call(this,t,e,n,i)}D_.prototype=Object.assign(Object.create(es.prototype),{constructor:D_,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Im,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function bh(t,e,n,i){es.call(this,t,e,n,i)}bh.prototype=Object.assign(Object.create(es.prototype),{constructor:bh,ValueTypeName:"vector"});function xr(t,e,n,i){this.name=t,this.tracks=n,this.duration=e!==void 0?e:-1,this.blendMode=i!==void 0?i:Ev,this.uuid=Qt.generateUUID(),this.duration<0&&this.resetDuration()}function hK(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _h;case"vector":case"vector2":case"vector3":case"vector4":return bh;case"color":return R_;case"quaternion":return Um;case"bool":case"boolean":return P_;case"string":return D_}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function dK(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=hK(t.type);if(t.times===void 0){const n=[],i=[];ii.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(xr,{parse:function(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let s=0,r=n.length;s!==r;++s)e.push(dK(n[s]).scale(i));return new xr(t.name,t.duration,e,t.blendMode)},toJSON:function(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,r=n.length;s!==r;++s)e.push(es.toJSON(n[s]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){const s=e.length,r=[];for(let o=0;o<s;o++){let a=[],l=[];a.push((o+s-1)%s,o,(o+1)%s),l.push(0,1,0);const c=ii.getKeyframeOrder(a);a=ii.sortedArray(a,1,c),l=ii.sortedArray(l,1,c),!i&&a[0]===0&&(a.push(s),l.push(l[0])),r.push(new _h(".morphTargetInfluences["+e[o].name+"]",a,l).scale(1/n))}return new xr(t,-1,r)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const i=t;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const i={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,a=t.length;o<a;o++){const l=t[o],c=l.name.match(s);if(c&&c.length>1){const u=c[1];let f=i[u];f||(i[u]=f=[]),f.push(l)}}const r=[];for(const o in i)r.push(xr.CreateFromMorphTargetSequence(o,i[o],e,n));return r},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,f,h,d,p){if(h.length!==0){const m=[],_=[];ii.flattenJSON(h,m,_,d),m.length!==0&&p.push(new u(f,m,_))}},i=[],s=t.name||"default",r=t.fps||30,o=t.blendMode;let a=t.length||-1;const l=t.hierarchy||[];for(let u=0;u<l.length;u++){const f=l[u].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let d;for(d=0;d<f.length;d++)if(f[d].morphTargets)for(let p=0;p<f[d].morphTargets.length;p++)h[f[d].morphTargets[p]]=-1;for(const p in h){const m=[],_=[];for(let b=0;b!==f[d].morphTargets.length;++b){const g=f[d];m.push(g.time),_.push(g.morphTarget===p?1:0)}i.push(new _h(".morphTargetInfluence["+p+"]",m,_))}a=h.length*(r||1)}else{const h=".bones["+e[u].name+"]";n(bh,h+".position",f,"pos",i),n(Um,h+".quaternion",f,"rot",i),n(bh,h+".scale",f,"scl",i)}}return i.length===0?null:new xr(s,a,i,o)}});Object.assign(xr.prototype,{resetDuration:function(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new xr(this.name,this.duration,t,this.blendMode)}});const uu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function gL(t,e,n){const i=this;let s=!1,r=0,o=0,a;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(c){o++,s===!1&&i.onStart!==void 0&&i.onStart(c,r,o),s=!0},this.itemEnd=function(c){r++,i.onProgress!==void 0&&i.onProgress(c,r,o),r===o&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return a?a(c):c},this.setURLModifier=function(c){return a=c,this},this.addHandler=function(c,u){return l.push(c,u),this},this.removeHandler=function(c){const u=l.indexOf(c);return u!==-1&&l.splice(u,2),this},this.getHandler=function(c){for(let u=0,f=l.length;u<f;u+=2){const h=l[u],d=l[u+1];if(h.global&&(h.lastIndex=0),h.test(c))return d}return null}}const pK=new gL;function On(t){this.manager=t!==void 0?t:pK,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(On.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise(function(i,s){n.load(t,i,e,s)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const pr={};function to(t){On.call(this,t)}to.prototype=Object.assign(Object.create(On.prototype),{constructor:to,load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=uu.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;if(pr[t]!==void 0){pr[t].push({onLoad:e,onProgress:n,onError:i});return}const o=/^data:(.*?)(;base64)?,(.*)$/,a=t.match(o);let l;if(a){const c=a[1],u=!!a[2];let f=a[3];f=decodeURIComponent(f),u&&(f=atob(f));try{let h;const d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":const p=new Uint8Array(f.length);for(let _=0;_<f.length;_++)p[_]=f.charCodeAt(_);d==="blob"?h=new Blob([p.buffer],{type:c}):h=p.buffer;break;case"document":h=new DOMParser().parseFromString(f,c);break;case"json":h=JSON.parse(f);break;default:h=f;break}setTimeout(function(){e&&e(h),s.manager.itemEnd(t)},0)}catch(h){setTimeout(function(){i&&i(h),s.manager.itemError(t),s.manager.itemEnd(t)},0)}}else{pr[t]=[],pr[t].push({onLoad:e,onProgress:n,onError:i}),l=new XMLHttpRequest,l.open("GET",t,!0),l.addEventListener("load",function(c){const u=this.response,f=pr[t];if(delete pr[t],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),uu.add(t,u);for(let h=0,d=f.length;h<d;h++){const p=f[h];p.onLoad&&p.onLoad(u)}s.manager.itemEnd(t)}else{for(let h=0,d=f.length;h<d;h++){const p=f[h];p.onError&&p.onError(c)}s.manager.itemError(t),s.manager.itemEnd(t)}},!1),l.addEventListener("progress",function(c){const u=pr[t];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onProgress&&d.onProgress(c)}},!1),l.addEventListener("error",function(c){const u=pr[t];delete pr[t];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),l.addEventListener("abort",function(c){const u=pr[t];delete pr[t];for(let f=0,h=u.length;f<h;f++){const d=u[f];d.onError&&d.onError(c)}s.manager.itemError(t),s.manager.itemEnd(t)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const c in this.requestHeader)l.setRequestHeader(c,this.requestHeader[c]);l.send(null)}return s.manager.itemStart(t),l},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}});function y3(t){On.call(this,t)}y3.prototype=Object.assign(Object.create(On.prototype),{constructor:y3,load:function(t,e,n,i){const s=this,r=new to(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{e(s.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const i=xr.parse(t[n]);e.push(i)}return e}});function w3(t){On.call(this,t)}w3.prototype=Object.assign(Object.create(On.prototype),{constructor:w3,load:function(t,e,n,i){const s=this,r=[],o=new fh;o.image=r;const a=new to(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader);let l=0;function c(u){a.load(t[u],function(f){const h=s.parse(f,!0);r[u]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},l+=1,l===6&&(h.mipmapCount===1&&(o.minFilter=Gi),o.format=h.format,o.needsUpdate=!0,e&&e(o))},n,i)}if(Array.isArray(t))for(let u=0,f=t.length;u<f;++u)c(u);else a.load(t,function(u){const f=s.parse(u,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let d=0;d<h;d++){r[d]={mipmaps:[]};for(let p=0;p<f.mipmapCount;p++)r[d].mipmaps.push(f.mipmaps[d*f.mipmapCount+p]),r[d].format=f.format,r[d].width=f.width,r[d].height=f.height}}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=Gi),o.format=f.format,o.needsUpdate=!0,e&&e(o)},n,i);return o}});function vh(t){On.call(this,t)}vh.prototype=Object.assign(Object.create(On.prototype),{constructor:vh,load:function(t,e,n,i){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=uu.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;const o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),uu.add(t,this),e&&e(this),s.manager.itemEnd(t)}function l(c){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1),i&&i(c),s.manager.itemError(t),s.manager.itemEnd(t)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),t.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(t),o.src=t,o}});function O_(t){On.call(this,t)}O_.prototype=Object.assign(Object.create(On.prototype),{constructor:O_,load:function(t,e,n,i){const s=new Ia,r=new vh(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let o=0;function a(l){r.load(t[l],function(c){s.images[l]=c,o++,o===6&&(s.needsUpdate=!0,e&&e(s))},void 0,i)}for(let l=0;l<t.length;++l)a(l);return s}});function x3(t){On.call(this,t)}x3.prototype=Object.assign(Object.create(On.prototype),{constructor:x3,load:function(t,e,n,i){const s=this,r=new iu,o=new to(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(t,function(a){const l=s.parse(a);!l||(l.image!==void 0?r.image=l.image:l.data!==void 0&&(r.image.width=l.width,r.image.height=l.height,r.image.data=l.data),r.wrapS=l.wrapS!==void 0?l.wrapS:ys,r.wrapT=l.wrapT!==void 0?l.wrapT:ys,r.magFilter=l.magFilter!==void 0?l.magFilter:Gi,r.minFilter=l.minFilter!==void 0?l.minFilter:Gi,r.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.format!==void 0&&(r.format=l.format),l.type!==void 0&&(r.type=l.type),l.mipmaps!==void 0&&(r.mipmaps=l.mipmaps,r.minFilter=Bh),l.mipmapCount===1&&(r.minFilter=Gi),r.needsUpdate=!0,e&&e(r,l))},n,i),r}});function N_(t){On.call(this,t)}N_.prototype=Object.assign(Object.create(On.prototype),{constructor:N_,load:function(t,e,n,i){const s=new Hn,r=new vh(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(t,function(o){s.image=o;const a=t.search(/\.jpe?g($|\?)/i)>0||t.search(/^data\:image\/jpeg/)===0;s.format=a?dl:Tr,s.needsUpdate=!0,e!==void 0&&e(s)},n,i),s}});function Ft(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Ft.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){t===void 0&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){t===void 0&&(t=5);const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(t===void 0&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),s=0;e.push(0);for(let r=1;r<=t;r++)n=this.getPoint(r/t),s+=n.distanceTo(i),e.push(s),i=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let i=0;const s=n.length;let r;e?r=e:r=t*n[s-1];let o=0,a=s-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=n[i]-r,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===r)return i/(s-1);const c=n[i],f=n[i+1]-c,h=(r-c)/f;return(i+h)/(s-1)},getTangent:function(t,e){let i=t-1e-4,s=t+1e-4;i<0&&(i=0),s>1&&(s=1);const r=this.getPoint(i),o=this.getPoint(s),a=e||(r.isVector2?new je:new ee);return a.copy(o).sub(r).normalize(),a},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new ee,i=[],s=[],r=[],o=new ee,a=new an;for(let h=0;h<=t;h++){const d=h/t;i[h]=this.getTangentAt(d,new ee),i[h].normalize()}s[0]=new ee,r[0]=new ee;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),f<=l&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),s[0].crossVectors(i[0],o),r[0].crossVectors(i[0],s[0]);for(let h=1;h<=t;h++){if(s[h]=s[h-1].clone(),r[h]=r[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();const d=Math.acos(Qt.clamp(i[h-1].dot(i[h]),-1,1));s[h].applyMatrix4(a.makeRotationAxis(o,d))}r[h].crossVectors(i[h],s[h])}if(e===!0){let h=Math.acos(Qt.clamp(s[0].dot(s[t]),-1,1));h/=t,i[0].dot(o.crossVectors(s[0],s[t]))>0&&(h=-h);for(let d=1;d<=t;d++)s[d].applyMatrix4(a.makeRotationAxis(i[d],h*d)),r[d].crossVectors(i[d],s[d])}return{tangents:i,normals:s,binormals:r}},clone:function(){return new this.constructor().copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}});function ar(t,e,n,i,s,r,o,a){Ft.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=s||0,this.aEndAngle=r||2*Math.PI,this.aClockwise=o||!1,this.aRotation=a||0}ar.prototype=Object.create(Ft.prototype);ar.prototype.constructor=ar;ar.prototype.isEllipseCurve=!0;ar.prototype.getPoint=function(t,e){const n=e||new je,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const r=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(r?s=0:s=i),this.aClockwise===!0&&!r&&(s===i?s=-i:s=s-i);const o=this.aStartAngle+t*s;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),f=a-this.aX,h=l-this.aY;a=f*c-h*u+this.aX,l=f*u+h*c+this.aY}return n.set(a,l)};ar.prototype.copy=function(t){return Ft.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};ar.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t};ar.prototype.fromJSON=function(t){return Ft.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this};function yh(t,e,n,i,s,r){ar.call(this,t,e,n,n,i,s,r),this.type="ArcCurve"}yh.prototype=Object.create(ar.prototype);yh.prototype.constructor=yh;yh.prototype.isArcCurve=!0;function Cv(){let t=0,e=0,n=0,i=0;function s(r,o,a,l){t=r,e=a,n=-3*r+3*o-2*a-l,i=2*r-2*o+a+l}return{initCatmullRom:function(r,o,a,l,c){s(o,a,c*(a-r),c*(l-o))},initNonuniformCatmullRom:function(r,o,a,l,c,u,f){let h=(o-r)/c-(a-r)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+f)+(l-a)/f;h*=u,d*=u,s(o,a,h,d)},calc:function(r){const o=r*r,a=o*r;return t+e*r+n*o+i*a}}}const Yd=new ee,Z0=new Cv,J0=new Cv,K0=new Cv;function Fs(t,e,n,i){Ft.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i!==void 0?i:.5}Fs.prototype=Object.create(Ft.prototype);Fs.prototype.constructor=Fs;Fs.prototype.isCatmullRomCurve3=!0;Fs.prototype.getPoint=function(t,e){const n=e||new ee,i=this.points,s=i.length,r=(s-(this.closed?0:1))*t;let o=Math.floor(r),a=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:a===0&&o===s-1&&(o=s-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%s]:(Yd.subVectors(i[0],i[1]).add(i[0]),l=Yd);const u=i[o%s],f=i[(o+1)%s];if(this.closed||o+2<s?c=i[(o+2)%s]:(Yd.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=Yd),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let d=Math.pow(l.distanceToSquared(u),h),p=Math.pow(u.distanceToSquared(f),h),m=Math.pow(f.distanceToSquared(c),h);p<1e-4&&(p=1),d<1e-4&&(d=p),m<1e-4&&(m=p),Z0.initNonuniformCatmullRom(l.x,u.x,f.x,c.x,d,p,m),J0.initNonuniformCatmullRom(l.y,u.y,f.y,c.y,d,p,m),K0.initNonuniformCatmullRom(l.z,u.z,f.z,c.z,d,p,m)}else this.curveType==="catmullrom"&&(Z0.initCatmullRom(l.x,u.x,f.x,c.x,this.tension),J0.initCatmullRom(l.y,u.y,f.y,c.y,this.tension),K0.initCatmullRom(l.z,u.z,f.z,c.z,this.tension));return n.set(Z0.calc(a),J0.calc(a),K0.calc(a)),n};Fs.prototype.copy=function(t){Ft.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};Fs.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t};Fs.prototype.fromJSON=function(t){Ft.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new ee().fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this};function M3(t,e,n,i,s){const r=(i-e)*.5,o=(s-n)*.5,a=t*t,l=t*a;return(2*n-2*i+r+o)*l+(-3*n+3*i-2*r-o)*a+r*t+n}function mK(t,e){const n=1-t;return n*n*e}function gK(t,e){return 2*(1-t)*t*e}function _K(t,e){return t*t*e}function Mf(t,e,n,i){return mK(t,e)+gK(t,n)+_K(t,i)}function bK(t,e){const n=1-t;return n*n*n*e}function vK(t,e){const n=1-t;return 3*n*n*t*e}function yK(t,e){return 3*(1-t)*t*t*e}function wK(t,e){return t*t*t*e}function Sf(t,e,n,i,s){return bK(t,e)+vK(t,n)+yK(t,i)+wK(t,s)}function no(t,e,n,i){Ft.call(this),this.type="CubicBezierCurve",this.v0=t||new je,this.v1=e||new je,this.v2=n||new je,this.v3=i||new je}no.prototype=Object.create(Ft.prototype);no.prototype.constructor=no;no.prototype.isCubicBezierCurve=!0;no.prototype.getPoint=function(t,e){const n=e||new je,i=this.v0,s=this.v1,r=this.v2,o=this.v3;return n.set(Sf(t,i.x,s.x,r.x,o.x),Sf(t,i.y,s.y,r.y,o.y)),n};no.prototype.copy=function(t){return Ft.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};no.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};no.prototype.fromJSON=function(t){return Ft.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function Fo(t,e,n,i){Ft.call(this),this.type="CubicBezierCurve3",this.v0=t||new ee,this.v1=e||new ee,this.v2=n||new ee,this.v3=i||new ee}Fo.prototype=Object.create(Ft.prototype);Fo.prototype.constructor=Fo;Fo.prototype.isCubicBezierCurve3=!0;Fo.prototype.getPoint=function(t,e){const n=e||new ee,i=this.v0,s=this.v1,r=this.v2,o=this.v3;return n.set(Sf(t,i.x,s.x,r.x,o.x),Sf(t,i.y,s.y,r.y,o.y),Sf(t,i.z,s.z,r.z,o.z)),n};Fo.prototype.copy=function(t){return Ft.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this};Fo.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t};Fo.prototype.fromJSON=function(t){return Ft.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this};function zs(t,e){Ft.call(this),this.type="LineCurve",this.v1=t||new je,this.v2=e||new je}zs.prototype=Object.create(Ft.prototype);zs.prototype.constructor=zs;zs.prototype.isLineCurve=!0;zs.prototype.getPoint=function(t,e){const n=e||new je;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n};zs.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};zs.prototype.getTangent=function(t,e){const n=e||new je;return n.copy(this.v2).sub(this.v1).normalize(),n};zs.prototype.copy=function(t){return Ft.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};zs.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};zs.prototype.fromJSON=function(t){return Ft.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function io(t,e){Ft.call(this),this.type="LineCurve3",this.v1=t||new ee,this.v2=e||new ee}io.prototype=Object.create(Ft.prototype);io.prototype.constructor=io;io.prototype.isLineCurve3=!0;io.prototype.getPoint=function(t,e){const n=e||new ee;return t===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n};io.prototype.getPointAt=function(t,e){return this.getPoint(t,e)};io.prototype.copy=function(t){return Ft.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this};io.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};io.prototype.fromJSON=function(t){return Ft.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function so(t,e,n){Ft.call(this),this.type="QuadraticBezierCurve",this.v0=t||new je,this.v1=e||new je,this.v2=n||new je}so.prototype=Object.create(Ft.prototype);so.prototype.constructor=so;so.prototype.isQuadraticBezierCurve=!0;so.prototype.getPoint=function(t,e){const n=e||new je,i=this.v0,s=this.v1,r=this.v2;return n.set(Mf(t,i.x,s.x,r.x),Mf(t,i.y,s.y,r.y)),n};so.prototype.copy=function(t){return Ft.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};so.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};so.prototype.fromJSON=function(t){return Ft.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function zo(t,e,n){Ft.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new ee,this.v1=e||new ee,this.v2=n||new ee}zo.prototype=Object.create(Ft.prototype);zo.prototype.constructor=zo;zo.prototype.isQuadraticBezierCurve3=!0;zo.prototype.getPoint=function(t,e){const n=e||new ee,i=this.v0,s=this.v1,r=this.v2;return n.set(Mf(t,i.x,s.x,r.x),Mf(t,i.y,s.y,r.y),Mf(t,i.z,s.z,r.z)),n};zo.prototype.copy=function(t){return Ft.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this};zo.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t};zo.prototype.fromJSON=function(t){return Ft.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this};function ro(t){Ft.call(this),this.type="SplineCurve",this.points=t||[]}ro.prototype=Object.create(Ft.prototype);ro.prototype.constructor=ro;ro.prototype.isSplineCurve=!0;ro.prototype.getPoint=function(t,e){const n=e||new je,i=this.points,s=(i.length-1)*t,r=Math.floor(s),o=s-r,a=i[r===0?r:r-1],l=i[r],c=i[r>i.length-2?i.length-1:r+1],u=i[r>i.length-3?i.length-1:r+2];return n.set(M3(o,a.x,l.x,c.x,u.x),M3(o,a.y,l.y,c.y,u.y)),n};ro.prototype.copy=function(t){Ft.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(i.clone())}return this};ro.prototype.toJSON=function(){const t=Ft.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const i=this.points[e];t.points.push(i.toArray())}return t};ro.prototype.fromJSON=function(t){Ft.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const i=t.points[e];this.points.push(new je().fromArray(i))}return this};var B_=Object.freeze({__proto__:null,ArcCurve:yh,CatmullRomCurve3:Fs,CubicBezierCurve:no,CubicBezierCurve3:Fo,EllipseCurve:ar,LineCurve:zs,LineCurve3:io,QuadraticBezierCurve:so,QuadraticBezierCurve3:zo,SplineCurve:ro});function wa(){Ft.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}wa.prototype=Object.assign(Object.create(Ft.prototype),{constructor:wa,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new zs(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=e){const s=n[i]-e,r=this.curves[i],o=r.getLength(),a=o===0?0:1-s/o;return r.getPointAt(a)}i++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){t===void 0&&(t=40);const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;const e=[];let n;for(let i=0,s=this.curves;i<s.length;i++){const r=s[i],o=r&&r.isEllipseCurve?t*2:r&&(r.isLineCurve||r.isLineCurve3)?1:r&&r.isSplineCurve?t*r.points.length:t,a=r.getPoints(o);for(let l=0;l<a.length;l++){const c=a[l];n&&n.equals(c)||(e.push(c),n=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Ft.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Ft.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Ft.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const i=t.curves[e];this.curves.push(new B_[i.type]().fromJSON(i))}return this}});function Yr(t){wa.call(this),this.type="Path",this.currentPoint=new je,t&&this.setFromPoints(t)}Yr.prototype=Object.assign(Object.create(wa.prototype),{constructor:Yr,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new zs(this.currentPoint.clone(),new je(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){const s=new so(this.currentPoint.clone(),new je(t,e),new je(n,i));return this.curves.push(s),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,s,r){const o=new no(this.currentPoint.clone(),new je(t,e),new je(n,i),new je(s,r));return this.curves.push(o),this.currentPoint.set(s,r),this},splineThru:function(t){const e=[this.currentPoint.clone()].concat(t),n=new ro(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,s,r){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+o,e+a,n,i,s,r),this},absarc:function(t,e,n,i,s,r){return this.absellipse(t,e,n,n,i,s,r),this},ellipse:function(t,e,n,i,s,r,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,s,r,o,a),this},absellipse:function(t,e,n,i,s,r,o,a){const l=new ar(t,e,n,i,s,r,o,a);if(this.curves.length>0){const u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return wa.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=wa.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return wa.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}});function pl(t){Yr.call(this,t),this.uuid=Qt.generateUUID(),this.type="Shape",this.holes=[]}pl.prototype=Object.assign(Object.create(Yr.prototype),{constructor:pl,getPointsHoles:function(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Yr.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){const t=Yr.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Yr.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const i=t.holes[e];this.holes.push(new Yr().fromJSON(i))}return this}});function Xn(t,e){Bt.call(this),this.type="Light",this.color=new Pt(t),this.intensity=e!==void 0?e:1,this.receiveShadow=void 0}Xn.prototype=Object.assign(Object.create(Bt.prototype),{constructor:Xn,isLight:!0,copy:function(t){return Bt.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=Bt.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function F_(t,e,n){Xn.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.groundColor=new Pt(e)}F_.prototype=Object.assign(Object.create(Xn.prototype),{constructor:F_,isHemisphereLight:!0,copy:function(t){return Xn.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}});function Uo(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new je(512,512),this.map=null,this.mapPass=null,this.matrix=new an,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Pg,this._frameExtents=new je(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}Object.assign(Uo.prototype,{_projScreenMatrix:new an,_lightPositionWorld:new ee,_lookTarget:new ee,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,i=this._projScreenMatrix,s=this._lookTarget,r=this._lightPositionWorld;r.setFromMatrixPosition(t.matrixWorld),e.position.copy(r),s.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(s),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}});function z_(){Uo.call(this,new Ei(50,1,.5,500))}z_.prototype=Object.assign(Object.create(Uo.prototype),{constructor:z_,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=Qt.RAD2DEG*2*t.angle,i=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||i!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=i,e.far=s,e.updateProjectionMatrix()),Uo.prototype.updateMatrices.call(this,t)}});function U_(t,e,n,i,s,r){Xn.call(this,t,e),this.type="SpotLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.target=new Bt,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(o){this.intensity=o/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=s!==void 0?s:0,this.decay=r!==void 0?r:1,this.shadow=new z_}U_.prototype=Object.assign(Object.create(Xn.prototype),{constructor:U_,isSpotLight:!0,copy:function(t){return Xn.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function H_(){Uo.call(this,new Ei(90,1,.5,500)),this._frameExtents=new je(4,2),this._viewportCount=6,this._viewports=[new Un(2,1,1,1),new Un(0,1,1,1),new Un(3,1,1,1),new Un(1,1,1,1),new Un(3,0,1,1),new Un(1,0,1,1)],this._cubeDirections=[new ee(1,0,0),new ee(-1,0,0),new ee(0,0,1),new ee(0,0,-1),new ee(0,1,0),new ee(0,-1,0)],this._cubeUps=[new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,1,0),new ee(0,0,1),new ee(0,0,-1)]}H_.prototype=Object.assign(Object.create(Uo.prototype),{constructor:H_,isPointLightShadow:!0,updateMatrices:function(t,e){e===void 0&&(e=0);const n=this.camera,i=this.matrix,s=this._lightPositionWorld,r=this._lookTarget,o=this._projScreenMatrix;s.setFromMatrixPosition(t.matrixWorld),n.position.copy(s),r.copy(n.position),r.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(r),n.updateMatrixWorld(),i.makeTranslation(-s.x,-s.y,-s.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}});function Hm(t,e,n,i){Xn.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(s){this.intensity=s/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=i!==void 0?i:1,this.shadow=new H_}Hm.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Hm,isPointLight:!0,copy:function(t){return Xn.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}});function wh(t,e,n,i,s,r){No.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t!==void 0?t:-1,this.right=e!==void 0?e:1,this.top=n!==void 0?n:1,this.bottom=i!==void 0?i:-1,this.near=s!==void 0?s:.1,this.far=r!==void 0?r:2e3,this.updateProjectionMatrix()}wh.prototype=Object.assign(Object.create(No.prototype),{constructor:wh,isOrthographicCamera:!0,copy:function(t,e){return No.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,s,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=s,this.view.height=r,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=n-t,r=n+t,o=i+e,a=i-e;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=l*this.view.offsetX,r=s+l*this.view.width,o-=c*this.view.offsetY,a=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,r,o,a,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){const e=Bt.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}});function V_(){Uo.call(this,new wh(-5,5,5,-5,.5,500))}V_.prototype=Object.assign(Object.create(Uo.prototype),{constructor:V_,isDirectionalLightShadow:!0,updateMatrices:function(t){Uo.prototype.updateMatrices.call(this,t)}});function G_(t,e){Xn.call(this,t,e),this.type="DirectionalLight",this.position.copy(Bt.DefaultUp),this.updateMatrix(),this.target=new Bt,this.shadow=new V_}G_.prototype=Object.assign(Object.create(Xn.prototype),{constructor:G_,isDirectionalLight:!0,copy:function(t){return Xn.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}});function W_(t,e){Xn.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}W_.prototype=Object.assign(Object.create(Xn.prototype),{constructor:W_,isAmbientLight:!0});function j_(t,e,n,i){Xn.call(this,t,e),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=i!==void 0?i:10}j_.prototype=Object.assign(Object.create(Xn.prototype),{constructor:j_,isRectAreaLight:!0,copy:function(t){return Xn.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=Xn.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class xK{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ee)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*s),n.addScaledVector(o[2],.488603*r),n.addScaledVector(o[3],.488603*i),n.addScaledVector(o[4],1.092548*(i*s)),n.addScaledVector(o[5],1.092548*(s*r)),n.addScaledVector(o[6],.315392*(3*r*r-1)),n.addScaledVector(o[7],1.092548*(i*r)),n.addScaledVector(o[8],.546274*(i*i-s*s)),n}getIrradianceAt(e,n){const i=e.x,s=e.y,r=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*s),n.addScaledVector(o[2],2*.511664*r),n.addScaledVector(o[3],2*.511664*i),n.addScaledVector(o[4],2*.429043*i*s),n.addScaledVector(o[5],2*.429043*s*r),n.addScaledVector(o[6],.743125*r*r-.247708),n.addScaledVector(o[7],2*.429043*i*r),n.addScaledVector(o[8],.429043*(i*i-s*s)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n){n===void 0&&(n=0);const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,n+s*3);return this}toArray(e,n){e===void 0&&(e=[]),n===void 0&&(n=0);const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,n+s*3);return e}static getBasisAt(e,n){const i=e.x,s=e.y,r=e.z;n[0]=.282095,n[1]=.488603*s,n[2]=.488603*r,n[3]=.488603*i,n[4]=1.092548*i*s,n[5]=1.092548*s*r,n[6]=.315392*(3*r*r-1),n[7]=1.092548*i*r,n[8]=.546274*(i*i-s*s)}}function Ar(t,e){Xn.call(this,void 0,e),this.type="LightProbe",this.sh=t!==void 0?t:new xK}Ar.prototype=Object.assign(Object.create(Xn.prototype),{constructor:Ar,isLightProbe:!0,copy:function(t){return Xn.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=Xn.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}});function Y_(t){On.call(this,t),this.textures={}}Y_.prototype=Object.assign(Object.create(On.prototype),{constructor:Y_,load:function(t,e,n,i){const s=this,r=new to(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{e(s.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)},parse:function(t){const e=this.textures;function n(s){return e[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),e[s]}const i=new fK[t.type];if(t.uuid!==void 0&&(i.uuid=t.uuid),t.name!==void 0&&(i.name=t.name),t.color!==void 0&&i.color.setHex(t.color),t.roughness!==void 0&&(i.roughness=t.roughness),t.metalness!==void 0&&(i.metalness=t.metalness),t.sheen!==void 0&&(i.sheen=new Pt().setHex(t.sheen)),t.emissive!==void 0&&i.emissive.setHex(t.emissive),t.specular!==void 0&&i.specular.setHex(t.specular),t.shininess!==void 0&&(i.shininess=t.shininess),t.clearcoat!==void 0&&(i.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=t.clearcoatRoughness),t.fog!==void 0&&(i.fog=t.fog),t.flatShading!==void 0&&(i.flatShading=t.flatShading),t.blending!==void 0&&(i.blending=t.blending),t.combine!==void 0&&(i.combine=t.combine),t.side!==void 0&&(i.side=t.side),t.opacity!==void 0&&(i.opacity=t.opacity),t.transparent!==void 0&&(i.transparent=t.transparent),t.alphaTest!==void 0&&(i.alphaTest=t.alphaTest),t.depthTest!==void 0&&(i.depthTest=t.depthTest),t.depthWrite!==void 0&&(i.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(i.colorWrite=t.colorWrite),t.stencilWrite!==void 0&&(i.stencilWrite=t.stencilWrite),t.stencilWriteMask!==void 0&&(i.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(i.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(i.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(i.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(i.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(i.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(i.stencilZPass=t.stencilZPass),t.wireframe!==void 0&&(i.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(i.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(i.rotation=t.rotation),t.linewidth!==1&&(i.linewidth=t.linewidth),t.dashSize!==void 0&&(i.dashSize=t.dashSize),t.gapSize!==void 0&&(i.gapSize=t.gapSize),t.scale!==void 0&&(i.scale=t.scale),t.polygonOffset!==void 0&&(i.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=t.polygonOffsetUnits),t.skinning!==void 0&&(i.skinning=t.skinning),t.morphTargets!==void 0&&(i.morphTargets=t.morphTargets),t.morphNormals!==void 0&&(i.morphNormals=t.morphNormals),t.dithering!==void 0&&(i.dithering=t.dithering),t.vertexTangents!==void 0&&(i.vertexTangents=t.vertexTangents),t.visible!==void 0&&(i.visible=t.visible),t.toneMapped!==void 0&&(i.toneMapped=t.toneMapped),t.userData!==void 0&&(i.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const s in t.uniforms){const r=t.uniforms[s];switch(i.uniforms[s]={},r.type){case"t":i.uniforms[s].value=n(r.value);break;case"c":i.uniforms[s].value=new Pt().setHex(r.value);break;case"v2":i.uniforms[s].value=new je().fromArray(r.value);break;case"v3":i.uniforms[s].value=new ee().fromArray(r.value);break;case"v4":i.uniforms[s].value=new Un().fromArray(r.value);break;case"m3":i.uniforms[s].value=new ws().fromArray(r.value);break;case"m4":i.uniforms[s].value=new an().fromArray(r.value);break;default:i.uniforms[s].value=r.value}}if(t.defines!==void 0&&(i.defines=t.defines),t.vertexShader!==void 0&&(i.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(i.fragmentShader=t.fragmentShader),t.extensions!==void 0)for(const s in t.extensions)i.extensions[s]=t.extensions[s];if(t.shading!==void 0&&(i.flatShading=t.shading===1),t.size!==void 0&&(i.size=t.size),t.sizeAttenuation!==void 0&&(i.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(i.map=n(t.map)),t.matcap!==void 0&&(i.matcap=n(t.matcap)),t.alphaMap!==void 0&&(i.alphaMap=n(t.alphaMap)),t.bumpMap!==void 0&&(i.bumpMap=n(t.bumpMap)),t.bumpScale!==void 0&&(i.bumpScale=t.bumpScale),t.normalMap!==void 0&&(i.normalMap=n(t.normalMap)),t.normalMapType!==void 0&&(i.normalMapType=t.normalMapType),t.normalScale!==void 0){let s=t.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new je().fromArray(s)}return t.displacementMap!==void 0&&(i.displacementMap=n(t.displacementMap)),t.displacementScale!==void 0&&(i.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(i.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(i.roughnessMap=n(t.roughnessMap)),t.metalnessMap!==void 0&&(i.metalnessMap=n(t.metalnessMap)),t.emissiveMap!==void 0&&(i.emissiveMap=n(t.emissiveMap)),t.emissiveIntensity!==void 0&&(i.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(i.specularMap=n(t.specularMap)),t.envMap!==void 0&&(i.envMap=n(t.envMap)),t.envMapIntensity!==void 0&&(i.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(i.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(i.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(i.lightMap=n(t.lightMap)),t.lightMapIntensity!==void 0&&(i.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(i.aoMap=n(t.aoMap)),t.aoMapIntensity!==void 0&&(i.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(i.gradientMap=n(t.gradientMap)),t.clearcoatMap!==void 0&&(i.clearcoatMap=n(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new je().fromArray(t.clearcoatNormalScale)),t.transmission!==void 0&&(i.transmission=t.transmission),t.transmissionMap!==void 0&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});const _L={decodeText:function(t){if(typeof TextDecoder<"u")return new TextDecoder().decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return e===-1?"./":t.substr(0,e+1)}};function Vm(){sn.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}Vm.prototype=Object.assign(Object.create(sn.prototype),{constructor:Vm,isInstancedBufferGeometry:!0,copy:function(t){return sn.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const t=sn.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}});function q_(t,e,n,i){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),qt.call(this,t,e,n),this.meshPerAttribute=i||1}q_.prototype=Object.assign(Object.create(qt.prototype),{constructor:q_,isInstancedBufferAttribute:!0,copy:function(t){return qt.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=qt.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}});function X_(t){On.call(this,t)}X_.prototype=Object.assign(Object.create(On.prototype),{constructor:X_,load:function(t,e,n,i){const s=this,r=new to(s.manager);r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{e(s.parse(JSON.parse(o)))}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)},parse:function(t){const e={},n={};function i(h,d){if(e[d]!==void 0)return e[d];const m=h.interleavedBuffers[d],_=s(h,m.buffer),b=new qd[m.type](_),g=new Qs(b,m.stride);return g.uuid=m.uuid,e[d]=g,g}function s(h,d){if(n[d]!==void 0)return n[d];const m=h.arrayBuffers[d],_=new Uint32Array(m).buffer;return n[d]=_,_}const r=t.isInstancedBufferGeometry?new Vm:new sn,o=t.data.index;if(o!==void 0){const h=new qd[o.type](o.array);r.setIndex(new qt(h,1))}const a=t.data.attributes;for(const h in a){const d=a[h];let p;if(d.isInterleavedBufferAttribute){const m=i(t.data,d.data);p=new kl(m,d.itemSize,d.offset,d.normalized)}else{const m=new qd[d.type](d.array),_=d.isInstancedBufferAttribute?q_:qt;p=new _(m,d.itemSize,d.normalized)}d.name!==void 0&&(p.name=d.name),r.setAttribute(h,p)}const l=t.data.morphAttributes;if(l)for(const h in l){const d=l[h],p=[];for(let m=0,_=d.length;m<_;m++){const b=d[m];let g;if(b.isInterleavedBufferAttribute){const x=i(t.data,b.data);g=new kl(x,b.itemSize,b.offset,b.normalized)}else{const x=new qd[b.type](b.array);g=new qt(x,b.itemSize,b.normalized)}b.name!==void 0&&(g.name=b.name),p.push(g)}r.morphAttributes[h]=p}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const u=t.data.groups||t.data.drawcalls||t.data.offsets;if(u!==void 0)for(let h=0,d=u.length;h!==d;++h){const p=u[h];r.addGroup(p.start,p.count,p.materialIndex)}const f=t.data.boundingSphere;if(f!==void 0){const h=new ee;f.center!==void 0&&h.fromArray(f.center),r.boundingSphere=new Fa(h,f.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}});const qd={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Z_(t){On.call(this,t)}Z_.prototype=Object.assign(Object.create(On.prototype),{constructor:Z_,load:function(t,e,n,i){const s=this,r=this.path===""?_L.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||r;const o=new to(s.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(t,function(a){let l=null;try{l=JSON.parse(a)}catch(u){i!==void 0&&i(u),console.error("THREE:ObjectLoader: Can't parse "+t+".",u.message);return}const c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+t);return}s.parse(l,e)},n,i)},parse:function(t,e){const n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),s=this.parseImages(t.images,function(){e!==void 0&&e(a)}),r=this.parseTextures(t.textures,s),o=this.parseMaterials(t.materials,r),a=this.parseObject(t.object,i,o);return t.animations&&(a.animations=this.parseAnimations(t.animations)),(t.images===void 0||t.images.length===0)&&e!==void 0&&e(a),a},parseShape:function(t){const e={};if(t!==void 0)for(let n=0,i=t.length;n<i;n++){const s=new pl().fromJSON(t[n]);e[s.uuid]=s}return e},parseGeometries:function(t,e){const n={};let i;if(t!==void 0){const s=new X_;for(let r=0,o=t.length;r<o;r++){let a;const l=t[r];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new as[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new as[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new as[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new as[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new as[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new as[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new as[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new as[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new as[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new as[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new as[l.type](new B_[l.path.type]().fromJSON(l.path),l.tubularSegments,l.radius,l.radialSegments,l.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new as[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new as[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let u=0,f=l.shapes.length;u<f;u++){const h=e[l.shapes[u]];i.push(h)}a=new as[l.type](i,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let u=0,f=l.shapes.length;u<f;u++){const h=e[l.shapes[u]];i.push(h)}const c=l.options.extrudePath;c!==void 0&&(l.options.extrudePath=new B_[c.type]().fromJSON(c)),a=new as[l.type](i,l.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=s.parse(l);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),a.isBufferGeometry===!0&&l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n},parseMaterials:function(t,e){const n={},i={};if(t!==void 0){const s=new Y_;s.setTextures(e);for(let r=0,o=t.length;r<o;r++){const a=t[r];if(a.type==="MultiMaterial"){const l=[];for(let c=0;c<a.materials.length;c++){const u=a.materials[c];n[u.uuid]===void 0&&(n[u.uuid]=s.parse(u)),l.push(n[u.uuid])}i[a.uuid]=l}else n[a.uuid]===void 0&&(n[a.uuid]=s.parse(a)),i[a.uuid]=n[a.uuid]}}return i},parseAnimations:function(t){const e=[];for(let n=0;n<t.length;n++){const i=t[n],s=xr.parse(i);i.uuid!==void 0&&(s.uuid=i.uuid),e.push(s)}return e},parseImages:function(t,e){const n=this,i={};let s;function r(o){return n.manager.itemStart(o),s.load(o,function(){n.manager.itemEnd(o)},void 0,function(){n.manager.itemError(o),n.manager.itemEnd(o)})}if(t!==void 0&&t.length>0){const o=new gL(e);s=new vh(o),s.setCrossOrigin(this.crossOrigin);for(let a=0,l=t.length;a<l;a++){const c=t[a],u=c.url;if(Array.isArray(u)){i[c.uuid]=[];for(let f=0,h=u.length;f<h;f++){const d=u[f],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;i[c.uuid].push(r(p))}}else{const f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;i[c.uuid]=r(f)}}}return i},parseTextures:function(t,e){function n(s,r){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),r[s])}const i={};if(t!==void 0)for(let s=0,r=t.length;s<r;s++){const o=t[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),e[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);let a;Array.isArray(e[o.image])?a=new Ia(e[o.image]):a=new Hn(e[o.image]),a.needsUpdate=!0,a.uuid=o.uuid,o.name!==void 0&&(a.name=o.name),o.mapping!==void 0&&(a.mapping=n(o.mapping,MK)),o.offset!==void 0&&a.offset.fromArray(o.offset),o.repeat!==void 0&&a.repeat.fromArray(o.repeat),o.center!==void 0&&a.center.fromArray(o.center),o.rotation!==void 0&&(a.rotation=o.rotation),o.wrap!==void 0&&(a.wrapS=n(o.wrap[0],S3),a.wrapT=n(o.wrap[1],S3)),o.format!==void 0&&(a.format=o.format),o.type!==void 0&&(a.type=o.type),o.encoding!==void 0&&(a.encoding=o.encoding),o.minFilter!==void 0&&(a.minFilter=n(o.minFilter,E3)),o.magFilter!==void 0&&(a.magFilter=n(o.magFilter,E3)),o.anisotropy!==void 0&&(a.anisotropy=o.anisotropy),o.flipY!==void 0&&(a.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(a.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(a.unpackAlignment=o.unpackAlignment),i[o.uuid]=a}return i},parseObject:function(t,e,n){let i;function s(l){return e[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",l),e[l]}function r(l){if(l!==void 0){if(Array.isArray(l)){const c=[];for(let u=0,f=l.length;u<f;u++){const h=l[u];n[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),c.push(n[h])}return c}return n[l]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",l),n[l]}}let o,a;switch(t.type){case"Scene":i=new Av,t.background!==void 0&&Number.isInteger(t.background)&&(i.background=new Pt(t.background)),t.fog!==void 0&&(t.fog.type==="Fog"?i.fog=new kv(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(i.fog=new Tv(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Ei(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(i.focus=t.focus),t.zoom!==void 0&&(i.zoom=t.zoom),t.filmGauge!==void 0&&(i.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(i.filmOffset=t.filmOffset),t.view!==void 0&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new wh(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(i.zoom=t.zoom),t.view!==void 0&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new W_(t.color,t.intensity);break;case"DirectionalLight":i=new G_(t.color,t.intensity);break;case"PointLight":i=new Hm(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new j_(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new U_(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new F_(t.color,t.groundColor,t.intensity);break;case"LightProbe":i=new Ar().fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":o=s(t.geometry),a=r(t.material),i=new Ai(o,a);break;case"InstancedMesh":o=s(t.geometry),a=r(t.material);const l=t.count,c=t.instanceMatrix;i=new M_(o,a,l),i.instanceMatrix=new qt(new Float32Array(c.array),16);break;case"LOD":i=new Om;break;case"Line":i=new Ll(s(t.geometry),r(t.material),t.mode);break;case"LineLoop":i=new S_(s(t.geometry),r(t.material));break;case"LineSegments":i=new uh(s(t.geometry),r(t.material));break;case"PointCloud":case"Points":i=new T_(s(t.geometry),r(t.material));break;case"Sprite":i=new y_(r(t.material));break;case"Group":i=new ol;break;default:i=new Bt}if(i.uuid=t.uuid,t.name!==void 0&&(i.name=t.name),t.matrix!==void 0?(i.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(t.position!==void 0&&i.position.fromArray(t.position),t.rotation!==void 0&&i.rotation.fromArray(t.rotation),t.quaternion!==void 0&&i.quaternion.fromArray(t.quaternion),t.scale!==void 0&&i.scale.fromArray(t.scale)),t.castShadow!==void 0&&(i.castShadow=t.castShadow),t.receiveShadow!==void 0&&(i.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.bias!==void 0&&(i.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(i.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(i.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&i.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(i.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(i.visible=t.visible),t.frustumCulled!==void 0&&(i.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(i.renderOrder=t.renderOrder),t.userData!==void 0&&(i.userData=t.userData),t.layers!==void 0&&(i.layers.mask=t.layers),t.children!==void 0){const l=t.children;for(let c=0;c<l.length;c++)i.add(this.parseObject(l[c],e,n))}if(t.type==="LOD"){t.autoUpdate!==void 0&&(i.autoUpdate=t.autoUpdate);const l=t.levels;for(let c=0;c<l.length;c++){const u=l[c],f=i.getObjectByProperty("uuid",u.object);f!==void 0&&i.addLevel(f,u.distance)}}return i}});const MK={UVMapping:Mv,CubeReflectionMapping:Eg,CubeRefractionMapping:Tg,EquirectangularReflectionMapping:l_,EquirectangularRefractionMapping:c_,CubeUVReflectionMapping:kg,CubeUVRefractionMapping:Ag},S3={RepeatWrapping:Lm,ClampToEdgeWrapping:ys,MirroredRepeatWrapping:Cm},E3={NearestFilter:Xi,NearestMipmapNearestFilter:u_,NearestMipmapLinearFilter:f_,LinearFilter:Gi,LinearMipmapNearestFilter:PA,LinearMipmapLinearFilter:Bh};function T3(t){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),On.call(this,t),this.options={premultiplyAlpha:"none"}}T3.prototype=Object.assign(Object.create(On.prototype),{constructor:T3,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(t,e,n,i){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,r=uu.get(t);if(r!==void 0)return s.manager.itemStart(t),setTimeout(function(){e&&e(r),s.manager.itemEnd(t)},0),r;fetch(t).then(function(o){return o.blob()}).then(function(o){return createImageBitmap(o,s.options)}).then(function(o){uu.add(t,o),e&&e(o),s.manager.itemEnd(t)}).catch(function(o){i&&i(o),s.manager.itemError(t),s.manager.itemEnd(t)}),s.manager.itemStart(t)}});function bL(){this.type="ShapePath",this.color=new Pt,this.subPaths=[],this.currentPath=null}Object.assign(bL.prototype,{moveTo:function(t,e){return this.currentPath=new Yr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,s,r){return this.currentPath.bezierCurveTo(t,e,n,i,s,r),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(b){const g=[];for(let x=0,y=b.length;x<y;x++){const v=b[x],w=new pl;w.curves=v.curves,g.push(w)}return g}function i(b,g){const x=g.length;let y=!1;for(let v=x-1,w=0;w<x;v=w++){let S=g[v],T=g[w],k=T.x-S.x,A=T.y-S.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(S=g[w],k=-k,T=g[v],A=-A),b.y<S.y||b.y>T.y)continue;if(b.y===S.y){if(b.x===S.x)return!0}else{const L=A*(b.x-S.x)-k*(b.y-S.y);if(L===0)return!0;if(L<0)continue;y=!y}}else{if(b.y!==S.y)continue;if(T.x<=b.x&&b.x<=S.x||S.x<=b.x&&b.x<=T.x)return!0}}return y}const s=Ea.isClockWise,r=this.subPaths;if(r.length===0)return[];if(e===!0)return n(r);let o,a,l;const c=[];if(r.length===1)return a=r[0],l=new pl,l.curves=a.curves,c.push(l),c;let u=!s(r[0].getPoints());u=t?!u:u;const f=[],h=[];let d=[],p=0,m;h[p]=void 0,d[p]=[];for(let b=0,g=r.length;b<g;b++)a=r[b],m=a.getPoints(),o=s(m),o=t?!o:o,o?(!u&&h[p]&&p++,h[p]={s:new pl,p:m},h[p].s.curves=a.curves,u&&p++,d[p]=[]):d[p].push({h:a,p:m[0]});if(!h[0])return n(r);if(h.length>1){let b=!1;const g=[];for(let x=0,y=h.length;x<y;x++)f[x]=[];for(let x=0,y=h.length;x<y;x++){const v=d[x];for(let w=0;w<v.length;w++){const S=v[w];let T=!0;for(let k=0;k<h.length;k++)i(S.p,h[k].p)&&(x!==k&&g.push({froms:x,tos:k,hole:w}),T?(T=!1,f[k].push(S)):b=!0);T&&f[x].push(S)}}g.length>0&&(b||(d=f))}let _;for(let b=0,g=h.length;b<g;b++){l=h[b].s,c.push(l),_=d[b];for(let x=0,y=_.length;x<y;x++)l.holes.push(_[x].h)}return c}});function vL(t){this.type="Font",this.data=t}Object.assign(vL.prototype,{isFont:!0,generateShapes:function(t,e){e===void 0&&(e=100);const n=[],i=SK(t,e,this.data);for(let s=0,r=i.length;s<r;s++)Array.prototype.push.apply(n,i[s].toShapes());return n}});function SK(t,e,n){const i=Array.from?Array.from(t):String(t).split(""),s=e/n.resolution,r=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*s,o=[];let a=0,l=0;for(let c=0;c<i.length;c++){const u=i[c];if(u===`
`)a=0,l-=r;else{const f=EK(u,s,a,l,n);a+=f.offsetX,o.push(f.path)}}return o}function EK(t,e,n,i,s){const r=s.glyphs[t]||s.glyphs["?"];if(!r){console.error('THREE.Font: character "'+t+'" does not exists in font family '+s.familyName+".");return}const o=new bL;let a,l,c,u,f,h,d,p;if(r.o){const m=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let _=0,b=m.length;_<b;)switch(m[_++]){case"m":a=m[_++]*e+n,l=m[_++]*e+i,o.moveTo(a,l);break;case"l":a=m[_++]*e+n,l=m[_++]*e+i,o.lineTo(a,l);break;case"q":c=m[_++]*e+n,u=m[_++]*e+i,f=m[_++]*e+n,h=m[_++]*e+i,o.quadraticCurveTo(f,h,c,u);break;case"b":c=m[_++]*e+n,u=m[_++]*e+i,f=m[_++]*e+n,h=m[_++]*e+i,d=m[_++]*e+n,p=m[_++]*e+i,o.bezierCurveTo(f,h,d,p,c,u);break}}return{offsetX:r.ha*e,path:o}}function k3(t){On.call(this,t)}k3.prototype=Object.assign(Object.create(On.prototype),{constructor:k3,load:function(t,e,n,i){const s=this,r=new to(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.load(t,function(o){let a;try{a=JSON.parse(o)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(o.substring(65,o.length-2))}const l=s.parse(a);e&&e(l)},n,i)},parse:function(t){return new vL(t)}});let Xd;const TK={getContext:function(){return Xd===void 0&&(Xd=new(window.AudioContext||window.webkitAudioContext)),Xd},setContext:function(t){Xd=t}};function A3(t){On.call(this,t)}A3.prototype=Object.assign(Object.create(On.prototype),{constructor:A3,load:function(t,e,n,i){const s=this,r=new to(s.manager);r.setResponseType("arraybuffer"),r.setPath(s.path),r.setRequestHeader(s.requestHeader),r.load(t,function(o){try{const a=o.slice(0);TK.getContext().decodeAudioData(a,function(c){e(c)})}catch(a){i?i(a):console.error(a),s.manager.itemError(t)}},n,i)}});function L3(t,e,n){Ar.call(this,void 0,n);const i=new Pt().set(t),s=new Pt().set(e),r=new ee(i.r,i.g,i.b),o=new ee(s.r,s.g,s.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(o).multiplyScalar(a),this.sh.coefficients[1].copy(r).sub(o).multiplyScalar(l)}L3.prototype=Object.assign(Object.create(Ar.prototype),{constructor:L3,isHemisphereLightProbe:!0,copy:function(t){return Ar.prototype.copy.call(this,t),this},toJSON:function(t){return Ar.prototype.toJSON.call(this,t)}});function C3(t,e){Ar.call(this,void 0,e);const n=new Pt().set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}C3.prototype=Object.assign(Object.create(Ar.prototype),{constructor:C3,isAmbientLightProbe:!0,copy:function(t){return Ar.prototype.copy.call(this,t),this},toJSON:function(t){return Ar.prototype.toJSON.call(this,t)}});const P3=new an,R3=new an;function kK(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ei,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ei,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(kK.prototype,{update:function(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const i=t.projectionMatrix.clone(),s=e.eyeSep/2,r=s*e.near/e.focus,o=e.near*Math.tan(Qt.DEG2RAD*e.fov*.5)/e.zoom;let a,l;R3.elements[12]=-s,P3.elements[12]=s,a=-o*e.aspect+r,l=o*e.aspect+r,i.elements[0]=2*e.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(i),a=-o*e.aspect-r,l=o*e.aspect-r,i.elements[0]=2*e.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(R3),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(P3)}});new ee;new Ki;new ee;new ee;new ee;new Ki;new ee;new ee;function yL(t,e,n){this.binding=t,this.valueSize=n;let i,s,r;switch(e){case"quaternion":i=this._slerp,s=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,s=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(yL.prototype,{accumulate:function(t,e){const n=this.buffer,i=this.valueSize,s=t*i+i;let r=this.cumulativeWeight;if(r===0){for(let o=0;o!==i;++o)n[s+o]=n[o];r=e}else{r+=e;const o=e/r;this._mixBufferRegion(n,s,0,o,i)}this.cumulativeWeight=r},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,i=t*e+e,s=this.cumulativeWeight,r=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const a=e*this._origIndex;this._mixBufferRegion(n,i,a,1-s,e)}r>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let a=e,l=e+e;a!==l;++a)if(n[a]!==n[a+e]){o.setValue(n,i);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let s=n,r=i;s!==r;++s)e[s]=e[i+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,s){if(i>=.5)for(let r=0;r!==s;++r)t[e+r]=t[n+r]},_slerp:function(t,e,n,i){Ki.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,s){const r=this._workIndex*s;Ki.multiplyQuaternionsFlat(t,r,t,e,t,n),Ki.slerpFlat(t,e,t,e,t,r,i)},_lerp:function(t,e,n,i,s){const r=1-i;for(let o=0;o!==s;++o){const a=e+o;t[a]=t[a]*r+t[n+o]*i}},_lerpAdditive:function(t,e,n,i,s){for(let r=0;r!==s;++r){const o=e+r;t[o]=t[o]+t[n+r]*i}}});const Pv="\\[\\]\\.:\\/",AK=new RegExp("["+Pv+"]","g"),Rv="[^"+Pv+"]",LK="[^"+Pv.replace("\\.","")+"]",CK=/((?:WC+[\/:])*)/.source.replace("WC",Rv),PK=/(WCOD+)?/.source.replace("WCOD",LK),RK=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rv),IK=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rv),DK=new RegExp("^"+CK+PK+RK+IK+"$"),OK=["material","materials","bones"];function wL(t,e,n){const i=n||fs.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}Object.assign(wL.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=n.length;i!==s;++i)n[i].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}});function fs(t,e,n){this.path=e,this.parsedPath=n||fs.parseTrackName(e),this.node=fs.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}Object.assign(fs,{Composite:wL,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new fs.Composite(t,e,n):new fs(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(AK,"")},parseTrackName:function(t){const e=DK.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=n.nodeName.substring(i+1);OK.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(n!==void 0)return n}if(t.children){const n=function(s){for(let r=0;r<s.length;r++){const o=s[r];if(o.name===e||o.uuid===e)return o;const a=n(o.children);if(a)return a}return null},i=n(t.children);if(i)return i}return null}});Object.assign(fs.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,n){e[n]=this.node[this.propertyName]},function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)e[n++]=i[s]},function(e,n){e[n]=this.resolvedProperty[this.propertyIndex]},function(e,n){this.resolvedProperty.toArray(e,n)}],SetterByBindingTypeAndVersioning:[[function(e,n){this.targetObject[this.propertyName]=e[n]},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[n++]},function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[n++];this.targetObject.needsUpdate=!0},function(e,n){const i=this.resolvedProperty;for(let s=0,r=i.length;s!==r;++s)i[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty[this.propertyIndex]=e[n]},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,n){this.resolvedProperty.fromArray(e,n)},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0},function(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,n){this.bind(),this.getValue(e,n)},setValue:function(e,n){this.bind(),this.setValue(e,n)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let s=e.propertyIndex;if(t||(t=fs.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=e.objectIndex;switch(n){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let c=0;c<t.length;c++)if(t[c].name===l){l=c;break}break;default:if(t[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[n]}if(l!==void 0){if(t[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[l]}}const r=t[i];if(r===void 0){const l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",t);return}let o=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[s]!==void 0&&(s=t.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=s}else r.fromArray!==void 0&&r.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(a=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(fs.prototype,{_getValue_unbound:fs.prototype.getValue,_setValue_unbound:fs.prototype.setValue});function NK(){this.uuid=Qt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(NK.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,s=this._bindings,r=s.length;let o,a=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const f=arguments[c],h=f.uuid;let d=e[h];if(d===void 0){d=a++,e[h]=d,t.push(f);for(let p=0,m=r;p!==m;++p)s[p].push(new fs(f,n[p],i[p]))}else if(d<l){o=t[d];const p=--l,m=t[p];e[m.uuid]=d,t[d]=m,e[h]=p,t[p]=f;for(let _=0,b=r;_!==b;++_){const g=s[_],x=g[p];let y=g[d];g[d]=x,y===void 0&&(y=new fs(f,n[_],i[_])),g[p]=y}}else t[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_;for(let r=0,o=arguments.length;r!==o;++r){const a=arguments[r],l=a.uuid,c=e[l];if(c!==void 0&&c>=s){const u=s++,f=t[u];e[f.uuid]=c,t[c]=f,e[l]=u,t[u]=a;for(let h=0,d=i;h!==d;++h){const p=n[h],m=p[u],_=p[c];p[c]=m,p[u]=_}}}this.nCachedObjects_=s},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let s=this.nCachedObjects_,r=t.length;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=e[c];if(u!==void 0)if(delete e[c],u<s){const f=--s,h=t[f],d=--r,p=t[d];e[h.uuid]=u,t[u]=h,e[p.uuid]=f,t[f]=p,t.pop();for(let m=0,_=i;m!==_;++m){const b=n[m],g=b[f],x=b[d];b[u]=g,b[f]=x,b.pop()}}else{const f=--r,h=t[f];e[h.uuid]=u,t[u]=h,t.pop();for(let d=0,p=i;d!==p;++d){const m=n[d];m[u]=m[f],m.pop()}}}this.nCachedObjects_=s},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const s=this._bindings;if(i!==void 0)return s[i];const r=this._paths,o=this._parsedPaths,a=this._objects,l=a.length,c=this.nCachedObjects_,u=new Array(l);i=s.length,n[t]=i,r.push(t),o.push(e),s.push(u);for(let f=c,h=a.length;f!==h;++f){const d=a[f];u[f]=new fs(d,t,e)}return u},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(n!==void 0){const i=this._paths,s=this._parsedPaths,r=this._bindings,o=r.length-1,a=r[o],l=t[o];e[l]=n,r[n]=a,r.pop(),s[n]=s[o],s.pop(),i[n]=i[o],i.pop()}}});class BK{constructor(e,n,i,s){this._mixer=e,this._clip=n,this._localRoot=i||null,this.blendMode=s||n.blendMode;const r=n.tracks,o=r.length,a=new Array(o),l={endingStart:wc,endingEnd:wc};for(let c=0;c!==o;++c){const u=r[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Qj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const s=this._clip.duration,r=e._clip.duration,o=r/s,a=s/r;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const s=this._mixer,r=s.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=s._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=r,l[1]=r+i,c[0]=e/o,c[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,s){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const l=(e-r)*i;if(l<0||i===0)return;this._startTime=null,n=i*l}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case RA:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Ev:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(s,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];n*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];n*=s,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let s=this.time+e,r=this._loopCount;const o=i===eY;if(e===0)return r===-1?s:o&&(r&1)===1?n-s:s;if(i===$j){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=n)s=n;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),s>=n||s<0){const a=Math.floor(s/n);s-=n*a,r+=Math.abs(a);const l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?n:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=s;if(o&&(r&1)===1)return n-s}return s}_setEndings(e,n,i){const s=this._interpolantSettings;i?(s.endingStart=xc,s.endingEnd=xc):(e?s.endingStart=this.zeroSlopeAtStart?xc:wc:s.endingStart=Dm,n?s.endingEnd=this.zeroSlopeAtEnd?xc:wc:s.endingEnd=Dm)}_scheduleFading(e,n,i){const s=this._mixer,r=s.time;let o=this._weightInterpolant;o===null&&(o=s._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=r,l[0]=n,a[1]=r+e,l[1]=i,this}}function I3(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}I3.prototype=Object.assign(Object.create(co.prototype),{constructor:I3,_bindAction:function(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,s=i.length,r=t._propertyBindings,o=t._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let c=l[a];c===void 0&&(c={},l[a]=c);for(let u=0;u!==s;++u){const f=i[u],h=f.name;let d=c[h];if(d!==void 0)r[u]=d;else{if(d=r[u],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,a,h));continue}const p=e&&e._propertyBindings[u].binding.parsedPath;d=new yL(fs.create(n,h,p),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,a,h),r[u]=d}o[u].resultBuffer=d.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const n=(t._localRoot||this._root).uuid,i=t._clip.uuid,s=this._actionsByClip[i];this._bindAction(t,s&&s.knownActions[0]),this._addInactiveAction(t,i,n)}const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const i=this._actions,s=this._actionsByClip;let r=s[e];if(r===void 0)r={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=r;else{const o=r.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),r.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const s=t._clip.uuid,r=this._actionsByClip,o=r[s],a=o.knownActions,l=a[a.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,a[c]=l,a.pop(),t._byClipCacheIndex=null;const u=o.actionByRoot,f=(t._localRoot||this._root).uuid;delete u[f],a.length===0&&delete r[s],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const s=e[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_addInactiveBinding:function(t,e,n){const i=this._bindingsByRootAndName,s=this._bindings;let r=i[e];r===void 0&&(r={},i[e]=r),r[n]=t,t._cacheIndex=s.length,s.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,s=n.path,r=this._bindingsByRootAndName,o=r[i],a=e[e.length-1],l=t._cacheIndex;a._cacheIndex=l,e[l]=a,e.pop(),delete o[s],Object.keys(o).length===0&&delete r[i]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,s=e[i];t._cacheIndex=i,e[i]=t,s._cacheIndex=n,e[n]=s},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return n===void 0&&(n=new zm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,s=e[i];t.__cacheIndex=i,e[i]=t,s.__cacheIndex=n,e[n]=s},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const i=e||this._root,s=i.uuid;let r=typeof t=="string"?xr.findByName(i,t):t;const o=r!==null?r.uuid:t,a=this._actionsByClip[o];let l=null;if(n===void 0&&(r!==null?n=r.blendMode:n=Ev),a!==void 0){const u=a.actionByRoot[s];if(u!==void 0&&u.blendMode===n)return u;l=a.knownActions[0],r===null&&(r=l._clip)}if(r===null)return null;const c=new BK(this,r,e,n);return this._bindAction(c,l),this._addInactiveAction(c,o,s),c},existingAction:function(t,e){const n=e||this._root,i=n.uuid,s=typeof t=="string"?xr.findByName(n,t):t,r=s?s.uuid:t,o=this._actionsByClip[r];return o!==void 0&&o.actionByRoot[i]||null},stopAllAction:function(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,s=Math.sign(t),r=this._accuIndex^=1;for(let l=0;l!==n;++l)e[l]._update(i,t,s,r);const o=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)o[l].apply(r);return this},setTime:function(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,s=i[n];if(s!==void 0){const r=s.knownActions;for(let o=0,a=r.length;o!==a;++o){const l=r[o];this._deactivateAction(l);const c=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,e[c]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const r in n){const o=n[r].actionByRoot,a=o[e];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const i=this._bindingsByRootAndName,s=i[e];if(s!==void 0)for(const r in s){const o=s[r];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function D3(t,e,n){Qs.call(this,t,e),this.meshPerAttribute=n||1}D3.prototype=Object.assign(Object.create(Qs.prototype),{constructor:D3,isInstancedInterleavedBuffer:!0,copy:function(t){return Qs.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Qs.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Qs.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function xL(t,e,n,i,s){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=s,this.version=0}Object.defineProperty(xL.prototype,"needsUpdate",{set:function(t){t===!0&&this.version++}});Object.assign(xL.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}});function Iv(t,e,n,i){this.ray=new zh(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new DA,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function O3(t,e){return t.distance-e.distance}function J_(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const s=t.children;for(let r=0,o=s.length;r<o;r++)J_(s[r],e,n,!0)}}Object.assign(Iv.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){const i=n||[];return J_(t,this,i,e),i.sort(O3),i},intersectObjects:function(t,e,n){const i=n||[];if(Array.isArray(t)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let s=0,r=t.length;s<r;s++)J_(t[s],this,i,e);return i.sort(O3),i}});const N3=new je;class FK{constructor(e,n){Object.defineProperty(this,"isBox2",{value:!0}),this.min=e!==void 0?e:new je(1/0,1/0),this.max=n!==void 0?n:new je(-1/0,-1/0)}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=N3.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new je),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new je),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new je),n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new je),n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return N3.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}new ee;new ee;function Gm(t){Bt.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Gm.prototype=Object.create(Bt.prototype);Gm.prototype.constructor=Gm;Gm.prototype.isImmediateRenderObject=!0;new ee;const sa=new ee,Zd=new an,$0=new an;class zK extends uh{constructor(e){const n=ML(e),i=new sn,s=[],r=[],o=new Pt(0,0,1),a=new Pt(0,1,0);for(let c=0;c<n.length;c++){const u=n[c];u.parent&&u.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.setAttribute("position",new It(s,3)),i.setAttribute("color",new It(r,3));const l=new or({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,s=i.getAttribute("position");$0.getInverse(this.root.matrixWorld);for(let r=0,o=0;r<n.length;r++){const a=n[r];a.parent&&a.parent.isBone&&(Zd.multiplyMatrices($0,a.matrixWorld),sa.setFromMatrixPosition(Zd),s.setXYZ(o,sa.x,sa.y,sa.z),Zd.multiplyMatrices($0,a.parent.matrixWorld),sa.setFromMatrixPosition(Zd),s.setXYZ(o+1,sa.x,sa.y,sa.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function ML(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,ML(t.children[n]));return e}new ee;new Pt;new Pt;class UK extends uh{constructor(e,n,i,s){e=e||10,n=n||10,i=new Pt(i!==void 0?i:4473924),s=new Pt(s!==void 0?s:8947848);const r=n/2,o=e/n,a=e/2,l=[],c=[];for(let h=0,d=0,p=-a;h<=n;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const m=h===r?i:s;m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3,m.toArray(c,d),d+=3}const u=new sn;u.setAttribute("position",new It(l,3)),u.setAttribute("color",new It(c,3));const f=new or({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}}new ee;new ee;new ee;new ee;new No;new Zo;new ee;const Pp=4,Rp=8,SL=[.125,.215,.35,.446,.526,.582],HK=Rp-Pp+1+SL.length;new wh;VK();const Ka=(1+Math.sqrt(5))/2,hc=1/Ka;new ee(1,1,1),new ee(-1,1,1),new ee(1,1,-1),new ee(-1,1,-1),new ee(0,Ka,hc),new ee(0,Ka,-hc),new ee(hc,0,Ka),new ee(-hc,0,Ka),new ee(Ka,hc,0),new ee(-Ka,hc,0);function VK(){const t=[],e=[],n=[];let i=Rp;for(let s=0;s<HK;s++){const r=Math.pow(2,i);e.push(r);let o=1/r;s>Rp-Pp?o=SL[s-Rp+Pp-1]:s==0&&(o=0),n.push(o);const a=1/(r-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],f=6,h=6,d=3,p=2,m=1,_=new Float32Array(d*h*f),b=new Float32Array(p*h*f),g=new Float32Array(m*h*f);for(let y=0;y<f;y++){const v=y%3*2/3-1,w=y>2?0:-1,S=[v,w,0,v+2/3,w,0,v+2/3,w+1,0,v,w,0,v+2/3,w+1,0,v,w+1,0];_.set(S,d*h*y),b.set(u,p*h*y);const T=[y,y,y,y,y,y];g.set(T,m*h*y)}const x=new sn;x.setAttribute("position",new qt(_,d)),x.setAttribute("uv",new qt(b,p)),x.setAttribute("faceIndex",new qt(g,m)),t.push(x),i>Pp&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}Ft.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ft.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t};Object.assign(wa.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");const e=new Rn;for(let n=0,i=t.length;n<i;n++){const s=t[n];e.vertices.push(new ee(s.x,s.y,s.z||0))}return e}});Object.assign(Yr.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}});Object.create(Fs.prototype);Object.create(Fs.prototype);function EL(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Fs.call(this,t),this.type="catmullrom"}EL.prototype=Object.create(Fs.prototype);Object.assign(EL.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});UK.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};zK.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(On.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),_L.extractUrlBase(t)}});On.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(Z_.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}});Object.assign(FK.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}});Object.assign(Zo.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}});Object.assign(Fa.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});Pg.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)};Object.assign(Qt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Qt.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Qt.ceilPowerOfTwo(t)}});Object.assign(ws.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}});Object.assign(an.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new ee().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,s,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,s,r)}});So.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)};Ki.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)};Object.assign(zh.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}});Object.assign(cs.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}});Object.assign(cs,{barycoordFromPoint:function(t,e,n,i,s){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),cs.getBarycoord(t,e,n,i,s)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),cs.getNormal(t,e,n,i)}});Object.assign(pl.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new rL(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new fL(this,t)}});Object.assign(je.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(ee.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Un.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Rn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.assign(Bt.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(Bt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(Ai.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(Ai.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),tY},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Om.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(x_.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});w_.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Ft.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}});Ei.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(t)};Object.defineProperties(Xn.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}});Object.defineProperties(qt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===ih},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(ih)}}});Object.assign(qt.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?ih:Lg),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(sn.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new qt(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)},addDrawCall:function(t,e,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}});Object.defineProperties(sn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(Vm.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}});Object.defineProperties(Iv.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}});Object.defineProperties(Qs.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===ih},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}});Object.assign(Qs.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?ih:Lg),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(Dg.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}});Object.assign(Av.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(Wt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Pt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===AA}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}});Object.defineProperties(Rl.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(Pl.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}});Object.defineProperties(Ss.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}});Object.assign(Hh.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(Hh.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?IA:Fh}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(YA.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(kr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}});ah.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};Sl.crossOrigin=void 0;Sl.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const s=new N_;s.setCrossOrigin(this.crossOrigin);const r=s.load(t,n,void 0,i);return e&&(r.mapping=e),r};Sl.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const s=new O_;s.setCrossOrigin(this.crossOrigin);const r=s.load(t,n,void 0,i);return e&&(r.mapping=e),r};Sl.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Sl.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:PW}}));var Wm=function(t,e){e===void 0&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var n=this,i={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=e,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:M0.ROTATE,MIDDLE:M0.ZOOM,RIGHT:M0.PAN},this.target=new ee;var s=1e-6,r=new ee,o=1,a=i.NONE,l=i.NONE,c=new ee,u=new je,f=new je,h=new ee,d=0,p=new je,m=new je,_=0,b=0,g=new je,x=new je;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var y={type:"change"},v={type:"start"},w={type:"end"};this.handleResize=function(){var K=n.domElement.getBoundingClientRect(),q=n.domElement.ownerDocument.documentElement;n.screen.left=K.left+window.pageXOffset-q.clientLeft,n.screen.top=K.top+window.pageYOffset-q.clientTop,n.screen.width=K.width,n.screen.height=K.height};var S=function(){var K=new je;return function(te,re){return K.set((te-n.screen.left)/n.screen.width,(re-n.screen.top)/n.screen.height),K}}(),T=function(){var K=new je;return function(te,re){return K.set((te-n.screen.width*.5-n.screen.left)/(n.screen.width*.5),(n.screen.height+2*(n.screen.top-re))/n.screen.width),K}}();this.rotateCamera=function(){var K=new ee,q=new Ki,te=new ee,re=new ee,Oe=new ee,Ee=new ee,ye;return function(){Ee.set(f.x-u.x,f.y-u.y,0),ye=Ee.length(),ye?(c.copy(n.object.position).sub(n.target),te.copy(c).normalize(),re.copy(n.object.up).normalize(),Oe.crossVectors(re,te).normalize(),re.setLength(f.y-u.y),Oe.setLength(f.x-u.x),Ee.copy(re.add(Oe)),K.crossVectors(Ee,c).normalize(),ye*=n.rotateSpeed,q.setFromAxisAngle(K,ye),c.applyQuaternion(q),n.object.up.applyQuaternion(q),h.copy(K),d=ye):!n.staticMoving&&d&&(d*=Math.sqrt(1-n.dynamicDampingFactor),c.copy(n.object.position).sub(n.target),q.setFromAxisAngle(h,d),c.applyQuaternion(q),n.object.up.applyQuaternion(q)),u.copy(f)}}(),this.zoomCamera=function(){var K;a===i.TOUCH_ZOOM_PAN?(K=_/b,_=b,n.object.isPerspectiveCamera?c.multiplyScalar(K):n.object.isOrthographicCamera?(n.object.zoom*=K,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(K=1+(m.y-p.y)*n.zoomSpeed,K!==1&&K>0&&(n.object.isPerspectiveCamera?c.multiplyScalar(K):n.object.isOrthographicCamera?(n.object.zoom/=K,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?p.copy(m):p.y+=(m.y-p.y)*this.dynamicDampingFactor)},this.panCamera=function(){var K=new je,q=new ee,te=new ee;return function(){if(K.copy(x).sub(g),K.lengthSq()){if(n.object.isOrthographicCamera){var Oe=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,Ee=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;K.x*=Oe,K.y*=Ee}K.multiplyScalar(c.length()*n.panSpeed),te.copy(c).cross(n.object.up).setLength(K.x),te.add(q.copy(n.object.up).setLength(K.y)),n.object.position.add(te),n.target.add(te),n.staticMoving?g.copy(x):g.add(K.subVectors(x,g).multiplyScalar(n.dynamicDampingFactor))}}}(),this.checkDistances=function(){(!n.noZoom||!n.noPan)&&(c.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,c.setLength(n.maxDistance)),p.copy(m)),c.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,c.setLength(n.minDistance)),p.copy(m)))},this.update=function(){c.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,c),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),r.distanceToSquared(n.object.position)>s&&(n.dispatchEvent(y),r.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(r.distanceToSquared(n.object.position)>s||o!==n.object.zoom)&&(n.dispatchEvent(y),r.copy(n.object.position),o=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){a=i.NONE,l=i.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),c.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(y),r.copy(n.object.position),o=n.object.zoom};function k(K){if(n.enabled!==!1)switch(K.pointerType){case"mouse":U(K);break}}function A(K){if(n.enabled!==!1)switch(K.pointerType){case"mouse":N(K);break}}function L(K){if(n.enabled!==!1)switch(K.pointerType){case"mouse":$(K);break}}function D(K){n.enabled!==!1&&(window.removeEventListener("keydown",D),l===i.NONE&&(K.keyCode===n.keys[i.ROTATE]&&!n.noRotate?l=i.ROTATE:K.keyCode===n.keys[i.ZOOM]&&!n.noZoom?l=i.ZOOM:K.keyCode===n.keys[i.PAN]&&!n.noPan&&(l=i.PAN)))}function B(){n.enabled!==!1&&(l=i.NONE,window.addEventListener("keydown",D,!1))}function U(K){if(K.preventDefault(),K.stopPropagation(),a===i.NONE)switch(K.button){case n.mouseButtons.LEFT:a=i.ROTATE;break;case n.mouseButtons.MIDDLE:a=i.ZOOM;break;case n.mouseButtons.RIGHT:a=i.PAN;break;default:a=i.NONE}var q=l!==i.NONE?l:a;q===i.ROTATE&&!n.noRotate?(f.copy(T(K.pageX,K.pageY)),u.copy(f)):q===i.ZOOM&&!n.noZoom?(p.copy(S(K.pageX,K.pageY)),m.copy(p)):q===i.PAN&&!n.noPan&&(g.copy(S(K.pageX,K.pageY)),x.copy(g)),n.domElement.ownerDocument.addEventListener("pointermove",A,!1),n.domElement.ownerDocument.addEventListener("pointerup",L,!1),n.dispatchEvent(v)}function N(K){if(n.enabled!==!1){K.preventDefault(),K.stopPropagation();var q=l!==i.NONE?l:a;q===i.ROTATE&&!n.noRotate?(u.copy(f),f.copy(T(K.pageX,K.pageY))):q===i.ZOOM&&!n.noZoom?m.copy(S(K.pageX,K.pageY)):q===i.PAN&&!n.noPan&&x.copy(S(K.pageX,K.pageY))}}function $(K){n.enabled!==!1&&(K.preventDefault(),K.stopPropagation(),a=i.NONE,n.domElement.ownerDocument.removeEventListener("pointermove",A),n.domElement.ownerDocument.removeEventListener("pointerup",L),n.dispatchEvent(w))}function W(K){if(n.enabled!==!1&&n.noZoom!==!0){switch(K.preventDefault(),K.stopPropagation(),K.deltaMode){case 2:p.y-=K.deltaY*.025;break;case 1:p.y-=K.deltaY*.01;break;default:p.y-=K.deltaY*25e-5;break}n.dispatchEvent(v),n.dispatchEvent(w)}}function j(K){if(n.enabled!==!1){switch(K.preventDefault(),K.touches.length){case 1:a=i.TOUCH_ROTATE,f.copy(T(K.touches[0].pageX,K.touches[0].pageY)),u.copy(f);break;default:a=i.TOUCH_ZOOM_PAN;var q=K.touches[0].pageX-K.touches[1].pageX,te=K.touches[0].pageY-K.touches[1].pageY;b=_=Math.sqrt(q*q+te*te);var re=(K.touches[0].pageX+K.touches[1].pageX)/2,Oe=(K.touches[0].pageY+K.touches[1].pageY)/2;g.copy(S(re,Oe)),x.copy(g);break}n.dispatchEvent(v)}}function J(K){if(n.enabled!==!1)switch(K.preventDefault(),K.stopPropagation(),K.touches.length){case 1:u.copy(f),f.copy(T(K.touches[0].pageX,K.touches[0].pageY));break;default:var q=K.touches[0].pageX-K.touches[1].pageX,te=K.touches[0].pageY-K.touches[1].pageY;b=Math.sqrt(q*q+te*te);var re=(K.touches[0].pageX+K.touches[1].pageX)/2,Oe=(K.touches[0].pageY+K.touches[1].pageY)/2;x.copy(S(re,Oe));break}}function se(K){if(n.enabled!==!1){switch(K.touches.length){case 0:a=i.NONE;break;case 1:a=i.TOUCH_ROTATE,f.copy(T(K.touches[0].pageX,K.touches[0].pageY)),u.copy(f);break}n.dispatchEvent(w)}}function ne(K){n.enabled!==!1&&K.preventDefault()}this.dispose=function(){n.domElement.removeEventListener("contextmenu",ne,!1),n.domElement.removeEventListener("pointerdown",k,!1),n.domElement.removeEventListener("wheel",W,!1),n.domElement.removeEventListener("touchstart",j,!1),n.domElement.removeEventListener("touchend",se,!1),n.domElement.removeEventListener("touchmove",J,!1),n.domElement.ownerDocument.removeEventListener("pointermove",A,!1),n.domElement.ownerDocument.removeEventListener("pointerup",L,!1),window.removeEventListener("keydown",D,!1),window.removeEventListener("keyup",B,!1)},this.domElement.addEventListener("contextmenu",ne,!1),this.domElement.addEventListener("pointerdown",k,!1),this.domElement.addEventListener("wheel",W,!1),this.domElement.addEventListener("touchstart",j,!1),this.domElement.addEventListener("touchend",se,!1),this.domElement.addEventListener("touchmove",J,!1),this.domElement.ownerDocument.addEventListener("pointermove",A,!1),this.domElement.ownerDocument.addEventListener("pointerup",L,!1),window.addEventListener("keydown",D,!1),window.addEventListener("keyup",B,!1),this.handleResize(),this.update()};Wm.prototype=Object.create(co.prototype);Wm.prototype.constructor=Wm;function GK(t,e=1){let n=t;yD(n.p,...n.p.roundParams);let i=new Bt,s=n.pieces,r=[];for(let o=0,a=s.length;o<a;o+=1){let l=s[o].stickers,c=new Bt;c.userData=s[o];for(let u=0,f=l.length;u<f;u+=1){let h=l[u].mul(e),d=n.getHexColor(h.color),p=new Rn,m;if(p.vertices.push(...h.points.map(b=>new ee(b.x,b.y,b.z))),h instanceof Yc){m=new eo({color:16777215,side:Ml,vertexColors:!0});let b=h.faces;for(let g=0,x=b.length;g<x;g+=1){let y=new sh(b[g][0],b[g][1],b[g][2]);y.color.setHex(d),p.faces.push(y)}p.colorsNeedUpdate=!0}else{m=new eo({color:d,side:Ml});for(let b=2,g=h.points.length;b<g;b+=1)p.faces.push(new sh(0,b-1,b))}let _=new Ai(p,m);_.userData=l[u],c.add(_),r.push(_)}i.add(c)}return i.rotation.x=n.rotation.x,i.rotation.y=n.rotation.y,i.rotation.z=n.rotation.z,{group:i,meshes:r,nc:n}}const{window:B3}=tC;function WK(t){let e,n;return e=new iv({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p:qe,i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function F3(t){let e,n=t[4].SIMULATOR.order+"",i,s,r,o,a;function l(u){t[14](u)}let c={type:"number",min:1,class:"bg-white bg-opacity-10 text-gray-400"};return t[1]!==void 0&&(c.value=t[1]),r=new hi({props:c}),vt.push(()=>Vt(r,"value",l)),{c(){e=C("span"),i=ae(n),s=O(),ue(r.$$.fragment)},m(u,f){R(u,e,f),E(e,i),R(u,s,f),le(r,u,f),a=!0},p(u,f){(!a||f[0]&16)&&n!==(n=u[4].SIMULATOR.order+"")&&ke(i,n);const h={};!o&&f[0]&2&&(o=!0,h.value=u[1],Ht(()=>o=!1)),r.$set(h)},i(u){a||(I(r.$$.fragment,u),a=!0)},o(u){H(r.$$.fragment,u),a=!1},d(u){u&&P(e),u&&P(s),ce(r,u)}}}function jK(t){let e=t[4].SIMULATOR.cancel+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&16&&e!==(e=i[4].SIMULATOR.cancel+"")&&ke(n,e)},d(i){i&&P(n)}}}function YK(t){let e=t[4].SIMULATOR.setPuzzle+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s[0]&16&&e!==(e=i[4].SIMULATOR.setPuzzle+"")&&ke(n,e)},d(i){i&&P(n)}}}function qK(t){let e,n=t[4].SIMULATOR.puzzleSettings+"",i,s,r,o,a=t[4].SIMULATOR.puzzle+"",l,c,u,f,h,d,p,m,_,b;function g(v){t[13](v)}let x={items:t[6],label:JK,onChange:t[10],class:"text-gray-400 w-full max-w-[unset]"};t[0]!==void 0&&(x.value=t[0]),u=new Wi({props:x}),vt.push(()=>Vt(u,"value",g));let y=t[2]&&F3(t);return p=new Ct({props:{$$slots:{default:[jK]},$$scope:{ctx:t}}}),p.$on("click",t[11]),_=new Ct({props:{class:"bg-green-700 hover:bg-green-600 text-gray-300",$$slots:{default:[YK]},$$scope:{ctx:t}}}),_.$on("click",t[15]),{c(){e=C("h1"),i=ae(n),s=O(),r=C("div"),o=C("span"),l=ae(a),c=O(),ue(u.$$.fragment),h=O(),y&&y.c(),d=O(),ue(p.$$.fragment),m=O(),ue(_.$$.fragment),M(e,"class","text-3xl text-gray-300 text-center m-4"),M(r,"class","grid grid-cols-2 gap-4 place-items-center text-gray-400")},m(v,w){R(v,e,w),E(e,i),R(v,s,w),R(v,r,w),E(r,o),E(o,l),E(r,c),le(u,r,null),E(r,h),y&&y.m(r,null),E(r,d),le(p,r,null),E(r,m),le(_,r,null),b=!0},p(v,w){(!b||w[0]&16)&&n!==(n=v[4].SIMULATOR.puzzleSettings+"")&&ke(i,n),(!b||w[0]&16)&&a!==(a=v[4].SIMULATOR.puzzle+"")&&ke(l,a);const S={};!f&&w[0]&1&&(f=!0,S.value=v[0],Ht(()=>f=!1)),u.$set(S),v[2]?y?(y.p(v,w),w[0]&4&&I(y,1)):(y=F3(v),y.c(),I(y,1),y.m(r,d)):y&&(ot(),H(y,1,1,()=>{y=null}),at());const T={};w[0]&16|w[1]&1048576&&(T.$$scope={dirty:w,ctx:v}),p.$set(T);const k={};w[0]&16|w[1]&1048576&&(k.$$scope={dirty:w,ctx:v}),_.$set(k)},i(v){b||(I(u.$$.fragment,v),I(y),I(p.$$.fragment,v),I(_.$$.fragment,v),b=!0)},o(v){H(u.$$.fragment,v),H(y),H(p.$$.fragment,v),H(_.$$.fragment,v),b=!1},d(v){v&&P(e),v&&P(s),v&&P(r),ce(u),y&&y.d(),ce(p),ce(_)}}}function XK(t){let e,n,i,s,r,o,a,l,c,u;s=new $i({props:{hasKeybinding:!0,text:t[4].SIMULATOR.settings,position:"left",class:"absolute right-4 text-gray-400 z-20 hover:text-gray-300 transition-all duration-100 cursor-pointer",$$slots:{default:[WK]},$$scope:{ctx:t}}}),s.$on("click",t[12]);function f(d){t[16](d)}let h={$$slots:{default:[qK]},$$scope:{ctx:t}};return t[3]!==void 0&&(h.show=t[3]),o=new La({props:h}),vt.push(()=>Vt(o,"show",f)),{c(){e=C("img"),i=O(),ue(s.$$.fragment),r=O(),ue(o.$$.fragment),wi(e.src,n=ZK)||M(e,"src",n),M(e,"alt","")},m(d,p){R(d,e,p),R(d,i,p),le(s,d,p),R(d,r,p),le(o,d,p),l=!0,c||(u=[$e(B3,"resize",t[8]),$e(B3,"keydown",t[9])],c=!0)},p(d,p){const m={};p[0]&16&&(m.text=d[4].SIMULATOR.settings),p[1]&1048576&&(m.$$scope={dirty:p,ctx:d}),s.$set(m);const _={};p[0]&23|p[1]&1048576&&(_.$$scope={dirty:p,ctx:d}),!a&&p[0]&8&&(a=!0,_.show=d[3],Ht(()=>a=!1)),o.$set(_)},i(d){l||(I(s.$$.fragment,d),I(o.$$.fragment,d),l=!0)},o(d){H(s.$$.fragment,d),H(o.$$.fragment,d),l=!1},d(d){d&&P(e),d&&P(i),ce(s,d),d&&P(r),ce(o,d),c=!1,Vn(u)}}}const z3=200;let ZK="";const JK=t=>t.name;function KK(t,e,n){let i,s=Rr(Hi,V=>Dr(V));dt(t,s,V=>n(4,i=V));let r,o=!1,a,l=[],c="sq1Star",u=3,f=!1,h=!1,d=!1,p,m=[],_=[],b=[],g,x,y;function v(V,_e){return V.map(oe=>{let X=new ee(oe.x,oe.y,oe.z).project(_e);return new et(X.x,-X.y,0)})}function w(V,_e,oe,X){let fe=new je(V,_e),Le=new Iv;return Le.setFromCamera(fe,X),Le.intersectObjects(oe)}function S(V,_e,oe,X,fe,Le){var cn,mn,jt;Le.updateMatrix(),Le.updateMatrixWorld(),Le.updateProjectionMatrix();let Pe=[(cn=V.object.parent)==null?void 0:cn.userData,V.object.userData],Ye=(mn=Pe[1])==null?void 0:mn.getOrientation(),Ke=(jt=Pe[1])==null?void 0:jt.vecs.filter(Gt=>Gt.cross(Ye).abs()>1e-6),Z=oe.clone().sub(_e),ve=new et(Z.x,Z.y,0),Re=v(Ke,Le),He=0,Ze=null;if(Re.reduce((Gt,Bn,rn)=>{let vn=ve.cross(Bn);return vn.abs()>Gt?(Ze=Ke[rn],He=-Math.sign(vn.z),vn.abs()):Gt},-1/0),!Ze)return null;let _t=[],ln=[],lt=[],gt=[],bn=X.p.toMove?X.p.toMove(Pe[0],Pe[1],Ze):[],Ot=Array.isArray(bn)?bn:[bn],Nn=(Gt,Bn)=>{for(let rn=0,vn=Bn.length;rn<vn;rn+=1)if(Bn[rn].equal(Gt))return!0;return!1},Pn=Ze;return Ot.forEach(Gt=>{if(Gt.dir){let z=ve.cross(v([Gt.dir],Le)[0]);He=-Math.sign(z.z),Pn=Gt.dir}let Bn=Gt.pieces,rn=[],vn=[];fe.children.forEach(z=>{Nn(z.userData,Bn)&&(vn.push(z.userData),rn.push(z))}),ln.push(vn),_t.push(rn),lt.push(Gt.ang),gt.push(Gt.animationTime)}),{buffer:_t,userData:ln,u:Pn,dir:He,ang:lt,animationTime:gt}}let T=new Hh({antialias:!0,alpha:!0,powerPreference:"high-performance"});T.setSize(window.innerWidth,window.innerHeight),T.setPixelRatio(window.devicePixelRatio);let k=new Av,A=new Rg(4,4,3,3),L=new eo({color:"0xffffff",side:Ml}),D=new Ai(A,L);k.add(D);let B=T.domElement;B.style.position="absolute",B.style.top="0",B.style.left="0";let U=new Ei(40,window.innerWidth/window.innerHeight,1,14),N=new Wm(U,B);N.rotateSpeed=3,N.noPan=!0,N.minDistance=3,N.maxDistance=9;function $(){U.position.set(5.296722614625655,2.6519943868108236,5.045980364854634),U.rotation.set(0,0,0),U.up.set(0,1,0),U.lookAt(0,0,0),U.updateProjectionMatrix()}function W(V){let _e=k.children;k.remove(..._e),r=new Ns({type:c,view:"trans",order:Array.isArray(u)?u:[u,u,u],mode:ai.NORMAL});let oe=GK(r);a=oe.group,r=oe.nc,k.add(a);let X=new Hm("#ffffff",1,2,3);X.position.set(2,2,2),k.add(X),a.rotation.x=0,a.rotation.y=0,a.rotation.z=0,$()}for(let[V,_e]of Tb)V!="clock"&&l.push({name:_e.name,value:V,order:_e.order});W();let j=null,J=null,se=null,ne=0,K=0,q=V=>{if(V.preventDefault&&V.preventDefault(),d){N.enabled=!1;return}o=!0,J=new je(V.clientX,V.clientY),se=new ee(V.clientX/window.innerWidth*2-1,-(V.clientY/window.innerHeight)*2+1);let _e=[];a.children.forEach(X=>{_e.push(...X.children)});let oe=w(se.x,se.y,_e,U);j=null,oe.length>0&&(oe[0].object.material.color.getHex()&&(j=oe[0]),N.enabled=!1)},te=()=>{o=!1,N.enabled=!0},re=V=>{if(V.preventDefault&&V.preventDefault(),ne=V.clientX,K=V.clientY,!o)return;let _e=new je(V.clientX,V.clientY);if(j&&_e.clone().sub(J).length()>40){let oe=S(j,J,_e,r,a,U);oe!=null&&(b=oe.buffer,g=oe.userData,x=oe.u,y=oe.ang.map(X=>X*oe.dir),_=b.map(X=>X.map(fe=>fe.matrixWorld.clone())),m=oe.animationTime.map(X=>X||z3),d=!0,p=performance.now()),o=!1}};B.addEventListener("pointerdown",q),B.addEventListener("pointerup",te),B.addEventListener("pointermove",re),B.addEventListener("touchstart",V=>q(V.touches[0]),{passive:!0}),B.addEventListener("touchend",te),B.addEventListener("touchmove",V=>re(V.touches[0]),{passive:!0}),document.body.appendChild(B);let Oe=(V,_e,oe,X)=>{let fe=new ee(x.x,x.y,x.z).normalize(),Le=r.p.center,Pe=new ee(Le.x,Le.y,Le.z);X.forEach((Ye,Ke)=>{var ve,Re;let Z=V[Ke];Z.rotation.setFromRotationMatrix(_e[Ke]),Z.position.setFromMatrixPosition(_e[Ke]),Ye.hasCallback?Ye.callback(Z,new ee(0,0,0),x,oe,!0,ee):((ve=Z.parent)==null||ve.localToWorld(Z.position),Z.position.sub(Pe),Z.position.applyAxisAngle(fe,oe),Z.position.add(Pe),(Re=Z.parent)==null||Re.worldToLocal(Z.position),Z.rotateOnWorldAxis(fe,oe))})},Ee=()=>{if(d){let V=b.length,_e=b.map(X=>!1),oe=0;for(let X=0;X<V;X+=1){if(_e[X])continue;let fe=m[X],Le=(performance.now()-p)/fe;Le>1?(Oe(b[X],_[X],y[X],g[X]),g[X].forEach(Pe=>{Pe.hasCallback?Pe.callback(Pe,r.p.center,x,y[X]):Pe.rotate(r.p.center,x,y[X],!0)}),g[X].length=0,b[X].length=0,_[X].length=0,_e[X]=!0):(oe+=1,Oe(b[X],_[X],y[X]*Le,g[X]))}oe===0&&(d=!1)}N.update(),T.render(k,U),requestAnimationFrame(Ee)};Ee();let ye=()=>{T.setSize(window.innerWidth,window.innerHeight),U.aspect=window.innerWidth/window.innerHeight,U.updateProjectionMatrix(),N.handleResize()};ye();function xe(V){if(d)return;let _e=[];a.children.forEach(Le=>{_e.push(...Le.children)});let oe=new ee(ne/window.innerWidth*2-1,-(K/window.innerHeight)*2+1),X=w(oe.x,oe.y,_e,U);if(j=null,X.length>0&&(X[0].object.material.color.getHex()&&(j=X[0]),N.enabled=!1),!j)return;let fe=S(j,new je(ne,K),V,r,a,U);fe&&(b=fe.buffer,g=fe.userData,x=fe.u,y=fe.ang.map(Le=>Le*fe.dir),_=b.map(Le=>Le.map(Pe=>Pe.matrixWorld.clone())),m=fe.animationTime.map(Le=>Le||z3),d=!0,p=performance.now())}function Ae(V){let _e=new je(ne,K);switch(V.code){case"ArrowUp":{xe(_e.add(new je(0,-50)));break}case"ArrowDown":{xe(_e.add(new je(0,50)));break}case"ArrowLeft":{xe(_e.add(new je(-50,0)));break}case"ArrowRight":{xe(_e.add(new je(50,0)));break}}}ji(()=>{document.body.style.overflow="hidden"}),Es(()=>{T.domElement.remove(),T.dispose(),N.dispose(),document.body.style.overflow="auto"});function De(){n(2,f=l.find(V=>V.value===c).order)}function de(){n(3,h=!1)}function me(){n(3,h=!0)}function We(V){c=V,n(0,c)}function Ue(V){u=V,n(1,u)}const be=()=>{W(),de()};function F(V){h=V,n(3,h)}return[c,u,f,h,i,s,l,W,ye,Ae,De,de,me,We,Ue,be,F]}class $K extends xt{constructor(e){super(),wt(this,e,KK,XK,yt,{},null,[-1,-1])}}function QK(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M4,10V14H13L9.5,17.5L11.92,19.92L19.84,12L11.92,4.08L9.5,6.5L13,10H4Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function e$(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class TL extends xt{constructor(e){super(),wt(this,e,e$,QK,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function U3(t,e,n){const i=t.slice();return i[3]=e[n],i[28]=e,i[29]=n,i}function H3(t,e,n){const i=t.slice();return i[30]=e[n],i}function V3(t){let e,n=t[3].content+"",i;return{c(){e=C("h1"),i=ae(n),M(e,"class","text-3xl text-gray-300 text-center font-bold")},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[0]&1&&n!==(n=s[3].content+"")&&ke(i,n)},d(s){s&&P(e)}}}function G3(t){let e,n=t[3].content+"",i;return{c(){e=C("h2"),i=ae(n),M(e,"class","text-2xl text-gray-300 font-bold text-center")},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[0]&1&&n!==(n=s[3].content+"")&&ke(i,n)},d(s){s&&P(e)}}}function W3(t){let e,n,i;function s(){t[19].call(e,t[28],t[29])}return{c(){e=C("p"),M(e,"class","text-justify text-lg"),M(e,"contenteditable","false"),t[3].content===void 0&&qr(s)},m(r,o){R(r,e,o),t[3].content!==void 0&&(e.innerHTML=t[3].content),n||(i=$e(e,"input",s),n=!0)},p(r,o){t=r,o[0]&1&&t[3].content!==e.innerHTML&&(e.innerHTML=t[3].content)},d(r){r&&P(e),n=!1,i()}}}function j3(t){let e,n,i=t[3].cubes||[],s=[];for(let o=0;o<i.length;o+=1)s[o]=Y3(H3(t,i,o));const r=o=>H(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=ts()},m(o,a){for(let l=0;l<s.length;l+=1)s[l].m(o,a);R(o,e,a),n=!0},p(o,a){if(a[0]&1){i=o[3].cubes||[];let l;for(l=0;l<i.length;l+=1){const c=H3(o,i,l);s[l]?(s[l].p(c,a),I(s[l],1)):(s[l]=Y3(c),s[l].c(),I(s[l],1),s[l].m(e.parentNode,e))}for(ot(),l=i.length;l<s.length;l+=1)r(l);at()}},i(o){if(!n){for(let a=0;a<i.length;a+=1)I(s[a]);n=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)H(s[a]);n=!1},d(o){en(s,o),o&&P(e)}}}function t$(t){let e,n;return e=new $i({props:{text:t[30].text,class:"cursor-help",$$slots:{default:[i$]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&1&&(r.text=i[30].text),s[1]&4&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function n$(t){let e,n;return{c(){e=C("img"),M(e,"class","puzzle-img-mini"),wi(e.src,n=t[30].img||"")||M(e,"src",n),M(e,"alt","")},m(i,s){R(i,e,s)},p(i,s){s[0]&1&&!wi(e.src,n=i[30].img||"")&&M(e,"src",n)},i:qe,o:qe,d(i){i&&P(e)}}}function i$(t){let e,n,i;return e=new TL({props:{width:"1.5rem",height:"1.5rem"}}),{c(){ue(e.$$.fragment),n=O()},m(s,r){le(e,s,r),R(s,n,r),i=!0},p:qe,i(s){i||(I(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){ce(e,s),s&&P(n)}}}function Y3(t){let e,n,i,s;const r=[n$,t$],o=[];function a(l,c){return l[30].type!="arrow"?0:1}return e=a(t),n=o[e]=r[e](t),{c(){n.c(),i=ts()},m(l,c){o[e].m(l,c),R(l,i,c),s=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(ot(),H(o[u],1,1,()=>{o[u]=null}),at(),n=o[e],n?n.p(l,c):(n=o[e]=r[e](l),n.c()),I(n,1),n.m(i.parentNode,i))},i(l){s||(I(n),s=!0)},o(l){H(n),s=!1},d(l){o[e].d(l),l&&P(i)}}}function q3(t){let e,n,i,s,r,o,a,l=kL,c=t[3].type==="title"&&V3(t),u=t[3].type==="subtitle"&&G3(t),f=t[3].type==="text"&&W3(t),h=t[3].type==="cubes"&&j3(t);return{c(){e=C("div"),n=O(),c&&c.c(),i=O(),u&&u.c(),s=O(),f&&f.c(),r=O(),h&&h.c(),o=O(),M(e,"class","container-mini bg-white bg-opacity-10 rounded-md py-4 relative svelte-1hkv0gz"),pt(e,"cube",t[3].type==="cubes")},m(d,p){R(d,e,p),E(e,n),c&&c.m(e,null),E(e,i),u&&u.m(e,null),E(e,s),f&&f.m(e,null),E(e,r),h&&h.m(e,null),E(e,o),a=!0},p(d,p){d[3].type==="title"?c?c.p(d,p):(c=V3(d),c.c(),c.m(e,i)):c&&(c.d(1),c=null),d[3].type==="subtitle"?u?u.p(d,p):(u=G3(d),u.c(),u.m(e,s)):u&&(u.d(1),u=null),d[3].type==="text"?f?f.p(d,p):(f=W3(d),f.c(),f.m(e,r)):f&&(f.d(1),f=null),d[3].type==="cubes"?h?(h.p(d,p),p[0]&1&&I(h,1)):(h=j3(d),h.c(),I(h,1),h.m(e,o)):h&&(ot(),H(h,1,1,()=>{h=null}),at()),(!a||p[0]&1)&&pt(e,"cube",d[3].type==="cubes")},i(d){a||(I(l),I(h),a=!0)},o(d){H(l),H(h),a=!1},d(d){d&&P(e),c&&c.d(),u&&u.d(),f&&f.d(),h&&h.d()}}}function s$(t){let e,n,i;function s(o){t[20](o)}let r={placeholder:"Title..."};return t[3].content.content!==void 0&&(r.value=t[3].content.content),e=new hi({props:r}),vt.push(()=>Vt(e,"value",s)),{c(){ue(e.$$.fragment)},m(o,a){le(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&8&&(n=!0,l.value=o[3].content.content,Ht(()=>n=!1)),e.$set(l)},i(o){i||(I(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){ce(e,o)}}}function r$(t){let e,n,i;function s(o){t[21](o)}let r={placeholder:"Subtitle..."};return t[3].content.content!==void 0&&(r.value=t[3].content.content),e=new hi({props:r}),vt.push(()=>Vt(e,"value",s)),{c(){ue(e.$$.fragment)},m(o,a){le(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&8&&(n=!0,l.value=o[3].content.content,Ht(()=>n=!1)),e.$set(l)},i(o){i||(I(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){ce(e,o)}}}function o$(t){let e,n,i;function s(o){t[22](o)}let r={placeholder:"Text..."};return t[3].content.content!==void 0&&(r.value=t[3].content.content),e=new Rh({props:r}),vt.push(()=>Vt(e,"value",s)),{c(){ue(e.$$.fragment)},m(o,a){le(e,o,a),i=!0},p(o,a){const l={};!n&&a[0]&8&&(n=!0,l.value=o[3].content.content,Ht(()=>n=!1)),e.$set(l)},i(o){i||(I(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){ce(e,o)}}}function a$(t){let e;return{c(){e=ae("Add cube")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function l$(t){let e;return{c(){e=ae("Add arrow")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function c$(t){let e,n,i,s,r,o,a;return n=new Ct({props:{$$slots:{default:[a$]},$$scope:{ctx:t}}}),s=new Ct({props:{$$slots:{default:[l$]},$$scope:{ctx:t}}}),{c(){e=C("section"),ue(n.$$.fragment),i=O(),ue(s.$$.fragment),r=O(),o=C("section"),o.textContent="Cubes goes here",M(e,"class","flex mt-4"),M(o,"class","flex mt-4")},m(l,c){R(l,e,c),le(n,e,null),E(e,i),le(s,e,null),R(l,r,c),R(l,o,c),a=!0},p(l,c){const u={};c[1]&4&&(u.$$scope={dirty:c,ctx:l}),n.$set(u);const f={};c[1]&4&&(f.$$scope={dirty:c,ctx:l}),s.$set(f)},i(l){a||(I(n.$$.fragment,l),I(s.$$.fragment,l),a=!0)},o(l){H(n.$$.fragment,l),H(s.$$.fragment,l),a=!1},d(l){l&&P(e),ce(n),ce(s),l&&P(r),l&&P(o)}}}function u$(t){let e,n,i,s,r,o,a,l;return e=new rl({props:{name:"Title",$$slots:{default:[s$]},$$scope:{ctx:t}}}),i=new rl({props:{name:"Subtitle",$$slots:{default:[r$]},$$scope:{ctx:t}}}),r=new rl({props:{name:"Text",$$slots:{default:[o$]},$$scope:{ctx:t}}}),a=new rl({props:{name:"Cubes",$$slots:{default:[c$]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment),n=O(),ue(i.$$.fragment),s=O(),ue(r.$$.fragment),o=O(),ue(a.$$.fragment)},m(c,u){le(e,c,u),R(c,n,u),le(i,c,u),R(c,s,u),le(r,c,u),R(c,o,u),le(a,c,u),l=!0},p(c,u){const f={};u[0]&8|u[1]&4&&(f.$$scope={dirty:u,ctx:c}),e.$set(f);const h={};u[0]&8|u[1]&4&&(h.$$scope={dirty:u,ctx:c}),i.$set(h);const d={};u[0]&8|u[1]&4&&(d.$$scope={dirty:u,ctx:c}),r.$set(d);const p={};u[1]&4&&(p.$$scope={dirty:u,ctx:c}),a.$set(p)},i(c){l||(I(e.$$.fragment,c),I(i.$$.fragment,c),I(r.$$.fragment,c),I(a.$$.fragment,c),l=!0)},o(c){H(e.$$.fragment,c),H(i.$$.fragment,c),H(r.$$.fragment,c),H(a.$$.fragment,c),l=!1},d(c){ce(e,c),c&&P(n),ce(i,c),c&&P(s),ce(r,c),c&&P(o),ce(a,c)}}}function f$(t){let e,n;return e=new ok({props:{$$slots:{default:[u$]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&8|s[1]&4&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function h$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p=kL;const m=[t[4]];let _={};for(let y=0;y<m.length;y+=1)_=Io(_,m[y]);a=new TL({props:_});let b=t[0],g=[];for(let y=0;y<b.length;y+=1)g[y]=q3(U3(t,b,y));const x=y=>H(g[y],1,1,()=>{g[y]=null});return u=new La({props:{show:t[1],onClose:t[5],$$slots:{default:[f$]},$$scope:{ctx:t}}}),{c(){e=C("div"),n=C("span"),i=O(),s=O(),r=C("div"),o=C("a"),ue(a.$$.fragment),l=O();for(let y=0;y<g.length;y+=1)g[y].c();c=O(),ue(u.$$.fragment),M(n,"id","TOP"),M(n,"class","opacity-0 pointer-events-none"),M(o,"href","#TOP"),M(r,"class","fixed -bottom-16 right-4 w-10 h-10 rounded-full bg-purple-600 text-gray-300 z-10 -rotate-90 shadow-lg flex items-center justify-center to-top transition-all duration-200 svelte-1hkv0gz"),pt(r,"visible",t[2]),M(e,"class","main-container container-mini text-gray-400 scroll-smooth mx-auto svelte-1hkv0gz")},m(y,v){R(y,e,v),E(e,n),E(e,i),E(e,s),E(e,r),E(r,o),le(a,o,null),E(e,l);for(let w=0;w<g.length;w+=1)g[w].m(e,null);R(y,c,v),le(u,y,v),f=!0,h||(d=$e(e,"scroll",t[10]),h=!0)},p(y,v){const w=v[0]&16?Ym(m,[Np(y[4])]):{};if(a.$set(w),(!f||v[0]&4)&&pt(r,"visible",y[2]),v[0]&401){b=y[0];let T;for(T=0;T<b.length;T+=1){const k=U3(y,b,T);g[T]?(g[T].p(k,v),I(g[T],1)):(g[T]=q3(k),g[T].c(),I(g[T],1),g[T].m(e,null))}for(ot(),T=b.length;T<g.length;T+=1)x(T);at()}const S={};v[0]&2&&(S.show=y[1]),v[0]&8|v[1]&4&&(S.$$scope={dirty:v,ctx:y}),u.$set(S)},i(y){if(!f){I(p),I(a.$$.fragment,y);for(let v=0;v<b.length;v+=1)I(g[v]);I(u.$$.fragment,y),f=!0}},o(y){H(p),H(a.$$.fragment,y),g=g.filter(Boolean);for(let v=0;v<g.length;v+=1)H(g[v]);H(u.$$.fragment,y),f=!1},d(y){y&&P(e),ce(a),en(g,y),y&&P(c),ce(u,y),h=!1,d()}}}let kL=!1;function d$(t,e,n){let{location:i,puzzle:s,tutorial:r}=e;const o=Ds.getInstance(),a={width:"1.5rem",height:"1.5rem"};let l=[],c=null,u={tab:0,content:{type:"cubes",content:"",cubes:[]}},f=!1,h=0,d=!1,p;function m(N){n(0,l.length=0,l);let $=[];for(let W=0,j=N.length;W<j;W+=1)switch(N[W].type||N[W].t){case"tl":case"title":case"s":case"tx":case"subtitle":case"text":{l.push({type:N[W].type||N[W].t,content:(N[W].content||N[W].c).replace(/\n/g,"<br>"),cubes:[]});break}case"c":case"cubes":{let J=[],se=N[W].cubes||[];for(let ne=0,K=se.length;ne<K;ne+=1){let q=se[ne];switch(q.type||q.t){case"$":{if($.length>0){let te=$[$.length-1],re=q.mode?ai[q.mode]:te.mode,Oe=te.clone(re);Oe.move(q.scramble),Oe.p.rotation=q.rotation||Oe.p.rotation,Oe.rotation=Oe.p.rotation,J.push(Oe),$.push(Oe)}break}case"arrow":{J.push({type:"arrow",text:q.text||q.tt});break}default:{let te=Ns.fromSequence(q.scramble||q.s||"",{type:q.type||q.t,order:Array.isArray(q.order)?q.order:[q.order],mode:typeof q.mode=="number"?q.mode:ai[q.mode],tips:q.tips||[],view:q.view});te.rotation=q.rotation||q.r||te.rotation,J.push(te),$.push(te)}}}l.push({type:"cubes",cubes:J});break}}Ol($,150,!1,!0).then(W=>{let j=W.subscribe(J=>{J!=="__initial__"&&J===null&&(n(0,l),j())})})}function _(N){if(N){N.content.type=["title","subtitle","text","cubes"][N.tab];let $=c==null?void 0:c.content.find(W=>W.type==="title");N.content.type==="cubes"&&N.content.cubes.forEach(W=>{W.type!="arrow"&&(W.rotation.x=W.rotation.x*Math.PI/180,W.rotation.y=W.rotation.y*Math.PI/180,W.rotation.z=W.rotation.z*Math.PI/180)}),N.tab===0&&$||(c==null||c.content.splice(h,0,N.content),m(c==null?void 0:c.content))}}function b(N){n(1,f=!0),h=N,n(3,u={tab:0,content:{type:"title",content:"",cubes:[]}})}function g(N,$){let W=l[N];l.splice(N,1,l[$]),l.splice($,1,W),n(0,l)}function x(N){l.splice(N,1),n(0,l)}function y(){c&&o.addTutorial(c)}function v(N){n(2,d=N.target.scrollTop>100)}ji(()=>{p=o.tutSub.subscribe(N=>{if(!N)return;const $=N[0],W=N[1],j=ak(i.search).get("id");if($==="get-tutorials"){let J=W.find(se=>se._id===j);J&&(c=J,c.content=c.content||[],m(c.content))}}),o.getTutorials()}),Es(()=>{p()});const w=()=>b(0),S=()=>y(),T=N=>g(N,N-1),k=N=>g(N,N+1),A=N=>x(N);function L(N,$){N[$].content=this.innerHTML,n(0,l)}function D(N){t.$$.not_equal(u.content.content,N)&&(u.content.content=N,n(3,u))}function B(N){t.$$.not_equal(u.content.content,N)&&(u.content.content=N,n(3,u))}function U(N){t.$$.not_equal(u.content.content,N)&&(u.content.content=N,n(3,u))}return t.$$set=N=>{"location"in N&&n(11,i=N.location),"puzzle"in N&&n(12,s=N.puzzle),"tutorial"in N&&n(13,r=N.tutorial)},[l,f,d,u,a,_,b,g,x,y,v,i,s,r,w,S,T,k,A,L,D,B,U]}class p$ extends xt{constructor(e){super(),wt(this,e,d$,h$,yt,{location:11,puzzle:12,tutorial:13},null,[-1,-1])}}function X3(t,e,n){const i=t.slice();return i[88]=e[n],i}function Z3(t,e,n){const i=t.slice();return i[72]=e[n],i}function J3(t,e,n){const i=t.slice();return i[75]=e[n],i[77]=n,i}function K3(t,e,n){const i=t.slice();return i[60]=e[n],i}function $3(t,e,n){const i=t.slice();return i[80]=e[n],i[81]=e,i[82]=n,i}function Q3(t,e,n){const i=t.slice();return i[83]=e[n],i}function eS(t,e,n){const i=t.slice();return i[86]=e[n],i[77]=n,i}function tS(t,e,n){const i=t.slice();return i[60]=e[n],i[61]=e,i[62]=n,i}function nS(t,e,n){const i=t.slice();return i[63]=e[n],i[65]=n,i}function iS(t,e,n){const i=t.slice();return i[66]=e[n],i}function sS(t,e,n){const i=t.slice();return i[69]=e[n],i[70]=e,i[71]=n,i}function m$(t){let e,n,i,s,r,o,a;s=new Ct({props:{class:"bg-green-800 text-gray-300 mx-auto my-4",$$slots:{default:[_$]},$$scope:{ctx:t}}}),s.$on("click",t[10]);let l=t[6],c=[];for(let u=0;u<l.length;u+=1)c[u]=rS(X3(t,l,u));return{c(){e=C("article"),n=C("h1"),n.textContent="Seleccione el evento",i=O(),ue(s.$$.fragment),r=O(),o=C("ul");for(let u=0;u<c.length;u+=1)c[u].c();M(n,"class","text-3xl text-center font-bold mt-2 text-gray-300"),M(o,"class","max-w-lg grid m-auto bg-white bg-opacity-10 p-4 mt-4 rounded-md"),M(e,"class","text-gray-400 bg-white bg-opacity-10 py-8 rounded-md max-w-5xl mx-auto")},m(u,f){R(u,e,f),E(e,n),E(e,i),le(s,e,null),E(e,r),E(e,o);for(let h=0;h<c.length;h+=1)c[h].m(o,null);a=!0},p(u,f){const h={};if(f[2]&536870912&&(h.$$scope={dirty:f,ctx:u}),s.$set(h),f[0]&65632){l=u[6];let d;for(d=0;d<l.length;d+=1){const p=X3(u,l,d);c[d]?c[d].p(p,f):(c[d]=rS(p),c[d].c(),c[d].m(o,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}},i(u){a||(I(s.$$.fragment,u),a=!0)},o(u){H(s.$$.fragment,u),a=!1},d(u){u&&P(e),ce(s),en(c,u)}}}function g$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p;const m=[v$,b$],_=[];function b(v,w){return v[5].status==="editing"?0:1}n=b(t),i=_[n]=m[n](t),o=new Ct({props:{class:"bg-purple-800 text-gray-300",$$slots:{default:[P$]},$$scope:{ctx:t}}}),o.$on("click",t[40]);const g=[I$,R$],x=[];function y(v,w){return v[5].status==="editing"?0:1}return l=y(t),c=x[l]=g[l](t),f=new Ct({props:{class:"bg-green-800 text-gray-300",$$slots:{default:[N$]},$$scope:{ctx:t}}}),f.$on("click",t[21]),d=new Ct({props:{class:"bg-red-800 text-gray-300",$$slots:{default:[B$]},$$scope:{ctx:t}}}),d.$on("click",t[41]),{c(){e=C("article"),i.c(),s=O(),r=C("div"),ue(o.$$.fragment),a=O(),c.c(),u=O(),ue(f.$$.fragment),h=O(),ue(d.$$.fragment),M(r,"class","flex gap-4 mx-auto py-4 items-center justify-center sticky bg-gray-500 bg-opacity-80 bottom-0"),M(e,"class","text-gray-400 bg-white bg-opacity-10 py-8 rounded-md max-w-5xl mx-auto")},m(v,w){R(v,e,w),_[n].m(e,null),E(e,s),E(e,r),le(o,r,null),E(r,a),x[l].m(r,null),E(r,u),le(f,r,null),E(r,h),le(d,r,null),p=!0},p(v,w){let S=n;n=b(v),n===S?_[n].p(v,w):(ot(),H(_[S],1,1,()=>{_[S]=null}),at(),i=_[n],i?i.p(v,w):(i=_[n]=m[n](v),i.c()),I(i,1),i.m(e,s));const T={};w[0]&32|w[2]&536870912&&(T.$$scope={dirty:w,ctx:v}),o.$set(T);let k=l;l=y(v),l===k?x[l].p(v,w):(ot(),H(x[k],1,1,()=>{x[k]=null}),at(),c=x[l],c?c.p(v,w):(c=x[l]=g[l](v),c.c()),I(c,1),c.m(r,u));const A={};w[2]&536870912&&(A.$$scope={dirty:w,ctx:v}),f.$set(A);const L={};w[2]&536870912&&(L.$$scope={dirty:w,ctx:v}),d.$set(L)},i(v){p||(I(i),I(o.$$.fragment,v),I(c),I(f.$$.fragment,v),I(d.$$.fragment,v),p=!0)},o(v){H(i),H(o.$$.fragment,v),H(c),H(f.$$.fragment,v),H(d.$$.fragment,v),p=!1},d(v){v&&P(e),_[n].d(),ce(o),x[l].d(),ce(f),ce(d)}}}function _$(t){let e;return{c(){e=ae("Crear evento")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function rS(t){let e,n=t[88].name+"",i,s,r=t[88].place+"",o,a,l,c;function u(){return t[42](t[88])}return{c(){e=C("li"),i=ae(n),s=ae(" - "),o=ae(r),a=O(),M(e,"class","p-2 rounded-md cursor-pointer transition-all duration-200 mb-2 bg-white bg-opacity-10 text-gray-300 hover:bg-blue-300 hover:bg-opacity-50 hover:shadow-md hover:text-black")},m(f,h){R(f,e,h),E(e,i),E(e,s),E(e,o),E(e,a),l||(c=$e(e,"click",u),l=!0)},p(f,h){t=f,h[0]&64&&n!==(n=t[88].name+"")&&ke(i,n),h[0]&64&&r!==(r=t[88].place+"")&&ke(o,r)},d(f){f&&P(e),l=!1,c()}}}function b$(t){let e,n=t[5].name+"",i,s,r,o,a,l,c,u,f,h=t[1],d=[];for(let b=0;b<h.length;b+=1)d[b]=uS($3(t,h,b));const p=b=>H(d[b],1,1,()=>{d[b]=null});let m=t[0],_=[];for(let b=0;b<m.length;b+=1)_[b]=dS(Z3(t,m,b));return{c(){e=C("h1"),i=ae(n),s=O(),r=C("section"),o=C("h2"),o.textContent="Desempe\xF1o individual",a=O();for(let b=0;b<d.length;b+=1)d[b].c();l=O(),c=C("h2"),c.textContent="Desempe\xF1o	por categor\xEDas",u=O();for(let b=0;b<_.length;b+=1)_[b].c();M(e,"class","text-3xl text-center font-bold mb-6 mt-2 text-gray-300"),M(o,"class","text-2xl text-gray-300 font-bold text-center border-t border-gray-500 py-4"),M(c,"class","text-2xl text-gray-300 font-bold text-center border-t border-gray-500 py-4 mt-6")},m(b,g){R(b,e,g),E(e,i),R(b,s,g),R(b,r,g),E(r,o),E(r,a);for(let x=0;x<d.length;x+=1)d[x].m(r,null);E(r,l),E(r,c),E(r,u);for(let x=0;x<_.length;x+=1)_[x].m(r,null);f=!0},p(b,g){if((!f||g[0]&32)&&n!==(n=b[5].name+"")&&ke(i,n),g[0]&33306){h=b[1];let x;for(x=0;x<h.length;x+=1){const y=$3(b,h,x);d[x]?(d[x].p(y,g),I(d[x],1)):(d[x]=uS(y),d[x].c(),I(d[x],1),d[x].m(r,l))}for(ot(),x=h.length;x<d.length;x+=1)p(x);at()}if(g[0]&16897){m=b[0];let x;for(x=0;x<m.length;x+=1){const y=Z3(b,m,x);_[x]?_[x].p(y,g):(_[x]=dS(y),_[x].c(),_[x].m(r,null))}for(;x<_.length;x+=1)_[x].d(1);_.length=m.length}},i(b){if(!f){for(let g=0;g<h.length;g+=1)I(d[g]);f=!0}},o(b){d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)H(d[g]);f=!1},d(b){b&&P(e),b&&P(s),b&&P(r),en(d,b),en(_,b)}}}function v$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A,L,D,B,U,N,$,W,j,J,se=Object.keys(t[5].rounds).length,ne,K,q,te,re;function Oe(fe){t[22](fe)}let Ee={};t[5].name!==void 0&&(Ee.value=t[5].name),l=new hi({props:Ee}),vt.push(()=>Vt(l,"value",Oe));function ye(fe){t[23](fe)}let xe={};t[5].place!==void 0&&(xe.value=t[5].place),d=new hi({props:xe}),vt.push(()=>Vt(d,"value",ye));function Ae(fe){t[24](fe)}let De={type:"date"};t[5].date!==void 0&&(De.value=t[5].date),g=new hi({props:De}),vt.push(()=>Vt(g,"value",Ae));function de(fe){t[25](fe)}let me={type:"date"};t[5].inscriptionI!==void 0&&(me.value=t[5].inscriptionI),S=new hi({props:me}),vt.push(()=>Vt(S,"value",de));function We(fe){t[26](fe)}let Ue={type:"date"};t[5].inscriptionF!==void 0&&(Ue.value=t[5].inscriptionF),D=new hi({props:Ue}),vt.push(()=>Vt(D,"value",We));function be(fe){t[27](fe)}let F={type:"number"};t[5].inscriptionCost!==void 0&&(F.value=t[5].inscriptionCost),W=new hi({props:F}),vt.push(()=>Vt(W,"value",be));let V=se&&pS(t),_e=t[5].contestants,oe=[];for(let fe=0;fe<_e.length;fe+=1)oe[fe]=bS(tS(t,_e,fe));const X=fe=>H(oe[fe],1,1,()=>{oe[fe]=null});return{c(){e=C("h1"),e.textContent="Organizador de Eventos",n=O(),i=C("h2"),i.textContent="Datos generales",s=O(),r=C("section"),o=C("span"),o.textContent="Nombre del evento",a=O(),ue(l.$$.fragment),u=O(),f=C("span"),f.textContent="Lugar",h=O(),ue(d.$$.fragment),m=O(),_=C("span"),_.textContent="Fecha",b=O(),ue(g.$$.fragment),y=O(),v=C("span"),v.textContent="Inicio de la inscripci\xF3n",w=O(),ue(S.$$.fragment),k=O(),A=C("span"),A.textContent="Fin de la inscripci\xF3n",L=O(),ue(D.$$.fragment),U=O(),N=C("span"),N.textContent="Costo de inscripci\xF3n",$=O(),ue(W.$$.fragment),J=O(),V&&V.c(),ne=O(),K=C("section"),q=C("h2"),q.textContent="Datos de los competidores",te=O();for(let fe=0;fe<oe.length;fe+=1)oe[fe].c();M(e,"class","text-3xl text-center font-bold mt-2 text-gray-300"),M(i,"class","text-2xl text-center font-bold mb-6 mt-2 text-gray-300"),M(o,"class","flex mr-2 items-center justify-end"),M(f,"class","flex mr-2 items-center justify-end"),M(_,"class","flex mr-2 items-center justify-end"),M(v,"class","flex mr-2 items-center justify-end"),M(A,"class","flex mr-2 items-center justify-end"),M(N,"class","flex mr-2 items-center justify-end"),M(r,"class","max-w-3xl mx-auto svelte-14tnh9"),M(r,"id","event-data"),M(q,"class","text-2xl text-center font-bold mb-6 mt-2 text-gray-300")},m(fe,Le){R(fe,e,Le),R(fe,n,Le),R(fe,i,Le),R(fe,s,Le),R(fe,r,Le),E(r,o),E(r,a),le(l,r,null),E(r,u),E(r,f),E(r,h),le(d,r,null),E(r,m),E(r,_),E(r,b),le(g,r,null),E(r,y),E(r,v),E(r,w),le(S,r,null),E(r,k),E(r,A),E(r,L),le(D,r,null),E(r,U),E(r,N),E(r,$),le(W,r,null),R(fe,J,Le),V&&V.m(fe,Le),R(fe,ne,Le),R(fe,K,Le),E(K,q),E(K,te);for(let Pe=0;Pe<oe.length;Pe+=1)oe[Pe].m(K,null);re=!0},p(fe,Le){const Pe={};!c&&Le[0]&32&&(c=!0,Pe.value=fe[5].name,Ht(()=>c=!1)),l.$set(Pe);const Ye={};!p&&Le[0]&32&&(p=!0,Ye.value=fe[5].place,Ht(()=>p=!1)),d.$set(Ye);const Ke={};!x&&Le[0]&32&&(x=!0,Ke.value=fe[5].date,Ht(()=>x=!1)),g.$set(Ke);const Z={};!T&&Le[0]&32&&(T=!0,Z.value=fe[5].inscriptionI,Ht(()=>T=!1)),S.$set(Z);const ve={};!B&&Le[0]&32&&(B=!0,ve.value=fe[5].inscriptionF,Ht(()=>B=!1)),D.$set(ve);const Re={};if(!j&&Le[0]&32&&(j=!0,Re.value=fe[5].inscriptionCost,Ht(()=>j=!1)),W.$set(Re),Le[0]&32&&(se=Object.keys(fe[5].rounds).length),se?V?(V.p(fe,Le),Le[0]&32&&I(V,1)):(V=pS(fe),V.c(),I(V,1),V.m(ne.parentNode,ne)):V&&(ot(),H(V,1,1,()=>{V=null}),at()),Le[0]&12576){_e=fe[5].contestants;let He;for(He=0;He<_e.length;He+=1){const Ze=tS(fe,_e,He);oe[He]?(oe[He].p(Ze,Le),I(oe[He],1)):(oe[He]=bS(Ze),oe[He].c(),I(oe[He],1),oe[He].m(K,null))}for(ot(),He=_e.length;He<oe.length;He+=1)X(He);at()}},i(fe){if(!re){I(l.$$.fragment,fe),I(d.$$.fragment,fe),I(g.$$.fragment,fe),I(S.$$.fragment,fe),I(D.$$.fragment,fe),I(W.$$.fragment,fe),I(V);for(let Le=0;Le<_e.length;Le+=1)I(oe[Le]);re=!0}},o(fe){H(l.$$.fragment,fe),H(d.$$.fragment,fe),H(g.$$.fragment,fe),H(S.$$.fragment,fe),H(D.$$.fragment,fe),H(W.$$.fragment,fe),H(V),oe=oe.filter(Boolean);for(let Le=0;Le<oe.length;Le+=1)H(oe[Le]);re=!1},d(fe){fe&&P(e),fe&&P(n),fe&&P(i),fe&&P(s),fe&&P(r),ce(l),ce(d),ce(g),ce(S),ce(D),ce(W),fe&&P(J),V&&V.d(fe),fe&&P(ne),fe&&P(K),en(oe,fe)}}}function y$(t){let e,n;return e=new kb({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function w$(t){let e,n;return e=new Mb({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function x$(t){let e,n,i,s,r,o;const a=[w$,y$],l=[];function c(f,h){return f[80].cnt.expanded?0:1}n=c(t),i=l[n]=a[n](t);function u(){return t[38](t[80],t[81],t[82])}return{c(){e=C("div"),i.c(),M(e,"class","w-8 h-8 rounded-full grid place-items-center transition-all duration-200 bg-gray-600 hover:bg-gray-600 hover:text-gray-200")},m(f,h){R(f,e,h),l[n].m(e,null),s=!0,r||(o=$e(e,"click",u),r=!0)},p(f,h){t=f;let d=n;n=c(t),n!==d&&(ot(),H(l[d],1,1,()=>{l[d]=null}),at(),i=l[n],i||(i=l[n]=a[n](t),i.c()),I(i,1),i.m(e,null))},i(f){s||(I(i),s=!0)},o(f){H(i),s=!1},d(f){f&&P(e),l[n].d(),r=!1,o()}}}function oS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w=t[80].results,S=[];for(let T=0;T<w.length;T+=1)S[T]=cS(Q3(t,w,T));return{c(){e=C("div"),n=C("span"),n.textContent="Categor\xEDa",i=O(),s=C("span"),s.textContent="Ronda",r=O(),o=C("span"),o.textContent="T1",a=O(),l=C("span"),l.textContent="T2",c=O(),u=C("span"),u.textContent="T3",f=O(),h=C("span"),h.textContent="T4",d=O(),p=C("span"),p.textContent="T5",m=O(),_=C("span"),_.textContent="Ao5",b=O(),g=C("span"),g.textContent="Mejor",x=O(),y=C("span"),y.textContent="Peor",v=O();for(let T=0;T<S.length;T+=1)S[T].c();M(n,"class","font-bold text-lg"),M(s,"class","font-bold text-lg"),M(o,"class","font-bold text-lg"),M(l,"class","font-bold text-lg"),M(u,"class","font-bold text-lg"),M(h,"class","font-bold text-lg"),M(p,"class","font-bold text-lg"),M(_,"class","font-bold text-lg"),M(g,"class","font-bold text-lg"),M(y,"class","font-bold text-lg"),M(e,"class","result-table text-gray-300 mt-4 border-t border-gray-500 pt-2 overflow-scroll svelte-14tnh9")},m(T,k){R(T,e,k),E(e,n),E(e,i),E(e,s),E(e,r),E(e,o),E(e,a),E(e,l),E(e,c),E(e,u),E(e,f),E(e,h),E(e,d),E(e,p),E(e,m),E(e,_),E(e,b),E(e,g),E(e,x),E(e,y),E(e,v);for(let A=0;A<S.length;A+=1)S[A].m(e,null)},p(T,k){if(k[0]&33306){w=T[80].results;let A;for(A=0;A<w.length;A+=1){const L=Q3(T,w,A);S[A]?S[A].p(L,k):(S[A]=cS(L),S[A].c(),S[A].m(e,null))}for(;A<S.length;A+=1)S[A].d(1);S.length=w.length}},d(T){T&&P(e),en(S,T)}}}function aS(t){let e;return{c(){e=C("span"),e.textContent="+2",M(e,"class","font-small")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function lS(t){let e,n,i=(t[77]<5?t[15](t[86]).time:t[86].time)+"",s,r,o,a,l,c=t[77]!=5&&t[86].p2&&aS();function u(){return t[39](t[86])}return{c(){e=C("div"),n=C("span"),s=ae(i),r=O(),o=C("div"),c&&c.c(),M(n,"class","time font-bold "+(t[77]===5?"text-blue-400":t[77]===6?"text-green-400":t[77]===7?"text-orange-400":"")),M(o,"class","absolute right-1 top-0 h-full flex flex-col items-center justify-evenly"),M(e,"class",hs(t[77]<5?"select-none cursor-pointer hover:text-yellow-100 transition-all duration-200":"pointer-events-none")+" svelte-14tnh9")},m(f,h){R(f,e,h),E(e,n),E(n,s),E(e,r),E(e,o),c&&c.m(o,null),a||(l=$e(e,"click",u),a=!0)},p(f,h){t=f,h[0]&2&&i!==(i=(t[77]<5?t[15](t[86]).time:t[86].time)+"")&&ke(s,i),t[77]!=5&&t[86].p2?c||(c=aS(),c.c(),c.m(o,null)):c&&(c.d(1),c=null)},d(f){f&&P(e),c&&c.d(),a=!1,l()}}}function cS(t){let e,n,i,s=(t[9].get(t[83].category)||[])[0]+"",r,o,a,l=t[83].round+"",c,u,f,h=t[83].times,d=[];for(let p=0;p<h.length;p+=1)d[p]=lS(eS(t,h,p));return{c(){e=C("hr"),n=O(),i=C("span"),r=ae(s),o=O(),a=C("span"),c=ae(l),u=O();for(let p=0;p<d.length;p+=1)d[p].c();f=ts(),M(e,"class","col-span-full border-0 border-t border-t-gray-400 h-0 w-full"),M(i,"class","text-lg text-gray-300 font-bold"),M(a,"class","text-lg text-gray-300 font-bold")},m(p,m){R(p,e,m),R(p,n,m),R(p,i,m),E(i,r),R(p,o,m),R(p,a,m),E(a,c),R(p,u,m);for(let _=0;_<d.length;_+=1)d[_].m(p,m);R(p,f,m)},p(p,m){if(m[0]&2&&s!==(s=(p[9].get(p[83].category)||[])[0]+"")&&ke(r,s),m[0]&2&&l!==(l=p[83].round+"")&&ke(c,l),m[0]&32794){h=p[83].times;let _;for(_=0;_<h.length;_+=1){const b=eS(p,h,_);d[_]?d[_].p(b,m):(d[_]=lS(b),d[_].c(),d[_].m(f.parentNode,f))}for(;_<d.length;_+=1)d[_].d(1);d.length=h.length}},d(p){p&&P(e),p&&P(n),p&&P(i),p&&P(o),p&&P(a),p&&P(u),en(d,p),p&&P(f)}}}function uS(t){let e,n,i=t[80].contestant+"",s,r,o,a,l,c;a=new $i({props:{class:"text-gray-400 cursor-pointer",text:t[80].cnt.expanded?"Contraer":"Expandir",position:"top",$$slots:{default:[x$]},$$scope:{ctx:t}}});let u=t[80].cnt.expanded&&oS(t);return{c(){e=C("div"),n=C("h2"),s=ae(i),r=O(),o=C("div"),ue(a.$$.fragment),l=O(),u&&u.c(),M(n,"class","text-2xl text-green-400 font-bold"),M(o,"class","options absolute right-4 top-2 flex"),M(e,"class","bg-white bg-opacity-10 rounded-md p-4 shadow-sm mb-8 mx-4 relative")},m(f,h){R(f,e,h),E(e,n),E(n,s),E(e,r),E(e,o),le(a,o,null),E(e,l),u&&u.m(e,null),c=!0},p(f,h){(!c||h[0]&2)&&i!==(i=f[80].contestant+"")&&ke(s,i);const d={};h[0]&2&&(d.text=f[80].cnt.expanded?"Contraer":"Expandir"),h[0]&2|h[2]&536870912&&(d.$$scope={dirty:h,ctx:f}),a.$set(d),f[80].cnt.expanded?u?u.p(f,h):(u=oS(f),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i(f){c||(I(a.$$.fragment,f),c=!0)},o(f){H(a.$$.fragment,f),c=!1},d(f){f&&P(e),ce(a),u&&u.d()}}}function fS(t){let e,n=t[60].name+"",i,s,r,o=t[60].Ao5+"",a,l,c,u=t[60].best+"",f;return{c(){e=C("span"),i=ae(n),s=O(),r=C("span"),a=ae(o),l=O(),c=C("span"),f=ae(u),M(e,"class","text-lg")},m(h,d){R(h,e,d),E(e,i),R(h,s,d),R(h,r,d),E(r,a),R(h,l,d),R(h,c,d),E(c,f)},p(h,d){d[0]&1&&n!==(n=h[60].name+"")&&ke(i,n),d[0]&1&&o!==(o=h[60].Ao5+"")&&ke(a,o),d[0]&1&&u!==(u=h[60].best+"")&&ke(f,u)},d(h){h&&P(e),h&&P(s),h&&P(r),h&&P(l),h&&P(c)}}}function hS(t){let e,n,i=t[77]+1+"",s,r,o,a,l,c,u,f,h,d=t[75],p=[];for(let m=0;m<d.length;m+=1)p[m]=fS(K3(t,d,m));return{c(){e=C("h2"),n=ae("Ronda "),s=ae(i),r=O(),o=C("div"),a=C("span"),a.textContent="Nombre",l=O(),c=C("span"),c.textContent="Ao5",u=O(),f=C("span"),f.textContent="Mejor tiempo",h=O();for(let m=0;m<p.length;m+=1)p[m].c();M(e,"class","text-xl text-gray-300 font-bold text-center "+(t[77]?"mt-8":"mt-2")),M(a,"class","font-bold text-xl text-blue-400"),M(c,"class","font-bold text-xl text-blue-400"),M(f,"class","font-bold text-xl text-blue-400"),M(o,"class","result-table-c text-gray-300 mt-4 border-t border-gray-500 pt-2 svelte-14tnh9")},m(m,_){R(m,e,_),E(e,n),E(e,s),R(m,r,_),R(m,o,_),E(o,a),E(o,l),E(o,c),E(o,u),E(o,f),E(o,h);for(let b=0;b<p.length;b+=1)p[b].m(o,null)},p(m,_){if(_[0]&16385){d=m[75];let b;for(b=0;b<d.length;b+=1){const g=K3(m,d,b);p[b]?p[b].p(g,_):(p[b]=fS(g),p[b].c(),p[b].m(o,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=d.length}},d(m){m&&P(e),m&&P(r),m&&P(o),en(p,m)}}}function dS(t){let e,n,i=(t[9].get(t[72])||[])[0]+"",s,r,o,a=t[14](t[72]),l=[];for(let c=0;c<a.length;c+=1)l[c]=hS(J3(t,a,c));return{c(){e=C("div"),n=C("h2"),s=ae(i),r=O();for(let c=0;c<l.length;c+=1)l[c].c();o=O(),M(n,"class","text-2xl text-center text-green-400 font-bold"),M(e,"class","bg-white bg-opacity-10 rounded-md p-4 shadow-sm mb-8 mx-4 relative")},m(c,u){R(c,e,u),E(e,n),E(n,s),E(e,r);for(let f=0;f<l.length;f+=1)l[f].m(e,null);E(e,o)},p(c,u){if(u[0]&1&&i!==(i=(c[9].get(c[72])||[])[0]+"")&&ke(s,i),u[0]&16385){a=c[14](c[72]);let f;for(f=0;f<a.length;f+=1){const h=J3(c,a,f);l[f]?l[f].p(h,u):(l[f]=hS(h),l[f].c(),l[f].m(e,o))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}},d(c){c&&P(e),en(l,c)}}}function pS(t){let e,n,i,s,r=t[0],o=[];for(let l=0;l<r.length;l+=1)o[l]=mS(sS(t,r,l));const a=l=>H(o[l],1,1,()=>{o[l]=null});return{c(){e=C("h2"),e.textContent="Rondas por categor\xEDas",n=O(),i=C("div");for(let l=0;l<o.length;l+=1)o[l].c();M(e,"class","text-2xl text-center font-bold mb-2 mt-6 text-gray-300"),M(i,"id","rounds-container"),M(i,"class","text-gray-300 svelte-14tnh9")},m(l,c){R(l,e,c),R(l,n,c),R(l,i,c);for(let u=0;u<o.length;u+=1)o[u].m(i,null);s=!0},p(l,c){if(c[0]&66081){r=l[0];let u;for(u=0;u<r.length;u+=1){const f=sS(l,r,u);o[u]?(o[u].p(f,c),I(o[u],1)):(o[u]=mS(f),o[u].c(),I(o[u],1),o[u].m(i,null))}for(ot(),u=r.length;u<o.length;u+=1)a(u);at()}},i(l){if(!s){for(let c=0;c<r.length;c+=1)I(o[c]);s=!0}},o(l){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)H(o[c]);s=!1},d(l){l&&P(e),l&&P(n),l&&P(i),en(o,l)}}}function mS(t){let e,n,i=(t[9].get(t[69])||[])[0]+"",s,r,o,a,l,c,u,f;function h(p){t[28](p,t[69])}let d={class:"bg-transparent",inpClass:"text-center",type:"number",min:1,max:10};return t[5].rounds[t[69]]!==void 0&&(d.value=t[5].rounds[t[69]]),l=new hi({props:d}),vt.push(()=>Vt(l,"value",h)),l.$on("change",t[16]),{c(){e=C("div"),n=C("span"),s=ae(i),r=O(),o=C("span"),o.textContent="Rounds",a=O(),ue(l.$$.fragment),u=O(),M(e,"class","card w-24 h-32 grid place-items-center bg-white bg-opacity-10 rounded-md shadow-md")},m(p,m){R(p,e,m),E(e,n),E(n,s),E(e,r),E(e,o),E(e,a),le(l,e,null),E(e,u),f=!0},p(p,m){t=p,(!f||m[0]&1)&&i!==(i=(t[9].get(t[69])||[])[0]+"")&&ke(s,i);const _={};!c&&m[0]&33&&(c=!0,_.value=t[5].rounds[t[69]],Ht(()=>c=!1)),l.$set(_)},i(p){f||(I(l.$$.fragment,p),f=!0)},o(p){H(l.$$.fragment,p),f=!1},d(p){p&&P(e),ce(l)}}}function M$(t){let e,n;return e=new kb({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function S$(t){let e,n;return e=new Mb({props:{width:"1.2rem",height:"1.2rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function E$(t){let e,n,i,s,r,o;const a=[S$,M$],l=[];function c(f,h){return f[60].expanded?0:1}n=c(t),i=l[n]=a[n](t);function u(){return t[29](t[60],t[61],t[62])}return{c(){e=C("div"),i.c(),M(e,"class","w-8 h-8 rounded-full grid place-items-center transition-all duration-200 hover:bg-gray-700 hover:text-gray-200 ")},m(f,h){R(f,e,h),l[n].m(e,null),s=!0,r||(o=$e(e,"click",u),r=!0)},p(f,h){t=f;let d=n;n=c(t),n!==d&&(ot(),H(l[d],1,1,()=>{l[d]=null}),at(),i=l[n],i||(i=l[n]=a[n](t),i.c()),I(i,1),i.m(e,null))},i(f){s||(I(i),s=!0)},o(f){H(i),s=!1},d(f){f&&P(e),l[n].d(),r=!1,o()}}}function T$(t){let e,n,i,s,r;n=new sv({props:{width:"1.2rem",height:"1.2rem"}});function o(){return t[30](t[62])}return{c(){e=C("div"),ue(n.$$.fragment),M(e,"class","w-8 h-8 rounded-full grid place-items-center transition-all duration-200 hover:bg-red-700 hover:text-gray-200 ")},m(a,l){R(a,e,l),le(n,e,null),i=!0,s||(r=$e(e,"click",o),s=!0)},p(a,l){t=a},i(a){i||(I(n.$$.fragment,a),i=!0)},o(a){H(n.$$.fragment,a),i=!1},d(a){a&&P(e),ce(n),s=!1,r()}}}function k$(t){let e,n=t[60].fullname+"",i,s,r=t[60].oid+"",o,a,l=t[60].age+"",c,u;return{c(){e=C("h2"),i=ae(n),s=ae(" ("),o=ae(r),a=ae("), "),c=ae(l),u=ae(" a\xF1os."),M(e,"class","text-gray-300 font-bold text-center")},m(f,h){R(f,e,h),E(e,i),E(e,s),E(e,o),E(e,a),E(e,c),E(e,u)},p(f,h){h[0]&32&&n!==(n=f[60].fullname+"")&&ke(i,n),h[0]&32&&r!==(r=f[60].oid+"")&&ke(o,r),h[0]&32&&l!==(l=f[60].age+"")&&ke(c,l)},i:qe,o:qe,d(f){f&&P(e)}}}function A$(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A,L,D,B,U,N,$,W,j,J,se;function ne(F){t[31](F,t[60])}let K={class:"bg-gray-600 w-80 text-gray-300"};t[60].fullname!==void 0&&(K.value=t[60].fullname),s=new hi({props:K}),vt.push(()=>Vt(s,"value",ne));function q(F){t[32](F,t[60])}let te={items:["Hombre","Mujer"],transform:Y$,class:"border border-gray-400 text-gray-300 rounded-md"};t[60].gender!==void 0&&(te.value=t[60].gender),c=new Wi({props:te}),vt.push(()=>Vt(c,"value",q));function re(F){t[33](F,t[60])}let Oe={class:"bg-gray-600 w-80 text-gray-300"};t[60].oid!==void 0&&(Oe.value=t[60].oid),m=new hi({props:Oe}),vt.push(()=>Vt(m,"value",re));function Ee(F){t[34](F,t[60])}let ye={class:"bg-gray-600 w-20 text-gray-300",type:"number",min:10,max:100};t[60].age!==void 0&&(ye.value=t[60].age),y=new hi({props:ye}),vt.push(()=>Vt(y,"value",Ee));function xe(F){t[35](F,t[60])}let Ae={class:"bg-gray-600 w-80 text-gray-300"};t[60].otherData!==void 0&&(Ae.value=t[60].otherData),A=new Rh({props:Ae}),vt.push(()=>Vt(A,"value",xe));let De=t[8],de=[];for(let F=0;F<De.length;F+=1)de[F]=gS(iS(t,De,F));const me=F=>H(de[F],1,1,()=>{de[F]=null});let We=u2,Ue=[];for(let F=0;F<We.length;F+=1)Ue[F]=_S(nS(t,We,F));const be=F=>H(Ue[F],1,1,()=>{Ue[F]=null});return{c(){e=C("div"),n=C("span"),n.textContent="Nombre completo",i=O(),ue(s.$$.fragment),o=O(),a=C("span"),a.textContent="Sexo",l=O(),ue(c.$$.fragment),f=O(),h=C("div"),d=C("span"),d.textContent="Identificaci\xF3n oficial",p=O(),ue(m.$$.fragment),b=O(),g=C("span"),g.textContent="Edad",x=O(),ue(y.$$.fragment),w=O(),S=C("div"),T=C("span"),T.textContent="Otros datos",k=O(),ue(A.$$.fragment),D=O(),B=C("div"),U=C("span"),U.textContent="Modalidades:",N=O();for(let F=0;F<de.length;F+=1)de[F].c();$=O(),W=C("div"),j=C("span"),j.textContent="Roles:",J=O();for(let F=0;F<Ue.length;F+=1)Ue[F].c();M(n,"class","text-gray-300 font-bold flex items-center"),M(a,"class","text-gray-300 font-bold flex items-center ml-4"),M(e,"class","flex gap-2"),M(d,"class","text-gray-300 font-bold flex items-center"),M(g,"class","text-gray-300 font-bold flex items-center ml-4"),M(h,"class","flex gap-2 mt-4"),M(T,"class","text-gray-300 font-bold flex items-center"),M(S,"class","flex gap-2 mt-4"),M(U,"class","text-gray-300 font-bold flex items-center"),M(B,"class","flex gap-2 my-10 flex-wrap justify-around"),M(j,"class","text-gray-300 font-bold flex items-center"),M(W,"class","flex gap-2 mt-4")},m(F,V){R(F,e,V),E(e,n),E(e,i),le(s,e,null),E(e,o),E(e,a),E(e,l),le(c,e,null),R(F,f,V),R(F,h,V),E(h,d),E(h,p),le(m,h,null),E(h,b),E(h,g),E(h,x),le(y,h,null),R(F,w,V),R(F,S,V),E(S,T),E(S,k),le(A,S,null),R(F,D,V),R(F,B,V),E(B,U),E(B,N);for(let _e=0;_e<de.length;_e+=1)de[_e].m(B,null);R(F,$,V),R(F,W,V),E(W,j),E(W,J);for(let _e=0;_e<Ue.length;_e+=1)Ue[_e].m(W,null);se=!0},p(F,V){t=F;const _e={};!r&&V[0]&32&&(r=!0,_e.value=t[60].fullname,Ht(()=>r=!1)),s.$set(_e);const oe={};!u&&V[0]&32&&(u=!0,oe.value=t[60].gender,Ht(()=>u=!1)),c.$set(oe);const X={};!_&&V[0]&32&&(_=!0,X.value=t[60].oid,Ht(()=>_=!1)),m.$set(X);const fe={};!v&&V[0]&32&&(v=!0,fe.value=t[60].age,Ht(()=>v=!1)),y.$set(fe);const Le={};if(!L&&V[0]&32&&(L=!0,Le.value=t[60].otherData,Ht(()=>L=!1)),A.$set(Le),V[0]&8480){De=t[8];let Pe;for(Pe=0;Pe<De.length;Pe+=1){const Ye=iS(t,De,Pe);de[Pe]?(de[Pe].p(Ye,V),I(de[Pe],1)):(de[Pe]=gS(Ye),de[Pe].c(),I(de[Pe],1),de[Pe].m(B,null))}for(ot(),Pe=De.length;Pe<de.length;Pe+=1)me(Pe);at()}if(V[0]&32){We=u2;let Pe;for(Pe=0;Pe<We.length;Pe+=1){const Ye=nS(t,We,Pe);Ue[Pe]?(Ue[Pe].p(Ye,V),I(Ue[Pe],1)):(Ue[Pe]=_S(Ye),Ue[Pe].c(),I(Ue[Pe],1),Ue[Pe].m(W,null))}for(ot(),Pe=We.length;Pe<Ue.length;Pe+=1)be(Pe);at()}},i(F){if(!se){I(s.$$.fragment,F),I(c.$$.fragment,F),I(m.$$.fragment,F),I(y.$$.fragment,F),I(A.$$.fragment,F);for(let V=0;V<De.length;V+=1)I(de[V]);for(let V=0;V<We.length;V+=1)I(Ue[V]);se=!0}},o(F){H(s.$$.fragment,F),H(c.$$.fragment,F),H(m.$$.fragment,F),H(y.$$.fragment,F),H(A.$$.fragment,F),de=de.filter(Boolean);for(let V=0;V<de.length;V+=1)H(de[V]);Ue=Ue.filter(Boolean);for(let V=0;V<Ue.length;V+=1)H(Ue[V]);se=!1},d(F){F&&P(e),ce(s),ce(c),F&&P(f),F&&P(h),ce(m),ce(y),F&&P(w),F&&P(S),ce(A),F&&P(D),F&&P(B),en(de,F),F&&P($),F&&P(W),en(Ue,F)}}}function L$(t){let e,n=t[66][0]+"",i,s,r,o;function a(){return t[36](t[60],t[66],t[61],t[62])}return{c(){e=C("span"),i=ae(n),s=O(),M(e,"class","mod flex w-max svelte-14tnh9"),pt(e,"selected",K_(t[60].categories,t[66][1]))},m(l,c){R(l,e,c),E(e,i),R(l,s,c),r||(o=$e(e,"click",a),r=!0)},p(l,c){t=l,c[0]&288&&pt(e,"selected",K_(t[60].categories,t[66][1]))},d(l){l&&P(e),l&&P(s),r=!1,o()}}}function gS(t){let e,n;return e=new $i({props:{text:"Toca para activar o desactivar",position:"top",$$slots:{default:[L$]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&32|s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function C$(t){let e,n=t[63]+"",i,s,r,o;function a(){return t[37](t[60],t[65],t[61],t[62])}return{c(){e=C("span"),i=ae(n),s=O(),M(e,"class","role svelte-14tnh9"),pt(e,"selected",t[60].role&1<<t[65])},m(l,c){R(l,e,c),E(e,i),R(l,s,c),r||(o=$e(e,"click",a),r=!0)},p(l,c){t=l,c[0]&32&&pt(e,"selected",t[60].role&1<<t[65])},d(l){l&&P(e),l&&P(s),r=!1,o()}}}function _S(t){let e,n;return e=new $i({props:{text:"Toca para activar o desactivar",position:"top",$$slots:{default:[C$]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[0]&32|s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function bS(t){let e,n,i,s,r,o,a,l,c,u;i=new $i({props:{class:"text-gray-400 cursor-pointer",text:t[60].expanded?"Contraer":"Expandir",position:"top",$$slots:{default:[E$]},$$scope:{ctx:t}}}),r=new $i({props:{class:"text-gray-400 cursor-pointer",text:"Eliminar",position:"top",$$slots:{default:[T$]},$$scope:{ctx:t}}});const f=[A$,k$],h=[];function d(p,m){return p[60].expanded?0:1}return a=d(t),l=h[a]=f[a](t),{c(){e=C("div"),n=C("div"),ue(i.$$.fragment),s=O(),ue(r.$$.fragment),o=O(),l.c(),c=O(),M(n,"class","options absolute right-4 flex"),M(e,"class","bg-white bg-opacity-10 rounded-md p-4 shadow-sm mb-8 mx-4 relative")},m(p,m){R(p,e,m),E(e,n),le(i,n,null),E(n,s),le(r,n,null),E(e,o),h[a].m(e,null),E(e,c),u=!0},p(p,m){const _={};m[0]&32&&(_.text=p[60].expanded?"Contraer":"Expandir"),m[0]&32|m[2]&536870912&&(_.$$scope={dirty:m,ctx:p}),i.$set(_);const b={};m[2]&536870912&&(b.$$scope={dirty:m,ctx:p}),r.$set(b);let g=a;a=d(p),a===g?h[a].p(p,m):(ot(),H(h[g],1,1,()=>{h[g]=null}),at(),l=h[a],l?l.p(p,m):(l=h[a]=f[a](p),l.c()),I(l,1),l.m(e,c))},i(p){u||(I(i.$$.fragment,p),I(r.$$.fragment,p),I(l),u=!0)},o(p){H(i.$$.fragment,p),H(r.$$.fragment,p),H(l),u=!1},d(p){p&&P(e),ce(i),ce(r),h[a].d()}}}function P$(t){let e,n=t[5].status==="editing"?"ejecuci\xF3n":"edici\xF3n",i;return{c(){e=ae("Cambiar a "),i=ae(n)},m(s,r){R(s,e,r),R(s,i,r)},p(s,r){r[0]&32&&n!==(n=s[5].status==="editing"?"ejecuci\xF3n":"edici\xF3n")&&ke(i,n)},d(s){s&&P(e),s&&P(i)}}}function R$(t){let e,n;return e=new Ct({props:{class:"bg-orange-800 text-gray-300",$$slots:{default:[D$]},$$scope:{ctx:t}}}),e.$on("click",t[17]),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function I$(t){let e,n;return e=new Ct({props:{class:"bg-blue-800 text-gray-300",$$slots:{default:[O$]},$$scope:{ctx:t}}}),e.$on("click",t[11]),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[2]&536870912&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function D$(t){let e;return{c(){e=ae("Generar scrambles")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function O$(t){let e;return{c(){e=ae("Agregar persona")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function N$(t){let e;return{c(){e=ae("Guardar")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function B$(t){let e;return{c(){e=ae("Salir")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function F$(t){let e;return{c(){e=ae("Asignar")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function z$(t){let e,n,i;return e=new qo({}),{c(){ue(e.$$.fragment),n=ae(" Cerrar")},m(s,r){le(e,s,r),R(s,n,r),i=!0},i(s){i||(I(e.$$.fragment,s),i=!0)},o(s){H(e.$$.fragment,s),i=!1},d(s){ce(e,s),s&&P(n)}}}function U$(t){let e;return{c(){e=ae("+2")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function H$(t){let e;return{c(){e=ae("DNF")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function V$(t){let e;return{c(){e=ae("Sin penalizaci\xF3n")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function G$(t){let e,n,i=Lt(t[4].time,!0,!0)+"",s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T;function k(L){t[43](L)}let A={class:"w-[20ch]",focus:t[3]};return t[4].comments!==void 0&&(A.value=t[4].comments),c=new hi({props:A}),vt.push(()=>Vt(c,"value",k)),c.$on("UENTER",t[20]),h=new Ct({props:{$$slots:{default:[F$]},$$scope:{ctx:t}}}),h.$on("click",t[20]),b=new Ct({props:{flat:!0,$$slots:{default:[z$]},$$scope:{ctx:t}}}),b.$on("click",t[44]),x=new Ct({props:{flat:!0,class:t[4].penalty===ft.P2?"text-red-500":"",$$slots:{default:[U$]},$$scope:{ctx:t}}}),x.$on("click",t[45]),v=new Ct({props:{flat:!0,class:t[4].penalty===ft.DNF?"text-red-500":"",$$slots:{default:[H$]},$$scope:{ctx:t}}}),v.$on("click",t[46]),S=new Ct({props:{flat:!0,class:t[4].penalty===ft.NONE?"text-green-500":"",$$slots:{default:[V$]},$$scope:{ctx:t}}}),S.$on("click",t[47]),{c(){e=C("div"),n=C("h2"),s=ae(i),r=O(),o=C("div"),a=C("span"),a.textContent="Time",l=O(),ue(c.$$.fragment),f=O(),ue(h.$$.fragment),d=O(),p=C("span"),p.innerHTML=`El tiempo debe darse en el formato de los timers pero sin s\xEDmbolos. Por ejemplo
        <mark>1:23.45</mark> en el timer, se debe escribir como <mark>12345</mark>.`,m=O(),_=C("div"),ue(b.$$.fragment),g=O(),ue(x.$$.fragment),y=O(),ue(v.$$.fragment),w=O(),ue(S.$$.fragment),M(n,"class","m-1 w-full text-center text-gray-300 text-2xl font-bold"),M(o,"class","flex w-full gap-4 items-center justify-center"),M(p,"class","w-full max-w-[40ch] text-justify text-gray-500 italic mt-4"),M(e,"class","flex flex-col justify-between items-center text-gray-400 m-2"),M(_,"class","mt-2 flex justify-center")},m(L,D){R(L,e,D),E(e,n),E(n,s),E(e,r),E(e,o),E(o,a),E(o,l),le(c,o,null),E(o,f),le(h,o,null),E(e,d),E(e,p),R(L,m,D),R(L,_,D),le(b,_,null),E(_,g),le(x,_,null),E(_,y),le(v,_,null),E(_,w),le(S,_,null),T=!0},p(L,D){(!T||D[0]&16)&&i!==(i=Lt(L[4].time,!0,!0)+"")&&ke(s,i);const B={};D[0]&8&&(B.focus=L[3]),!u&&D[0]&16&&(u=!0,B.value=L[4].comments,Ht(()=>u=!1)),c.$set(B);const U={};D[2]&536870912&&(U.$$scope={dirty:D,ctx:L}),h.$set(U);const N={};D[2]&536870912&&(N.$$scope={dirty:D,ctx:L}),b.$set(N);const $={};D[0]&16&&($.class=L[4].penalty===ft.P2?"text-red-500":""),D[2]&536870912&&($.$$scope={dirty:D,ctx:L}),x.$set($);const W={};D[0]&16&&(W.class=L[4].penalty===ft.DNF?"text-red-500":""),D[2]&536870912&&(W.$$scope={dirty:D,ctx:L}),v.$set(W);const j={};D[0]&16&&(j.class=L[4].penalty===ft.NONE?"text-green-500":""),D[2]&536870912&&(j.$$scope={dirty:D,ctx:L}),S.$set(j)},i(L){T||(I(c.$$.fragment,L),I(h.$$.fragment,L),I(b.$$.fragment,L),I(x.$$.fragment,L),I(v.$$.fragment,L),I(S.$$.fragment,L),T=!0)},o(L){H(c.$$.fragment,L),H(h.$$.fragment,L),H(b.$$.fragment,L),H(x.$$.fragment,L),H(v.$$.fragment,L),H(S.$$.fragment,L),T=!1},d(L){L&&P(e),ce(c),ce(h),L&&P(m),L&&P(_),ce(b),ce(x),ce(v),ce(S)}}}function W$(t){let e,n,i,s,r,o,a;const l=[g$,m$],c=[];function u(d,p){return d[5]?0:1}n=u(t),i=c[n]=l[n](t);function f(d){t[49](d)}let h={onClose:t[18],$$slots:{default:[G$]},$$scope:{ctx:t}};return t[3]!==void 0&&(h.show=t[3]),r=new La({props:h}),t[48](r),vt.push(()=>Vt(r,"show",f)),{c(){e=C("main"),i.c(),s=O(),ue(r.$$.fragment),M(e,"class","container-mini pt-4 svelte-14tnh9")},m(d,p){R(d,e,p),c[n].m(e,null),E(e,s),le(r,e,null),a=!0},p(d,p){let m=n;n=u(d),n===m?c[n].p(d,p):(ot(),H(c[m],1,1,()=>{c[m]=null}),at(),i=c[n],i?i.p(d,p):(i=c[n]=l[n](d),i.c()),I(i,1),i.m(e,s));const _={};p[0]&28|p[2]&536870912&&(_.$$scope={dirty:p,ctx:d}),!o&&p[0]&8&&(o=!0,_.show=d[3],Ht(()=>o=!1)),r.$set(_)},i(d){a||(I(i),I(r.$$.fragment,d),a=!0)},o(d){H(i),H(r.$$.fragment,d),a=!1},d(d){d&&P(e),c[n].d(),t[48](null),ce(r)}}}function K_(t,e){return t.indexOf(e)>-1}function j$(t){let e=[];return e.push(t%100),t=~~(t/100),e.push(t%100),t=~~(t/100),e.push(t),e[2]*6e4+e[1]*1e3+e[0]*10}const Y$=t=>t;function q$(t,e,n){const i=Ds.getInstance(),s=ma[0][1].map(Z=>[Z[0].replace(/(\d)x(\d)x(\d)(.*)$/,"$1x$2$4"),Z[1],Z[2],Z[3],Z[4]]),r=ma[0][1].map(Z=>[Z[0],Z[1],Z[2],Z[3],Z[4]]),o=new Map,a=new Map,l=new Map;s.forEach(Z=>o.set(Z[1],[Z[0],Z[2],Z[3],Z[4]])),r.forEach(Z=>a.set(Z[1],[Z[0],Z[2],Z[3],Z[4]]));let c=[],u=[],f,h,d,p=!1,m,_=null,b=[],g={count:0,total:0,sheets:[],clear:()=>g.sheets.length=g.count=g.total=0,addSheet:Z=>{g.sheets.push(Z),g.count+=1,g.count===g.total&&g.save()},addCount:Z=>g.count+=Z,addTotal:Z=>g.total+=Z,save:()=>{i.zipPDF({name:(_||{name:"Contest"}).name,files:g.sheets})}};function x(){n(5,_={_id:"",name:"",place:"",date:"",inscriptionCost:0,inscriptionI:"",inscriptionF:"",contestants:[],rounds:{},status:"editing"})}function y(Z,ve){return{date:0,penalty:ft.NONE,scramble:"",selected:!1,session:"",time:Z,mode:ve}}function v(){_==null||_.contestants.push({fullname:"",age:15,categories:[],gender:"Hombre",oid:"",role:kF.CONTESTANT,expanded:!0,results:{},otherData:""}),n(5,_),D()}function w(Z){_==null||_.contestants.splice(Z,1),n(5,_),D()}function S(Z,ve){let Re=Z.categories;K_(Re,ve)?(Re.splice(Re.indexOf(ve),1),delete Z.results[ve]):(Re.push(ve),Z.results[ve]=new Array(_==null?void 0:_.rounds[ve]).fill(0).map((He,Ze)=>({mode:ve,round:Ze+1,solves:[0,0,0,0,0].map(_t=>y(_t,ve))}))),n(5,_),D()}function T(Z){return Z.reduce((ve,Re)=>[Re.penalty===ft.DNF?ve[0]:Re.time<ve[0].time?Re:ve[0],Re.penalty===ft.DNF?ve[1]:Re.time>ve[1].time?Re:ve[1]],[y(1/0,""),y(-1/0,"")])}function k(Z){return _.contestants.reduce((ve,Re)=>(Re.categories.indexOf(Z)>-1&&Re.results[Z].forEach(He=>{Array.isArray(ve[He.round-1])||(ve[He.round-1]=[]),ve[He.round-1].push({name:Re.fullname,Ao5:qf(5,He.solves,tr.SEQUENTIAL)[4],best:A(He.solves.map(Ze=>Ze.penalty===ft.DNF?1/0:Ze.time).sort((Ze,_t)=>Ze-_t)[0])})}),ve),[]).map(ve=>ve.sort((Re,He)=>Re.Ao5-He.Ao5).map(Re=>(Re.Ao5=A(Re.Ao5),Re)))}function A(Z){return Z?Lt(Z,!0):"--"}function L(Z){return{time:Z.penalty===ft.DNF?"DNF":A(Z.time),p2:Z.penalty===ft.P2}}function D(){let Z=_;l.clear(),n(0,c=[...Z.contestants.map(Re=>Re.categories).reduce((Re,He)=>(He.forEach(Ze=>{Re.add(Ze),l.set(Ze,~~(l.get(Ze)||0)+1)}),Re),new Set)||[]]);let ve={};for(let Re=0,He=c.length;Re<He;Re+=1)Object.keys(Z.rounds||{}).indexOf(c[Re])>-1?ve[c[Re]]=Z.rounds[c[Re]]||0:ve[c[Re]]=1;Z.rounds=ve;for(let Re=0,He=Z.contestants.length;Re<He;Re+=1){let Ze=Z.contestants[Re],_t=Ze.categories;for(let ln=0,lt=_t.length;ln<lt;ln+=1){const gt=_t[ln];if(c.indexOf(gt)<0)delete Ze.results[gt];else{let bn=Ze.results[gt].slice(0,Z.rounds[gt]);for(let Ot=bn.length,Nn=Z.rounds[gt];Ot<Nn;Ot+=1)bn.push({round:Ot+1,solves:new Array(5).fill(0).map(Pn=>y(Pn,gt))});Ze.results[gt]=bn}}}n(1,u=Z.contestants.reduce((Re,He)=>{let Ze={contestant:He.fullname,results:[],cnt:He};return Object.keys(He.results).forEach(_t=>{He.results[_t].forEach(lt=>{Ze.results.push({category:_t,round:lt.round,times:[...lt.solves,{time:A(qf(5,lt.solves,tr.SEQUENTIAL)[4])},...T(lt.solves).map(L)]})})}),Re.push(Ze),Re},[]))}function B(Z,ve,Re){let He=_;const Ze=1.291666666666667,_t=21.6,ln=_t*Ze,lt=1,gt=(ln-Z.length*lt)*(/^(666|777)wca$/.test(ve)?.8:.9)/Z.length;let bn=[],Ot=o.get(ve)[2],Nn=o.get(ve)[3];const Pn=function(){i.generatePDF({width:_t,height:ln,mode:(a.get(ve)||["333"])[0],round:Re,html:`
        <!DOCTYPE html>
          <html>
          <body>
            <h1 style="text-align: center;">${He.name}</h1>
            <p style="text-align: center;">${(a.get(ve)||[])[0]} Ronda ${Re}</p>
            <table>
              ${bn.map((mn,jt)=>`
                  ${jt+2===bn.length?'<tr><td colspan="3" style="text-align: center;"><h3>Extra scrambles</h3></td></tr>':""}
                  <tr>
                    <td style="width: 20px; padding-inline: 16px; text-align: center;">
                      ${jt+2>=bn.length?"E"+(jt-bn.length+3):jt+1}
                    </td>
                    <td>
                      <div class="scramble">
                        ${Z[jt].replaceAll("<br>","").split(/\s+/).reduce((Gt,Bn,rn)=>[...Gt,...(Bn+" ".repeat(Nn[rn%Nn.length]-Bn.length)).split("")],[]).map((Gt,Bn)=>`<span class="${~~(Bn/Ot)%2===0?"":"bg-gray"}">${Gt}</span>`).join("")}
                      </div>
                    </td>
                    <td style="width: 0cm;"><img src="${mn}" style="height: ${gt}cm;"></td>
                  </tr>
                `).join(" ")}
            </table>
            <p style="text-align: center;">Generated by CubeDB</p>
          </body>
          <style>
            @font-face {
              font-family: 'Cqmono';
              src: url('http://127.0.0.1:5000/assets/fonts/CQMono.otf');
            }

            * {
              font-family: "Arial";
            }

            table, th, td {
              border: 1px solid black;
              border-collapse: collapse;
              width: 100%;
            }

            .scramble {
              display: grid;
              grid-template-columns: repeat(${Ot}, 1fr);
              padding-inline: 1rem;
            }

            .scramble span {
              font-size: ${fk(ve==="sqrs"?40:Ot,30,48,1.2,.85)}rem;
            }

            .scramble span.bg-gray {
              background: #ededff;
            }
          </style>
        </html>`})};let cn=Z.map(mn=>Ns.fromSequence(mn,{...jc.get(ve),rounded:!0,headless:!0}));Ol(cn,1e3,!0,!1,!0).then(mn=>{let jt=mn.subscribe(Gt=>{if(console.log("GETTING IMG: ",Gt),Gt!=="__initial__"){if(Gt===null)return jt();bn=Gt,console.log("IMAGE READY, DRAWING"),Pn()}})})}async function U(){const Z=await bT(()=>import("./scrambleWorker.cef8c04d.js"),[],import.meta.url),ve=new Z.default;let Re=_;ve.onmessage=Ze=>{const{data:_t}=Ze;if(_t.type==="done"){let ln=Re.rounds[_t.mode]--;Re.rounds[_t.mode]=Math.max(1,Re.rounds[_t.mode]),B(_t.batch,_t.mode,ln)}};const He=["666wca","777wca"];c.map(Ze=>{for(let _t=1,ln=Re.rounds[Ze];_t<=ln;_t+=1)g.addTotal(1),ve.postMessage([Ze,(a.get(Ze)||[])[1],He.indexOf(Ze)>-1?5:7])})}function N(){n(3,p=!1),D()}function $(Z){Z===ft.P2?m.penalty!=ft.P2&&n(4,m.time+=2e3,m):m.penalty===ft.P2&&n(4,m.time-=2e3,m),n(4,m.penalty=Z,m)}function W(){/^\s*\d{1,6}\s*$/.test((m==null?void 0:m.comments)||"")?n(4,m.time=j$(+((m==null?void 0:m.comments)||"")),m):n(4,m.comments="",m)}function j(){_!=null&&_._id?i.updateContest(_):(n(5,_._id="",_),i.addContest(_))}ji(()=>{f=i.anySub.subscribe(Z=>{if(!!Z)switch(Z.type){case"generate-pdf":{console.log("GENERATE_PDF"),g.addSheet(Z.data);break}case"generate-pdf-error":{console.error("Error generating PDF");break}case"zip-pdf":{console.log("ZIP_PDF"),i.revealFile(Z.data);break}case"zip-pdf-error":{console.error("Error generating ZIP file");break}}}),h=i.contestSub.subscribe(Z=>{if(!!Z)switch(Z.type){case"get-contests":{let ve=Z.data||[];n(6,b=ve);break}case"add-contest":{n(5,_._id=Z.data._id,_);break}}}),i.getContests()}),Es(()=>{f(),h()});function J(Z){t.$$.not_equal(_.name,Z)&&(_.name=Z,n(5,_))}function se(Z){t.$$.not_equal(_.place,Z)&&(_.place=Z,n(5,_))}function ne(Z){t.$$.not_equal(_.date,Z)&&(_.date=Z,n(5,_))}function K(Z){t.$$.not_equal(_.inscriptionI,Z)&&(_.inscriptionI=Z,n(5,_))}function q(Z){t.$$.not_equal(_.inscriptionF,Z)&&(_.inscriptionF=Z,n(5,_))}function te(Z){t.$$.not_equal(_.inscriptionCost,Z)&&(_.inscriptionCost=Z,n(5,_))}function re(Z,ve){t.$$.not_equal(_.rounds[ve],Z)&&(_.rounds[ve]=Z,n(5,_))}const Oe=(Z,ve,Re)=>n(5,ve[Re].expanded=!Z.expanded,_),Ee=Z=>w(Z);function ye(Z,ve){t.$$.not_equal(ve.fullname,Z)&&(ve.fullname=Z,n(5,_))}function xe(Z,ve){t.$$.not_equal(ve.gender,Z)&&(ve.gender=Z,n(5,_))}function Ae(Z,ve){t.$$.not_equal(ve.oid,Z)&&(ve.oid=Z,n(5,_))}function De(Z,ve){t.$$.not_equal(ve.age,Z)&&(ve.age=Z,n(5,_))}function de(Z,ve){t.$$.not_equal(ve.otherData,Z)&&(ve.otherData=Z,n(5,_))}const me=(Z,ve,Re,He)=>{S(Z,ve[1]),n(5,Re[He].categories=Z.categories,_)},We=(Z,ve,Re,He)=>n(5,Re[He].role^=1<<ve,_),Ue=(Z,ve,Re)=>n(1,ve[Re].cnt.expanded=!Z.cnt.expanded,u),be=Z=>{n(4,m=Z),n(4,m.comments=Lt(Z.time,!0).replace(/\D/g,""),m),n(3,p=!0)},F=()=>n(5,_.status=_.status==="editing"?"running":"editing",_),V=()=>{n(5,_=null),i.getContests()},_e=Z=>{n(5,_=Z),D()};function oe(Z){t.$$.not_equal(m.comments,Z)&&(m.comments=Z,n(4,m))}const X=()=>d.close(),fe=()=>$(ft.P2),Le=()=>$(ft.DNF),Pe=()=>$(ft.NONE);function Ye(Z){vt[Z?"unshift":"push"](()=>{d=Z,n(2,d)})}function Ke(Z){p=Z,n(3,p)}return[c,u,d,p,m,_,b,i,s,o,x,v,w,S,k,L,D,U,N,$,W,j,J,se,ne,K,q,te,re,Oe,Ee,ye,xe,Ae,De,de,me,We,Ue,be,F,V,_e,oe,X,fe,Le,Pe,Ye,Ke]}class X$ extends xt{constructor(e){super(),wt(this,e,q$,W$,yt,{},null,[-1,-1,-1])}}let Z$=[0,0,70,0,0,10,0,40,60,80,100],J$=["sqrs","clkwca","mgmp","222so","skbso","pyrso","333","444wca","555wca","666wca","777wca"];function AL(t){let e=[11,11,12,16,44,60,80,100],n=[11,11,15,22,46,62,80,100];if(t.indexOf("/")>-1)return{mode:"sqrs",len:0};if(t.indexOf("++")>-1||t.indexOf("--")>-1)return{mode:"mgmp",len:70};if(t.indexOf("ALL")>-1)return{mode:"clkwca",len:0};let i=t.split(" ").length,s=-1;if(i===11)s=/^[LRBU\s']+$/.test(t)?4:3;else for(let r=0,o=e.length;r<o;r+=1)if(e[r]<=i&&i<=n[r]){s=r;break}return{mode:J$[s+3],len:Z$[s+3]}}function jm(){return{calcAoX:tr.SEQUENTIAL,genImage:!0,hasInspection:!0,inspection:15,scrambleAfterCancel:!0,showElapsedTime:!0}}const K$=new Map([["333","333"],["222","222so"],["444","444wca"],["555","555wca"],["666","666wca"],["777","777wca"],["clock","clkwca"],["mega","mgmp"],["pyra","pyrso"],["skewb","skbso"],["sq1","sqrs"]]);class $${constructor(){Me(this,"modes");this.modes=["From backup","From txt"]}get name(){return"Twisty Timer"}toCubeDB(e,n){let i=bm(n||0,0,this.modes.length-1);return i===0?this.fromBackup(e):i===1?this.fromTXT(e):{sessions:[],solves:[]}}fromBackup(e){var r,o,a,l,c,u;let n=new Map,i={sessions:[],solves:[]},s=e.split(`
`).slice(1);for(let f=0,h=s.length;f<h;f+=1){let d=s[f].trim().split(";");if(d.length<7)continue;let p=((r=d.shift())==null?void 0:r.slice(1,-1))||"",m=p+"_"+(((o=d.shift())==null?void 0:o.slice(1,-1))||""),_=+(((a=d.shift())==null?void 0:a.slice(1,-1))||0),b=+(((l=d.shift())==null?void 0:l.slice(1,-1))||0),g=((c=d.shift())==null?void 0:c.slice(1,-1))||"",x=+(((u=d.shift())==null?void 0:u.slice(1,-1))||0),y=d.join(";").slice(1,-1);n.has(m)||(n.set(m,crypto.randomUUID()),i.sessions.push({_id:n.get(m)||"",name:m,settings:jm()})),i.solves.push({date:b,penalty:[ft.NONE,ft.P2,ft.DNF][x],scramble:g,selected:!1,session:n.get(m)||"",time:_,_id:crypto.randomUUID(),comments:y,mode:K$.get(p)})}return i}fromTXT(e){var r,o,a;let n={sessions:[],solves:[]},i=e.split(`
`),s={_id:crypto.randomUUID(),name:"My session",settings:jm()};n.sessions.push(s);for(let l=0,c=i.length;l<c;l+=1){let u=i[l].trim().split(";");if(u.length<3)continue;let f=+(((r=u.shift())==null?void 0:r.slice(1,-1))||0)*1e3,h=((o=u.shift())==null?void 0:o.slice(1,-1))||"",d=rt((a=u.shift())==null?void 0:a.slice(1,-1)).toDate().getDate(),p=u.shift()||"",m=AL(h);n.solves.push({date:d,penalty:/DNF/.test(p)?ft.DNF:ft.NONE,scramble:h,selected:!1,session:s._id,time:f,_id:crypto.randomUUID(),comments:"",mode:m.mode,len:m.len})}return n}fromCubeDB(e,n){let i=bm(n||0,0,this.modes.length-1);return i===0?this.toBackup(e):i===1?this.toTXT(e):""}toBackup(e){return"<not implemented yet>"}toTXT(e){return"<not implemented yet>"}}class Q${constructor(){Me(this,"modes");this.modes=["Normal"]}get name(){return"CSTimer"}toCubeDB(e){let n=JSON.parse(e),i=Object.keys(n).filter(o=>o!="properties"),s={sessions:[],solves:[]},r=JSON.parse(n.properties.sessionData);for(let o=0,a=i.length;o<a;o+=1){let l=r[(o+1).toString()],c=i[o],u=typeof l.name=="number"?c:l.name.trim(),f=l.opt.scrType,h=crypto.randomUUID(),d=n[c];s.sessions.push({_id:h,name:u,settings:jm()});for(let p=0,m=d.length;p<m;p+=1){let _=AL(d[p][1]);s.solves.push({date:d[p][3]*1e3,penalty:d[p][0][0]<0?ft.DNF:ft.NONE,scramble:d[p][1],selected:!1,session:h,time:d[p][0][1],comments:d[p][2],mode:f||_.mode,len:_.len})}}return s}fromCubeDB(e){return""}}const eQ=new Map([["222","222so"],["222oh","222so"],["333","333"],["333bl","333ni"],["333oh","333oh"],["333mirror","333"],["444","444wca"],["555","555wca"],["666","666wca"],["777","777wca"],["clock","clkwca"],["skewb","skbso"],["pyram","pyrso"],["minx","mgmp"],["sq1","sqrs"]]);class tQ{constructor(){Me(this,"modes");this.modes=["Normal"]}get name(){return"CubeDesk"}toCubeDB(e){let{solves:n,sessions:i}=JSON.parse(e);return{sessions:i.map(s=>({_id:s.id,name:s.name,settings:jm()})),solves:n.filter(s=>s.cube_type!="other").map(s=>({date:s.started_at,penalty:s.dnf?ft.DNF:s.plus_two?ft.P2:ft.NONE,scramble:s.scramble,selected:!1,session:s.session_id,time:s.time*1e3,comments:s.notes||"",mode:eQ.get(s.cube_type)}))}}fromCubeDB(e){return""}}const Wc=[new $$,new Q$,new tQ];function vS(t,e,n){const i=t.slice();return i[22]=e[n],i[24]=n,i}function yS(t,e,n){const i=t.slice();return i[22]=e[n],i[25]=e,i[26]=n,i}function nQ(t){let e=t[6].IMPORT_EXPORT.import+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&64&&e!==(e=i[6].IMPORT_EXPORT.import+"")&&ke(n,e)},d(i){i&&P(n)}}}function iQ(t){let e=t[6].IMPORT_EXPORT.export+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&64&&e!==(e=i[6].IMPORT_EXPORT.export+"")&&ke(n,e)},d(i){i&&P(n)}}}function sQ(t){let e;return{c(){e=C("section")},m(n,i){R(n,e,i)},p:qe,i:qe,o:qe,d(n){n&&P(e)}}}function rQ(t){let e,n,i,s=t[6].IMPORT_EXPORT.from+"",r,o,a,l,c,u,f,h,d,p,m,_;function b(w){t[14](w)}let g={items:Wc,label:hQ,transform:dQ};t[2]!==void 0&&(g.value=t[2]),l=new Wi({props:g}),vt.push(()=>Vt(l,"value",b));let x=Wc[t[2]].modes.length>1&&wS(t);h=new Ct({props:{class:"bg-purple-800 text-gray-300",file:!0,$$slots:{default:[oQ]},$$scope:{ctx:t}}}),h.$on("files",t[16]);let y=t[0]&&xS(t),v=t[0]&&MS(t);return{c(){e=C("section"),n=C("div"),i=C("span"),r=ae(s),o=ae(":"),a=O(),ue(l.$$.fragment),u=O(),x&&x.c(),f=O(),ue(h.$$.fragment),d=O(),y&&y.c(),p=O(),v&&v.c(),m=ts(),M(n,"class","flex mx-auto items-center gap-2 justify-center")},m(w,S){R(w,e,S),E(e,n),E(n,i),E(i,r),E(i,o),E(n,a),le(l,n,null),E(n,u),x&&x.m(n,null),E(n,f),le(h,n,null),E(n,d),y&&y.m(n,null),R(w,p,S),v&&v.m(w,S),R(w,m,S),_=!0},p(w,S){(!_||S&64)&&s!==(s=w[6].IMPORT_EXPORT.from+"")&&ke(r,s);const T={};!c&&S&4&&(c=!0,T.value=w[2],Ht(()=>c=!1)),l.$set(T),Wc[w[2]].modes.length>1?x?(x.p(w,S),S&4&&I(x,1)):(x=wS(w),x.c(),I(x,1),x.m(n,f)):x&&(ot(),H(x,1,1,()=>{x=null}),at());const k={};S&134217792&&(k.$$scope={dirty:S,ctx:w}),h.$set(k),w[0]?y?(y.p(w,S),S&1&&I(y,1)):(y=xS(w),y.c(),I(y,1),y.m(n,null)):y&&(ot(),H(y,1,1,()=>{y=null}),at()),w[0]?v?(v.p(w,S),S&1&&I(v,1)):(v=MS(w),v.c(),I(v,1),v.m(m.parentNode,m)):v&&(ot(),H(v,1,1,()=>{v=null}),at())},i(w){_||(I(l.$$.fragment,w),I(x),I(h.$$.fragment,w),I(y),I(v),_=!0)},o(w){H(l.$$.fragment,w),H(x),H(h.$$.fragment,w),H(y),H(v),_=!1},d(w){w&&P(e),ce(l),x&&x.d(),ce(h),y&&y.d(),w&&P(p),v&&v.d(w),w&&P(m)}}}function wS(t){let e,n,i;function s(o){t[15](o)}let r={items:Wc[t[2]].modes,transform:pQ};return t[3]!==void 0&&(r.value=t[3]),e=new Wi({props:r}),vt.push(()=>Vt(e,"value",s)),{c(){ue(e.$$.fragment)},m(o,a){le(e,o,a),i=!0},p(o,a){const l={};a&4&&(l.items=Wc[o[2]].modes),!n&&a&8&&(n=!0,l.value=o[3],Ht(()=>n=!1)),e.$set(l)},i(o){i||(I(e.$$.fragment,o),i=!0)},o(o){H(e.$$.fragment,o),i=!1},d(o){ce(e,o)}}}function oQ(t){let e=t[6].IMPORT_EXPORT.selectFile+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&64&&e!==(e=i[6].IMPORT_EXPORT.selectFile+"")&&ke(n,e)},d(i){i&&P(n)}}}function xS(t){let e,n,i,s,r,o;return e=new Ct({props:{class:"bg-orange-800 text-gray-300",$$slots:{default:[aQ]},$$scope:{ctx:t}}}),e.$on("click",t[10]),i=new Ct({props:{class:"bg-orange-800 text-gray-300",$$slots:{default:[lQ]},$$scope:{ctx:t}}}),i.$on("click",t[11]),r=new Ct({props:{class:"bg-green-800 text-gray-300",$$slots:{default:[cQ]},$$scope:{ctx:t}}}),r.$on("click",t[9]),{c(){ue(e.$$.fragment),n=O(),ue(i.$$.fragment),s=O(),ue(r.$$.fragment)},m(a,l){le(e,a,l),R(a,n,l),le(i,a,l),R(a,s,l),le(r,a,l),o=!0},p(a,l){const c={};l&134217792&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l&134217792&&(u.$$scope={dirty:l,ctx:a}),i.$set(u);const f={};l&134217792&&(f.$$scope={dirty:l,ctx:a}),r.$set(f)},i(a){o||(I(e.$$.fragment,a),I(i.$$.fragment,a),I(r.$$.fragment,a),o=!0)},o(a){H(e.$$.fragment,a),H(i.$$.fragment,a),H(r.$$.fragment,a),o=!1},d(a){ce(e,a),a&&P(n),ce(i,a),a&&P(s),ce(r,a)}}}function aQ(t){let e=t[6].IMPORT_EXPORT.selectAll+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&64&&e!==(e=i[6].IMPORT_EXPORT.selectAll+"")&&ke(n,e)},d(i){i&&P(n)}}}function lQ(t){let e=t[6].IMPORT_EXPORT.selectNone+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&64&&e!==(e=i[6].IMPORT_EXPORT.selectNone+"")&&ke(n,e)},d(i){i&&P(n)}}}function cQ(t){let e=t[6].IMPORT_EXPORT.save+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&64&&e!==(e=i[6].IMPORT_EXPORT.save+"")&&ke(n,e)},d(i){i&&P(n)}}}function MS(t){let e,n,i,s,r,o=t[0].sessions,a=[];for(let h=0;h<o.length;h+=1)a[h]=SS(yS(t,o,h));const l=h=>H(a[h],1,1,()=>{a[h]=null});let c=t[1]&&ES(t),u=t[4].slice(0,50),f=[];for(let h=0;h<u.length;h+=1)f[h]=TS(vS(t,u,h));return{c(){e=C("ul");for(let h=0;h<a.length;h+=1)a[h].c();n=O(),i=C("ul"),c&&c.c(),s=O();for(let h=0;h<f.length;h+=1)f[h].c();M(e,"class","flex flex-wrap mt-4 gap-2 justify-center"),Si(e,"row-gap","1rem"),M(i,"class","text-center mt-4 max-h-96 overflow-scroll")},m(h,d){R(h,e,d);for(let p=0;p<a.length;p+=1)a[p].m(e,null);R(h,n,d),R(h,i,d),c&&c.m(i,null),E(i,s);for(let p=0;p<f.length;p+=1)f[p].m(i,null);r=!0},p(h,d){if(d&3){o=h[0].sessions;let p;for(p=0;p<o.length;p+=1){const m=yS(h,o,p);a[p]?(a[p].p(m,d),I(a[p],1)):(a[p]=SS(m),a[p].c(),I(a[p],1),a[p].m(e,null))}for(ot(),p=o.length;p<a.length;p+=1)l(p);at()}if(h[1]?c?c.p(h,d):(c=ES(h),c.c(),c.m(i,s)):c&&(c.d(1),c=null),d&16){u=h[4].slice(0,50);let p;for(p=0;p<u.length;p+=1){const m=vS(h,u,p);f[p]?f[p].p(m,d):(f[p]=TS(m),f[p].c(),f[p].m(i,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=u.length}},i(h){if(!r){for(let d=0;d<o.length;d+=1)I(a[d]);r=!0}},o(h){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)H(a[d]);r=!1},d(h){h&&P(e),en(a,h),h&&P(n),h&&P(i),c&&c.d(),en(f,h)}}}function uQ(t){let e=t[22].name+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&1&&e!==(e=i[22].name+"")&&ke(n,e)},d(i){i&&P(n)}}}function SS(t){let e,n,i,s,r,o,a;function l(f){t[17](f,t[22])}let c={};t[22].editing!==void 0&&(c.checked=t[22].editing),n=new vc({props:c}),vt.push(()=>Vt(n,"checked",l));function u(){return t[18](t[22])}return r=new Ct({props:{class:`p-2 bg-blue-700 bg-opacity-40 text-gray-300 rounded-md font-bold shadow-md cursor-pointer\r
              `+(t[22]===t[1]?"bg-opacity-100 underline":"")+`\r
              `,$$slots:{default:[uQ]},$$scope:{ctx:t}}}),r.$on("click",u),{c(){e=C("li"),ue(n.$$.fragment),s=O(),ue(r.$$.fragment),o=O(),M(e,"class","flex gap-1 mr-2")},m(f,h){R(f,e,h),le(n,e,null),E(e,s),le(r,e,null),E(e,o),a=!0},p(f,h){t=f;const d={};!i&&h&1&&(i=!0,d.checked=t[22].editing,Ht(()=>i=!1)),n.$set(d);const p={};h&3&&(p.class=`p-2 bg-blue-700 bg-opacity-40 text-gray-300 rounded-md font-bold shadow-md cursor-pointer\r
              `+(t[22]===t[1]?"bg-opacity-100 underline":"")+`\r
              `),h&134217729&&(p.$$scope={dirty:h,ctx:t}),r.$set(p)},i(f){a||(I(n.$$.fragment,f),I(r.$$.fragment,f),a=!0)},o(f){H(n.$$.fragment,f),H(r.$$.fragment,f),a=!1},d(f){f&&P(e),ce(n),ce(r)}}}function ES(t){let e,n=t[6].IMPORT_EXPORT.total+"",i,s,r=t[4].length+"",o,a,l=t[4].length>50?"("+t[6].IMPORT_EXPORT.showingOnly50+")":"",c;return{c(){e=C("span"),i=ae(n),s=ae(": "),o=ae(r),a=O(),c=ae(l),M(e,"class","text-xl text-gray-300")},m(u,f){R(u,e,f),E(e,i),E(e,s),E(e,o),E(e,a),E(e,c)},p(u,f){f&64&&n!==(n=u[6].IMPORT_EXPORT.total+"")&&ke(i,n),f&16&&r!==(r=u[4].length+"")&&ke(o,r),f&80&&l!==(l=u[4].length>50?"("+u[6].IMPORT_EXPORT.showingOnly50+")":"")&&ke(c,l)},d(u){u&&P(e)}}}function TS(t){let e,n,i=t[24]+1+"",s,r,o,a=(ay.get(t[22].mode||"")||"--")+"",l,c,u,f=Lt(t[22].time,!0,!0)+"",h,d,p,m=t[22].scramble+"",_,b;return{c(){e=C("li"),n=C("span"),s=ae(i),r=O(),o=C("span"),l=ae(a),c=O(),u=C("span"),h=ae(f),d=O(),p=C("span"),_=ae(m),b=O(),M(p,"class","overflow-hidden text-ellipsis whitespace-nowrap col-span-3 text-left"),M(e,"class","grid grid-cols-6 border-none border-b border-gray-500")},m(g,x){R(g,e,x),E(e,n),E(n,s),E(e,r),E(e,o),E(o,l),E(e,c),E(e,u),E(u,h),E(e,d),E(e,p),E(p,_),E(e,b)},p(g,x){x&16&&a!==(a=(ay.get(g[22].mode||"")||"--")+"")&&ke(l,a),x&16&&f!==(f=Lt(g[22].time,!0,!0)+"")&&ke(h,f),x&16&&m!==(m=g[22].scramble+"")&&ke(_,m)},d(g){g&&P(e)}}}function fQ(t){let e,n,i=t[6].IMPORT_EXPORT.title+"",s,r,o,a,l,c,u,f,h,d;a=new Ct({props:{class:"bg-"+(t[5]?"green":"gray")+"-800 text-gray-300",$$slots:{default:[nQ]},$$scope:{ctx:t}}}),a.$on("click",t[12]),c=new Ct({props:{class:"bg-"+(t[5]?"gray":"green")+"-800 text-gray-300",$$slots:{default:[iQ]},$$scope:{ctx:t}}}),c.$on("click",t[13]);const p=[rQ,sQ],m=[];function _(b,g){return b[5]?0:1}return f=_(t),h=m[f]=p[f](t),{c(){e=C("main"),n=C("h1"),s=ae(i),r=O(),o=C("section"),ue(a.$$.fragment),l=O(),ue(c.$$.fragment),u=O(),h.c(),M(n,"class","text-center text-3xl text-gray-300"),M(o,"class","flex items-center gap-2 justify-center my-4"),M(e,"class","container-mini mx-auto max-w-4xl bg-white bg-opacity-10 rounded-md text-gray-400 p-4")},m(b,g){R(b,e,g),E(e,n),E(n,s),E(e,r),E(e,o),le(a,o,null),E(o,l),le(c,o,null),E(e,u),m[f].m(e,null),d=!0},p(b,[g]){(!d||g&64)&&i!==(i=b[6].IMPORT_EXPORT.title+"")&&ke(s,i);const x={};g&32&&(x.class="bg-"+(b[5]?"green":"gray")+"-800 text-gray-300"),g&134217792&&(x.$$scope={dirty:g,ctx:b}),a.$set(x);const y={};g&32&&(y.class="bg-"+(b[5]?"gray":"green")+"-800 text-gray-300"),g&134217792&&(y.$$scope={dirty:g,ctx:b}),c.$set(y);let v=f;f=_(b),f===v?m[f].p(b,g):(ot(),H(m[v],1,1,()=>{m[v]=null}),at(),h=m[f],h?h.p(b,g):(h=m[f]=p[f](b),h.c()),I(h,1),h.m(e,null))},i(b){d||(I(a.$$.fragment,b),I(c.$$.fragment,b),I(h),d=!0)},o(b){H(a.$$.fragment,b),H(c.$$.fragment,b),H(h),d=!1},d(b){b&&P(e),ce(a),ce(c),m[f].d()}}}const hQ=t=>t.name,dQ=(t,e)=>e,pQ=(t,e)=>e;function mQ(t,e,n){let i,s=Rr(Hi,k=>Dr(k));dt(t,s,k=>n(6,i=k));let r=Ds.getInstance(),o=0,a=0,l=null,c,u=[],f,h=!0,d=0;function p(k){let A=new FileReader;A.addEventListener("loadend",L=>{n(0,l=Wc[o].toCubeDB(A.result,a)),n(0,l.sessions=l.sessions.filter(D=>l==null?void 0:l.solves.reduce((B,U)=>B+(U.session===D._id?1:0),0)),l),l.sessions.length===0?n(0,l=null):(l.sessions.forEach(D=>D.editing=!0),n(1,c=l.sessions[0]))}),A.readAsText(k[0])}function m(){if(l)for(let k=0,A=l.sessions.length;k<A;k+=1){let L=l.sessions[k];!L.editing||(L.tName=L._id,L._id="",d+=1,r.addSession(L))}}function _(){l==null||l.sessions.forEach(k=>k.editing=!0),n(0,l)}function b(){l==null||l.sessions.forEach(k=>k.editing=!1),n(0,l)}ji(()=>{f=r.sessSub.subscribe(k=>{if(!!k)switch(k.type){case"add-session":{let A=k.data;if(d-=1,l)for(let L=0,D=l.solves.length;L<D;L+=1){let B=l.solves[L];A.tName===B.session&&(B.session=A._id,r.addSolve(B))}d===0&&n(0,l=null);break}}})}),Es(()=>{f()});const g=()=>n(5,h=!0),x=()=>n(5,h=!1);function y(k){o=k,n(2,o)}function v(k){a=k,n(3,a)}const w=k=>p(k.detail);function S(k,A){t.$$.not_equal(A.editing,k)&&(A.editing=k,n(0,l))}const T=k=>n(1,c=k);return t.$$.update=()=>{t.$$.dirty&3&&n(4,u=(l==null?void 0:l.solves.filter(k=>k.session===(c==null?void 0:c._id)))||[])},[l,c,o,a,u,h,i,s,p,m,_,b,g,x,y,v,w,S,T]}class gQ extends xt{constructor(e){super(),wt(this,e,mQ,fQ,yt,{})}}const oo=Object.create(null);oo.open="0";oo.close="1";oo.ping="2";oo.pong="3";oo.message="4";oo.upgrade="5";oo.noop="6";const Ip=Object.create(null);Object.keys(oo).forEach(t=>{Ip[oo[t]]=t});const _Q={type:"error",data:"parser error"},bQ=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vQ=typeof ArrayBuffer=="function",yQ=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,LL=({type:t,data:e},n,i)=>bQ&&e instanceof Blob?n?i(e):kS(e,i):vQ&&(e instanceof ArrayBuffer||yQ(e))?n?i(e):kS(new Blob([e]),i):i(oo[t]+(e||"")),kS=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)},AS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<AS.length;t++)Qu[AS.charCodeAt(t)]=t;const wQ=t=>{let e=t.length*.75,n=t.length,i,s=0,r,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(i=0;i<n;i+=4)r=Qu[t.charCodeAt(i)],o=Qu[t.charCodeAt(i+1)],a=Qu[t.charCodeAt(i+2)],l=Qu[t.charCodeAt(i+3)],u[s++]=r<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|l&63;return c},xQ=typeof ArrayBuffer=="function",CL=(t,e)=>{if(typeof t!="string")return{type:"message",data:PL(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:MQ(t.substring(1),e)}:Ip[n]?t.length>1?{type:Ip[n],data:t.substring(1)}:{type:Ip[n]}:_Q},MQ=(t,e)=>{if(xQ){const n=wQ(t);return PL(n,e)}else return{base64:!0,data:t}},PL=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},RL=String.fromCharCode(30),SQ=(t,e)=>{const n=t.length,i=new Array(n);let s=0;t.forEach((r,o)=>{LL(r,!1,a=>{i[o]=a,++s===n&&e(i.join(RL))})})},EQ=(t,e)=>{const n=t.split(RL),i=[];for(let s=0;s<n.length;s++){const r=CL(n[s],e);if(i.push(r),r.type==="error")break}return i},IL=4;function yi(t){if(t)return TQ(t)}function TQ(t){for(var e in yi.prototype)t[e]=yi.prototype[e];return t}yi.prototype.on=yi.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};yi.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};yi.prototype.off=yi.prototype.removeListener=yi.prototype.removeAllListeners=yi.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,s=0;s<n.length;s++)if(i=n[s],i===e||i.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};yi.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,s=n.length;i<s;++i)n[i].apply(this,e)}return this};yi.prototype.emitReserved=yi.prototype.emit;yi.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};yi.prototype.hasListeners=function(t){return!!this.listeners(t).length};const $s=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function DL(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}const kQ=$s.setTimeout,AQ=$s.clearTimeout;function Og(t,e){e.useNativeTimers?(t.setTimeoutFn=kQ.bind($s),t.clearTimeoutFn=AQ.bind($s)):(t.setTimeoutFn=$s.setTimeout.bind($s),t.clearTimeoutFn=$s.clearTimeout.bind($s))}const LQ=1.33;function CQ(t){return typeof t=="string"?PQ(t):Math.ceil((t.byteLength||t.size)*LQ)}function PQ(t){let e=0,n=0;for(let i=0,s=t.length;i<s;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}class RQ extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}class OL extends yi{constructor(e){super(),this.writable=!1,Og(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new RQ(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=CL(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const NL="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),$_=64,IQ={};let LS=0,Jd=0,CS;function PS(t){let e="";do e=NL[t%$_]+e,t=Math.floor(t/$_);while(t>0);return e}function BL(){const t=PS(+new Date);return t!==CS?(LS=0,CS=t):t+"."+PS(LS++)}for(;Jd<$_;Jd++)IQ[NL[Jd]]=Jd;function FL(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function DQ(t){let e={},n=t.split("&");for(let i=0,s=n.length;i<s;i++){let r=n[i].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}let zL=!1;try{zL=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const OQ=zL;function UL(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||OQ))return new XMLHttpRequest}catch{}if(!e)try{return new $s[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function NQ(){}const BQ=function(){return new UL({xdomain:!1}).responseType!=null}();class FQ extends OL{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port,this.xs=e.secure!==i}const n=e&&e.forceBase64;this.supportsBinary=BQ&&!n}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};EQ(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,SQ(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const n=this.opts.secure?"https":"http";let i="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=BL()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(n==="https"&&Number(this.opts.port)!==443||n==="http"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port);const s=FL(e),r=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(s.length?"?"+s:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Zr(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(s,r)=>{this.onError("xhr post error",s,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}class Zr extends yi{constructor(e,n){super(),Og(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.create()}create(){const e=DL(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const n=this.xhr=new UL(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=Zr.requestsCount++,Zr.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=NQ,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Zr.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Zr.requestsCount=0;Zr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",RS);else if(typeof addEventListener=="function"){const t="onpagehide"in $s?"pagehide":"unload";addEventListener(t,RS,!1)}}function RS(){for(let t in Zr.requests)Zr.requests.hasOwnProperty(t)&&Zr.requests[t].abort()}const HL=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),Kd=$s.WebSocket||$s.MozWebSocket,IS=!0,zQ="arraybuffer",DS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class UQ extends OL{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=DS?{}:DL(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=IS&&!DS?n?new Kd(e,n):new Kd(e):new Kd(e,n,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType||zQ,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],s=n===e.length-1;LL(i,this.supportsBinary,r=>{const o={};try{IS&&this.ws.send(r)}catch{}s&&HL(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const n=this.opts.secure?"wss":"ws";let i="";this.opts.port&&(n==="wss"&&Number(this.opts.port)!==443||n==="ws"&&Number(this.opts.port)!==80)&&(i=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=BL()),this.supportsBinary||(e.b64=1);const s=FL(e),r=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(r?"["+this.opts.hostname+"]":this.opts.hostname)+i+this.opts.path+(s.length?"?"+s:"")}check(){return!!Kd}}const HQ={websocket:UQ,polling:FQ},VQ=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,GQ=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Q_(t){const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let s=VQ.exec(t||""),r={},o=14;for(;o--;)r[GQ[o]]=s[o]||"";return n!=-1&&i!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=WQ(r,r.path),r.queryKey=jQ(r,r.query),r}function WQ(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function jQ(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,r){s&&(n[s]=r)}),n}class ha extends yi{constructor(e,n={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=Q_(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=Q_(n.host).host),Og(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=DQ(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=IL,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts.transportOptions[e],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new HQ[e](i)}open(){let e;if(this.opts.rememberUpgrade&&ha.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),i=!1;ha.priorWebsocketSuccess=!1;const s=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!i)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ha.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function r(){i||(i=!0,u(),n.close(),n=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=n.name,r(),this.emitReserved("upgradeError",h)};function a(){o("transport closed")}function l(){o("socket closed")}function c(f){n&&f.name!==n.name&&r()}const u=()=>{n.removeListener("open",s),n.removeListener("error",o),n.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};n.once("open",s),n.once("error",o),n.once("close",a),this.once("close",l),this.once("upgrading",c),n.open()}onOpen(){if(this.readyState="open",ha.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(n+=CQ(s)),i>0&&n>this.maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,s){if(typeof n=="function"&&(s=n,n=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const r={type:e,data:n,options:i};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){ha.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const s=e.length;for(;i<s;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}}ha.protocol=IL;function YQ(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),i=Q_(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+e,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}const qQ=typeof ArrayBuffer=="function",XQ=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,VL=Object.prototype.toString,ZQ=typeof Blob=="function"||typeof Blob<"u"&&VL.call(Blob)==="[object BlobConstructor]",JQ=typeof File=="function"||typeof File<"u"&&VL.call(File)==="[object FileConstructor]";function Dv(t){return qQ&&(t instanceof ArrayBuffer||XQ(t))||ZQ&&t instanceof Blob||JQ&&t instanceof File}function Dp(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(Dp(t[n]))return!0;return!1}if(Dv(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Dp(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Dp(t[n]))return!0;return!1}function KQ(t){const e=[],n=t.data,i=t;return i.data=eb(n,e),i.attachments=e.length,{packet:i,buffers:e}}function eb(t,e){if(!t)return t;if(Dv(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=eb(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=eb(t[i],e));return n}return t}function $Q(t,e){return t.data=tb(t.data,e),delete t.attachments,t}function tb(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=tb(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=tb(t[n],e));return t}const QQ=5;var wn;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(wn||(wn={}));class eee{constructor(e){this.replacer=e}encode(e){return(e.type===wn.EVENT||e.type===wn.ACK)&&Dp(e)?this.encodeAsBinary({type:e.type===wn.EVENT?wn.BINARY_EVENT:wn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===wn.BINARY_EVENT||e.type===wn.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=KQ(e),i=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(i),s}}class Ov extends yi{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const i=n.type===wn.BINARY_EVENT;i||n.type===wn.BINARY_ACK?(n.type=i?wn.EVENT:wn.ACK,this.reconstructor=new tee(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Dv(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const i={type:Number(e.charAt(0))};if(wn[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===wn.BINARY_EVENT||i.type===wn.BINARY_ACK){const r=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(r,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(o)}if(e.charAt(n+1)==="/"){const r=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););i.nsp=e.substring(r,n)}else i.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const r=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}i.id=Number(e.substring(r,n+1))}if(e.charAt(++n)){const r=this.tryParse(e.substr(n));if(Ov.isPayloadValid(i.type,r))i.data=r;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case wn.CONNECT:return typeof n=="object";case wn.DISCONNECT:return n===void 0;case wn.CONNECT_ERROR:return typeof n=="string"||typeof n=="object";case wn.EVENT:case wn.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case wn.ACK:case wn.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class tee{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=$Q(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const nee=Object.freeze(Object.defineProperty({__proto__:null,protocol:QQ,get PacketType(){return wn},Encoder:eee,Decoder:Ov},Symbol.toStringTag,{value:"Module"}));function br(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const iee=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class GL extends yi{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[br(e,"open",this.onopen.bind(this)),br(e,"packet",this.onpacket.bind(this)),br(e,"error",this.onerror.bind(this)),br(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(iee.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:wn.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,a=n.pop();this._registerAckCallback(o,a),i.id=o}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,n){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(r),n.apply(this,[null,...o])}}emitWithAck(e,...n){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((s,r)=>{n.push((o,a)=>i?o?r(o):s(a):s(o)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this.ids++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...r)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...r)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(){if(this._queue.length===0)return;const e=this._queue[0];if(e.pending)return;e.pending=!0,e.tryCount++;const n=this.ids;this.ids=e.id,this.flags=e.flags,this.emit.apply(this,e.args),this.ids=n}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:wn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case wn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case wn.EVENT:case wn.BINARY_EVENT:this.onevent(e);break;case wn.ACK:case wn.BINARY_ACK:this.onack(e);break;case wn.DISCONNECT:this.ondisconnect();break;case wn.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...s){i||(i=!0,n.packet({type:wn.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:wn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}function yu(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}yu.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};yu.prototype.reset=function(){this.attempts=0};yu.prototype.setMin=function(t){this.ms=t};yu.prototype.setMax=function(t){this.max=t};yu.prototype.setJitter=function(t){this.jitter=t};class nb extends yi{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Og(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new yu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||nee;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ha(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=br(n,"open",function(){i.onopen(),e&&e()}),r=br(n,"error",o=>{i.cleanup(),i._readyState="closed",this.emitReserved("error",o),e?e(o):i.maybeReconnectOnOpen()});if(this._timeout!==!1){const o=this._timeout;o===0&&s();const a=this.setTimeoutFn(()=>{s(),n.close(),n.emit("error",new Error("timeout"))},o);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}return this.subs.push(s),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(br(e,"ping",this.onping.bind(this)),br(e,"data",this.ondata.bind(this)),br(e,"error",this.onerror.bind(this)),br(e,"close",this.onclose.bind(this)),br(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){HL(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i||(i=new GL(this,e,n),this.nsps[e]=i),this._autoConnect&&i.connect(),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(function(){clearTimeout(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Vu={};function Op(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=YQ(t,e.path||"/socket.io"),i=n.source,s=n.id,r=n.path,o=Vu[s]&&r in Vu[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new nb(i,e):(Vu[s]||(Vu[s]=new nb(i,e)),l=Vu[s]),n.query&&!e.query&&(e.query=n.queryKey),l.socket(n.path,e)}Object.assign(Op,{Manager:nb,Socket:GL,io:Op,connect:Op});function see(t){let e,n;return{c(){e=mt("svg"),n=mt("path"),M(n,"d","M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"),M(n,"fill",t[2]),M(e,"width",t[0]),M(e,"height",t[1]),M(e,"viewBox",t[3])},m(i,s){R(i,e,s),E(e,n)},p(i,[s]){s&4&&M(n,"fill",i[2]),s&1&&M(e,"width",i[0]),s&2&&M(e,"height",i[1]),s&8&&M(e,"viewBox",i[3])},i:qe,o:qe,d(i){i&&P(e)}}}function ree(t,e,n){let{size:i="1em"}=e,{width:s=i}=e,{height:r=i}=e,{color:o="currentColor"}=e,{viewBox:a="0 0 24 24"}=e;return t.$$set=l=>{"size"in l&&n(4,i=l.size),"width"in l&&n(0,s=l.width),"height"in l&&n(1,r=l.height),"color"in l&&n(2,o=l.color),"viewBox"in l&&n(3,a=l.viewBox)},[s,r,o,a,i]}class oee extends xt{constructor(e){super(),wt(this,e,ree,see,yt,{size:4,width:0,height:1,color:2,viewBox:3})}}function OS(t,e,n){const i=t.slice();return i[42]=e[n],i}function NS(t,e,n){const i=t.slice();return i[45]=e[n],i[47]=n,i}function BS(t,e,n){const i=t.slice();return i[48]=e[n],i}function FS(t,e,n){const i=t.slice();return i[45]=e[n],i[47]=n,i}function zS(t,e,n){const i=t.slice();return i[48]=e[n],i}function US(t){let e,n,i,s,r;return n=new Ct({props:{class:"bg-green-700 text-gray-300",$$slots:{default:[aee]},$$scope:{ctx:t}}}),n.$on("click",t[20]),s=new Ct({props:{class:"bg-blue-700 text-gray-300",$$slots:{default:[lee]},$$scope:{ctx:t}}}),s.$on("click",t[21]),{c(){e=C("div"),ue(n.$$.fragment),i=O(),ue(s.$$.fragment),M(e,"class","flex items-center justify-center gap-4")},m(o,a){R(o,e,a),le(n,e,null),E(e,i),le(s,e,null),r=!0},p(o,a){const l={};a[1]&8388608&&(l.$$scope={dirty:a,ctx:o}),n.$set(l);const c={};a[1]&8388608&&(c.$$scope={dirty:a,ctx:o}),s.$set(c)},i(o){r||(I(n.$$.fragment,o),I(s.$$.fragment,o),r=!0)},o(o){H(n.$$.fragment,o),H(s.$$.fragment,o),r=!1},d(o){o&&P(e),ce(n),ce(s)}}}function aee(t){let e;return{c(){e=ae("Create")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function lee(t){let e;return{c(){e=ae("Join")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function HS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g;function x(S){t[22](S)}let y={size:50,focus:!0};t[4]!==void 0&&(y.value=t[4]),r=new hi({props:y}),vt.push(()=>Vt(r,"value",x));function v(S){t[23](S)}let w={class:"w-full",items:t[14],label:See,transform:Eee};return t[8]!==void 0&&(w.value=t[8]),f=new Wi({props:w}),vt.push(()=>Vt(f,"value",v)),m=new Ct({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[cee]},$$scope:{ctx:t}}}),m.$on("click",t[24]),b=new Ct({props:{class:"bg-blue-700 text-gray-300",$$slots:{default:[uee]},$$scope:{ctx:t}}}),b.$on("click",t[25]),{c(){e=C("div"),n=C("span"),n.textContent="Name:",i=O(),s=C("div"),ue(r.$$.fragment),a=O(),l=C("span"),l.textContent="Mode:",c=O(),u=C("div"),ue(f.$$.fragment),d=O(),p=C("div"),ue(m.$$.fragment),_=O(),ue(b.$$.fragment),M(n,"class","col-span-1 flex justify-end items-center"),M(s,"class","col-span-2"),M(l,"class","col-span-1 flex justify-end items-center"),M(u,"class","col-span-2"),M(e,"class","max-w-xs justify-center mx-auto grid gap-4 grid-cols-3 mb-6"),M(p,"class","flex items-center justify-center gap-4")},m(S,T){R(S,e,T),E(e,n),E(e,i),E(e,s),le(r,s,null),E(e,a),E(e,l),E(e,c),E(e,u),le(f,u,null),R(S,d,T),R(S,p,T),le(m,p,null),E(p,_),le(b,p,null),g=!0},p(S,T){const k={};!o&&T[0]&16&&(o=!0,k.value=S[4],Ht(()=>o=!1)),r.$set(k);const A={};!h&&T[0]&256&&(h=!0,A.value=S[8],Ht(()=>h=!1)),f.$set(A);const L={};T[1]&8388608&&(L.$$scope={dirty:T,ctx:S}),m.$set(L);const D={};T[1]&8388608&&(D.$$scope={dirty:T,ctx:S}),b.$set(D)},i(S){g||(I(r.$$.fragment,S),I(f.$$.fragment,S),I(m.$$.fragment,S),I(b.$$.fragment,S),g=!0)},o(S){H(r.$$.fragment,S),H(f.$$.fragment,S),H(m.$$.fragment,S),H(b.$$.fragment,S),g=!1},d(S){S&&P(e),ce(r),ce(f),S&&P(d),S&&P(p),ce(m),ce(b)}}}function cee(t){let e;return{c(){e=ae("Back")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function uee(t){let e;return{c(){e=ae("Create")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function VS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w;function S(L){t[26](L)}let T={size:50,focus:!0};t[4]!==void 0&&(T.value=t[4]),r=new hi({props:T}),vt.push(()=>Vt(r,"value",S));function k(L){t[27](L)}let A={size:50};return t[5]!==void 0&&(A.value=t[5]),f=new hi({props:A}),vt.push(()=>Vt(f,"value",k)),m=new vc({props:{checked:t[2]}}),m.$on("change",t[28]),x=new Ct({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[fee]},$$scope:{ctx:t}}}),x.$on("click",t[29]),v=new Ct({props:{class:"bg-blue-700 text-gray-300",$$slots:{default:[hee]},$$scope:{ctx:t}}}),v.$on("click",t[30]),{c(){e=C("div"),n=C("span"),n.textContent="Name:",i=O(),s=C("div"),ue(r.$$.fragment),a=O(),l=C("span"),l.textContent="Game ID:",c=O(),u=C("div"),ue(f.$$.fragment),d=O(),p=C("span"),ue(m.$$.fragment),_=ae(" Join as observer"),b=O(),g=C("div"),ue(x.$$.fragment),y=O(),ue(v.$$.fragment),M(n,"class","col-span-1 flex justify-end items-center"),M(s,"class","col-span-2"),M(l,"class","col-span-1 flex justify-end items-center"),M(u,"class","col-span-2"),M(p,"class","col-span-3 flex justify-center gap-2"),M(e,"class","max-w-xs justify-center mx-auto grid gap-4 grid-cols-3 mb-6"),M(g,"class","flex items-center justify-center gap-4 my-6")},m(L,D){R(L,e,D),E(e,n),E(e,i),E(e,s),le(r,s,null),E(e,a),E(e,l),E(e,c),E(e,u),le(f,u,null),E(e,d),E(e,p),le(m,p,null),E(p,_),R(L,b,D),R(L,g,D),le(x,g,null),E(g,y),le(v,g,null),w=!0},p(L,D){const B={};!o&&D[0]&16&&(o=!0,B.value=L[4],Ht(()=>o=!1)),r.$set(B);const U={};!h&&D[0]&32&&(h=!0,U.value=L[5],Ht(()=>h=!1)),f.$set(U);const N={};D[0]&4&&(N.checked=L[2]),m.$set(N);const $={};D[1]&8388608&&($.$$scope={dirty:D,ctx:L}),x.$set($);const W={};D[1]&8388608&&(W.$$scope={dirty:D,ctx:L}),v.$set(W)},i(L){w||(I(r.$$.fragment,L),I(f.$$.fragment,L),I(m.$$.fragment,L),I(x.$$.fragment,L),I(v.$$.fragment,L),w=!0)},o(L){H(r.$$.fragment,L),H(f.$$.fragment,L),H(m.$$.fragment,L),H(x.$$.fragment,L),H(v.$$.fragment,L),w=!1},d(L){L&&P(e),ce(r),ce(f),ce(m),L&&P(b),L&&P(g),ce(x),ce(v)}}}function fee(t){let e;return{c(){e=ae("Back")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function hee(t){let e;return{c(){e=ae("Join")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function GS(t){let e,n,i,s,r;return s=new Ct({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[dee]},$$scope:{ctx:t}}}),s.$on("click",t[31]),{c(){e=C("h2"),e.textContent="Waiting...",n=O(),i=C("div"),ue(s.$$.fragment),M(e,"class","text-gray-300 text-2xl text-center mb-6"),M(i,"class","flex items-center justify-center gap-4")},m(o,a){R(o,e,a),R(o,n,a),R(o,i,a),le(s,i,null),r=!0},p(o,a){const l={};a[1]&8388608&&(l.$$scope={dirty:a,ctx:o}),s.$set(l)},i(o){r||(I(s.$$.fragment,o),r=!0)},o(o){H(s.$$.fragment,o),r=!1},d(o){o&&P(e),o&&P(n),o&&P(i),ce(s)}}}function dee(t){let e;return{c(){e=ae("Back")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function WS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A,L,D,B,U,N,$,W;l=new $i({props:{position:"top",text:"Observers",$$slots:{default:[pee]},$$scope:{ctx:t}}}),f=new $i({props:{position:"top",text:"Exit",$$slots:{default:[mee]},$$scope:{ctx:t}}});let j=t[9]&&jS(t),J=t[7].started&&YS(t),se=t[3]&&qS(),ne=t[7].players,K=[];for(let q=0;q<ne.length;q+=1)K[q]=ZS(FS(t,ne,q));return{c(){e=C("h2"),n=ae(`Game ID:\r
      `),i=C("span"),s=ae(t[5]),r=O(),o=C("ul"),a=C("li"),ue(l.$$.fragment),c=O(),u=C("li"),ue(f.$$.fragment),h=O(),j&&j.c(),d=O(),J&&J.c(),p=O(),se&&se.c(),m=O(),_=C("ul"),b=C("li"),g=O(),x=C("li"),x.textContent="Player",y=O(),v=C("li"),v.textContent="T1",w=O(),S=C("li"),S.textContent="T2",T=O(),k=C("li"),k.textContent="T3",A=O(),L=C("li"),L.textContent="T4",D=O(),B=C("li"),B.textContent="T5",U=O();for(let q=0;q<K.length;q+=1)K[q].c();M(i,"class","bg-violet-700 text-gray-300 px-2 py-1 rounded-md"),M(e,"class","text-gray-300 text-xl text-center mb-6"),M(a,"class","bg-gray-500 text-gray-300 svelte-ts44cs"),M(u,"class","bg-red-700 text-gray-300 svelte-ts44cs"),M(o,"id","actions"),M(o,"class","absolute top-2 right-2 flex items-center gap-2 svelte-ts44cs"),M(b,"class","header svelte-ts44cs"),M(x,"class","header svelte-ts44cs"),M(v,"class","header svelte-ts44cs"),M(S,"class","header svelte-ts44cs"),M(k,"class","header svelte-ts44cs"),M(L,"class","header svelte-ts44cs"),M(B,"class","header svelte-ts44cs"),M(_,"id","players"),M(_,"class","svelte-ts44cs")},m(q,te){R(q,e,te),E(e,n),E(e,i),E(i,s),R(q,r,te),R(q,o,te),E(o,a),le(l,a,null),E(o,c),E(o,u),le(f,u,null),R(q,h,te),j&&j.m(q,te),R(q,d,te),J&&J.m(q,te),R(q,p,te),se&&se.m(q,te),R(q,m,te),R(q,_,te),E(_,b),E(_,g),E(_,x),E(_,y),E(_,v),E(_,w),E(_,S),E(_,T),E(_,k),E(_,A),E(_,L),E(_,D),E(_,B),E(_,U);for(let re=0;re<K.length;re+=1)K[re].m(_,null);N=!0,$||(W=$e(u,"click",t[19]),$=!0)},p(q,te){(!N||te[0]&32)&&ke(s,q[5]);const re={};te[0]&128|te[1]&8388608&&(re.$$scope={dirty:te,ctx:q}),l.$set(re);const Oe={};if(te[1]&8388608&&(Oe.$$scope={dirty:te,ctx:q}),f.$set(Oe),q[9]?j?(j.p(q,te),te[0]&512&&I(j,1)):(j=jS(q),j.c(),I(j,1),j.m(d.parentNode,d)):j&&(ot(),H(j,1,1,()=>{j=null}),at()),q[7].started?J?(J.p(q,te),te[0]&128&&I(J,1)):(J=YS(q),J.c(),I(J,1),J.m(p.parentNode,p)):J&&(ot(),H(J,1,1,()=>{J=null}),at()),q[3]?se||(se=qS(),se.c(),se.m(m.parentNode,m)):se&&(se.d(1),se=null),te[0]&128){ne=q[7].players;let Ee;for(Ee=0;Ee<ne.length;Ee+=1){const ye=FS(q,ne,Ee);K[Ee]?K[Ee].p(ye,te):(K[Ee]=ZS(ye),K[Ee].c(),K[Ee].m(_,null))}for(;Ee<K.length;Ee+=1)K[Ee].d(1);K.length=ne.length}},i(q){N||(I(l.$$.fragment,q),I(f.$$.fragment,q),I(j),I(J),N=!0)},o(q){H(l.$$.fragment,q),H(f.$$.fragment,q),H(j),H(J),N=!1},d(q){q&&P(e),q&&P(r),q&&P(o),ce(l),ce(f),q&&P(h),j&&j.d(q),q&&P(d),J&&J.d(q),q&&P(p),se&&se.d(q),q&&P(m),q&&P(_),en(K,q),$=!1,W()}}}function pee(t){let e,n,i,s=t[7].observers.length+"",r,o;return n=new oee({props:{size:"1.2rem"}}),{c(){e=C("div"),ue(n.$$.fragment),i=O(),r=ae(s),M(e,"class","flex items-center gap-1")},m(a,l){R(a,e,l),le(n,e,null),E(e,i),E(e,r),o=!0},p(a,l){(!o||l[0]&128)&&s!==(s=a[7].observers.length+"")&&ke(r,s)},i(a){o||(I(n.$$.fragment,a),o=!0)},o(a){H(n.$$.fragment,a),o=!1},d(a){a&&P(e),ce(n)}}}function mee(t){let e,n,i;return n=new qo({props:{size:"1.2rem"}}),{c(){e=C("div"),ue(n.$$.fragment),M(e,"class","flex items-center")},m(s,r){R(s,e,r),le(n,e,null),i=!0},p:qe,i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&P(e),ce(n)}}}function jS(t){let e,n,i,s;const r=[_ee,gee],o=[];function a(l,c){return!l[7].started&&l[7].players.length>1?0:1}return e=a(t),n=o[e]=r[e](t),{c(){n.c(),i=ts()},m(l,c){o[e].m(l,c),R(l,i,c),s=!0},p(l,c){let u=e;e=a(l),e===u?o[e].p(l,c):(ot(),H(o[u],1,1,()=>{o[u]=null}),at(),n=o[e],n?n.p(l,c):(n=o[e]=r[e](l),n.c()),I(n,1),n.m(i.parentNode,i))},i(l){s||(I(n),s=!0)},o(l){H(n),s=!1},d(l){o[e].d(l),l&&P(i)}}}function gee(t){let e;return{c(){e=C("span"),e.textContent="Share the game ID with your friends!",M(e,"class","flex justify-center text-yellow-300")},m(n,i){R(n,e,i)},p:qe,i:qe,o:qe,d(n){n&&P(e)}}}function _ee(t){let e,n;return e=new Ct({props:{class:"bg-violet-700 text-gray-300 my-8 mx-auto",$$slots:{default:[bee]},$$scope:{ctx:t}}}),e.$on("click",t[32]),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[1]&8388608&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function bee(t){let e;return{c(){e=ae("Start!")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function YS(t){let e,n,i;return n=new TA({props:{battle:!0,useScramble:t[6],useMode:t[8],genScramble:!1,enableKeyboard:!(t[11]||t[10]||t[3])}}),n.$on("solve",t[18]),{c(){e=C("div"),ue(n.$$.fragment),M(e,"class","h-96 rounded-md relative")},m(s,r){R(s,e,r),le(n,e,null),i=!0},p(s,r){const o={};r[0]&64&&(o.useScramble=s[6]),r[0]&256&&(o.useMode=s[8]),r[0]&3080&&(o.enableKeyboard=!(s[11]||s[10]||s[3])),n.$set(o)},i(s){i||(I(n.$$.fragment,s),i=!0)},o(s){H(n.$$.fragment,s),i=!1},d(s){s&&P(e),ce(n)}}}function qS(t){let e;return{c(){e=C("span"),e.textContent="Ending game...",M(e,"class","flex justify-center text-yellow-300")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function XS(t){let e,n=(t[45][1].times[t[48]]===null?"DNF":t[45][1].times[t[48]]?Lt(t[45][1].times[t[48]],!0):"-")+"",i;return{c(){e=C("li"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[0]&128&&n!==(n=(s[45][1].times[s[48]]===null?"DNF":s[45][1].times[s[48]]?Lt(s[45][1].times[s[48]],!0):"-")+"")&&ke(i,n)},d(s){s&&P(e)}}}function ZS(t){let e,n=t[47]+1+"",i,s,r,o=t[45][1].name+"",a,l,c,u=[0,1,2,3,4],f=[];for(let h=0;h<5;h+=1)f[h]=XS(zS(t,u,h));return{c(){e=C("li"),i=ae(n),s=O(),r=C("li"),a=ae(o),l=O();for(let h=0;h<5;h+=1)f[h].c();c=ts(),M(e,"class","text-gray-300")},m(h,d){R(h,e,d),E(e,i),R(h,s,d),R(h,r,d),E(r,a),R(h,l,d);for(let p=0;p<5;p+=1)f[p].m(h,d);R(h,c,d)},p(h,d){if(d[0]&128&&o!==(o=h[45][1].name+"")&&ke(a,o),d[0]&128){u=[0,1,2,3,4];let p;for(p=0;p<5;p+=1){const m=zS(h,u,p);f[p]?f[p].p(m,d):(f[p]=XS(m),f[p].c(),f[p].m(c.parentNode,c))}for(;p<5;p+=1)f[p].d(1)}},d(h){h&&P(e),h&&P(s),h&&P(r),h&&P(l),en(f,h),h&&P(c)}}}function JS(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A,L=t[7].players,D=[];for(let U=0;U<L.length;U+=1)D[U]=$S(NS(t,L,U));let B=t[9]&&QS(t);return k=new Ct({props:{class:"bg-red-700 text-gray-300 my-8",$$slots:{default:[yee]},$$scope:{ctx:t}}}),k.$on("click",t[34]),{c(){e=C("ul"),n=C("li"),i=O(),s=C("li"),s.textContent="Player",r=O(),o=C("li"),o.textContent="T1",a=O(),l=C("li"),l.textContent="T2",c=O(),u=C("li"),u.textContent="T3",f=O(),h=C("li"),h.textContent="T4",d=O(),p=C("li"),p.textContent="T5",m=O(),_=C("li"),_.textContent="Ao5",b=O(),g=C("li"),g.textContent="Best",x=O(),y=C("li"),y.textContent="Worst",v=O();for(let U=0;U<D.length;U+=1)D[U].c();w=O(),S=C("div"),B&&B.c(),T=O(),ue(k.$$.fragment),M(n,"class","header svelte-ts44cs"),M(s,"class","header svelte-ts44cs"),M(o,"class","header svelte-ts44cs"),M(l,"class","header svelte-ts44cs"),M(u,"class","header svelte-ts44cs"),M(h,"class","header svelte-ts44cs"),M(p,"class","header svelte-ts44cs"),M(_,"class","header svelte-ts44cs"),M(g,"class","header svelte-ts44cs"),M(y,"class","header svelte-ts44cs"),M(e,"id","players-gameover"),M(e,"class","svelte-ts44cs"),M(S,"class","flex items-center justify-center gap-4 w-full")},m(U,N){R(U,e,N),E(e,n),E(e,i),E(e,s),E(e,r),E(e,o),E(e,a),E(e,l),E(e,c),E(e,u),E(e,f),E(e,h),E(e,d),E(e,p),E(e,m),E(e,_),E(e,b),E(e,g),E(e,x),E(e,y),E(e,v);for(let $=0;$<D.length;$+=1)D[$].m(e,null);R(U,w,N),R(U,S,N),B&&B.m(S,null),E(S,T),le(k,S,null),A=!0},p(U,N){if(N[0]&128){L=U[7].players;let W;for(W=0;W<L.length;W+=1){const j=NS(U,L,W);D[W]?D[W].p(j,N):(D[W]=$S(j),D[W].c(),D[W].m(e,null))}for(;W<D.length;W+=1)D[W].d(1);D.length=L.length}U[9]?B?(B.p(U,N),N[0]&512&&I(B,1)):(B=QS(U),B.c(),I(B,1),B.m(S,T)):B&&(ot(),H(B,1,1,()=>{B=null}),at());const $={};N[1]&8388608&&($.$$scope={dirty:N,ctx:U}),k.$set($)},i(U){A||(I(B),I(k.$$.fragment,U),A=!0)},o(U){H(B),H(k.$$.fragment,U),A=!1},d(U){U&&P(e),en(D,U),U&&P(w),U&&P(S),B&&B.d(),ce(k)}}}function KS(t){let e,n=(t[45][1].times[t[48]]===null?"DNF":t[45][1].times[t[48]]?Lt(t[45][1].times[t[48]],!0):"-")+"",i;return{c(){e=C("li"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[0]&128&&n!==(n=(s[45][1].times[s[48]]===null?"DNF":s[45][1].times[s[48]]?Lt(s[45][1].times[s[48]],!0):"-")+"")&&ke(i,n)},d(s){s&&P(e)}}}function $S(t){let e,n=t[47]+1+"",i,s,r,o=t[45][1].name+"",a,l,c,u,f=Lt(t[45][1].times[5],!0)+"",h,d,p,m=Lt(t[45][1].times[6],!0)+"",_,b,g,x=Lt(t[45][1].times[7],!0)+"",y,v,w=[0,1,2,3,4],S=[];for(let T=0;T<5;T+=1)S[T]=KS(BS(t,w,T));return{c(){e=C("li"),i=ae(n),s=O(),r=C("li"),a=ae(o),l=O();for(let T=0;T<5;T+=1)S[T].c();c=O(),u=C("li"),h=ae(f),d=O(),p=C("li"),_=ae(m),b=O(),g=C("li"),y=ae(x),v=O(),M(e,"class","header svelte-ts44cs"),M(u,"class","text-blue-400"),M(p,"class","text-green-600"),M(g,"class","text-orange-600")},m(T,k){R(T,e,k),E(e,i),R(T,s,k),R(T,r,k),E(r,a),R(T,l,k);for(let A=0;A<5;A+=1)S[A].m(T,k);R(T,c,k),R(T,u,k),E(u,h),R(T,d,k),R(T,p,k),E(p,_),R(T,b,k),R(T,g,k),E(g,y),E(g,v)},p(T,k){if(k[0]&128&&o!==(o=T[45][1].name+"")&&ke(a,o),k[0]&128){w=[0,1,2,3,4];let A;for(A=0;A<5;A+=1){const L=BS(T,w,A);S[A]?S[A].p(L,k):(S[A]=KS(L),S[A].c(),S[A].m(c.parentNode,c))}for(;A<5;A+=1)S[A].d(1)}k[0]&128&&f!==(f=Lt(T[45][1].times[5],!0)+"")&&ke(h,f),k[0]&128&&m!==(m=Lt(T[45][1].times[6],!0)+"")&&ke(_,m),k[0]&128&&x!==(x=Lt(T[45][1].times[7],!0)+"")&&ke(y,x)},d(T){T&&P(e),T&&P(s),T&&P(r),T&&P(l),en(S,T),T&&P(c),T&&P(u),T&&P(d),T&&P(p),T&&P(b),T&&P(g)}}}function QS(t){let e,n;return e=new Ct({props:{class:"bg-violet-700 text-gray-300 my-8",$$slots:{default:[vee]},$$scope:{ctx:t}}}),e.$on("click",t[33]),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,s){const r={};s[1]&8388608&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function vee(t){let e;return{c(){e=ae("Rematch")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function yee(t){let e;return{c(){e=ae("Exit")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function eE(t){let e,n,i,s,r;return s=new Ct({props:{class:"bg-red-700 text-gray-300",$$slots:{default:[wee]},$$scope:{ctx:t}}}),s.$on("click",t[35]),{c(){e=C("h2"),e.textContent="Error",n=O(),i=C("div"),ue(s.$$.fragment),M(e,"class","text-gray-300 text-2xl text-center mb-6"),M(i,"class","flex items-center justify-center gap-4")},m(o,a){R(o,e,a),R(o,n,a),R(o,i,a),le(s,i,null),r=!0},p(o,a){const l={};a[1]&8388608&&(l.$$scope={dirty:a,ctx:o}),s.$set(l)},i(o){r||(I(s.$$.fragment,o),r=!0)},o(o){H(s.$$.fragment,o),r=!1},d(o){o&&P(e),o&&P(n),o&&P(i),ce(s)}}}function wee(t){let e;return{c(){e=ae("Back")},m(n,i){R(n,e,i)},d(n){n&&P(e)}}}function tE(t){let e,n=t[42]+"",i;return{c(){e=C("li"),i=ae(n)},m(s,r){R(s,e,r),E(e,i)},p(s,r){r[0]&4096&&n!==(n=s[42]+"")&&ke(i,n)},d(s){s&&P(e)}}}function xee(t){let e,n,i=t[13].get(t[0])+"",s,r,o,a,l,c,u,f,h,d,p,m,_,b=t[0]==="idle"&&US(t),g=t[0]==="create"&&HS(t),x=t[0]==="join"&&VS(t),y=t[0]==="waiting"&&GS(t),v=t[0]==="play"&&WS(t),w=t[0]==="gameover"&&JS(t),S=t[0]==="error"&&eE(t),T=t[12],k=[];for(let A=0;A<T.length;A+=1)k[A]=tE(OS(t,T,A));return{c(){e=C("div"),n=C("h1"),s=ae(i),r=O(),b&&b.c(),o=O(),g&&g.c(),a=O(),x&&x.c(),l=O(),y&&y.c(),c=O(),v&&v.c(),u=O(),w&&w.c(),f=O(),S&&S.c(),h=O(),d=C("ul"),p=C("li"),p.textContent="Event list",m=O();for(let A=0;A<k.length;A+=1)k[A].c();M(n,"class","text-gray-300 text-3xl text-center mb-6"),M(p,"class","text-xl text-violet-400 font-bold"),M(d,"class","w-full text-white grid mt-8 items-center justify-center"),M(e,"class","container-mini bg-white bg-opacity-10 m-4 p-4 rounded-md pb-6 text-gray-400 relative")},m(A,L){R(A,e,L),E(e,n),E(n,s),E(e,r),b&&b.m(e,null),E(e,o),g&&g.m(e,null),E(e,a),x&&x.m(e,null),E(e,l),y&&y.m(e,null),E(e,c),v&&v.m(e,null),E(e,u),w&&w.m(e,null),E(e,f),S&&S.m(e,null),E(e,h),E(e,d),E(d,p),E(d,m);for(let D=0;D<k.length;D+=1)k[D].m(d,null);_=!0},p(A,L){if((!_||L[0]&1)&&i!==(i=A[13].get(A[0])+"")&&ke(s,i),A[0]==="idle"?b?(b.p(A,L),L[0]&1&&I(b,1)):(b=US(A),b.c(),I(b,1),b.m(e,o)):b&&(ot(),H(b,1,1,()=>{b=null}),at()),A[0]==="create"?g?(g.p(A,L),L[0]&1&&I(g,1)):(g=HS(A),g.c(),I(g,1),g.m(e,a)):g&&(ot(),H(g,1,1,()=>{g=null}),at()),A[0]==="join"?x?(x.p(A,L),L[0]&1&&I(x,1)):(x=VS(A),x.c(),I(x,1),x.m(e,l)):x&&(ot(),H(x,1,1,()=>{x=null}),at()),A[0]==="waiting"?y?(y.p(A,L),L[0]&1&&I(y,1)):(y=GS(A),y.c(),I(y,1),y.m(e,c)):y&&(ot(),H(y,1,1,()=>{y=null}),at()),A[0]==="play"?v?(v.p(A,L),L[0]&1&&I(v,1)):(v=WS(A),v.c(),I(v,1),v.m(e,u)):v&&(ot(),H(v,1,1,()=>{v=null}),at()),A[0]==="gameover"?w?(w.p(A,L),L[0]&1&&I(w,1)):(w=JS(A),w.c(),I(w,1),w.m(e,f)):w&&(ot(),H(w,1,1,()=>{w=null}),at()),A[0]==="error"?S?(S.p(A,L),L[0]&1&&I(S,1)):(S=eE(A),S.c(),I(S,1),S.m(e,h)):S&&(ot(),H(S,1,1,()=>{S=null}),at()),L[0]&4096){T=A[12];let D;for(D=0;D<T.length;D+=1){const B=OS(A,T,D);k[D]?k[D].p(B,L):(k[D]=tE(B),k[D].c(),k[D].m(d,null))}for(;D<k.length;D+=1)k[D].d(1);k.length=T.length}},i(A){_||(I(b),I(g),I(x),I(y),I(v),I(w),I(S),_=!0)},o(A){H(b),H(g),H(x),H(y),H(v),H(w),H(S),_=!1},d(A){A&&P(e),b&&b.d(),g&&g.d(),x&&x.d(),y&&y.d(),v&&v.d(),w&&w.d(),S&&S.d(),en(k,A)}}}let Mee="ws://192.168.17.93:8080/";const See=t=>t[0],Eee=t=>t[1];function Tee(t,e,n){const i=new Map([["idle","Cube battle!"],["create","Create a battle"],["join","Join a battle"],["waiting","Connecting..."],["play","Battle!"],["error","Error :("],["gameover","Game Over"]]);let s="idle",r=ma[0][1],o,a=!1,l=!1,c="",u="",f="",h={players:[],observers:[],round:0,started:!1,total:0},d="",p=!1,m=!1,_=-1,b=!1,g=[];function x(...ye){g.push(ye.map(xe=>JSON.stringify(xe,null,2)).join(" ")),n(12,g)}function y(ye){n(0,s=ye),ye==="idle"&&(S(!1,!1),n(5,u=""),n(8,d="333"),_=-1,n(11,b=!1))}function v(){return n(4,c=c.trim()),x("tryCreate",c,d,o.connected),c&&d&&o.connected?(o.emit("CREATE",c),!0):!1}function w(){return n(4,c=c.trim()),x(a?"Trying to observe":"Trying to join"),c&&/^[0-9a-f]{8}$/.test(u)&&o.connected?(o.emit(a?"LOOK":"JOIN",u,c),!0):!1}function S(ye,xe){n(9,p=ye),n(10,m=xe)}function T(ye){n(11,b=!0);let xe=ye.detail;x("SOLVE: ",xe,Qr(xe)?1/0:xe.time,_),xe.group===-1&&(xe.group=_),o.emit("TIME",Qr(xe)?1/0:xe.time,xe.group)}function k(){let ye=h.players;for(let xe=0,Ae=ye.length;xe<Ae;xe+=1){let De=ye[xe][1].times.map(de=>de===null?1/0:de);ye[xe][1].times[5]=dk(5,De,tr.SEQUENTIAL)[4],ye[xe][1].times[6]=Math.min(...De.slice(0,5)),ye[xe][1].times[7]=Math.max(...De.slice(0,5))}h.players.sort((xe,Ae)=>xe[1].times[5]-Ae[1].times[5])}function A(){o.connected&&o.emit("EXIT")}function L(){o!=null&&o.connected&&o.disconnect(),n(1,o=Op(Mee))}ji(()=>{L(),console.error=function(...ye){x(...ye)},o.on("connect",()=>{x("CONNECTED")}),o.on("CREATED",ye=>{x("CREATED",ye),n(5,u=ye),y("play"),S(!0,!1)}),o.on("JOINED",()=>{x("JOINED"),y("play"),S(!1,!1)}),o.on("LOOKING",()=>{x("LOOKING"),y("play"),S(!1,!0)}),o.on("GAME_OVER",()=>{x("GAME_OVER"),y("gameover"),k(),n(3,l=!1)}),o.on("EXIT",()=>{x("EXIT"),y("idle")}),o.on("GAME_DATA",ye=>{x("GAME_DATA",ye),n(7,h=ye)}),o.on("SCRAMBLE",ye=>{x("SCRAMBLE",ye),n(6,f=ye)}),o.on("TIMEOUT",()=>{x("TIMEOUT"),n(3,l=!0)}),o.on("NEXT_ROUND",()=>{try{if(x("NEXT_ROUND"),n(11,b=!1),_+=1,p){let ye=r.find(xe=>xe[1]===d);x("gen: ",d,ye),o.emit("SCRAMBLE",Df.get(d).apply(null,[d,Math.abs(ye[2]),void 0]).replace(/\\n/g,"<br>").trim())}}catch(ye){x("ERROR: ",ye)}}),o.on("REMATCH",ye=>{x("REMATCH"),y("play")}),o.on("JOIN_ERROR",ye=>{x("JOIN_ERROR",ye),y("error")}),o.on("LOOK_ERROR",ye=>{x("LOOK_ERROR",ye),y("error")}),o.on("TIME_ERROR",ye=>{x("TIME_ERROR",ye),y("error")}),o.on("disconnect",()=>{x("DISCONNECTED"),y("idle")})}),Es(()=>{o.disconnect()});const D=()=>y("create"),B=()=>y("join");function U(ye){c=ye,n(4,c)}function N(ye){d=ye,n(8,d)}const $=()=>y("idle"),W=()=>v()&&y("waiting");function j(ye){c=ye,n(4,c)}function J(ye){u=ye,n(5,u)}return[s,o,a,l,c,u,f,h,d,p,m,b,g,i,r,y,v,w,T,A,D,B,U,N,$,W,j,J,ye=>n(2,a=ye.detail.value),()=>y("idle"),()=>w()&&y("waiting"),()=>y("idle"),()=>o.emit("START"),()=>o.emit("REMATCH"),()=>o.emit("EXIT"),()=>y("idle")]}class kee extends xt{constructor(e){super(),wt(this,e,Tee,xee,yt,{},null,[-1,-1])}}function nE(t,e,n){const i=t.slice();return i[13]=e[n],i}const Aee=t=>({}),iE=t=>({});function Lee(t){let e,n;return e=new iv({props:{size:"1.2rem"}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p:qe,i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function sE(t){let e,n,i,s,r;return n=new qo({props:{size:"1.2rem"}}),{c(){e=C("button"),ue(n.$$.fragment),M(e,"class","w-max absolute top-2 right-2")},m(o,a){R(o,e,a),le(n,e,null),i=!0,s||(r=$e(e,"click",t[5]),s=!0)},p:qe,i(o){i||(I(n.$$.fragment,o),i=!0)},o(o){H(n.$$.fragment,o),i=!1},d(o){o&&P(e),ce(n),s=!1,r()}}}function Cee(t){let e=t[13].text+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&8&&e!==(e=i[13].text+"")&&ke(n,e)},d(i){i&&P(n)}}}function rE(t){let e,n;function i(...s){return t[9](t[13],...s)}return e=new Ct({props:{flat:!0,$$slots:{default:[Cee]},$$scope:{ctx:t}}}),e.$on("click",i),{c(){ue(e.$$.fragment)},m(s,r){le(e,s,r),n=!0},p(s,r){t=s;const o={};r&1032&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(s){n||(I(e.$$.fragment,s),n=!0)},o(s){H(e.$$.fragment,s),n=!1},d(s){ce(e,s)}}}function Pee(t){let e,n,i,s,r,o,a,l,c,u,f,h,d;const p=t[8].icon,m=Ho(p,t,t[10],iE),_=m||Lee();let b=!t[0]&&sE(t),g=t[3]||[],x=[];for(let v=0;v<g.length;v+=1)x[v]=rE(nE(t,g,v));const y=v=>H(x[v],1,1,()=>{x[v]=null});return{c(){e=C("div"),n=C("div"),_&&_.c(),i=O(),b&&b.c(),s=O(),r=C("div"),o=C("div"),a=ae(t[1]),l=O(),c=C("div"),u=ae(t[2]),f=O(),h=C("div");for(let v=0;v<x.length;v+=1)x[v].c();M(n,"id","icon"),M(n,"class","svelte-93mzaa"),M(o,"id","header"),M(o,"class","svelte-93mzaa"),M(c,"id","text"),M(h,"id","actions"),M(h,"class","svelte-93mzaa"),M(r,"id","content"),M(e,"class","notification relative rounded-md shadow-md p-2 grid bg-gray-800 text-gray-300 right-0 transition-all duration-300 pointer-events-auto  svelte-93mzaa"),pt(e,"closed",t[4])},m(v,w){R(v,e,w),E(e,n),_&&_.m(n,null),E(e,i),b&&b.m(e,null),E(e,s),E(e,r),E(r,o),E(o,a),E(r,l),E(r,c),E(c,u),E(r,f),E(r,h);for(let S=0;S<x.length;S+=1)x[S].m(h,null);d=!0},p(v,[w]){if(m&&m.p&&(!d||w&1024)&&Go(m,p,v,v[10],d?Vo(p,v[10],w,Aee):Wo(v[10]),iE),v[0]?b&&(ot(),H(b,1,1,()=>{b=null}),at()):b?(b.p(v,w),w&1&&I(b,1)):(b=sE(v),b.c(),I(b,1),b.m(e,s)),(!d||w&2)&&ke(a,v[1]),(!d||w&4)&&ke(u,v[2]),w&40){g=v[3]||[];let S;for(S=0;S<g.length;S+=1){const T=nE(v,g,S);x[S]?(x[S].p(T,w),I(x[S],1)):(x[S]=rE(T),x[S].c(),I(x[S],1),x[S].m(h,null))}for(ot(),S=g.length;S<x.length;S+=1)y(S);at()}(!d||w&16)&&pt(e,"closed",v[4])},i(v){if(!d){I(_,v),I(b);for(let w=0;w<g.length;w+=1)I(x[w]);d=!0}},o(v){H(_,v),H(b),x=x.filter(Boolean);for(let w=0;w<x.length;w+=1)H(x[w]);d=!1},d(v){v&&P(e),_&&_.d(v),b&&b.d(),en(x,v)}}}function Ree(t,e,n){let{$$slots:i={},$$scope:s}=e,{key:r}=e,{timeout:o=5e3}=e,{header:a="Header"}=e,{text:l="Text"}=e,{fixed:c=!1}=e,{actions:u=[]}=e,f=!1,h,d=Xr.getInstance();function p(){f||(n(4,f=!0),!c&&clearTimeout(h),setTimeout(()=>d.removeNotification(r),300))}ji(()=>{u.length===0&&n(0,c=!1),c||(h=setTimeout(p,o))});const m=(_,b)=>{_.callback(b),p()};return t.$$set=_=>{"key"in _&&n(6,r=_.key),"timeout"in _&&n(7,o=_.timeout),"header"in _&&n(1,a=_.header),"text"in _&&n(2,l=_.text),"fixed"in _&&n(0,c=_.fixed),"actions"in _&&n(3,u=_.actions),"$$scope"in _&&n(10,s=_.$$scope)},[c,a,l,u,f,p,r,o,i,m,s]}class Iee extends xt{constructor(e){super(),wt(this,e,Ree,Pee,yt,{key:6,timeout:7,header:1,text:2,fixed:0,actions:3})}}Xr.getInstance();class oE{static checkForUpdates(){return fetch("https://raw.githubusercontent.com/isaacvr/cubedb-svelte/dist/package.json").then(e=>e.json()).then(e=>e.version=="1.0.0")}static update(){return new Promise((e,n)=>{let i=Ds.getInstance(),s=i.anySub.subscribe(r=>{if(!!r)switch(r.type){case"update":{s(),e(r.data);break}case"update-error":{s(),n();break}}});i.update()})}}function Dee(t){let e=t[4].SETTINGS.checkUpdate+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&16&&e!==(e=i[4].SETTINGS.checkUpdate+"")&&ke(n,e)},d(i){i&&P(n)}}}function Oee(t){let e=t[4].SETTINGS.save+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&16&&e!==(e=i[4].SETTINGS.save+"")&&ke(n,e)},d(i){i&&P(n)}}}function Nee(t){let e=t[4].SETTINGS.reset+"",n;return{c(){n=ae(e)},m(i,s){R(i,n,s)},p(i,s){s&16&&e!==(e=i[4].SETTINGS.reset+"")&&ke(n,e)},d(i){i&&P(n)}}}function Bee(t){let e,n,i=t[4].SETTINGS.title+"",s,r,o,a,l,c=t[4].SETTINGS.language+"",u,f,h,d,p,m,_,b,g,x=t[4].SETTINGS.appFont+"",y,v,w,S,T,k,A,L,D,B,U,N,$=t[4].SETTINGS.timerFont+"",W,j,J,se,ne,K,q,te,re,Oe,Ee,ye,xe=t[4].SETTINGS.update+"",Ae,De,de,me,We=t[4].SETTINGS.version+"",Ue,be,F,V,_e,oe,X,fe,Le,Pe,Ye,Ke,Z;function ve(lt){t[11](lt)}let Re={items:sf,label:Fee,transform:zee,onChange:t[9]};t[0]!==void 0&&(Re.value=t[0]),d=new Wi({props:Re}),vt.push(()=>Vt(d,"value",ve));function He(lt){t[12](lt)}let Ze={items:t[6],label:Uee};t[1]!==void 0&&(Ze.value=t[1]),S=new Wi({props:Ze}),vt.push(()=>Vt(S,"value",He));function _t(lt){t[13](lt)}let ln={items:t[6],label:Hee};return t[2]!==void 0&&(ln.value=t[2]),se=new Wi({props:ln}),vt.push(()=>Vt(se,"value",_t)),_e=new Ct({props:{class:"bg-blue-700 text-gray-300",$$slots:{default:[Dee]},$$scope:{ctx:t}}}),_e.$on("click",t[14]),Pe=new Ct({props:{class:"text-gray-300 bg-green-700",$$slots:{default:[Oee]},$$scope:{ctx:t}}}),Pe.$on("click",t[7]),Ke=new Ct({props:{class:"text-gray-300 bg-orange-700",$$slots:{default:[Nee]},$$scope:{ctx:t}}}),Ke.$on("click",t[8]),{c(){e=C("main"),n=C("h1"),s=ae(i),r=O(),o=C("hr"),a=O(),l=C("h2"),u=ae(c),f=O(),h=C("div"),ue(d.$$.fragment),m=O(),_=C("hr"),b=O(),g=C("h2"),y=ae(x),v=O(),w=C("div"),ue(S.$$.fragment),k=O(),A=C("p"),L=ae("R U R F Dw2 L'"),D=O(),B=C("hr"),U=O(),N=C("h2"),W=ae($),j=O(),J=C("div"),ue(se.$$.fragment),K=O(),q=C("p"),te=ae("10.34"),re=O(),Oe=C("hr"),Ee=O(),ye=C("h2"),Ae=ae(xe),De=O(),de=C("div"),me=C("div"),Ue=ae(We),be=ae(": "),F=C("mark"),F.textContent="1.0.0",V=O(),ue(_e.$$.fragment),oe=O(),X=C("hr"),fe=O(),Le=C("div"),ue(Pe.$$.fragment),Ye=O(),ue(Ke.$$.fragment),M(n,"class","text-center text-gray-300 text-3xl"),M(o,"class","svelte-1wiwxwz"),M(l,"class","text-center text-yellow-300 text-2xl mb-4 mt-4"),M(h,"class","flex items-center justify-center gap-4"),M(_,"class","svelte-1wiwxwz"),M(g,"class","text-center text-green-300 text-2xl mb-4 mt-4"),Si(A,"font-family",t[1]),M(A,"class","text-base bg-black bg-opacity-60 p-2 rounded-md text-gray-300"),M(w,"class","flex items-center justify-center gap-4"),M(B,"class","svelte-1wiwxwz"),M(N,"class","text-center text-blue-300 text-2xl mb-4 mt-4"),Si(q,"font-family",t[2]),M(q,"class","bg-black bg-opacity-60 p-2 rounded-md text-gray-300 text-6xl"),M(J,"class","flex items-center justify-center gap-4"),M(Oe,"class","svelte-1wiwxwz"),M(ye,"class","text-center text-violet-300 text-2xl mb-4 mt-4"),M(me,"class","flex items-center justify-center gap-2"),M(de,"class","flex items-center justify-center gap-4"),M(X,"class","svelte-1wiwxwz"),M(Le,"class","actions flex gap-4 items-center justify-center mt-8"),M(e,"class","container-mini text-gray-400 bg-white bg-opacity-10 m-4 p-4 rounded-md")},m(lt,gt){R(lt,e,gt),E(e,n),E(n,s),E(e,r),E(e,o),E(e,a),E(e,l),E(l,u),E(e,f),E(e,h),le(d,h,null),E(e,m),E(e,_),E(e,b),E(e,g),E(g,y),E(e,v),E(e,w),le(S,w,null),E(w,k),E(w,A),E(A,L),E(e,D),E(e,B),E(e,U),E(e,N),E(N,W),E(e,j),E(e,J),le(se,J,null),E(J,K),E(J,q),E(q,te),E(e,re),E(e,Oe),E(e,Ee),E(e,ye),E(ye,Ae),E(e,De),E(e,de),E(de,me),E(me,Ue),E(me,be),E(me,F),E(me,V),le(_e,me,null),E(e,oe),E(e,X),E(e,fe),E(e,Le),le(Pe,Le,null),E(Le,Ye),le(Ke,Le,null),Z=!0},p(lt,[gt]){(!Z||gt&16)&&i!==(i=lt[4].SETTINGS.title+"")&&ke(s,i),(!Z||gt&16)&&c!==(c=lt[4].SETTINGS.language+"")&&ke(u,c);const bn={};!p&&gt&1&&(p=!0,bn.value=lt[0],Ht(()=>p=!1)),d.$set(bn),(!Z||gt&16)&&x!==(x=lt[4].SETTINGS.appFont+"")&&ke(y,x);const Ot={};!T&&gt&2&&(T=!0,Ot.value=lt[1],Ht(()=>T=!1)),S.$set(Ot),(!Z||gt&2)&&Si(A,"font-family",lt[1]),(!Z||gt&16)&&$!==($=lt[4].SETTINGS.timerFont+"")&&ke(W,$);const Nn={};!ne&&gt&4&&(ne=!0,Nn.value=lt[2],Ht(()=>ne=!1)),se.$set(Nn),(!Z||gt&4)&&Si(q,"font-family",lt[2]),(!Z||gt&16)&&xe!==(xe=lt[4].SETTINGS.update+"")&&ke(Ae,xe),(!Z||gt&16)&&We!==(We=lt[4].SETTINGS.version+"")&&ke(Ue,We);const Pn={};gt&524304&&(Pn.$$scope={dirty:gt,ctx:lt}),_e.$set(Pn);const cn={};gt&524304&&(cn.$$scope={dirty:gt,ctx:lt}),Pe.$set(cn);const mn={};gt&524304&&(mn.$$scope={dirty:gt,ctx:lt}),Ke.$set(mn)},i(lt){Z||(I(d.$$.fragment,lt),I(S.$$.fragment,lt),I(se.$$.fragment,lt),I(_e.$$.fragment,lt),I(Pe.$$.fragment,lt),I(Ke.$$.fragment,lt),Z=!0)},o(lt){H(d.$$.fragment,lt),H(S.$$.fragment,lt),H(se.$$.fragment,lt),H(_e.$$.fragment,lt),H(Pe.$$.fragment,lt),H(Ke.$$.fragment,lt),Z=!1},d(lt){lt&&P(e),ce(d),ce(S),ce(se),ce(_e),ce(Pe),ce(Ke)}}}const aE="Ubuntu",lE="CQMono",Fee=t=>t[1].name,zee=t=>t[1].code,Uee=t=>t.name,Hee=t=>t.name;function Vee(t,e,n){let i,s;dt(t,Hi,w=>n(16,i=w));const r=Xr.getInstance();let o=i,a=Rr(Hi,(w,S)=>{S(Dr(w))});dt(t,a,w=>n(4,s=w));const l=[{name:"Ubuntu",value:"Ubuntu"},{name:"Ropa Sans",value:"RopaSans"},{name:"Bree Serif",value:"BreeSerif"},{name:"CQ Mono",value:"CQMono"},{name:"Raleway",value:"Raleway"},{name:"Roboto",value:"Roboto"},{name:"LCD4",value:"lcd4"}];let c=i,u=localStorage.getItem("app-font")||aE,f=localStorage.getItem("timer-font")||lE,h=!0;function d(){localStorage.setItem("app-font",u),localStorage.setItem("timer-font",f),localStorage.setItem("language",c),o=c,document.documentElement.style.setProperty("--app-font",u),document.documentElement.style.setProperty("--timer-font",f),r.addNotification({key:crypto.randomUUID(),header:"Saved",text:"Settings saved",timeout:2e3})}function p(){n(1,u=aE),n(2,f=lE),d()}function m(){At(Hi,i=c,i)}function _(){n(3,h=!1),oE.checkForUpdates().then(w=>{n(3,h=!0),w?r.addNotification({header:s.SETTINGS.updateAvailable,text:s.SETTINGS.updateAvailableText,fixed:!0,actions:[{text:s.SETTINGS.cancelAction,callback:()=>{}},{text:s.SETTINGS.updateAction,callback:b}],key:crypto.randomUUID()}):r.addNotification({header:s.SETTINGS.alreadyUpdated,text:s.SETTINGS.alreadyUpdatedText,timeout:2e3,key:crypto.randomUUID()})}).catch(()=>{n(3,h=!0),r.addNotification({header:s.SETTINGS.updateError,text:s.SETTINGS.updateErrorText,timeout:2e3,key:crypto.randomUUID()})})}function b(){oE.update().then(w=>{r.addNotification({key:crypto.randomUUID(),header:s.SETTINGS.update,text:w?s.SETTINGS.updateCompleted:s.SETTINGS.updateFailed,timeout:2e3}),console.log("UPDATE: ",w)}).catch(()=>{n(3,h=!0),r.addNotification({header:s.SETTINGS.updateError,text:s.SETTINGS.updateErrorText,timeout:2e3,key:crypto.randomUUID()})})}Es(()=>{At(Hi,i=o,i)});function g(w){c=w,n(0,c)}function x(w){u=w,n(1,u)}function y(w){f=w,n(2,f)}return[c,u,f,h,s,a,l,d,p,m,_,g,x,y,()=>h&&_()]}class Gee extends xt{constructor(e){super(),wt(this,e,Vee,Bee,yt,{})}}function cE(t,e,n){const i=t.slice();return i[5]=e[n],i}function uE(t,e){let n,i,s;const r=[e[5],{fixed:e[5].fixed}];let o={};for(let a=0;a<r.length;a+=1)o=Io(o,r[a]);return i=new Iee({props:o}),{key:t,first:null,c(){n=ts(),ue(i.$$.fragment),this.first=n},m(a,l){R(a,n,l),le(i,a,l),s=!0},p(a,l){e=a;const c=l&1?Ym(r,[Np(e[5]),{fixed:e[5].fixed}]):{};i.$set(c)},i(a){s||(I(i.$$.fragment,a),s=!0)},o(a){H(i.$$.fragment,a),s=!1},d(a){a&&P(n),ce(i,a)}}}function Wee(t){let e,n,i,s,r,o,a,l,c,u,f,h,d,p,m,_,b,g,x,y,v,w,S,T,k,A,L,D,B,U,N=[],$=new Map,W;e=new GI({}),i=new XI({}),o=new Gs({props:{path:"/",component:tO}}),l=new Gs({props:{path:"/tutorials",component:gy}}),u=new Gs({props:{path:"/tutorials/:something",component:gy}}),h=new Gs({props:{path:"/tutorials/:puzzle/:tutorial",component:p$}}),p=new Gs({props:{path:"/algorithms/*",component:CW}}),_=new Gs({props:{path:"/timer",component:TA}}),g=new Gs({props:{path:"/battle",component:kee}}),y=new Gs({props:{path:"/pll-trainer",component:xW}}),w=new Gs({props:{path:"/simulator",component:$K}}),T=new Gs({props:{path:"/contest",component:X$}}),A=new Gs({props:{path:"/import-export",component:gQ}}),D=new Gs({props:{path:"/settings",component:Gee}});let j=t[0];const J=se=>se[5].key;for(let se=0;se<j.length;se+=1){let ne=cE(t,j,se),K=J(ne);$.set(K,N[se]=uE(K,ne))}return{c(){ue(e.$$.fragment),n=O(),ue(i.$$.fragment),s=O(),r=C("main"),ue(o.$$.fragment),a=O(),ue(l.$$.fragment),c=O(),ue(u.$$.fragment),f=O(),ue(h.$$.fragment),d=O(),ue(p.$$.fragment),m=O(),ue(_.$$.fragment),b=O(),ue(g.$$.fragment),x=O(),ue(y.$$.fragment),v=O(),ue(w.$$.fragment),S=O(),ue(T.$$.fragment),k=O(),ue(A.$$.fragment),L=O(),ue(D.$$.fragment),B=O(),U=C("section");for(let se=0;se<N.length;se+=1)N[se].c();M(r,"class","pt-24"),M(U,"class","fixed top-0 right-0 h-full w-72 pr-2 flex flex-col gap-4 justify-center text-gray-400 pointer-events-none")},m(se,ne){le(e,se,ne),R(se,n,ne),le(i,se,ne),R(se,s,ne),R(se,r,ne),le(o,r,null),E(r,a),le(l,r,null),E(r,c),le(u,r,null),E(r,f),le(h,r,null),E(r,d),le(p,r,null),E(r,m),le(_,r,null),E(r,b),le(g,r,null),E(r,x),le(y,r,null),E(r,v),le(w,r,null),E(r,S),le(T,r,null),E(r,k),le(A,r,null),E(r,L),le(D,r,null),R(se,B,ne),R(se,U,ne);for(let K=0;K<N.length;K+=1)N[K].m(U,null);W=!0},p(se,ne){ne&1&&(j=se[0],ot(),N=xE(N,ne,J,1,se,j,$,U,wE,uE,null,cE),at())},i(se){if(!W){I(e.$$.fragment,se),I(i.$$.fragment,se),I(o.$$.fragment,se),I(l.$$.fragment,se),I(u.$$.fragment,se),I(h.$$.fragment,se),I(p.$$.fragment,se),I(_.$$.fragment,se),I(g.$$.fragment,se),I(y.$$.fragment,se),I(w.$$.fragment,se),I(T.$$.fragment,se),I(A.$$.fragment,se),I(D.$$.fragment,se);for(let ne=0;ne<j.length;ne+=1)I(N[ne]);W=!0}},o(se){H(e.$$.fragment,se),H(i.$$.fragment,se),H(o.$$.fragment,se),H(l.$$.fragment,se),H(u.$$.fragment,se),H(h.$$.fragment,se),H(p.$$.fragment,se),H(_.$$.fragment,se),H(g.$$.fragment,se),H(y.$$.fragment,se),H(w.$$.fragment,se),H(T.$$.fragment,se),H(A.$$.fragment,se),H(D.$$.fragment,se);for(let ne=0;ne<N.length;ne+=1)H(N[ne]);W=!1},d(se){ce(e,se),se&&P(n),ce(i,se),se&&P(s),se&&P(r),ce(o),ce(l),ce(u),ce(h),ce(p),ce(_),ce(g),ce(y),ce(w),ce(T),ce(A),ce(D),se&&P(B),se&&P(U);for(let ne=0;ne<N.length;ne+=1)N[ne].d()}}}function jee(t){let e,n;return e=new yC({props:{basepath:t[1],$$slots:{default:[Wee]},$$scope:{ctx:t}}}),{c(){ue(e.$$.fragment)},m(i,s){le(e,i,s),n=!0},p(i,[s]){const r={};s&257&&(r.$$scope={dirty:s,ctx:i}),e.$set(r)},i(i){n||(I(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){ce(e,i)}}}function Yee(t,e,n){let i=Xr.getInstance(),s=[],r;const o=window.location.pathname,a=/^\/?[a-zA-Z]+:/.test(o)?o.substr(0,o.indexOf(":")+1):"/";return ji(()=>{r=i.notificationSub.subscribe(c=>{n(0,s=c)});let l=localStorage.getItem("language")||"en-EN";localStorage.setItem("language",l),Hi.update(()=>l)}),Es(()=>{r()}),[s,a]}class qee extends xt{constructor(e){super(),wt(this,e,Yee,jee,yt,{})}}new qee({target:document.getElementById("app")||document.body});
